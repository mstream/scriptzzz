(()=>{var CX=Object.create;var cw=Object.defineProperty;var SX=Object.getOwnPropertyDescriptor;var OX=Object.getOwnPropertyNames;var EX=Object.getPrototypeOf,FX=Object.prototype.hasOwnProperty;var b=(r,t)=>()=>(r&&(t=r(r=0)),t);var tr=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),ZM=(r,t)=>{for(var e in t)cw(r,e,{get:t[e],enumerable:!0})},MX=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of OX(t))!FX.call(r,o)&&o!==e&&cw(r,o,{get:()=>t[o],enumerable:!(n=SX(t,o))||n.enumerable});return r};var bp=(r,t,e)=>(e=r!=null?CX(EX(r)):{},MX(t||!r||!r.__esModule?cw(e,"default",{value:r,enumerable:!0}):e,r));var V6=tr((H6,Wh)=>{(function(){var r,t,e,n,o,a,i,u,l,s,c,f,d,p,h;e=Math.floor,s=Math.min,t=function(m,_){return m<_?-1:m>_?1:0},l=function(m,_,y,D,w){var T;if(y==null&&(y=0),w==null&&(w=t),y<0)throw new Error("lo must be non-negative");for(D==null&&(D=m.length);y<D;)T=e((y+D)/2),w(_,m[T])<0?D=T:y=T+1;return[].splice.apply(m,[y,y-y].concat(_)),_},a=function(m,_,y){return y==null&&(y=t),m.push(_),p(m,0,m.length-1,y)},o=function(m,_){var y,D;return _==null&&(_=t),y=m.pop(),m.length?(D=m[0],m[0]=y,h(m,0,_)):D=y,D},u=function(m,_,y){var D;return y==null&&(y=t),D=m[0],m[0]=_,h(m,0,y),D},i=function(m,_,y){var D;return y==null&&(y=t),m.length&&y(m[0],_)<0&&(D=[m[0],_],_=D[0],m[0]=D[1],h(m,0,y)),_},n=function(m,_){var y,D,w,T,R,C,S,A;for(_==null&&(_=t),C=function(){A=[];for(var E=0,N=e(m.length/2);0<=N?E<N:E>N;0<=N?E++:E--)A.push(E);return A}.apply(this).reverse(),S=[],D=0,T=C.length;D<T;D++)y=C[D],S.push(h(m,y,_));return S},d=function(m,_,y){var D;if(y==null&&(y=t),D=m.indexOf(_),D!==-1)return p(m,0,D,y),h(m,D,y)},c=function(m,_,y){var D,w,T,R,C;if(y==null&&(y=t),w=m.slice(0,_),!w.length)return w;for(n(w,y),C=m.slice(_),T=0,R=C.length;T<R;T++)D=C[T],i(w,D,y);return w.sort(y).reverse()},f=function(m,_,y){var D,w,T,R,C,S,A,E,N,et;if(y==null&&(y=t),_*10<=m.length){if(R=m.slice(0,_).sort(y),!R.length)return R;for(T=R[R.length-1],E=m.slice(_),C=0,A=E.length;C<A;C++)D=E[C],y(D,T)<0&&(l(R,D,0,null,y),R.pop(),T=R[R.length-1]);return R}for(n(m,y),et=[],w=S=0,N=s(_,m.length);0<=N?S<N:S>N;w=0<=N?++S:--S)et.push(o(m,y));return et},p=function(m,_,y,D){var w,T,R;for(D==null&&(D=t),w=m[y];y>_;){if(R=y-1>>1,T=m[R],D(w,T)<0){m[y]=T,y=R;continue}break}return m[y]=w},h=function(m,_,y){var D,w,T,R,C;for(y==null&&(y=t),w=m.length,C=_,T=m[_],D=2*_+1;D<w;)R=D+1,R<w&&!(y(m[D],m[R])<0)&&(D=R),m[_]=m[D],_=D,D=2*_+1;return m[_]=T,p(m,C,_,y)},r=function(){m.push=a,m.pop=o,m.replace=u,m.pushpop=i,m.heapify=n,m.updateItem=d,m.nlargest=c,m.nsmallest=f;function m(_){this.cmp=_??t,this.nodes=[]}return m.prototype.push=function(_){return a(this.nodes,_,this.cmp)},m.prototype.pop=function(){return o(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},m.prototype.replace=function(_){return u(this.nodes,_,this.cmp)},m.prototype.pushpop=function(_){return i(this.nodes,_,this.cmp)},m.prototype.heapify=function(){return n(this.nodes,this.cmp)},m.prototype.updateItem=function(_){return d(this.nodes,_,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var _;return _=new m,_.nodes=this.nodes.slice(0),_},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),typeof Wh<"u"&&Wh!==null&&Wh.exports?Wh.exports=r:window.Heap=r}).call(H6)});var Gh=tr((o5t,j6)=>{j6.exports=V6()});var Q1=tr((a5t,Z6)=>{function Mct(r,t,e){this.x=r,this.y=t,this.walkable=e===void 0?!0:e}Z6.exports=Mct});var ko=tr((i5t,Y6)=>{var Act={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};Y6.exports=Act});var K6=tr((u5t,J6)=>{var X6=Q1(),H1=ko();function Eu(r,t,e){var n;typeof r!="object"?n=r:(t=r.length,n=r[0].length,e=r),this.width=n,this.height=t,this.nodes=this._buildNodes(n,t,e)}Eu.prototype._buildNodes=function(r,t,e){var n,o,a=new Array(t);for(n=0;n<t;++n)for(a[n]=new Array(r),o=0;o<r;++o)a[n][o]=new X6(o,n);if(e===void 0)return a;if(e.length!==t||e[0].length!==r)throw new Error("Matrix size does not fit");for(n=0;n<t;++n)for(o=0;o<r;++o)e[n][o]&&(a[n][o].walkable=!1);return a};Eu.prototype.getNodeAt=function(r,t){return this.nodes[t][r]};Eu.prototype.isWalkableAt=function(r,t){return this.isInside(r,t)&&this.nodes[t][r].walkable};Eu.prototype.isInside=function(r,t){return r>=0&&r<this.width&&t>=0&&t<this.height};Eu.prototype.setWalkableAt=function(r,t,e){this.nodes[t][r].walkable=e};Eu.prototype.getNeighbors=function(r,t){var e=r.x,n=r.y,o=[],a=!1,i=!1,u=!1,l=!1,s=!1,c=!1,f=!1,d=!1,p=this.nodes;if(this.isWalkableAt(e,n-1)&&(o.push(p[n-1][e]),a=!0),this.isWalkableAt(e+1,n)&&(o.push(p[n][e+1]),u=!0),this.isWalkableAt(e,n+1)&&(o.push(p[n+1][e]),s=!0),this.isWalkableAt(e-1,n)&&(o.push(p[n][e-1]),f=!0),t===H1.Never)return o;if(t===H1.OnlyWhenNoObstacles)i=f&&a,l=a&&u,c=u&&s,d=s&&f;else if(t===H1.IfAtMostOneObstacle)i=f||a,l=a||u,c=u||s,d=s||f;else if(t===H1.Always)i=!0,l=!0,c=!0,d=!0;else throw new Error("Incorrect value of diagonalMovement");return i&&this.isWalkableAt(e-1,n-1)&&o.push(p[n-1][e-1]),l&&this.isWalkableAt(e+1,n-1)&&o.push(p[n-1][e+1]),c&&this.isWalkableAt(e+1,n+1)&&o.push(p[n+1][e+1]),d&&this.isWalkableAt(e-1,n+1)&&o.push(p[n+1][e-1]),o};Eu.prototype.clone=function(){var r,t,e=this.width,n=this.height,o=this.nodes,a=new Eu(e,n),i=new Array(n);for(r=0;r<n;++r)for(i[r]=new Array(e),t=0;t<e;++t)i[r][t]=new X6(t,r,o[r][t].walkable);return a.nodes=i,a};J6.exports=Eu});var Rl=tr(Tl=>{function DR(r){for(var t=[[r.x,r.y]];r.parent;)r=r.parent,t.push([r.x,r.y]);return t.reverse()}Tl.backtrace=DR;function Pct(r,t){var e=DR(r),n=DR(t);return e.concat(n.reverse())}Tl.biBacktrace=Pct;function Ict(r){var t,e=0,n,o,a,i;for(t=1;t<r.length;++t)n=r[t-1],o=r[t],a=n[0]-o[0],i=n[1]-o[1],e+=Math.sqrt(a*a+i*i);return e}Tl.pathLength=Ict;function wR(r,t,e,n){var o=Math.abs,a=[],i,u,l,s,c,f;for(l=o(e-r),s=o(n-t),i=r<e?1:-1,u=t<n?1:-1,c=l-s;a.push([r,t]),!(r===e&&t===n);)f=2*c,f>-s&&(c=c-s,r=r+i),f<l&&(c=c+l,t=t+u);return a}Tl.interpolate=wR;function Nct(r){var t=[],e=r.length,n,o,a,i,u,l;if(e<2)return t;for(u=0;u<e-1;++u)for(n=r[u],o=r[u+1],a=wR(n[0],n[1],o[0],o[1]),i=a.length,l=0;l<i-1;++l)t.push(a[l]);return t.push(r[e-1]),t}Tl.expandPath=Nct;function kct(r,t){var e=t.length,n=t[0][0],o=t[0][1],a=t[e-1][0],i=t[e-1][1],u,l,s,c,f,d,p,h,m,_,y;for(u=n,l=o,f=[[u,l]],d=2;d<e;++d){for(h=t[d],s=h[0],c=h[1],m=wR(u,l,s,c),y=!1,p=1;p<m.length;++p)if(_=m[p],!r.isWalkableAt(_[0],_[1])){y=!0;break}y&&(lastValidCoord=t[d-1],f.push(lastValidCoord),u=lastValidCoord[0],l=lastValidCoord[1])}return f.push([a,i]),f}Tl.smoothenPath=kct;function $ct(r){if(r.length<3)return r;var t=[],e=r[0][0],n=r[0][1],o=r[1][0],a=r[1][1],i=o-e,u=a-n,l,s,c,f,d,p;for(d=Math.sqrt(i*i+u*u),i/=d,u/=d,t.push([e,n]),p=2;p<r.length;p++)l=o,s=a,c=i,f=u,o=r[p][0],a=r[p][1],i=o-l,u=a-s,d=Math.sqrt(i*i+u*u),i/=d,u/=d,(i!==c||u!==f)&&t.push([l,s]);return t.push([o,a]),t}Tl.compressPath=$ct});var Mf=tr((s5t,tI)=>{tI.exports={manhattan:function(r,t){return r+t},euclidean:function(r,t){return Math.sqrt(r*r+t*t)},octile:function(r,t){var e=Math.SQRT2-1;return r<t?e*r+t:e*t+r},chebyshev:function(r,t){return Math.max(r,t)}}});var j1=tr((c5t,rI)=>{var Lct=Gh(),Uct=Rl(),xR=Mf(),V1=ko();function eI(r){r=r||{},this.allowDiagonal=r.allowDiagonal,this.dontCrossCorners=r.dontCrossCorners,this.heuristic=r.heuristic||xR.manhattan,this.weight=r.weight||1,this.diagonalMovement=r.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=V1.OnlyWhenNoObstacles:this.diagonalMovement=V1.IfAtMostOneObstacle:this.diagonalMovement=V1.Never),this.diagonalMovement===V1.Never?this.heuristic=r.heuristic||xR.manhattan:this.heuristic=r.heuristic||xR.octile}eI.prototype.findPath=function(r,t,e,n,o){var a=new Lct(function(R,C){return R.f-C.f}),i=o.getNodeAt(r,t),u=o.getNodeAt(e,n),l=this.heuristic,s=this.diagonalMovement,c=this.weight,f=Math.abs,d=Math.SQRT2,p,h,m,_,y,D,w,T;for(i.g=0,i.f=0,a.push(i),i.opened=!0;!a.empty();){if(p=a.pop(),p.closed=!0,p===u)return Uct.backtrace(u);for(h=o.getNeighbors(p,s),_=0,y=h.length;_<y;++_)m=h[_],!m.closed&&(D=m.x,w=m.y,T=p.g+(D-p.x===0||w-p.y===0?1:d),(!m.opened||T<m.g)&&(m.g=T,m.h=m.h||c*l(f(D-e),f(w-n)),m.f=m.g+m.h,m.parent=p,m.opened?a.updateItem(m):(a.push(m),m.opened=!0)))}return[]};rI.exports=eI});var aI=tr((f5t,oI)=>{var nI=j1();function Z1(r){nI.call(this,r);var t=this.heuristic;this.heuristic=function(e,n){return t(e,n)*1e6}}Z1.prototype=new nI;Z1.prototype.constructor=Z1;oI.exports=Z1});var lI=tr((d5t,uI)=>{var Bct=Rl(),TR=ko();function iI(r){r=r||{},this.allowDiagonal=r.allowDiagonal,this.dontCrossCorners=r.dontCrossCorners,this.diagonalMovement=r.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=TR.OnlyWhenNoObstacles:this.diagonalMovement=TR.IfAtMostOneObstacle:this.diagonalMovement=TR.Never)}iI.prototype.findPath=function(r,t,e,n,o){var a=[],i=this.diagonalMovement,u=o.getNodeAt(r,t),l=o.getNodeAt(e,n),s,c,f,d,p;for(a.push(u),u.opened=!0;a.length;){if(f=a.shift(),f.closed=!0,f===l)return Bct.backtrace(l);for(s=o.getNeighbors(f,i),d=0,p=s.length;d<p;++d)c=s[d],!(c.closed||c.opened)&&(a.push(c),c.opened=!0,c.parent=f)}return[]};uI.exports=iI});var fI=tr((p5t,cI)=>{var sI=j1();function Y1(r){sI.call(this,r),this.heuristic=function(t,e){return 0}}Y1.prototype=new sI;Y1.prototype.constructor=Y1;cI.exports=Y1});var J1=tr((h5t,mI)=>{var dI=Gh(),pI=Rl(),RR=Mf(),X1=ko();function hI(r){r=r||{},this.allowDiagonal=r.allowDiagonal,this.dontCrossCorners=r.dontCrossCorners,this.diagonalMovement=r.diagonalMovement,this.heuristic=r.heuristic||RR.manhattan,this.weight=r.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=X1.OnlyWhenNoObstacles:this.diagonalMovement=X1.IfAtMostOneObstacle:this.diagonalMovement=X1.Never),this.diagonalMovement===X1.Never?this.heuristic=r.heuristic||RR.manhattan:this.heuristic=r.heuristic||RR.octile}hI.prototype.findPath=function(r,t,e,n,o){var a=function(E,N){return E.f-N.f},i=new dI(a),u=new dI(a),l=o.getNodeAt(r,t),s=o.getNodeAt(e,n),c=this.heuristic,f=this.diagonalMovement,d=this.weight,p=Math.abs,h=Math.SQRT2,m,_,y,D,w,T,R,C,S=1,A=2;for(l.g=0,l.f=0,i.push(l),l.opened=S,s.g=0,s.f=0,u.push(s),s.opened=A;!i.empty()&&!u.empty();){for(m=i.pop(),m.closed=!0,_=o.getNeighbors(m,f),D=0,w=_.length;D<w;++D)if(y=_[D],!y.closed){if(y.opened===A)return pI.biBacktrace(m,y);T=y.x,R=y.y,C=m.g+(T-m.x===0||R-m.y===0?1:h),(!y.opened||C<y.g)&&(y.g=C,y.h=y.h||d*c(p(T-e),p(R-n)),y.f=y.g+y.h,y.parent=m,y.opened?i.updateItem(y):(i.push(y),y.opened=S))}for(m=u.pop(),m.closed=!0,_=o.getNeighbors(m,f),D=0,w=_.length;D<w;++D)if(y=_[D],!y.closed){if(y.opened===S)return pI.biBacktrace(y,m);T=y.x,R=y.y,C=m.g+(T-m.x===0||R-m.y===0?1:h),(!y.opened||C<y.g)&&(y.g=C,y.h=y.h||d*c(p(T-r),p(R-t)),y.f=y.g+y.h,y.parent=m,y.opened?u.updateItem(y):(u.push(y),y.opened=A))}}return[]};mI.exports=hI});var _I=tr((m5t,gI)=>{var vI=J1();function K1(r){vI.call(this,r);var t=this.heuristic;this.heuristic=function(e,n){return t(e,n)*1e6}}K1.prototype=new vI;K1.prototype.constructor=K1;gI.exports=K1});var wI=tr((v5t,DI)=>{var yI=Rl(),CR=ko();function bI(r){r=r||{},this.allowDiagonal=r.allowDiagonal,this.dontCrossCorners=r.dontCrossCorners,this.diagonalMovement=r.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=CR.OnlyWhenNoObstacles:this.diagonalMovement=CR.IfAtMostOneObstacle:this.diagonalMovement=CR.Never)}bI.prototype.findPath=function(r,t,e,n,o){var a=o.getNodeAt(r,t),i=o.getNodeAt(e,n),u=[],l=[],s,c,f,d=this.diagonalMovement,p=0,h=1,m,_;for(u.push(a),a.opened=!0,a.by=p,l.push(i),i.opened=!0,i.by=h;u.length&&l.length;){for(f=u.shift(),f.closed=!0,s=o.getNeighbors(f,d),m=0,_=s.length;m<_;++m)if(c=s[m],!c.closed){if(c.opened){if(c.by===h)return yI.biBacktrace(f,c);continue}u.push(c),c.parent=f,c.opened=!0,c.by=p}for(f=l.shift(),f.closed=!0,s=o.getNeighbors(f,d),m=0,_=s.length;m<_;++m)if(c=s[m],!c.closed){if(c.opened){if(c.by===p)return yI.biBacktrace(c,f);continue}l.push(c),c.parent=f,c.opened=!0,c.by=h}}return[]};DI.exports=bI});var RI=tr((g5t,TI)=>{var xI=J1();function t0(r){xI.call(this,r),this.heuristic=function(t,e){return 0}}t0.prototype=new xI;t0.prototype.constructor=t0;TI.exports=t0});var EI=tr((y5t,OI)=>{var _5t=Rl(),SR=Mf(),CI=Q1(),e0=ko();function SI(r){r=r||{},this.allowDiagonal=r.allowDiagonal,this.dontCrossCorners=r.dontCrossCorners,this.diagonalMovement=r.diagonalMovement,this.heuristic=r.heuristic||SR.manhattan,this.weight=r.weight||1,this.trackRecursion=r.trackRecursion||!1,this.timeLimit=r.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=e0.OnlyWhenNoObstacles:this.diagonalMovement=e0.IfAtMostOneObstacle:this.diagonalMovement=e0.Never),this.diagonalMovement===e0.Never?this.heuristic=r.heuristic||SR.manhattan:this.heuristic=r.heuristic||SR.octile}SI.prototype.findPath=function(r,t,e,n,o){var a=0,i=new Date().getTime(),u=function(_,y){return this.heuristic(Math.abs(y.x-_.x),Math.abs(y.y-_.y))}.bind(this),l=function(_,y){return _.x===y.x||_.y===y.y?1:Math.SQRT2},s=function(_,y,D,w,T){if(a++,this.timeLimit>0&&new Date().getTime()-i>this.timeLimit*1e3)return 1/0;var R=y+u(_,f)*this.weight;if(R>D)return R;if(_==f)return w[T]=[_.x,_.y],_;var C,S,A,E,N=o.getNeighbors(_,this.diagonalMovement);for(A=0,C=1/0;E=N[A];++A){if(this.trackRecursion&&(E.retainCount=E.retainCount+1||1,E.tested!==!0&&(E.tested=!0)),S=s(E,y+l(_,E),D,w,T+1),S instanceof CI)return w[T]=[_.x,_.y],S;this.trackRecursion&&--E.retainCount===0&&(E.tested=!1),S<C&&(C=S)}return C}.bind(this),c=o.getNodeAt(r,t),f=o.getNodeAt(e,n),d=u(c,f),p,h,m;for(p=0;;++p){if(h=[],m=s(c,0,d,h,0),m===1/0)return[];if(m instanceof CI)return h;d=m}return[]};OI.exports=SI});var zh=tr((D5t,AI)=>{var Wct=Gh(),FI=Rl(),MI=Mf(),b5t=ko();function OR(r){r=r||{},this.heuristic=r.heuristic||MI.manhattan,this.trackJumpRecursion=r.trackJumpRecursion||!1}OR.prototype.findPath=function(r,t,e,n,o){var a=this.openList=new Wct(function(s,c){return s.f-c.f}),i=this.startNode=o.getNodeAt(r,t),u=this.endNode=o.getNodeAt(e,n),l;for(this.grid=o,i.g=0,i.f=0,a.push(i),i.opened=!0;!a.empty();){if(l=a.pop(),l.closed=!0,l===u)return FI.expandPath(FI.backtrace(u));this._identifySuccessors(l)}return[]};OR.prototype._identifySuccessors=function(r){var t=this.grid,e=this.heuristic,n=this.openList,o=this.endNode.x,a=this.endNode.y,i,u,l,s,c,f=r.x,d=r.y,p,h,m,_,y,D,w,T=Math.abs,R=Math.max;for(i=this._findNeighbors(r),s=0,c=i.length;s<c;++s)if(u=i[s],l=this._jump(u[0],u[1],f,d),l){if(p=l[0],h=l[1],w=t.getNodeAt(p,h),w.closed)continue;y=MI.octile(T(p-f),T(h-d)),D=r.g+y,(!w.opened||D<w.g)&&(w.g=D,w.h=w.h||e(T(p-o),T(h-a)),w.f=w.g+w.h,w.parent=r,w.opened?n.updateItem(w):(n.push(w),w.opened=!0))}};AI.exports=OR});var NI=tr((w5t,II)=>{var PI=zh(),Gct=ko();function Af(r){PI.call(this,r)}Af.prototype=new PI;Af.prototype.constructor=Af;Af.prototype._jump=function(r,t,e,n){var o=this.grid,a=r-e,i=t-n;if(!o.isWalkableAt(r,t))return null;if(this.trackJumpRecursion===!0&&(o.getNodeAt(r,t).tested=!0),o.getNodeAt(r,t)===this.endNode)return[r,t];if(a!==0){if(o.isWalkableAt(r,t-1)&&!o.isWalkableAt(r-a,t-1)||o.isWalkableAt(r,t+1)&&!o.isWalkableAt(r-a,t+1))return[r,t]}else if(i!==0){if(o.isWalkableAt(r-1,t)&&!o.isWalkableAt(r-1,t-i)||o.isWalkableAt(r+1,t)&&!o.isWalkableAt(r+1,t-i))return[r,t];if(this._jump(r+1,t,r,t)||this._jump(r-1,t,r,t))return[r,t]}else throw new Error("Only horizontal and vertical movements are allowed");return this._jump(r+a,t+i,r,t)};Af.prototype._findNeighbors=function(r){var t=r.parent,e=r.x,n=r.y,o=this.grid,a,i,u,l,s,c,f=[],d,p,h,m;if(t)a=t.x,i=t.y,s=(e-a)/Math.max(Math.abs(e-a),1),c=(n-i)/Math.max(Math.abs(n-i),1),s!==0?(o.isWalkableAt(e,n-1)&&f.push([e,n-1]),o.isWalkableAt(e,n+1)&&f.push([e,n+1]),o.isWalkableAt(e+s,n)&&f.push([e+s,n])):c!==0&&(o.isWalkableAt(e-1,n)&&f.push([e-1,n]),o.isWalkableAt(e+1,n)&&f.push([e+1,n]),o.isWalkableAt(e,n+c)&&f.push([e,n+c]));else for(d=o.getNeighbors(r,Gct.Never),h=0,m=d.length;h<m;++h)p=d[h],f.push([p.x,p.y]);return f};II.exports=Af});var LI=tr((x5t,$I)=>{var kI=zh(),zct=ko();function Pf(r){kI.call(this,r)}Pf.prototype=new kI;Pf.prototype.constructor=Pf;Pf.prototype._jump=function(r,t,e,n){var o=this.grid,a=r-e,i=t-n;if(!o.isWalkableAt(r,t))return null;if(this.trackJumpRecursion===!0&&(o.getNodeAt(r,t).tested=!0),o.getNodeAt(r,t)===this.endNode)return[r,t];if(a!==0&&i!==0){if(o.isWalkableAt(r-a,t+i)&&!o.isWalkableAt(r-a,t)||o.isWalkableAt(r+a,t-i)&&!o.isWalkableAt(r,t-i))return[r,t];if(this._jump(r+a,t,r,t)||this._jump(r,t+i,r,t))return[r,t]}else if(a!==0){if(o.isWalkableAt(r+a,t+1)&&!o.isWalkableAt(r,t+1)||o.isWalkableAt(r+a,t-1)&&!o.isWalkableAt(r,t-1))return[r,t]}else if(o.isWalkableAt(r+1,t+i)&&!o.isWalkableAt(r+1,t)||o.isWalkableAt(r-1,t+i)&&!o.isWalkableAt(r-1,t))return[r,t];return this._jump(r+a,t+i,r,t)};Pf.prototype._findNeighbors=function(r){var t=r.parent,e=r.x,n=r.y,o=this.grid,a,i,u,l,s,c,f=[],d,p,h,m;if(t)a=t.x,i=t.y,s=(e-a)/Math.max(Math.abs(e-a),1),c=(n-i)/Math.max(Math.abs(n-i),1),s!==0&&c!==0?(o.isWalkableAt(e,n+c)&&f.push([e,n+c]),o.isWalkableAt(e+s,n)&&f.push([e+s,n]),o.isWalkableAt(e+s,n+c)&&f.push([e+s,n+c]),o.isWalkableAt(e-s,n)||f.push([e-s,n+c]),o.isWalkableAt(e,n-c)||f.push([e+s,n-c])):s===0?(o.isWalkableAt(e,n+c)&&f.push([e,n+c]),o.isWalkableAt(e+1,n)||f.push([e+1,n+c]),o.isWalkableAt(e-1,n)||f.push([e-1,n+c])):(o.isWalkableAt(e+s,n)&&f.push([e+s,n]),o.isWalkableAt(e,n+1)||f.push([e+s,n+1]),o.isWalkableAt(e,n-1)||f.push([e+s,n-1]));else for(d=o.getNeighbors(r,zct.Always),h=0,m=d.length;h<m;++h)p=d[h],f.push([p.x,p.y]);return f};$I.exports=Pf});var WI=tr((T5t,BI)=>{var UI=zh(),qct=ko();function If(r){UI.call(this,r)}If.prototype=new UI;If.prototype.constructor=If;If.prototype._jump=function(r,t,e,n){var o=this.grid,a=r-e,i=t-n;if(!o.isWalkableAt(r,t))return null;if(this.trackJumpRecursion===!0&&(o.getNodeAt(r,t).tested=!0),o.getNodeAt(r,t)===this.endNode)return[r,t];if(a!==0&&i!==0){if(this._jump(r+a,t,r,t)||this._jump(r,t+i,r,t))return[r,t]}else if(a!==0){if(o.isWalkableAt(r,t-1)&&!o.isWalkableAt(r-a,t-1)||o.isWalkableAt(r,t+1)&&!o.isWalkableAt(r-a,t+1))return[r,t]}else if(i!==0&&(o.isWalkableAt(r-1,t)&&!o.isWalkableAt(r-1,t-i)||o.isWalkableAt(r+1,t)&&!o.isWalkableAt(r+1,t-i)))return[r,t];return o.isWalkableAt(r+a,t)&&o.isWalkableAt(r,t+i)?this._jump(r+a,t+i,r,t):null};If.prototype._findNeighbors=function(r){var t=r.parent,e=r.x,n=r.y,o=this.grid,a,i,u,l,s,c,f=[],d,p,h,m;if(t)if(a=t.x,i=t.y,s=(e-a)/Math.max(Math.abs(e-a),1),c=(n-i)/Math.max(Math.abs(n-i),1),s!==0&&c!==0)o.isWalkableAt(e,n+c)&&f.push([e,n+c]),o.isWalkableAt(e+s,n)&&f.push([e+s,n]),o.isWalkableAt(e,n+c)&&o.isWalkableAt(e+s,n)&&f.push([e+s,n+c]);else{var _;if(s!==0){_=o.isWalkableAt(e+s,n);var y=o.isWalkableAt(e,n+1),D=o.isWalkableAt(e,n-1);_&&(f.push([e+s,n]),y&&f.push([e+s,n+1]),D&&f.push([e+s,n-1])),y&&f.push([e,n+1]),D&&f.push([e,n-1])}else if(c!==0){_=o.isWalkableAt(e,n+c);var w=o.isWalkableAt(e+1,n),T=o.isWalkableAt(e-1,n);_&&(f.push([e,n+c]),w&&f.push([e+1,n+c]),T&&f.push([e-1,n+c])),w&&f.push([e+1,n]),T&&f.push([e-1,n])}}else for(d=o.getNeighbors(r,qct.OnlyWhenNoObstacles),h=0,m=d.length;h<m;++h)p=d[h],f.push([p.x,p.y]);return f};BI.exports=If});var qI=tr((R5t,zI)=>{var GI=zh(),Qct=ko();function Nf(r){GI.call(this,r)}Nf.prototype=new GI;Nf.prototype.constructor=Nf;Nf.prototype._jump=function(r,t,e,n){var o=this.grid,a=r-e,i=t-n;if(!o.isWalkableAt(r,t))return null;if(this.trackJumpRecursion===!0&&(o.getNodeAt(r,t).tested=!0),o.getNodeAt(r,t)===this.endNode)return[r,t];if(a!==0&&i!==0){if(o.isWalkableAt(r-a,t+i)&&!o.isWalkableAt(r-a,t)||o.isWalkableAt(r+a,t-i)&&!o.isWalkableAt(r,t-i))return[r,t];if(this._jump(r+a,t,r,t)||this._jump(r,t+i,r,t))return[r,t]}else if(a!==0){if(o.isWalkableAt(r+a,t+1)&&!o.isWalkableAt(r,t+1)||o.isWalkableAt(r+a,t-1)&&!o.isWalkableAt(r,t-1))return[r,t]}else if(o.isWalkableAt(r+1,t+i)&&!o.isWalkableAt(r+1,t)||o.isWalkableAt(r-1,t+i)&&!o.isWalkableAt(r-1,t))return[r,t];return o.isWalkableAt(r+a,t)||o.isWalkableAt(r,t+i)?this._jump(r+a,t+i,r,t):null};Nf.prototype._findNeighbors=function(r){var t=r.parent,e=r.x,n=r.y,o=this.grid,a,i,u,l,s,c,f=[],d,p,h,m;if(t)a=t.x,i=t.y,s=(e-a)/Math.max(Math.abs(e-a),1),c=(n-i)/Math.max(Math.abs(n-i),1),s!==0&&c!==0?(o.isWalkableAt(e,n+c)&&f.push([e,n+c]),o.isWalkableAt(e+s,n)&&f.push([e+s,n]),(o.isWalkableAt(e,n+c)||o.isWalkableAt(e+s,n))&&f.push([e+s,n+c]),!o.isWalkableAt(e-s,n)&&o.isWalkableAt(e,n+c)&&f.push([e-s,n+c]),!o.isWalkableAt(e,n-c)&&o.isWalkableAt(e+s,n)&&f.push([e+s,n-c])):s===0?o.isWalkableAt(e,n+c)&&(f.push([e,n+c]),o.isWalkableAt(e+1,n)||f.push([e+1,n+c]),o.isWalkableAt(e-1,n)||f.push([e-1,n+c])):o.isWalkableAt(e+s,n)&&(f.push([e+s,n]),o.isWalkableAt(e,n+1)||f.push([e+s,n+1]),o.isWalkableAt(e,n-1)||f.push([e+s,n-1]));else for(d=o.getNeighbors(r,Qct.IfAtMostOneObstacle),h=0,m=d.length;h<m;++h)p=d[h],f.push([p.x,p.y]);return f};zI.exports=Nf});var HI=tr((C5t,QI)=>{var ER=ko(),Hct=NI(),Vct=LI(),jct=WI(),Zct=qI();function Yct(r){return r=r||{},r.diagonalMovement===ER.Never?new Hct(r):r.diagonalMovement===ER.Always?new Vct(r):r.diagonalMovement===ER.OnlyWhenNoObstacles?new jct(r):new Zct(r)}QI.exports=Yct});var jI=tr((S5t,VI)=>{VI.exports={Heap:Gh(),Node:Q1(),Grid:K6(),Util:Rl(),DiagonalMovement:ko(),Heuristic:Mf(),AStarFinder:j1(),BestFirstFinder:aI(),BreadthFirstFinder:lI(),DijkstraFinder:fI(),BiAStarFinder:J1(),BiBestFirstFinder:_I(),BiBreadthFirstFinder:wI(),BiDijkstraFinder:RI(),IDAStarFinder:EI(),JumpPointFinder:HI()}});var YI=tr((O5t,ZI)=>{ZI.exports=jI()});var x,cC,f0,dt,I=b(()=>{"use strict";x=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(x||{}),cC=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},f0=(r,t)=>cC(r).priority??t,dt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(cC).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...r){return r.map(cC).forEach(t=>{t.type.forEach(e=>{let n=this._addHandlers,o=this._queue;n[e]?n[e]?.(t):(o[e]=o[e]||[],o[e]?.push(t))})}),this},handle(r,t,e){let n=this._addHandlers,o=this._removeHandlers;if(n[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=t,o[r]=e;let a=this._queue;return a[r]&&(a[r]?.forEach(i=>t(i)),delete a[r]),this},handleByMap(r,t){return this.handle(r,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(r,t,e=-1){return this.handle(r,n=>{t.findIndex(a=>a.name===n.name)>=0||(t.push({name:n.name,value:n.ref}),t.sort((a,i)=>f0(i.value,e)-f0(a.value,e)))},n=>{let o=t.findIndex(a=>a.name===n.name);o!==-1&&t.splice(o,1)})},handleByList(r,t,e=-1){return this.handle(r,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((o,a)=>f0(a,e)-f0(o,e)))},n=>{let o=t.indexOf(n.ref);o!==-1&&t.splice(o,1)})}}});var NN=tr((_It,fC)=>{"use strict";var ypt=Object.prototype.hasOwnProperty,lo="~";function Yh(){}Object.create&&(Yh.prototype=Object.create(null),new Yh().__proto__||(lo=!1));function bpt(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function IN(r,t,e,n,o){if(typeof e!="function")throw new TypeError("The listener must be a function");var a=new bpt(e,n||r,o),i=lo?lo+t:t;return r._events[i]?r._events[i].fn?r._events[i]=[r._events[i],a]:r._events[i].push(a):(r._events[i]=a,r._eventsCount++),r}function d0(r,t){--r._eventsCount===0?r._events=new Yh:delete r._events[t]}function Vn(){this._events=new Yh,this._eventsCount=0}Vn.prototype.eventNames=function(){var t=[],e,n;if(this._eventsCount===0)return t;for(n in e=this._events)ypt.call(e,n)&&t.push(lo?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};Vn.prototype.listeners=function(t){var e=lo?lo+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,a=n.length,i=new Array(a);o<a;o++)i[o]=n[o].fn;return i};Vn.prototype.listenerCount=function(t){var e=lo?lo+t:t,n=this._events[e];return n?n.fn?1:n.length:0};Vn.prototype.emit=function(t,e,n,o,a,i){var u=lo?lo+t:t;if(!this._events[u])return!1;var l=this._events[u],s=arguments.length,c,f;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),s){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,o),!0;case 5:return l.fn.call(l.context,e,n,o,a),!0;case 6:return l.fn.call(l.context,e,n,o,a,i),!0}for(f=1,c=new Array(s-1);f<s;f++)c[f-1]=arguments[f];l.fn.apply(l.context,c)}else{var d=l.length,p;for(f=0;f<d;f++)switch(l[f].once&&this.removeListener(t,l[f].fn,void 0,!0),s){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,e);break;case 3:l[f].fn.call(l[f].context,e,n);break;case 4:l[f].fn.call(l[f].context,e,n,o);break;default:if(!c)for(p=1,c=new Array(s-1);p<s;p++)c[p-1]=arguments[p];l[f].fn.apply(l[f].context,c)}}return!0};Vn.prototype.on=function(t,e,n){return IN(this,t,e,n,!1)};Vn.prototype.once=function(t,e,n){return IN(this,t,e,n,!0)};Vn.prototype.removeListener=function(t,e,n,o){var a=lo?lo+t:t;if(!this._events[a])return this;if(!e)return d0(this,a),this;var i=this._events[a];if(i.fn)i.fn===e&&(!o||i.once)&&(!n||i.context===n)&&d0(this,a);else{for(var u=0,l=[],s=i.length;u<s;u++)(i[u].fn!==e||o&&!i[u].once||n&&i[u].context!==n)&&l.push(i[u]);l.length?this._events[a]=l.length===1?l[0]:l:d0(this,a)}return this};Vn.prototype.removeAllListeners=function(t){var e;return t?(e=lo?lo+t:t,this._events[e]&&d0(this,e)):(this._events=new Yh,this._eventsCount=0),this};Vn.prototype.off=Vn.prototype.removeListener;Vn.prototype.addListener=Vn.prototype.on;Vn.prefixed=lo;Vn.EventEmitter=Vn;typeof fC<"u"&&(fC.exports=Vn)});var kN,Ze,jn=b(()=>{kN=bp(NN(),1),Ze=kN.default});var Dpt,Mu,_n,Fa,qN,$N,dC,wpt,p0,QN,HN,LN,UN,BN,Xh,xpt,Tpt,Rpt,Cpt,mC,WN,Spt,pC,hC,GN,vC,fi,zN,VN,jN=b(()=>{Dpt={grad:.9,turn:360,rad:360/(2*Math.PI)},Mu=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},_n=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},Fa=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},qN=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},$N=function(r){return{r:Fa(r.r,0,255),g:Fa(r.g,0,255),b:Fa(r.b,0,255),a:Fa(r.a)}},dC=function(r){return{r:_n(r.r),g:_n(r.g),b:_n(r.b),a:_n(r.a,3)}},wpt=/^#([0-9a-f]{3,8})$/i,p0=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},QN=function(r){var t=r.r,e=r.g,n=r.b,o=r.a,a=Math.max(t,e,n),i=a-Math.min(t,e,n),u=i?a===t?(e-n)/i:a===e?2+(n-t)/i:4+(t-e)/i:0;return{h:60*(u<0?u+6:u),s:a?i/a*100:0,v:a/255*100,a:o}},HN=function(r){var t=r.h,e=r.s,n=r.v,o=r.a;t=t/360*6,e/=100,n/=100;var a=Math.floor(t),i=n*(1-e),u=n*(1-(t-a)*e),l=n*(1-(1-t+a)*e),s=a%6;return{r:255*[n,u,i,i,l,n][s],g:255*[l,n,n,u,i,i][s],b:255*[i,i,l,n,n,u][s],a:o}},LN=function(r){return{h:qN(r.h),s:Fa(r.s,0,100),l:Fa(r.l,0,100),a:Fa(r.a)}},UN=function(r){return{h:_n(r.h),s:_n(r.s),l:_n(r.l),a:_n(r.a,3)}},BN=function(r){return HN((e=(t=r).s,{h:t.h,s:(e*=((n=t.l)<50?n:100-n)/100)>0?2*e/(n+e)*100:0,v:n+e,a:t.a}));var t,e,n},Xh=function(r){return{h:(t=QN(r)).h,s:(o=(200-(e=t.s))*(n=t.v)/100)>0&&o<200?e*n/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,e,n,o},xpt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tpt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Rpt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Cpt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mC={string:[[function(r){var t=wpt.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?_n(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?_n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=Rpt.exec(r)||Cpt.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:$N({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=xpt.exec(r)||Tpt.exec(r);if(!t)return null;var e,n,o=LN({h:(e=t[1],n=t[2],n===void 0&&(n="deg"),Number(e)*(Dpt[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return BN(o)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,n=r.b,o=r.a,a=o===void 0?1:o;return Mu(t)&&Mu(e)&&Mu(n)?$N({r:Number(t),g:Number(e),b:Number(n),a:Number(a)}):null},"rgb"],[function(r){var t=r.h,e=r.s,n=r.l,o=r.a,a=o===void 0?1:o;if(!Mu(t)||!Mu(e)||!Mu(n))return null;var i=LN({h:Number(t),s:Number(e),l:Number(n),a:Number(a)});return BN(i)},"hsl"],[function(r){var t=r.h,e=r.s,n=r.v,o=r.a,a=o===void 0?1:o;if(!Mu(t)||!Mu(e)||!Mu(n))return null;var i=function(u){return{h:qN(u.h),s:Fa(u.s,0,100),v:Fa(u.v,0,100),a:Fa(u.a)}}({h:Number(t),s:Number(e),v:Number(n),a:Number(a)});return HN(i)},"hsv"]]},WN=function(r,t){for(var e=0;e<t.length;e++){var n=t[e][0](r);if(n)return[n,t[e][1]]}return[null,void 0]},Spt=function(r){return typeof r=="string"?WN(r.trim(),mC.string):typeof r=="object"&&r!==null?WN(r,mC.object):[null,void 0]},pC=function(r,t){var e=Xh(r);return{h:e.h,s:Fa(e.s+100*t,0,100),l:e.l,a:e.a}},hC=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},GN=function(r,t){var e=Xh(r);return{h:e.h,s:e.s,l:Fa(e.l+100*t,0,100),a:e.a}},vC=function(){function r(t){this.parsed=Spt(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return _n(hC(this.rgba),2)},r.prototype.isDark=function(){return hC(this.rgba)<.5},r.prototype.isLight=function(){return hC(this.rgba)>=.5},r.prototype.toHex=function(){return t=dC(this.rgba),e=t.r,n=t.g,o=t.b,i=(a=t.a)<1?p0(_n(255*a)):"","#"+p0(e)+p0(n)+p0(o)+i;var t,e,n,o,a,i},r.prototype.toRgb=function(){return dC(this.rgba)},r.prototype.toRgbString=function(){return t=dC(this.rgba),e=t.r,n=t.g,o=t.b,(a=t.a)<1?"rgba("+e+", "+n+", "+o+", "+a+")":"rgb("+e+", "+n+", "+o+")";var t,e,n,o,a},r.prototype.toHsl=function(){return UN(Xh(this.rgba))},r.prototype.toHslString=function(){return t=UN(Xh(this.rgba)),e=t.h,n=t.s,o=t.l,(a=t.a)<1?"hsla("+e+", "+n+"%, "+o+"%, "+a+")":"hsl("+e+", "+n+"%, "+o+"%)";var t,e,n,o,a},r.prototype.toHsv=function(){return t=QN(this.rgba),{h:_n(t.h),s:_n(t.s),v:_n(t.v),a:_n(t.a,3)};var t},r.prototype.invert=function(){return fi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),fi(pC(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),fi(pC(this.rgba,-t))},r.prototype.grayscale=function(){return fi(pC(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),fi(GN(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),fi(GN(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?fi({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):_n(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=Xh(this.rgba);return typeof t=="number"?fi({h:t,s:e.s,l:e.l,a:e.a}):_n(e.h)},r.prototype.isEqual=function(t){return this.toHex()===fi(t).toHex()},r}(),fi=function(r){return r instanceof vC?r:new vC(r)},zN=[],VN=function(r){r.forEach(function(t){zN.indexOf(t)<0&&(t(vC,mC),zN.push(t))})}});function ZN(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var o in e)n[e[o]]=o;var a={};r.prototype.toName=function(i){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,l,s=n[this.toHex()];if(s)return s;if(i?.closest){var c=this.toRgb(),f=1/0,d="black";if(!a.length)for(var p in e)a[p]=new r(e[p]).toRgb();for(var h in e){var m=(u=c,l=a[h],Math.pow(u.r-l.r,2)+Math.pow(u.g-l.g,2)+Math.pow(u.b-l.b,2));m<f&&(f=m,d=h)}return d}},t.string.push([function(i){var u=i.toLowerCase(),l=u==="transparent"?"#0000":e[u];return l?new r(l).toRgb():null},"name"])}var YN=b(()=>{});var zf,oe,Zn=b(()=>{jN();YN();VN([ZN]);zf=class Jh{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Jh)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){let n=typeof t;if(n!==typeof e)return!1;if(n==="number"||n==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((a,i)=>a===e[i]);if(t!==null&&e!==null){let a=Object.keys(t),i=Object.keys(e);return a.length!==i.length?!1:a.every(u=>t[u]===e[u])}return t===e}toRgba(){let[t,e,n,o]=this._components;return{r:t,g:e,b:n,a:o}}toRgb(){let[t,e,n]=this._components;return{r:t,g:e,b:n}}toRgbaString(){let[t,e,n]=this.toUint8RgbArray();return`rgba(${t},${e},${n},${this.alpha})`}toUint8RgbArray(t){let[e,n,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb,t[0]=Math.round(e*255),t[1]=Math.round(n*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t=t||this._arrayRgba;let[e,n,o,a]=this._components;return t[0]=e,t[1]=n,t[2]=o,t[3]=a,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb;let[e,n,o]=this._components;return t[0]=e,t[1]=n,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){let[t,e,n]=this.toUint8RgbArray();return(n<<16)+(e<<8)+t}toLittleEndianNumber(){let t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){let[e,n,o,a]=Jh._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=n,this._components[2]*=o,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let n=this._int>>16&255,o=this._int>>8&255,a=this._int&255;return e&&(n=n*t+.5|0,o=o*t+.5|0,a=a*t+.5|0),(t*255<<24)+(n<<16)+(o<<8)+a}toHex(){let t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,n,o,a;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){let i=t;e=(i>>16&255)/255,n=(i>>8&255)/255,o=(i&255)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,n,o,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,n,o,a=255]=t,e/=255,n/=255,o/=255,a/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){let u=Jh.HEX_PATTERN.exec(t);u&&(t=`#${u[2]}`)}let i=fi(t);i.isValid()&&({r:e,g:n,b:o,a}=i.rgba,e/=255,n/=255,o/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=n,this._components[2]=o,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);let[t,e,n]=this._components;this._int=(t*255<<16)+(e*255<<8)+(n*255|0)}_clamp(t,e=0,n=1){return typeof t=="number"?Math.min(Math.max(t,e),n):(t.forEach((o,a)=>{t[a]=Math.min(Math.max(o,e),n)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Jh||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};zf.shared=new zf;zf._temp=new zf;zf.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;oe=zf});var XN,JN=b(()=>{"use strict";XN={cullArea:null,cullable:!1,cullableChildren:!0}});var KN,tk,ek,gC=b(()=>{"use strict";KN=Math.PI*2,tk=180/Math.PI,ek=Math.PI/180});var ye,_C,Ma=b(()=>{"use strict";ye=class r{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new r(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return _C.x=0,_C.y=0,_C}},_C=new ye});var J,Opt,Ept,Oe=b(()=>{gC();Ma();J=class r{constructor(t=1,e=0,n=0,o=1,a=0,i=0){this.array=null,this.a=t,this.b=e,this.c=n,this.d=o,this.tx=a,this.ty=i}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,n,o,a,i){return this.a=t,this.b=e,this.c=n,this.d=o,this.tx=a,this.ty=i,this}toArray(t,e){this.array||(this.array=new Float32Array(9));let n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,e){e=e||new ye;let n=t.x,o=t.y;return e.x=this.a*n+this.c*o+this.tx,e.y=this.b*n+this.d*o+this.ty,e}applyInverse(t,e){e=e||new ye;let n=this.a,o=this.b,a=this.c,i=this.d,u=this.tx,l=this.ty,s=1/(n*i+a*-o),c=t.x,f=t.y;return e.x=i*s*c+-a*s*f+(l*a-u*i)*s,e.y=n*s*f+-o*s*c+(-l*n+u*o)*s,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){let e=Math.cos(t),n=Math.sin(t),o=this.a,a=this.c,i=this.tx;return this.a=o*e-this.b*n,this.b=o*n+this.b*e,this.c=a*e-this.d*n,this.d=a*n+this.d*e,this.tx=i*e-this.ty*n,this.ty=i*n+this.ty*e,this}append(t){let e=this.a,n=this.b,o=this.c,a=this.d;return this.a=t.a*e+t.b*o,this.b=t.a*n+t.b*a,this.c=t.c*e+t.d*o,this.d=t.c*n+t.d*a,this.tx=t.tx*e+t.ty*o+this.tx,this.ty=t.tx*n+t.ty*a+this.ty,this}appendFrom(t,e){let n=t.a,o=t.b,a=t.c,i=t.d,u=t.tx,l=t.ty,s=e.a,c=e.b,f=e.c,d=e.d;return this.a=n*s+o*f,this.b=n*c+o*d,this.c=a*s+i*f,this.d=a*c+i*d,this.tx=u*s+l*f+e.tx,this.ty=u*c+l*d+e.ty,this}setTransform(t,e,n,o,a,i,u,l,s){return this.a=Math.cos(u+s)*a,this.b=Math.sin(u+s)*a,this.c=-Math.sin(u-l)*i,this.d=Math.cos(u-l)*i,this.tx=t-(n*this.a+o*this.c),this.ty=e-(n*this.b+o*this.d),this}prepend(t){let e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){let n=this.a,o=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){let e=this.a,n=this.b,o=this.c,a=this.d,i=t.pivot,u=-Math.atan2(-o,a),l=Math.atan2(n,e),s=Math.abs(u+l);return s<1e-5||Math.abs(KN-s)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=u,t.skew.y=l),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(o*o+a*a),t.position.x=this.tx+(i.x*e+i.y*o),t.position.y=this.ty+(i.x*n+i.y*a),t}invert(){let t=this.a,e=this.b,n=this.c,o=this.d,a=this.tx,i=t*o-e*n;return this.a=o/i,this.b=-e/i,this.c=-n/i,this.d=t/i,this.tx=(n*this.ty-o*a)/i,this.ty=-(t*this.ty-e*a)/i,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Ept.identity()}static get shared(){return Opt.identity()}},Opt=new J,Ept=new J});var Mn,h0=b(()=>{"use strict";Mn=class r{constructor(t,e,n){this._x=e||0,this._y=n||0,this._observer=t}clone(t){return new r(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}});function be(r="default"){return yC[r]===void 0&&(yC[r]=-1),++yC[r]}var yC,Yn=b(()=>{"use strict";yC={default:-1}});function Ut(r,t,e=3){if(rk[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(n=n.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(n))),rk[t]=!0}var rk,Ht,nk,Vr=b(()=>{"use strict";rk={},Ht="8.0.0",nk="8.3.4"});var tc,bC=b(()=>{"use strict";tc=class{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}});var DC,Kt,$o=b(()=>{bC();DC=class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new tc(t)),this._poolsByClass.get(t)}stats(){let t={};return this._poolsByClass.forEach(e=>{let n=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[n]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}},Kt=new DC});function m0(r,t,e){let n=r.length,o;if(t>=n||e===0)return;e=t+e>n?n-t:e;let a=n-e;for(o=t;o<a;++o)r[o]=r[o+e];r.length=a}var wC=b(()=>{"use strict"});var ok,ak=b(()=>{wC();Vr();ok={allowChildren:!0,removeChildren(r=0,t){let e=t??this.children.length,n=e-r,o=[];if(n>0&&n<=e){for(let i=e-1;i>=r;i--){let u=this.children[i];u&&(o.push(u),u.parent=null)}m0(this.children,r,e);let a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(o);for(let i=0;i<o.length;++i)this.emit("childRemoved",o[i],this,i),o[i].emit("removed",this);return o}else if(n===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){let t=this.getChildAt(r);return this.removeChild(t)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,t)},getChildIndex(r){let t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(r,t){this.allowChildren||Ut(Ht,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:e}=this;if(t<0||t>e.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(r.parent){let o=r.parent.children.indexOf(r);if(r.parent===this&&o===t)return r;o!==-1&&r.parent.children.splice(o,1)}t===e.length?e.push(r):e.splice(t,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;let n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,t),r.emit("added",this),r},swapChildren(r,t){if(r===t)return;let e=this.getChildIndex(r),n=this.getChildIndex(t);this.children[e]=t,this.children[n]=r;let o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(t=>this.reparentChildAt(t,this.children.length)),r[0])},reparentChildAt(r,t){if(r.parent===this)return this.setChildIndex(r,t),r;let e=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,t);let n=this.worldTransform.clone();return n.invert(),e.prepend(n),r.setFromMatrix(e),r}}});var Au,v0=b(()=>{"use strict";Au=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}});var xC,g0,ik=b(()=>{I();$o();xC=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){let n=this._tests[e];if(n.test(t))return Kt.get(n.maskClass,t)}return t}returnMaskEffect(t){Kt.return(t)}},g0=new xC;dt.handleByList(x.MaskEffect,g0._effectClasses)});var uk,lk=b(()=>{v0();ik();uk={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],addEffect(r){if(this.effects.indexOf(r)!==-1)return;this.effects.push(r),this.effects.sort((n,o)=>n.priority-o.priority);let e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0),this._updateIsSimple()},removeEffect(r){let t=this.effects.indexOf(r);t!==-1&&(this.effects.splice(t,1),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(r){let t=this._maskEffect;t?.mask!==r&&(t&&(this.removeEffect(t),g0.returnMaskEffect(t),this._maskEffect=null),r!=null&&(this._maskEffect=g0.getMaskEffect(r),this.addEffect(this._maskEffect)))},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask)},get mask(){return this._maskEffect?.mask},set filters(r){!Array.isArray(r)&&r&&(r=[r]);let t=this._filterEffect||(this._filterEffect=new Au);r=r;let e=r?.length>0,n=t.filters?.length>0,o=e!==n;r=Array.isArray(r)?r.slice(0):r,t.filters=Object.freeze(r),o&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=r??null))},get filters(){return this._filterEffect?.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new Au),this._filterEffect.filterArea=r},get filterArea(){return this._filterEffect?.filterArea}}});var sk,ck=b(()=>{Vr();sk={label:null,get name(){return Ut(Ht,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Ut(Ht,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,t=!1){return this.getChildByLabel(r,t)},getChildByLabel(r,t=!1){let e=this.children;for(let n=0;n<e.length;n++){let o=e[n];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(t)for(let n=0;n<e.length;n++){let a=e[n].getChildByLabel(r,!0);if(a)return a}return null},getChildrenByLabel(r,t=!1,e=[]){let n=this.children;for(let o=0;o<n.length;o++){let a=n[o];(a.label===r||r instanceof RegExp&&r.test(a.label))&&e.push(a)}if(t)for(let o=0;o<n.length;o++)n[o].getChildrenByLabel(r,!0,e);return e}}});var _0,de,An=b(()=>{Ma();_0=[new ye,new ye,new ye,new ye],de=class r{constructor(t=0,e=0,n=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new r(0,0,0,0)}clone(){return new r(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,n){let{width:o,height:a}=this;if(o<=0||a<=0)return!1;let i=this.x,u=this.y,l=i-n/2,s=i+o+n/2,c=u-n/2,f=u+a+n/2,d=i+n/2,p=i+o-n/2,h=u+n/2,m=u+a-n/2;return t>=l&&t<=s&&e>=c&&e<=f&&!(t>d&&t<p&&e>h&&e<m)}intersects(t,e){if(!e){let A=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=A)return!1;let N=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>N}let n=this.left,o=this.right,a=this.top,i=this.bottom;if(o<=n||i<=a)return!1;let u=_0[0].set(t.left,t.top),l=_0[1].set(t.left,t.bottom),s=_0[2].set(t.right,t.top),c=_0[3].set(t.right,t.bottom);if(s.x<=u.x||l.y<=u.y)return!1;let f=Math.sign(e.a*e.d-e.b*e.c);if(f===0||(e.apply(u,u),e.apply(l,l),e.apply(s,s),e.apply(c,c),Math.max(u.x,l.x,s.x,c.x)<=n||Math.min(u.x,l.x,s.x,c.x)>=o||Math.max(u.y,l.y,s.y,c.y)<=a||Math.min(u.y,l.y,s.y,c.y)>=i))return!1;let d=f*(l.y-u.y),p=f*(u.x-l.x),h=d*n+p*a,m=d*o+p*a,_=d*n+p*i,y=d*o+p*i;if(Math.max(h,m,_,y)<=d*u.x+p*u.y||Math.min(h,m,_,y)>=d*c.x+p*c.y)return!1;let D=f*(u.y-s.y),w=f*(s.x-u.x),T=D*n+w*a,R=D*o+w*a,C=D*n+w*i,S=D*o+w*i;return!(Math.max(T,R,C,S)<=D*u.x+w*u.y||Math.min(T,R,C,S)>=D*c.x+w*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){let e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=o,this.height=Math.max(a-o,0),this}ceil(t=1,e=.001){let n=Math.ceil((this.x+this.width-e)*t)/t,o=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=o-this.y,this}enlarge(t){let e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),a=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=o,this.height=a-o,this}getBounds(t){return t=t||new r,t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}});var fk,fr,Aa=b(()=>{Oe();An();fk=new J,fr=class r{constructor(t=1/0,e=1/0,n=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=fk,this.minX=t,this.minY=e,this.maxX=n,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new de);let t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=fk,this}set(t,e,n,o){this.minX=t,this.minY=e,this.maxX=n,this.maxY=o}addFrame(t,e,n,o,a){a||(a=this.matrix);let i=a.a,u=a.b,l=a.c,s=a.d,c=a.tx,f=a.ty,d=this.minX,p=this.minY,h=this.maxX,m=this.maxY,_=i*t+l*e+c,y=u*t+s*e+f;_<d&&(d=_),y<p&&(p=y),_>h&&(h=_),y>m&&(m=y),_=i*n+l*e+c,y=u*n+s*e+f,_<d&&(d=_),y<p&&(p=y),_>h&&(h=_),y>m&&(m=y),_=i*t+l*o+c,y=u*t+s*o+f,_<d&&(d=_),y<p&&(p=y),_>h&&(h=_),y>m&&(m=y),_=i*n+l*o+c,y=u*n+s*o+f,_<d&&(d=_),y<p&&(p=y),_>h&&(h=_),y>m&&(m=y),this.minX=d,this.minY=p,this.maxX=h,this.maxY=m}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){let e=this.minX,n=this.minY,o=this.maxX,a=this.maxY,{a:i,b:u,c:l,d:s,tx:c,ty:f}=t,d=i*e+l*n+c,p=u*e+s*n+f;this.minX=d,this.minY=p,this.maxX=d,this.maxY=p,d=i*o+l*n+c,p=u*o+s*n+f,this.minX=d<this.minX?d:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=p>this.maxY?p:this.maxY,d=i*e+l*a+c,p=u*e+s*a+f,this.minX=d<this.minX?d:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=p>this.maxY?p:this.maxY,d=i*o+l*a+c,p=u*o+s*a+f,this.minX=d<this.minX?d:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=p>this.maxY?p:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,n,o){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<n&&(this.minY=n),this.maxY>o&&(this.maxY=o),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new r(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){let e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){let e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,n,o){let a=this.minX,i=this.minY,u=this.maxX,l=this.maxY;o||(o=this.matrix);let s=o.a,c=o.b,f=o.c,d=o.d,p=o.tx,h=o.ty;for(let m=e;m<n;m+=2){let _=t[m],y=t[m+1],D=s*_+f*y+p,w=c*_+d*y+h;a=D<a?D:a,i=w<i?w:i,u=D>u?D:u,l=w>l?w:l}this.minX=a,this.minY=i,this.maxX=u,this.maxY=l}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}}});var Pa,aa,Kh=b(()=>{Oe();bC();Aa();Pa=new tc(J),aa=new tc(fr)});function qf(r,t,e){e.clear();let n,o;return r.parent?t?n=r.parent.worldTransform:(o=Pa.get().identity(),n=tm(r,o)):n=J.IDENTITY,dk(r,e,n,t),o&&Pa.return(o),e.isValid||e.set(0,0,0,0),e}function dk(r,t,e,n){if(!r.visible||!r.measurable)return;let o;n?o=r.worldTransform:(r.updateLocalTransform(),o=Pa.get(),o.appendFrom(r.localTransform,e));let a=t,i=!!r.effects.length;if(i&&(t=aa.get().clear()),r.boundsArea)t.addRect(r.boundsArea,o);else{r.addBounds&&(t.matrix=o,r.addBounds(t));for(let u=0;u<r.children.length;u++)dk(r.children[u],t,o,n)}if(i){for(let u=0;u<r.effects.length;u++)r.effects[u].addBounds?.(t);a.addBounds(t,J.IDENTITY),aa.return(t)}n||Pa.return(o)}function tm(r,t){let e=r.parent;return e&&(tm(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}var em=b(()=>{Oe();Kh()});function ct(...r){TC!==pk&&(TC++,TC===pk?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}var TC,pk,er=b(()=>{"use strict";TC=0,pk=500});function Qf(r,t,e){return t.clear(),e||(e=J.IDENTITY),hk(r,t,e,r,!0),t.isValid||t.set(0,0,0,0),t}function hk(r,t,e,n,o){let a;if(o)a=Pa.get(),a=e.copyTo(a);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();let l=r.localTransform;a=Pa.get(),a.appendFrom(l,e)}let i=t,u=!!r.effects.length;if(u&&(t=aa.get().clear()),r.boundsArea)t.addRect(r.boundsArea,a);else{r.renderPipeId&&(t.matrix=a,r.addBounds(t));let l=r.children;for(let s=0;s<l.length;s++)hk(l[s],t,a,n,!1)}if(u){for(let l=0;l<r.effects.length;l++)r.effects[l].addLocalBounds?.(t,n);i.addBounds(t,J.IDENTITY),aa.return(t)}Pa.return(a)}var y0=b(()=>{Oe();Kh()});function RC(r,t){let e=r.children;for(let n=0;n<e.length;n++){let o=e[n],a=o.uid,i=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,u=t.index;(t.data[u]!==a||t.data[u+1]!==i)&&(t.data[t.index]=a,t.data[t.index+1]=i,t.didChange=!0),t.index=u+2,o.children.length&&RC(o,t)}return t.didChange}var mk=b(()=>{"use strict"});var Fpt,vk,gk=b(()=>{Oe();Aa();em();y0();mk();Fpt=new J,vk={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,t){let e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=r/t*e:this.scale.x=e},_setHeight(r,t){let e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=r/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new fr});let r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),RC(this,r),r.didChange&&Qf(this,r.localBounds,Fpt),r.localBounds},getBounds(r,t){return qf(this,r,t||new fr)}}});var _k,yk=b(()=>{"use strict";_k={_onRender:null,set onRender(r){let t=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}}});function Mpt(r,t){return r._zIndex-t._zIndex}var bk,Dk=b(()=>{"use strict";bk={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Mpt))}}});var wk,xk=b(()=>{Oe();Ma();em();wk={getGlobalPosition(r=new ye,t=!1){return this.parent?this.parent.toGlobal(this._position,r,t):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,t,e=!1){if(!e){this.updateLocalTransform();let n=tm(this,new J);return n.append(this.localTransform),n.apply(r,t)}return this.worldTransform.apply(r,t)},toLocal(r,t,e,n){if(t&&(r=t.toGlobal(r,e,n)),!n){this.updateLocalTransform();let o=tm(this,new J);return o.append(this.localTransform),o.applyInverse(r,e)}return this.worldTransform.applyInverse(r,e)}}});var Apt,Hf,CC=b(()=>{Yn();Apt=0,Hf=class{constructor(){this.uid=be("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.tick=0}reset(){this.instructionSize=0,this.tick=Apt++}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}});var b0,Tk=b(()=>{Oe();CC();b0=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new J,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Hf,this._onRenderContainers=[]}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;let e=t.children;for(let n=0;n<e.length;n++)this.addChild(e[n])}reset(){this.renderGroupChildren.length=0;for(let t in this.childrenToUpdate){let e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){let e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);let e=t.children;for(let n=0;n<e.length;n++)this.addChild(e[n])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}let e=t.children;for(let n=0;n<e.length;n++)this.removeChild(e[n])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}destroy(){this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){let e=this.root.children;for(let n=0;n<e.length;n++)this._getChildren(e[n],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;let n=t.children;for(let o=0;o<n.length;o++)this._getChildren(n[o],e);return e}}});function Rk(r,t,e={}){for(let n in t)!e[n]&&t[n]!==void 0&&(r[n]=t[n])}var Ck=b(()=>{"use strict"});var SC,OC,EC,Vf,rm,ec,Ae,di=b(()=>{jn();Zn();JN();Oe();gC();h0();Yn();Vr();$o();ak();lk();ck();gk();yk();Dk();xk();Tk();Ck();SC=new Mn(null),OC=new Mn(null),EC=new Mn(null,1,1),Vf=1,rm=2,ec=4,Ae=class r extends Ze{constructor(t={}){super(),this.uid=be("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new J,this.relativeGroupTransform=new J,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Mn(this,0,0),this._scale=EC,this._pivot=OC,this._skew=SC,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Rk(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(e=>this.addChild(e)),t.parent?.addChild(this)}static mixin(t){Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(t))}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Ut(Ht,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}let e=t[0];if(e.parent===this)return this.children.splice(this.children.indexOf(e),1),this.children.push(e),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),e;e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15;let n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}let e=t[0],n=this.children.indexOf(e);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parent=null,this.emit("childRemoved",e,this,n),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=Kt.get(b0,this),this.groupTransform=J.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let t=this.parentRenderGroup;t?.removeChild(this),Kt.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new J),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*tk}set angle(t){this.rotation=t*ek}get pivot(){return this._pivot===OC&&(this._pivot=new Mn(this,0,0)),this._pivot}set pivot(t){this._pivot===OC&&(this._pivot=new Mn(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===SC&&(this._skew=new Mn(this,0,0)),this._skew}set skew(t){this._skew===SC&&(this._skew=new Mn(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===EC&&(this._scale=new Mn(this,1,1)),this._scale}set scale(t){this._scale===EC&&(this._scale=new Mn(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){let e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){let e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});let e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){let n=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,n.width),e!==void 0&&this._setHeight(e,n.height)}_updateSkew(){let t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){let t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;let e=this.localTransform,n=this._scale,o=this._pivot,a=this._position,i=n._x,u=n._y,l=o._x,s=o._y;e.a=this._cx*i,e.b=this._sx*i,e.c=this._cy*u,e.d=this._sy*u,e.tx=a._x-(l*e.a+s*e.c),e.ty=a._y-(l*e.b+s*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Vf,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){let n=oe.shared.setValue(t??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=Vf,this._onUpdate())}get tint(){let t=this.localColor;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=rm,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){let e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ec,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){let e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ec,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){let e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=ec,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&e)for(let o=0;o<e.length;++o)e[o].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}};Ae.mixin(ok);Ae.mixin(wk);Ae.mixin(_k);Ae.mixin(vk);Ae.mixin(uk);Ae.mixin(sk);Ae.mixin(bk);Ae.mixin(XN)});var El,D0=b(()=>{Ma();El=class r{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=r.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ye,this.page=new ye,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,n,o,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}});function Ppt(r){return function(t){return t.test(r)}}function nm(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,n=e.split("[FBAN");typeof n[1]<"u"&&(e=n[0]),n=e.split("Twitter"),typeof n[1]<"u"&&(e=n[0]);var o=Ppt(e),a={apple:{phone:o(FC)&&!o(Pu),ipod:o(Sk),tablet:!o(FC)&&(o(Ok)||$k(t))&&!o(Pu),universal:o(Ek),device:(o(FC)||o(Sk)||o(Ok)||o(Ek)||$k(t))&&!o(Pu)},amazon:{phone:o(jf),tablet:!o(jf)&&o(w0),device:o(jf)||o(w0)},android:{phone:!o(Pu)&&o(jf)||!o(Pu)&&o(MC),tablet:!o(Pu)&&!o(jf)&&!o(MC)&&(o(w0)||o(Fk)),device:!o(Pu)&&(o(jf)||o(w0)||o(MC)||o(Fk))||o(/\bokhttp\b/i)},windows:{phone:o(Pu),tablet:o(Mk),device:o(Pu)||o(Mk)},other:{blackberry:o(Ak),blackberry10:o(Pk),opera:o(Ik),firefox:o(kk),chrome:o(Nk),device:o(Ak)||o(Pk)||o(Ik)||o(kk)||o(Nk)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var FC,Sk,Ok,Ek,MC,Fk,jf,w0,Pu,Mk,Ak,Pk,Ik,Nk,kk,$k,AC=b(()=>{FC=/iPhone/i,Sk=/iPod/i,Ok=/iPad/i,Ek=/\biOS-universal(?:.+)Mac\b/i,MC=/\bAndroid(?:.+)Mobile\b/i,Fk=/Android/i,jf=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,w0=/Silk/i,Pu=/Windows Phone/i,Mk=/\bWindows(?:.+)ARM\b/i,Ak=/BlackBerry/i,Pk=/BB10/i,Ik=/Opera Mini/i,Nk=/\b(CriOS|Chrome)(?:.+)Mobile/i,kk=/Mobile(?:.+)Firefox\b/i,$k=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"}});var Lk=b(()=>{AC();AC()});var Ipt,Uk,Bk=b(()=>{Lk();Ipt=nm.default??nm,Uk=Ipt(globalThis.navigator)});var Npt,x0,kpt,$pt,Wk,Gk,Lpt,Upt,Bpt,om,zk=b(()=>{D0();I();Bk();wC();Npt=9,x0=100,kpt=0,$pt=0,Wk=2,Gk=1,Lpt=-1e3,Upt=-1e3,Bpt=2,om=class{constructor(t,e=Uk){this._mobileInfo=e,this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(e.tablet||e.phone)&&this._createTouchHook();let n=document.createElement("div");n.style.width=`${x0}px`,n.style.height=`${x0}px`,n.style.position="absolute",n.style.top=`${kpt}px`,n.style.left=`${$pt}px`,n.style.zIndex=Wk.toString(),this._div=n,this._renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let t=document.createElement("button");t.style.width=`${Gk}px`,t.style.height=`${Gk}px`,t.style.position="absolute",t.style.top=`${Lpt}px`,t.style.left=`${Upt}px`,t.style.zIndex=Bpt.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.add(this),this._renderer.view.canvas.parentNode?.appendChild(this._div))}_deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this),this._div.parentNode?.removeChild(this._div))}_updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this._addChild(t),t._renderId=this._renderId);let e=t.children;if(e)for(let n=0;n<e.length;n++)this._updateAccessibleObjects(e[n])}init(t){this.debug=t?.debug??this.debug,this._renderer.runners.postrender.remove(this)}postrender(){let t=performance.now();if(this._mobileInfo.android.device&&t<this._androidUpdateCount||(this._androidUpdateCount=t+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered);let{x:e,y:n,width:o,height:a}=this._renderer.view.canvas.getBoundingClientRect(),{width:i,height:u,resolution:l}=this._renderer,s=o/i*l,c=a/u*l,f=this._div;f.style.left=`${e}px`,f.style.top=`${n}px`,f.style.width=`${i}px`,f.style.height=`${u}px`;for(let d=0;d<this._children.length;d++){let p=this._children[d];if(p._renderId!==this._renderId)p._accessibleActive=!1,m0(this._children,d,1),this._div.removeChild(p._accessibleDiv),this._pool.push(p._accessibleDiv),p._accessibleDiv=null,d--;else{f=p._accessibleDiv;let h=p.hitArea,m=p.worldTransform;p.hitArea?(f.style.left=`${(m.tx+h.x*m.a)*s}px`,f.style.top=`${(m.ty+h.y*m.d)*c}px`,f.style.width=`${h.width*m.a*s}px`,f.style.height=`${h.height*m.d*c}px`):(h=p.getBounds().rectangle,this._capHitArea(h),f.style.left=`${h.x*s}px`,f.style.top=`${h.y*c}px`,f.style.width=`${h.width*s}px`,f.style.height=`${h.height*c}px`,f.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(f.title=p.accessibleTitle||""),f.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&f.setAttribute("aria-label",p.accessibleHint||"")),(p.accessibleTitle!==f.title||p.tabIndex!==f.tabIndex)&&(f.title=p.accessibleTitle||"",f.tabIndex=p.tabIndex,this.debug&&this._updateDebugHTML(f))}}this._renderId++}_updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}_capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);let{width:e,height:n}=this._renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>n&&(t.height=n-t.y)}_addChild(t){let e=this._pool.pop();e||(e=document.createElement("button"),e.style.width=`${x0}px`,e.style.height=`${x0}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Wk.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`container ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this._updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.container=t,this._children.push(t),this._div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){let{container:n}=t.target,o=this._renderer.events.rootBoundary,a=Object.assign(new El(o),{target:n});o.rootTarget=this._renderer.lastObjectRendered,e.forEach(i=>o.dispatchEvent(a,i))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===Npt&&this._activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this._deactivate()}destroy(){this._destroyTouchHook(),this._div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this._pool=null,this._children=null,this._renderer=null}};om.extension={type:[x.WebGLSystem,x.WebGPUSystem],name:"accessibility"}});var qk,Qk=b(()=>{"use strict";qk={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1}});var Hk=b(()=>{I();di();zk();Qk();dt.add(om);Ae.mixin(qk)});var am,Vk=b(()=>{I();am=class{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let e,n;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,n=globalThis.innerHeight;else{let{clientWidth:o,clientHeight:a}=this._resizeTo;e=o,n=a}this.renderer.resize(e,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};am.extension=x.Application});var Fl,T0=b(()=>{"use strict";Fl=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Fl||{})});var Zf,jk=b(()=>{"use strict";Zf=class{constructor(t,e=null,n=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=n,this._once=o}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));let e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let e=this.next;return this.next=t?null:e,this.previous=null,e}}});var Zk,Lo,im=b(()=>{T0();jk();Zk=class ia{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Zf(null,null,1/0),this.deltaMS=1/ia.targetFPMS,this.elapsedMS=1/ia.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,n=Fl.NORMAL){return this._addListener(new Zf(t,e,n))}addOnce(t,e,n=Fl.NORMAL){return this._addListener(new Zf(t,e,n,!0))}_addListener(t){let e=this._head.next,n=this._head;if(!e)t.connect(n);else{for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,e){let n=this._head.next;for(;n;)n.match(t,e)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){let a=t-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=t-a%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ia.targetFPMS;let n=this._head,o=n.next;for(;o;)o=o.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){let e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,ia.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{let e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!ia._shared){let t=ia._shared=new ia;t.autoStart=!0,t._protected=!0}return ia._shared}static get system(){if(!ia._system){let t=ia._system=new ia;t.autoStart=!0,t._protected=!0}return ia._system}};Zk.targetFPMS=.06;Lo=Zk});var um,Yk=b(()=>{I();T0();im();um=class{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Fl.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Lo.shared:new Lo,t.autoStart&&this.start()}static destroy(){if(this._ticker){let t=this._ticker;this.ticker=null,t.destroy()}}};um.extension=x.Application});var PC=b(()=>{I();Vk();Yk();dt.add(am);dt.add(um)});var IC,ki,NC=b(()=>{T0();im();IC=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this._tickerAdded||!this.domElement||(Lo.system.add(this._tickerUpdate,this,Fl.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Lo.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let t=this.events._rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY,pointerType:t.pointerType,pointerId:t.pointerId}))}_tickerUpdate(t){this._deltaTime+=t.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}},ki=new IC});var Iu,R0=b(()=>{Ma();D0();Iu=class extends El{constructor(){super(...arguments),this.client=new ye,this.movement=new ye,this.offset=new ye,this.global=new ye,this.screen=new ye}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,n,o,a,i,u,l,s,c,f,d,p,h,m){throw new Error("Method not implemented.")}}});var so,kC=b(()=>{R0();so=class extends Iu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}});var $i,$C=b(()=>{R0();$i=class extends Iu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};$i.DOM_DELTA_PIXEL=0;$i.DOM_DELTA_LINE=1;$i.DOM_DELTA_PAGE=2});var Wpt,Gpt,lm,C0,Xk=b(()=>{jn();Ma();er();NC();R0();kC();$C();Wpt=2048,Gpt=new ye,lm=new ye,C0=class{constructor(t){this.dispatch=new Ze,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((n,o)=>n.priority-o.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;let e=this.mappingTable[t.type];if(e)for(let n=0,o=e.length;n<o;n++)e[n].fn(t);else ct(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){ki.pauseUpdate=!0;let o=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",a=this[o](this.rootTarget,this.rootTarget.eventMode,Gpt.set(t,e),this.hitTestFn,this.hitPruneFn);return a&&a[0]}propagate(t,e){if(!t.target)return;let n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let o=0,a=n.length-1;o<a;o++)if(t.currentTarget=n[o],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let o=n.length-2;o>=0;o--)if(t.currentTarget=n[o],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;let o=Array.isArray(e)?e:[e];for(let a=n.length-1;a>=0;a--)o.forEach(i=>{t.currentTarget=n[a],this.notifyTarget(t,i)})}propagationPath(t){let e=[t];for(let n=0;n<Wpt&&t!==this.rootTarget&&t.parent;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,n,o,a,i=!1){let u=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(ki.pauseUpdate=!1),t.interactiveChildren&&t.children){let c=t.children;for(let f=c.length-1;f>=0;f--){let d=c[f],p=this.hitTestMoveRecursive(d,this._isInteractive(e)?e:d.eventMode,n,o,a,i||a(t,n));if(p){if(p.length>0&&!p[p.length-1].parent)continue;let h=t.isInteractive();(p.length>0||h)&&(h&&this._allInteractiveElements.push(t),p.push(t)),this._hitElements.length===0&&(this._hitElements=p),u=!0}}}let l=this._isInteractive(e),s=t.isInteractive();return s&&s&&this._allInteractiveElements.push(t),i||this._hitElements.length>0?null:u?this._hitElements:l&&!a(t,n)&&o(t,n)?s?[t]:[]:null}hitTestRecursive(t,e,n,o,a){if(this._interactivePrune(t)||a(t,n))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(ki.pauseUpdate=!1),t.interactiveChildren&&t.children){let l=t.children,s=n;for(let c=l.length-1;c>=0;c--){let f=l[c],d=this.hitTestRecursive(f,this._isInteractive(e)?e:f.eventMode,s,o,a);if(d){if(d.length>0&&!d[d.length-1].parent)continue;let p=t.isInteractive();return(d.length>0||p)&&d.push(t),d}}}let i=this._isInteractive(e),u=t.isInteractive();return i&&o(t,n)?u?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!t||!t.visible||!t.renderable||!t.includeInBuild||!t.measurable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,lm),!t.hitArea.contains(lm.x,lm.y)))return!0;if(t.effects&&t.effects.length)for(let n=0;n<t.effects.length;n++){let o=t.effects[n];if(o.containsPoint&&!o.containsPoint(e,this.hitTestFn))return!0}return!1}hitTestFn(t,e){return t.hitArea?!0:t?.containsPoint?(t.worldTransform.applyInverse(e,lm),t.containsPoint(lm)):!1}notifyTarget(t,e){if(!t.currentTarget.isInteractive())return;e=e??t.type;let n=`on${e}`;t.currentTarget[n]?.(t);let o=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this._notifyListeners(t,o),t.eventPhase===t.AT_TARGET&&this._notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof so)){ct("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){let o=e.button===2;this.dispatchEvent(e,o?"rightdown":"mousedown")}let n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof so)){ct("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;let n=e.pointerType==="mouse"||e.pointerType==="pen",o=this.trackingData(t.pointerId),a=this.findMountedTarget(o.overTargets);if(o.overTargets?.length>0&&a!==e.target){let l=t.type==="mousemove"?"mouseout":"pointerout",s=this.createPointerEvent(t,l,a);if(this.dispatchEvent(s,"pointerout"),n&&this.dispatchEvent(s,"mouseout"),!e.composedPath().includes(a)){let c=this.createPointerEvent(t,"pointerleave",a);for(c.eventPhase=c.AT_TARGET;c.target&&!e.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),n&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(s)}if(a!==e.target){let l=t.type==="mousemove"?"mouseover":"pointerover",s=this.clonePointerEvent(e,l);this.dispatchEvent(s,"pointerover"),n&&this.dispatchEvent(s,"mouseover");let c=a?.parent;for(;c&&c!==this.rootTarget.parent&&c!==e.target;)c=c.parent;if(!c||c===this.rootTarget.parent){let d=this.clonePointerEvent(e,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==a&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(s)}let i=[],u=this.enableGlobalMoveEvents??!0;this.moveOnAll?i.push("pointermove"):this.dispatchEvent(e,"pointermove"),u&&i.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?i.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),u&&i.push("globaltouchmove")),n&&(this.moveOnAll?i.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),u&&i.push("globalmousemove"),this.cursor=e.target?.cursor),i.length>0&&this.all(e,i),this._allInteractiveElements.length=0,this._hitElements.length=0,o.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof so)){ct("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),n=this.createPointerEvent(t),o=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),o&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);let a=this.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),o&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;e.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(a)}mapPointerOut(t){if(!(t instanceof so)){ct("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId);if(e.overTargets){let n=t.pointerType==="mouse"||t.pointerType==="pen",o=this.findMountedTarget(e.overTargets),a=this.createPointerEvent(t,"pointerout",o);this.dispatchEvent(a),n&&this.dispatchEvent(a,"mouseout");let i=this.createPointerEvent(t,"pointerleave",o);for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseleave"),i.target=i.target.parent;e.overTargets=null,this.freeEvent(a),this.freeEvent(i)}this.cursor=null}mapPointerUp(t){if(!(t instanceof so)){ct("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){let u=n.button===2;this.dispatchEvent(n,u?"rightup":"mouseup")}let o=this.trackingData(t.pointerId),a=this.findMountedTarget(o.pressTargetsByButton[t.button]),i=a;if(a&&!n.composedPath().includes(a)){let u=a;for(;u&&!n.composedPath().includes(u);){if(n.currentTarget=u,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){let l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}u=u.parent}delete o.pressTargetsByButton[t.button],i=u}if(i){let u=this.clonePointerEvent(n,"click");u.target=i,u.path=null,o.clicksByButton[t.button]||(o.clicksByButton[t.button]={clickCount:0,target:u.target,timeStamp:e});let l=o.clicksByButton[t.button];if(l.target===u.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=u.target,l.timeStamp=e,u.detail=l.clickCount,u.pointerType==="mouse"){let s=u.button===2;this.dispatchEvent(u,s?"rightclick":"click")}else u.pointerType==="touch"&&this.dispatchEvent(u,"tap");this.dispatchEvent(u,"pointertap"),this.freeEvent(u)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof so)){ct("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),n=this.findMountedTarget(e.pressTargetsByButton[t.button]),o=this.createPointerEvent(t);if(n){let a=n;for(;a;)o.currentTarget=a,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"?this.notifyTarget(o,"touchendoutside"):(o.pointerType==="mouse"||o.pointerType==="pen")&&this.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(o)}mapWheel(t){if(!(t instanceof $i)){ct("EventBoundary cannot map a non-wheel event as a wheel event");return}let e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let n=1;n<t.length&&t[n].parent===e;n++)e=t[n];return e}createPointerEvent(t,e,n){let o=this.allocateEvent(so);return this.copyPointerData(t,o),this.copyMouseData(t,o),this.copyData(t,o),o.nativeEvent=t.nativeEvent,o.originalEvent=t,o.target=n??this.hitTest(o.global.x,o.global.y)??this._hitElements[0],typeof e=="string"&&(o.type=e),o}createWheelEvent(t){let e=this.allocateEvent($i);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){let n=this.allocateEvent(so);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=e??n.type,n}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof so&&e instanceof so&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Iu&&e instanceof Iu&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);let e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.defaultPrevented=!1,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}_notifyListeners(t,e){let n=t.currentTarget._events[e];if(n)if("fn"in n)n.once&&t.currentTarget.removeListener(e,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let o=0,a=n.length;o<a&&!t.propagationImmediatelyStopped;o++)n[o].once&&t.currentTarget.removeListener(e,n[o].fn,void 0,!0),n[o].fn.call(n[o].context,t)}}});var zpt,qpt,UC,S0,BC=b(()=>{I();Xk();NC();kC();$C();zpt=1,qpt={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},UC=class LC{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new C0(null),ki.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new so(null),this._rootWheelEvent=new $i(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...LC.defaultEventFeatures},{set:(e,n,o)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=o),e[n]=o,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){let{canvas:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n,LC._defaultEventMode=t.eventMode??"passive",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this._currentCursor===t)return;this._currentCursor=t;let n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.domElement.style,n);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this._rootPointerEvent}_onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=this._normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,o=e.length;n<o;n++){let a=e[n],i=this._bootstrapEvent(this._rootPointerEvent,a);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ki.pointerMoved();let e=this._normalizeToPointerData(t);for(let n=0,o=e.length;n<o;n++){let a=this._bootstrapEvent(this._rootPointerEvent,e[n]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);let n=e!==this.domElement?"outside":"",o=this._normalizeToPointerData(t);for(let a=0,i=o.length;a<i;a++){let u=this._bootstrapEvent(this._rootPointerEvent,o[a]);u.type+=n,this.rootBoundary.mapEvent(u)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=this._normalizeToPointerData(t);for(let n=0,o=e.length;n<o;n++){let a=this._bootstrapEvent(this._rootPointerEvent,e[n]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;let e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this._removeEvents(),this.domElement=t,ki.domElement=t,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;ki.addTickerListener();let t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;ki.removeTickerListener();let t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(t,e,n){let o=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},a=1/this.resolution;t.x=(e-o.left)*(this.domElement.width/o.width)*a,t.y=(n-o.top)*(this.domElement.height/o.height)*a}_normalizeToPointerData(t){let e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,o=t.changedTouches.length;n<o;n++){let a=t.changedTouches[n];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=t.type,e.push(a)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){let n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=zpt),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,e.push(n)}else e.push(t);return e}normalizeWheelEvent(t){let e=this._rootWheelEvent;return this._transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}_bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this._transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=qpt[t.type]||t.type),t}_transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};UC.extension={name:"events",type:[x.WebGLSystem,x.CanvasSystem,x.WebGPUSystem],priority:-1};UC.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};S0=UC});var Jk,Kk=b(()=>{BC();D0();Jk={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(r){this.eventMode=r?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??S0.defaultEventMode},set eventMode(r){this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){let n=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,o=typeof e=="object"?e.signal:void 0,a=typeof e=="object"?e.once===!0:!1,i=typeof t=="function"?void 0:t;r=n?`${r}capture`:r;let u=typeof t=="function"?t:t.handleEvent,l=this;o&&o.addEventListener("abort",()=>{l.off(r,u,i)}),a?l.once(r,u,i):l.on(r,u,i)},removeEventListener(r,t,e){let n=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,o=typeof t=="function"?void 0:t;r=n?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,o)},dispatchEvent(r){if(!(r instanceof El))throw new Error("Container cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}}});var t$=b(()=>{I();di();BC();Kk();dt.add(S0);Ae.mixin(Jk)});var co,Ml=b(()=>{"use strict";co=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(co||{})});var e$,r$=b(()=>{"use strict";e$={createCanvas:(r,t)=>{let e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")}});var n$,Ct,rr=b(()=>{r$();n$=e$,Ct={get(){return n$},set(r){n$=r}}});function pi(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function sm(r){return r.split("?")[0].split("#")[0]}function Qpt(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Hpt(r,t,e){return r.replace(new RegExp(Qpt(t),"g"),e)}function Vpt(r,t){let e="",n=0,o=-1,a=0,i=-1;for(let u=0;u<=r.length;++u){if(u<r.length)i=r.charCodeAt(u);else{if(i===47)break;i=47}if(i===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(e.length<2||n!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){let l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",n=0):(e=e.slice(0,l),n=e.length-1-e.lastIndexOf("/")),o=u,a=0;continue}}else if(e.length===2||e.length===1){e="",n=0,o=u,a=0;continue}}t&&(e.length>0?e+="/..":e="..",n=2)}else e.length>0?e+=`/${r.slice(o+1,u)}`:e=r.slice(o+1,u),n=u-o-1;o=u,a=0}else i===46&&a!==-1?++a:a=-1}return e}var un,rc=b(()=>{rr();un={toPosix(r){return Hpt(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){pi(r),r=this.toPosix(r);let t=/^file:\/\/\//.exec(r);if(t)return t[0];let e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(pi(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;let n=sm(this.toPosix(t??Ct.get().getBaseUrl())),o=sm(this.toPosix(e??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?un.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(pi(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="",e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));let n=r.endsWith("/");return r=Vpt(r,!1),r.length>0&&n&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return pi(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){let n=r[e];if(pi(n),n.length>0)if(t===void 0)t=n;else{let o=r[e-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(pi(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0),e=t===47,n=-1,o=!0,a=this.getProtocol(r),i=r;r=r.slice(a.length);for(let u=r.length-1;u>=1;--u)if(t=r.charCodeAt(u),t===47){if(!o){n=u;break}}else o=!1;return n===-1?e?"/":this.isUrl(i)?a+r:a:e&&n===1?"//":a+r.slice(0,n)},rootname(r){pi(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){let e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){pi(r),t&&pi(t),r=sm(this.toPosix(r));let e=0,n=-1,o=!0,a;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let i=t.length-1,u=-1;for(a=r.length-1;a>=0;--a){let l=r.charCodeAt(a);if(l===47){if(!o){e=a+1;break}}else u===-1&&(o=!1,u=a+1),i>=0&&(l===t.charCodeAt(i)?--i===-1&&(n=a):(i=-1,n=u))}return e===n?n=u:n===-1&&(n=r.length),r.slice(e,n)}for(a=r.length-1;a>=0;--a)if(r.charCodeAt(a)===47){if(!o){e=a+1;break}}else n===-1&&(o=!1,n=a+1);return n===-1?"":r.slice(e,n)},extname(r){pi(r),r=sm(this.toPosix(r));let t=-1,e=0,n=-1,o=!0,a=0;for(let i=r.length-1;i>=0;--i){let u=r.charCodeAt(i);if(u===47){if(!o){e=i+1;break}continue}n===-1&&(o=!1,n=i+1),u===46?t===-1?t=i:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||n===-1||a===0||a===1&&t===n-1&&t===e+1?"":r.slice(t,n)},parse(r){pi(r);let t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=sm(this.toPosix(r));let e=r.charCodeAt(0),n=this.isAbsolute(r),o,a="";t.root=this.rootname(r),n||this.hasProtocol(r)?o=1:o=0;let i=-1,u=0,l=-1,s=!0,c=r.length-1,f=0;for(;c>=o;--c){if(e=r.charCodeAt(c),e===47){if(!s){u=c+1;break}continue}l===-1&&(s=!1,l=c+1),e===46?i===-1?i=c:f!==1&&(f=1):i!==-1&&(f=-1)}return i===-1||l===-1||f===0||f===1&&i===l-1&&i===u+1?l!==-1&&(u===0&&n?t.base=t.name=r.slice(1,l):t.base=t.name=r.slice(u,l)):(u===0&&n?(t.name=r.slice(1,i),t.base=r.slice(1,l)):(t.name=r.slice(u,i),t.base=r.slice(u,l)),t.ext=r.slice(i,l)),t.dir=this.dirname(r),a&&(t.dir=a+t.dir),t},sep:"/",delimiter:":",joinExtensions:[".html"]}});var fo,cm=b(()=>{"use strict";fo=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(n=>typeof n=="string"||e?t(n):n):r)});function o$(r,t,e,n,o){let a=t[e];for(let i=0;i<a.length;i++){let u=a[i];e<t.length-1?o$(r.replace(n[e],u),t,e+1,n,o):o.push(r.replace(n[e],u))}}function a$(r){let t=/\{(.*?)\}/g,e=r.match(t),n=[];if(e){let o=[];e.forEach(a=>{let i=a.substring(1,a.length-1).split(",");o.push(i)}),o$(r,o,0,e,n)}else n.push(r);return n}var i$=b(()=>{"use strict"});var nc,O0=b(()=>{"use strict";nc=r=>!Array.isArray(r)});function jpt(r){return r.split(".").pop().split("?").shift().split("#").shift()}var ua,Yf=b(()=>{er();rc();cm();i$();O0();ua=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{let e=t;this._defaultSearchParams=Object.keys(e).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`).join("&")}}getAlias(t){let{alias:e,src:n}=t;return fo(e||n,a=>typeof a=="string"?a:Array.isArray(a)?a.map(i=>i?.src??i):a?.src?a.src:a,!0)}addManifest(t){this._manifest&&ct("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){let n=[],o=e;Array.isArray(e)||(o=Object.entries(e).map(([a,i])=>typeof i=="string"||Array.isArray(i)?{alias:a,src:i}:{alias:a,...i})),o.forEach(a=>{let i=a.src,u=a.alias,l;if(typeof u=="string"){let s=this._createBundleAssetId(t,u);n.push(s),l=[u,s]}else{let s=u.map(c=>this._createBundleAssetId(t,c));n.push(...s),l=[...u,...s]}this.add({...a,alias:l,src:i})}),this._bundles[t]=n}add(t){let e=[];Array.isArray(t)?e.push(...t):e.push(t);let n;n=a=>{this.hasKey(a)&&ct(`[Resolver] already has key: ${a} overwriting`)},fo(e).forEach(a=>{let{src:i}=a,{data:u,format:l,loadParser:s}=a,c=fo(i).map(p=>typeof p=="string"?a$(p):Array.isArray(p)?p:[p]),f=this.getAlias(a);Array.isArray(f)?f.forEach(n):n(f);let d=[];c.forEach(p=>{p.forEach(h=>{let m={};if(typeof h!="object"){m.src=h;for(let _=0;_<this._parsers.length;_++){let y=this._parsers[_];if(y.test(h)){m=y.parse(h);break}}}else u=h.data??u,l=h.format??l,s=h.loadParser??s,m={...m,...h};if(!f)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this._buildResolvedAsset(m,{aliases:f,data:u,format:l,loadParser:s}),d.push(m)})}),f.forEach(p=>{this._assetMap[p]=d})})}resolveBundle(t){let e=nc(t);t=fo(t);let n={};return t.forEach(o=>{let a=this._bundles[o];if(a){let i=this.resolve(a),u={};for(let l in i){let s=i[l];u[this._extractAssetIdFromBundle(o,l)]=s}n[o]=u}}),e?n[t[0]]:n}resolveUrl(t){let e=this.resolve(t);if(typeof t!="string"){let n={};for(let o in e)n[o]=e[o].src;return n}return e.src}resolve(t){let e=nc(t);t=fo(t);let n={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let a=this._assetMap[o],i=this._getPreferredOrder(a);i?.priority.forEach(u=>{i.params[u].forEach(l=>{let s=a.filter(c=>c[u]?c[u]===l:!1);s.length&&(a=s)})}),this._resolverHash[o]=a[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});n[o]=this._resolverHash[o]}),e?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){let n=t[0],o=this._preferredOrder.find(a=>a.params.format.includes(n.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;let e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){let{aliases:n,data:o,loadParser:a,format:i}=e;return(this._basePath||this._rootPath)&&(t.src=un.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=n??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=a??t.loadParser,t.format=i??t.format??jpt(t.src),t}};ua.RETINA_PREFIX=/@([0-9\.]+)x/});var fm,WC=b(()=>{"use strict";fm=(r,t)=>{let e=t.split("?")[1];return e&&(r+=`?${e}`),r}});function Zpt(){for(let r=0;r<16;r++){let t=[];GC.push(t);for(let e=0;e<16;e++){let n=E0(oc[r]*oc[e]+ic[r]*ac[e]),o=E0(ac[r]*oc[e]+uc[r]*ac[e]),a=E0(oc[r]*ic[e]+ic[r]*uc[e]),i=E0(ac[r]*ic[e]+uc[r]*uc[e]);for(let u=0;u<16;u++)if(oc[u]===n&&ac[u]===o&&ic[u]===a&&uc[u]===i){t.push(u);break}}}for(let r=0;r<16;r++){let t=new J;t.set(oc[r],ac[r],ic[r],uc[r],0,0),u$.push(t)}}var oc,ac,ic,uc,GC,u$,E0,vr,l$=b(()=>{Oe();oc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ac=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ic=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],uc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],GC=[],u$=[],E0=Math.sign;Zpt();vr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>oc[r],uY:r=>ac[r],vX:r=>ic[r],vY:r=>uc[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>GC[r][t],sub:(r,t)=>GC[r][vr.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?vr.S:vr.N:Math.abs(t)*2<=Math.abs(r)?r>0?vr.E:vr.W:t>0?r>0?vr.SE:vr.SW:r>0?vr.NE:vr.NW,matrixAppendRotationInv:(r,t,e=0,n=0)=>{let o=u$[vr.inv(t)];o.tx=e,o.ty=n,r.append(o)}}});var zC,s$=b(()=>{"use strict";zC=()=>{}});function Nu(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function qC(r){return!(r&r-1)&&!!r}var dm=b(()=>{"use strict"});function c$(r){let t={};for(let e in r)r[e]!==void 0&&(t[e]=r[e]);return t}var f$=b(()=>{"use strict"});function Ypt(r){let t=d$[r];return t===void 0&&(d$[r]=be("resource")),t}var d$,p$,F0,QC=b(()=>{jn();Yn();Vr();d$=Object.create(null);p$=class h$ extends Ze{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...h$.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Ut(Ht,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Ypt(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};p$.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};F0=p$});var m$,ke,Uo=b(()=>{jn();dm();f$();Yn();QC();m$=class v$ extends Ze{constructor(t={}){super(),this.options=t,this.uid=be("textureSource"),this._resourceType="textureSource",this._resourceId=be("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...v$.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new F0(c$(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=be("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){let{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,n){n=n||this._resolution,t=t||this.width,e=e||this.height;let o=Math.round(t*n),a=Math.round(e*n);return this.width=o/n,this.height=a/n,this._resolution=n,this.pixelWidth===o&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=a,this.emit("resize",this),this._resourceId=be("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=qC(this.pixelWidth)&&qC(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};m$.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};ke=m$});var lc,HC=b(()=>{I();Uo();lc=class extends ke{constructor(t){let e=t.resource||new Float32Array(t.width*t.height*4),n=t.format;n||(e instanceof Float32Array?n="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?n="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?n="rgba16uint":(e instanceof Int8Array,n="bgra8unorm")),super({...t,resource:e,format:n}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}};lc.extension=x.TextureSource});var g$,Xf,VC=b(()=>{Oe();g$=new J,Xf=class{constructor(t,e){this.mapCoord=new J,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);let n=this.mapCoord;for(let o=0;o<t.length;o+=2){let a=t[o],i=t[o+1];e[o]=a*n.a+i*n.c+n.tx,e[o+1]=a*n.b+i*n.d+n.ty}return e}update(){let t=this._texture;this._updateID++;let e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);let n=t.orig,o=t.trim;o&&(g$.set(n.width/o.width,0,0,n.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(g$));let a=t.source,i=this.uClampFrame,u=this.clampMargin/a._resolution,l=this.clampOffset/a._resolution;return i[0]=(t.frame.x+u+l)/a.width,i[1]=(t.frame.y+u+l)/a.height,i[2]=(t.frame.x+t.frame.width-u+l)/a.width,i[3]=(t.frame.y+t.frame.height-u+l)/a.height,this.uClampOffset[0]=this.clampOffset/a.pixelWidth,this.uClampOffset[1]=this.clampOffset/a.pixelHeight,this.isSimple=t.frame.width===a.width&&t.frame.height===a.height&&t.rotate===0,!0}}});var Y,Be=b(()=>{jn();l$();An();Yn();Vr();s$();HC();Uo();VC();Y=class extends Ze{constructor({source:t,label:e,frame:n,orig:o,trim:a,defaultAnchor:i,defaultBorders:u,rotate:l,dynamic:s}={}){if(super(),this.uid=be("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new de,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new ke,this.noFrame=!n,n)this.frame.copyFrom(n);else{let{width:c,height:f}=this._source;this.frame.width=c,this.frame.height=f}this.orig=o||this.frame,this.trim=a,this.rotate=l??0,this.defaultAnchor=i,this.defaultBorders=u,this.destroyed=!1,this.dynamic=s||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Xf(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:t,frame:e}=this,{width:n,height:o}=this._source,a=e.x/n,i=e.y/o,u=e.width/n,l=e.height/o,s=this.rotate;if(s){let c=u/2,f=l/2,d=a+c,p=i+f;s=vr.add(s,vr.NW),t.x0=d+c*vr.uX(s),t.y0=p+f*vr.uY(s),s=vr.add(s,2),t.x1=d+c*vr.uX(s),t.y1=p+f*vr.uY(s),s=vr.add(s,2),t.x2=d+c*vr.uX(s),t.y2=p+f*vr.uY(s),s=vr.add(s,2),t.x3=d+c*vr.uX(s),t.y3=p+f*vr.uY(s)}else t.x0=a,t.y0=i,t.x1=a+u,t.y1=i,t.x2=a+u,t.y2=i+l,t.x3=a,t.y3=i+l}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Ut(Ht,"Texture.baseTexture is now Texture.source"),this._source}};Y.EMPTY=new Y({label:"EMPTY",source:new ke({label:"EMPTY"})});Y.EMPTY.destroy=zC;Y.WHITE=new Y({source:new lc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Y.WHITE.destroy=zC});var _$,jC,y$=b(()=>{An();Be();_$=class pm{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof Y?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;let n=parseFloat(e.meta.scale);n?(this.resolution=n,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=pm.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t,n=pm.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){let o=this._frameKeys[e],a=this._frames[o],i=a.frame;if(i){let u=null,l=null,s=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,c=new de(0,0,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution);a.rotated?u=new de(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.h)/this.resolution,Math.floor(i.w)/this.resolution):u=new de(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(l=new de(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution)),this.textures[o]=new Y({source:this.textureSource,frame:u,orig:c,trim:l,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:o.toString()})}e++}}_processAnimations(){let t=this.data.animations||{};for(let e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++){let o=t[e][n];this.animations[e].push(this.textures[o])}}}_parseComplete(){let t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*pm.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*pm.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(let e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};_$.BATCH_SIZE=1e3;jC=_$});function b$(r,t,e){let n={};if(r.forEach(o=>{n[o]=t}),Object.keys(t.textures).forEach(o=>{n[o]=t.textures[o]}),!e){let o=un.dirname(r[0]);t.linkedSheets.forEach((a,i)=>{let u=b$([`${o}/${t.data.meta.related_multi_packs[i]}`],a,!0);Object.assign(n,u)})}return n}var Xpt,D$,w$=b(()=>{Ml();Yf();WC();I();Be();rc();y$();Xpt=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];D$={extension:x.Asset,cache:{test:r=>r instanceof jC,getCacheableAssets:(r,t)=>b$(r,t,!1)},resolver:{extension:{type:x.ResolveParser,name:"resolveSpritesheet"},test:r=>{let e=r.split("?")[0].split("."),n=e.pop(),o=e.pop();return n==="json"&&Xpt.includes(o)},parse:r=>{let t=r.split(".");return{resolution:parseFloat(ua.RETINA_PREFIX.exec(r)?.[1]??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:x.LoadParser,priority:co.Normal,name:"spritesheetLoader"},async testParse(r,t){return un.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){let{texture:n,imageFilename:o}=t?.data??{},a=un.dirname(t.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let i;if(n instanceof Y)i=n;else{let s=fm(a+(o??r.meta.image),t.src);i=(await e.load([s]))[s]}let u=new jC(i.source,r);await u.parse();let l=r?.meta?.related_multi_packs;if(Array.isArray(l)){let s=[];for(let f of l){if(typeof f!="string")continue;let d=a+f;t.data?.ignoreMultiPack||(d=fm(d,t.src),s.push(e.load({src:d,data:{ignoreMultiPack:!0}})))}let c=await Promise.all(s);u.linkedSheets=c,c.forEach(f=>{f.linkedSheets=[u].concat(u.linkedSheets.filter(d=>d!==f))})}return u},async unload(r,t,e){await e.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}}});var M0=b(()=>{I();w$();dt.add(D$)});function sc(r,t,e,n){let{width:o,height:a}=e.orig,i=e.trim;if(i){let u=i.width,l=i.height;r.minX=i.x-t._x*o-n,r.maxX=r.minX+u,r.minY=i.y-t._y*a-n,r.maxY=r.minY+l}else r.minX=-t._x*o-n,r.maxX=r.minX+o,r.minY=-t._y*a-n,r.maxY=r.minY+a}var A0=b(()=>{"use strict"});var Al,P0=b(()=>{Aa();di();Al=class extends Ae{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=0,this._lastInstructionTick=-1,this._bounds=new fr(0,1,0,0),this._boundsDirty=!0}_updateBounds(){}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){let e=this.bounds,{x:n,y:o}=t;return n>=e.minX&&n<=e.maxX&&o>=e.minY&&o<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this.didViewUpdate)return;this.didViewUpdate=!0;let t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}}});var Li,I0=b(()=>{h0();Be();A0();P0();Li=class r extends Al{constructor(t=Y.EMPTY){t instanceof Y&&(t={texture:t});let{texture:e=Y.EMPTY,anchor:n,roundPixels:o,width:a,height:i,...u}=t;super({label:"Sprite",...u}),this.renderPipeId="sprite",this.batched=!0,this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBoundsDirty=!0,this._anchor=new Mn({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=o??!1,a!==void 0&&(this.width=a),i!==void 0&&(this.height=i)}static from(t,e=!1){return t instanceof Y?new r(t):new r(Y.from(t,e))}set texture(t){t||(t=Y.EMPTY);let e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){let e=this.sourceBounds;return t.x>=e.maxX&&t.x<=e.minX&&t.y>=e.maxY&&t.y<=e.minY}addBounds(t){let e=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}onViewUpdate(){this._sourceBoundsDirty=this._boundsDirty=!0,super.onViewUpdate()}_updateBounds(){sc(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){let t=this._anchor,e=this._texture,n=this._sourceBounds,{width:o,height:a}=e.orig;n.maxX=-t._x*o,n.minX=n.maxX+o,n.maxY=-t._y*a,n.minY=n.maxY+a}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){let n=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(n)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}});function N0(r,t,e){let n=Jpt;r.measurable=!0,qf(r,e,n),t.addBoundsMask(n),r.measurable=!1}var Jpt,ZC=b(()=>{Aa();em();Jpt=new fr});function k0(r,t,e){let n=aa.get();r.measurable=!0;let o=Pa.get().identity(),a=x$(r,e,o);Qf(r,n,a),r.measurable=!1,t.addBoundsMask(n),Pa.return(o),aa.return(n)}function x$(r,t,e){return r?(r!==t&&(x$(r.parent,t,e),r.updateLocalTransform(),e.append(r.localTransform)),e):(ct("Mask bounds, renderable is not inside the root container"),e)}var YC=b(()=>{y0();Kh();er()});var hm,T$=b(()=>{I();I0();ZC();YC();hm=class{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Li),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||N0(this.mask,t,e)}addLocalBounds(t,e){k0(this.mask,t,e)}containsPoint(t,e){let n=this.mask;return e(n,t)}destroy(){this.reset()}static test(t){return t instanceof Li}};hm.extension=x.MaskEffect});var mm,R$=b(()=>{I();mm=class{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}};mm.extension=x.MaskEffect});var vm,C$=b(()=>{I();di();ZC();YC();vm=class{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){N0(this.mask,t,e)}addLocalBounds(t,e){k0(this.mask,t,e)}containsPoint(t,e){let n=this.mask;return e(n,t)}destroy(){this.reset()}static test(t){return t instanceof Ae}};vm.extension=x.MaskEffect});var Bo,Jf=b(()=>{rr();I();Uo();Bo=class extends ke{constructor(t){t.resource||(t.resource=Ct.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity;let e=t.resource;(this.pixelWidth!==e.width||this.pixelWidth!==e.height)&&this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,n=this._resolution){let o=super.resize(t,e,n);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}};Bo.extension=x.TextureSource});var la,Kf=b(()=>{rr();I();er();Uo();la=class extends ke{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){let e=Ct.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,ct("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}};la.extension=x.TextureSource});async function $0(){return XC??(XC=(async()=>{let t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";let e=await new Promise(i=>{let u=document.createElement("video");u.onloadeddata=()=>i(u),u.onerror=()=>i(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!e)return"premultiply-alpha-on-upload";let n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);let o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);let a=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,a),t.deleteFramebuffer(o),t.deleteTexture(n),t.getExtension("WEBGL_lose_context")?.loseContext(),a[0]<=a[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),XC}var XC,JC=b(()=>{"use strict"});var L0,td,KC=b(()=>{I();im();JC();Uo();L0=class S$ extends ke{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...S$.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let t=Lo.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await $0(),this._load=new Promise((n,o)=>{this.isValid?n(this):(this._resolve=n,this._reject=o,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){let t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Lo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Lo.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Lo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};L0.extension=x.TextureSource;L0.defaultOptions={...ke.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};L0.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};td=L0});var t2,Pe,Pl=b(()=>{er();cm();t2=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let e=this._cache.get(t);return e||ct(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){let n=fo(t),o;for(let l=0;l<this.parsers.length;l++){let s=this.parsers[l];if(s.test(e)){o=s.getCacheableAssets(n,e);break}}let a=new Map(Object.entries(o||{}));o||n.forEach(l=>{a.set(l,e)});let i=[...a.keys()],u={cacheKeys:i,keys:n};n.forEach(l=>{this._cacheMap.set(l,u)}),i.forEach(l=>{let s=o?o[l]:e;this._cache.has(l)&&this._cache.get(l)!==s&&ct("[Cache] already has key:",l),this._cache.set(l,a.get(l))})}remove(t){if(!this._cacheMap.has(t)){ct(`[Assets] Asset id ${t} was not found in the Cache`);return}let e=this._cacheMap.get(t);e.cacheKeys.forEach(o=>{this._cache.delete(o)}),e.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}},Pe=new t2});function O$(r={}){let t=r&&r.resource,e=t?r.resource:r,n=t?r:{resource:r};for(let o=0;o<e2.length;o++){let a=e2[o];if(a.test(e))return new a(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function E$(r={},t=!1){let e=r&&r.resource,n=e?r.resource:r,o=e?r:{resource:r};if(!t&&Pe.has(n))return Pe.get(n);let a=new Y({source:O$(o)});return a.on("destroy",()=>{Pe.has(n)&&Pe.remove(n)}),t||Pe.set(n,a),a}function F$(r,t=!1){return typeof r=="string"?Pe.get(r):r instanceof ke?new Y({source:r}):E$(r,t)}var e2,r2=b(()=>{Pl();I();Uo();Be();e2=[];dt.handleByList(x.TextureSource,e2);Y.from=F$;ke.from=O$});var U0=b(()=>{I();T$();R$();C$();HC();Jf();Kf();KC();r2();dt.add(hm,mm,vm,td,la,Bo,lc)});var yn,Il=b(()=>{"use strict";yn=class{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(let n in t){let o=t[n];this.setResource(o,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let t=[],e=0;for(let n in this.resources)t[e++]=this.resources[n]._resourceId;this._key=t.join("|")}setResource(t,e){let n=this.resources[e];t!==n&&(n&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){let e=this.resources;for(let n in e)e[n]._touched=t}destroy(){let t=this.resources;for(let e in t)t[e].off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){let e=this.resources;for(let n in e)e[n]===t&&(e[n]=null)}else this._updateKey()}}});function W0(){return(!B0||B0?.isContextLost())&&(B0=Ct.get().createCanvas().getContext("webgl",{})),B0}var B0,n2=b(()=>{rr()});function tht(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function M$(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){let n=Kpt.replace(/%forloop%/gi,tht(r));if(t.shaderSource(e,n),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}}finally{t.deleteShader(e)}return r}var Kpt,A$=b(()=>{"use strict";Kpt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`)});function Ia(){if(ed)return ed;let r=W0();return ed=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),ed=M$(ed,r),r.getExtension("WEBGL_lose_context")?.loseContext(),ed}var ed,cc=b(()=>{n2();A$();ed=null});function rd(r,t){let e=2166136261;for(let n=0;n<t;n++)e^=r[n].uid,e=Math.imul(e,16777619),e>>>=0;return P$[e]||eht(r,t,e)}function eht(r,t,e){let n={},o=0;o2||(o2=Ia());for(let i=0;i<o2;i++){let u=i<t?r[i]:Y.EMPTY.source;n[o++]=u.source,n[o++]=u.style}let a=new yn(n);return P$[e]=a,a}var P$,o2,G0=b(()=>{Il();Be();cc();P$={};o2=0});var Ui,a2=b(()=>{"use strict";Ui=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}});function gm(r,t){let e=r.byteLength/8|0,n=new Float64Array(r,0,e);new Float64Array(t,0,e).set(n);let a=r.byteLength-e*8;if(a>0){let i=new Uint8Array(r,e*8,a);new Uint8Array(t,e*8,a).set(i)}}var i2=b(()=>{"use strict"});var I$,lr,fc=b(()=>{"use strict";I$={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},lr=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(lr||{})});function ku(r,t){return t.alphaMode==="no-premultiply-alpha"&&I$[r]||r}var _m=b(()=>{fc()});var z0,N$=b(()=>{"use strict";z0=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){let e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}});function k$(){return l2>0?L$[--l2]:new u2}function $$(r){L$[l2++]=r}var u2,L$,l2,ym,U$,B$,W$=b(()=>{Yn();a2();i2();_m();cc();N$();u2=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new z0,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},L$=[],l2=0;ym=0,U$=class q0{constructor(t={}){this.uid=be("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],q0.defaultOptions.maxTextures=q0.defaultOptions.maxTextures??Ia(),t={...q0.defaultOptions,...t};let{maxTextures:e,attributesInitialSize:n,indicesInitialSize:o}=t;this.attributeBuffer=new Ui(n*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)$$(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){let n=t._batch.textures.ids[e._source.uid];return!n&&n!==0?!1:(t._textureId=n,t.texture=e,!0)}updateElement(t){this.dirty=!0;let e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){let e=this._elements;if(!e[this.elementStart])return;let n=k$(),o=n.textures;o.clear();let a=e[this.elementStart],i=ku(a.blendMode,a.texture._source);this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let u=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,s=this.indexBuffer,c=this._batchIndexSize,f=this._batchIndexStart,d="startBatch",p=this.maxTextures;for(let h=this.elementStart;h<this.elementSize;++h){let m=e[h];e[h]=null;let y=m.texture._source,D=ku(m.blendMode,y),w=i!==D;if(y._batchTick===ym&&!w){m._textureId=y._textureBindLocation,c+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,u,l,m._attributeStart,m._textureId),this.packQuadIndex(s,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,u,l,m._attributeStart,m._textureId),this.packIndex(m,s,m._indexStart,m._attributeStart/this.vertexSize)),m._batch=n;continue}y._batchTick=ym,(o.count>=p||w)&&(this._finishBatch(n,f,c-f,o,i,t,d),d="renderBatch",f=c,i=D,n=k$(),o=n.textures,o.clear(),++ym),m._textureId=y._textureBindLocation=o.count,o.ids[y.uid]=o.count,o.textures[o.count++]=y,m._batch=n,c+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,u,l,m._attributeStart,m._textureId),this.packQuadIndex(s,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,u,l,m._attributeStart,m._textureId),this.packIndex(m,s,m._indexStart,m._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(n,f,c-f,o,i,t,d),f=c,++ym),this.elementStart=this.elementSize,this._batchIndexStart=f,this._batchIndexSize=c}_finishBatch(t,e,n,o,a,i,u){t.gpuBindGroup=null,t.bindGroup=null,t.action=u,t.batcher=this,t.textures=o,t.blendMode=a,t.start=e,t.size=n,++ym,this.batches[this.batchIndex++]=t,i.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){let e=Math.max(t,this.attributeBuffer.size*2),n=new Ui(e);gm(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(t){let e=this.indexBuffer,n=Math.max(t,e.length*1.5);n+=n%2;let o=n>65535?new Uint32Array(n):new Uint16Array(n);if(o.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let a=0;a<e.length;a++)o[a]=e[a];else gm(e.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,e,n){t[e]=n+0,t[e+1]=n+1,t[e+2]=n+2,t[e+3]=n+0,t[e+4]=n+2,t[e+5]=n+3}packIndex(t,e,n,o){let a=t.indices,i=t.indexSize,u=t.indexOffset,l=t.attributeOffset;for(let s=0;s<i;s++)e[n++]=o+a[s+u]-l}destroy(){for(let t=0;t<this.batches.length;t++)$$(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};U$.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};B$=U$});var le,$u=b(()=>{"use strict";le=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(le||{})});var Or,Nl=b(()=>{jn();Yn();$u();Or=class extends Ze{constructor(t){let{data:e,size:n}=t,{usage:o,label:a,shrinkToFit:i}=t;super(),this.uid=be("buffer"),this._resourceType="buffer",this._resourceId=be("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,n=n??e?.byteLength;let u=!!e;this.descriptor={size:n,usage:o,mappedAtCreation:u,label:a},this.shrinkToFit=i??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get static(){return!!(this.descriptor.usage&le.STATIC)}set static(t){t?this.descriptor.usage|=le.STATIC:this.descriptor.usage&=~le.STATIC}setDataWithSize(t,e,n){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){n&&this.emit("update",this);return}let o=this._data;if(this._data=t,o.length!==t.length){!this.shrinkToFit&&t.byteLength<o.byteLength?n&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=be("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}});function s2(r,t){if(!(r instanceof Or)){let e=t?le.INDEX:le.VERTEX;r instanceof Array&&(t?(r=new Uint32Array(r),e=le.INDEX|le.COPY_DST):(r=new Float32Array(r),e=le.VERTEX|le.COPY_DST)),r=new Or({data:r,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return r}var G$=b(()=>{Nl();$u()});function z$(r,t,e){let n=r.getAttribute(t);if(!n)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;let o=n.buffer.data,a=1/0,i=1/0,u=-1/0,l=-1/0,s=o.BYTES_PER_ELEMENT,c=(n.offset||0)/s,f=(n.stride||2*4)/s;for(let d=c;d<o.length;d+=f){let p=o[d],h=o[d+1];p>u&&(u=p),h>l&&(l=h),p<a&&(a=p),h<i&&(i=h)}return e.minX=a,e.minY=i,e.maxX=u,e.maxY=l,e}var q$=b(()=>{"use strict"});function rht(r){return(r instanceof Or||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=s2(r.buffer,!1),r}var Na,nd=b(()=>{jn();Aa();Yn();Nl();G$();q$();Na=class extends Ze{constructor(t={}){super(),this.uid=be("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new fr,this._boundsDirty=!0;let{attributes:e,indexBuffer:n,topology:o}=t;if(this.buffers=[],this.attributes={},e)for(let a in e)this.addAttribute(a,e[a]);this.instanceCount=t.instanceCount||1,n&&this.addIndex(n),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(let t in this.attributes){let e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){let n=rht(e);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=n}addIndex(t){this.indexBuffer=s2(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,z$(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}});var nht,oht,Q0,Q$=b(()=>{Nl();$u();nd();nht=new Float32Array(1),oht=new Uint32Array(1),Q0=class extends Na{constructor(){let e=new Or({data:nht,label:"attribute-batch-buffer",usage:le.VERTEX|le.COPY_DST,shrinkToFit:!1}),n=new Or({data:oht,label:"index-batch-buffer",usage:le.INDEX|le.COPY_DST,shrinkToFit:!1}),o=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:o,offset:0},aUV:{buffer:e,format:"float32x2",stride:o,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:o,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:o,offset:5*4}},indexBuffer:n})}}});function Lu(r,t){let e=H$[r];return e===void 0&&(c2[t]===void 0&&(c2[t]=1),H$[r]=e=c2[t]++),e}var c2,H$,bm=b(()=>{"use strict";c2=Object.create(null),H$=Object.create(null)});function V$(){if(!H0){H0="mediump";let r=W0();r&&r.getShaderPrecisionFormat&&(H0=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return H0}var H0,j$=b(()=>{n2()});function Z$(r,t,e){return t?r:e?(r=r.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}var Y$=b(()=>{"use strict"});function X$(r,t,e){let n=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&n!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(n!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var J$=b(()=>{"use strict"});function K$(r,t){return t?`#version 300 es
${r}`:r}var tL=b(()=>{"use strict"});function eL(r,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";let n=e?aht:iht;return n[t]?(n[t]++,t+=`-${n[t]}`):n[t]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${t}`}
${r}`}var aht,iht,rL=b(()=>{"use strict";aht={},iht={}});function nL(r,t){return t?r.replace("#version 300 es",""):r}var oL=b(()=>{"use strict"});var f2,d2,aL,ka,dc=b(()=>{bm();j$();Y$();J$();tL();rL();oL();f2={stripVersion:nL,ensurePrecision:X$,addProgramDefines:Z$,setProgramName:eL,insertVersion:K$},d2=Object.create(null),aL=class p2{constructor(t){t={...p2.defaultOptions,...t};let e=t.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:V$()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e},o=t.fragment,a=t.vertex;Object.keys(f2).forEach(i=>{let u=n[i];o=f2[i](o,u,!0),a=f2[i](a,u,!1)}),this.fragment=o,this.vertex=a,this._key=Lu(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){let e=`${t.vertex}:${t.fragment}`;return d2[e]||(d2[e]=new p2(t)),d2[e]}};aL.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};ka=aL});function Wo(r){return iL[r]??iL.float32}var iL,pc=b(()=>{"use strict";iL={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}}});function uL({source:r,entryPoint:t}){let e={},n=r.indexOf(`fn ${t}`);if(n!==-1){let o=r.indexOf("->",n);if(o!==-1){let a=r.substring(n,o),i=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,u;for(;(u=i.exec(a))!==null;){let l=uht[u[3]]??"float32";e[u[2]]={location:parseInt(u[1],10),format:l,stride:Wo(l).stride,offset:0,instance:!1,start:0}}}}return e}var uht,lL=b(()=>{pc();uht={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"}});function V0(r){let t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,i=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,s=r.match(t)?.map(f=>({group:parseInt(f.match(e)[1],10),binding:parseInt(f.match(n)[1],10),name:f.match(o)[2],isUniform:f.match(o)[1]==="<uniform>",type:f.match(a)[1]}));if(!s)return{groups:[],structs:[]};let c=r.match(i)?.map(f=>{let d=f.match(l)[1],p=f.match(u).reduce((h,m)=>{let[_,y]=m.split(":");return h[_.trim()]=y.trim(),h},{});return p?{name:d,members:p}:null}).filter(({name:f})=>s.some(d=>d.type===f))??[];return{groups:s,structs:c}}var sL=b(()=>{"use strict"});var od,cL=b(()=>{"use strict";od=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(od||{})});function fL({groups:r}){let t=[];for(let e=0;e<r.length;e++){let n=r[e];t[n.group]||(t[n.group]=[]),n.isUniform?t[n.group].push({binding:n.binding,visibility:od.VERTEX|od.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?t[n.group].push({binding:n.binding,visibility:od.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&t[n.group].push({binding:n.binding,visibility:od.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}var dL=b(()=>{cL()});function pL({groups:r}){let t=[];for(let e=0;e<r.length;e++){let n=r[e];t[n.group]||(t[n.group]={}),t[n.group][n.name]=n.binding}return t}var hL=b(()=>{"use strict"});function mL(r,t){let e=new Set,n=new Set,o=[...r.structs,...t.structs].filter(i=>e.has(i.name)?!1:(e.add(i.name),!0)),a=[...r.groups,...t.groups].filter(i=>{let u=`${i.name}-${i.binding}`;return n.has(u)?!1:(n.add(u),!0)});return{structs:o,groups:a}}var vL=b(()=>{"use strict"});var h2,$a,ad=b(()=>{bm();lL();sL();dL();hL();vL();h2=Object.create(null),$a=class r{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;let{fragment:e,vertex:n,layout:o,gpuLayout:a,name:i}=t;if(this.name=i,this.fragment=e,this.vertex=n,e.source===n.source){let u=V0(e.source);this.structsAndGroups=u}else{let u=V0(n.source),l=V0(e.source);this.structsAndGroups=mL(u,l)}this.layout=o??pL(this.structsAndGroups),this.gpuLayout=a??fL(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:t,fragment:e}=this,n=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=Lu(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=uL(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){let e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return h2[e]||(h2[e]=new r(t)),h2[e]}}});function m2(r,t,e){if(r)for(let n in r){let o=n.toLocaleLowerCase(),a=t[o];if(a){let i=r[n];n==="header"&&(i=i.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&a.push(`//----${e}----//`),a.push(i)}else ct(`${n} placement hook does not exist in shader`)}}var gL=b(()=>{er()});function v2(r){let t={};return(r.match(lht)?.map(n=>n.replace(/[{()}]/g,""))??[]).forEach(n=>{t[n]=[]}),t}var lht,_L=b(()=>{"use strict";lht=/\{\{(.*?)\}\}/g});function yL(r,t){let e,n=/@in\s+([^;]+);/g;for(;(e=n.exec(r))!==null;)t.push(e[1])}function g2(r,t,e=!1){let n=[];yL(t,n),r.forEach(u=>{u.header&&yL(u.header,n)});let o=n;e&&o.sort();let a=o.map((u,l)=>`       @location(${l}) ${u},`).join(`
`),i=t.replace(/@in\s+[^;]+;\s*/g,"");return i=i.replace("{{in}}",`
${a}
`),i}var bL=b(()=>{"use strict"});function DL(r,t){let e,n=/@out\s+([^;]+);/g;for(;(e=n.exec(r))!==null;)t.push(e[1])}function sht(r){let e=/\b(\w+)\s*:/g.exec(r);return e?e[1]:""}function cht(r){let t=/@.*?\s+/g;return r.replace(t,"")}function wL(r,t){let e=[];DL(t,e),r.forEach(l=>{l.header&&DL(l.header,e)});let n=0,o=e.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${n++}) ${l}`).join(`,
`),a=e.sort().map(l=>`       var ${cht(l)};`).join(`
`),i=`return VSOutput(
                ${e.sort().map(l=>` ${sht(l)}`).join(`,
`)});`,u=t.replace(/@out\s+[^;]+;\s*/g,"");return u=u.replace("{{struct}}",`
${o}
`),u=u.replace("{{start}}",`
${a}
`),u=u.replace("{{return}}",`
${i}
`),u}var xL=b(()=>{"use strict"});function _2(r,t){let e=r;for(let n in t){let o=t[n];o.join(`
`).length?e=e.replace(`{{${n}}}`,`//-----${n} START-----//
${o.join(`
`)}
//----${n} FINISH----//`):e=e.replace(`{{${n}}}`,"")}return e}var TL=b(()=>{"use strict"});function RL({template:r,bits:t}){let e=SL(r,t);if(kl[e])return kl[e];let{vertex:n,fragment:o}=dht(r,t);return kl[e]=OL(n,o,t),kl[e]}function CL({template:r,bits:t}){let e=SL(r,t);return kl[e]||(kl[e]=OL(r.vertex,r.fragment,t)),kl[e]}function dht(r,t){let e=t.map(i=>i.vertex).filter(i=>!!i),n=t.map(i=>i.fragment).filter(i=>!!i),o=g2(e,r.vertex,!0);o=wL(e,o);let a=g2(n,r.fragment,!0);return{vertex:o,fragment:a}}function SL(r,t){return t.map(e=>(y2.has(e)||y2.set(e,fht++),y2.get(e))).sort((e,n)=>e-n).join("-")+r.vertex+r.fragment}function OL(r,t,e){let n=v2(r),o=v2(t);return e.forEach(a=>{m2(a.vertex,n,a.name),m2(a.fragment,o,a.name)}),{vertex:_2(r,n),fragment:_2(t,o)}}var kl,y2,fht,EL=b(()=>{gL();_L();bL();xL();TL();kl=Object.create(null),y2=new Map,fht=0});var FL,ML,AL,PL,IL=b(()=>{"use strict";FL=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,ML=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,AL=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,PL=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`});var NL,kL,$L=b(()=>{"use strict";NL={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},kL={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}}});function Bi({bits:r,name:t}){let e=RL({template:{fragment:ML,vertex:FL},bits:[NL,...r]});return $a.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function Wi({bits:r,name:t}){return new ka({name:t,...CL({template:{vertex:AL,fragment:PL},bits:[kL,...r]})})}var $l=b(()=>{dc();ad();EL();IL();$L()});var id,ud,Dm=b(()=>{"use strict";id={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},ud={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}}});function pht(r){let t=[];if(r===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let n=0;n<r;n++)t.push(`@group(1) @binding(${e++}) var textureSource${n+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${n+1}: sampler;`)}return t.join(`
`)}function hht(r){let t=[];if(r===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<r;e++)e===r-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function ld(r){return b2[r]||(b2[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${pht(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${hht(r)}
            `}}),b2[r]}function mht(r){let t=[];for(let e=0;e<r;e++)e>0&&t.push("else"),e<r-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function sd(r){return D2[r]||(D2[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${mht(r)}
            `}}),D2[r]}var b2,D2,wm=b(()=>{"use strict";b2={};D2={}});var Gi,zi,Ll=b(()=>{"use strict";Gi={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},zi={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}}});var w2,LL,UL=b(()=>{"use strict";w2=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>"],LL=w2.reduce((r,t)=>(r[t]=!0,r),{})});function BL(r,t){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var WL=b(()=>{"use strict"});var GL,Qe,po=b(()=>{Yn();bm();UL();WL();GL=class zL{constructor(t,e){this._touched=0,this.uid=be("uniform"),this._resourceType="uniformGroup",this._resourceId=be("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...zL.defaultOptions,...e},this.uniformStructures=t;let n={};for(let o in t){let a=t[o];if(a.name=o,a.size=a.size??1,!LL[a.type])throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${w2.join(", ")}`);a.value??(a.value=BL(a.type,a.size)),n[o]=a.value}this.uniforms=n,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=Lu(Object.keys(n).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};GL.defaultOptions={ubo:!1,isStatic:!1};Qe=GL});function cd(r){let t=qL[r];if(t)return t;let e=new Int32Array(r);for(let n=0;n<r;n++)e[n]=n;return t=qL[r]=new Qe({uTextures:{value:e,type:"i32",size:r}},{isStatic:!0}),t}var qL,j0=b(()=>{po();qL={}});var jr,qi=b(()=>{"use strict";jr=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(jr||{})});var Er,hi=b(()=>{jn();dc();Il();ad();qi();po();Er=class r extends Ze{constructor(t){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:n,groups:o,resources:a,compatibleRenderers:i,groupMap:u}=t;this.gpuProgram=e,this.glProgram=n,i===void 0&&(i=0,e&&(i|=jr.WEBGPU),n&&(i|=jr.WEBGL)),this.compatibleRenderers=i;let l={};if(!a&&!o&&(a={}),a&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&o&&!u)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&o&&u)for(let s in u)for(let c in u[s]){let f=u[s][c];l[f]={group:s,binding:c,name:f}}else if(e&&o&&!u){let s=e.structsAndGroups.groups;u={},s.forEach(c=>{u[c.group]=u[c.group]||{},u[c.group][c.binding]=c.name,l[c.name]=c})}else if(a){o={},u={},e&&e.structsAndGroups.groups.forEach(f=>{u[f.group]=u[f.group]||{},u[f.group][f.binding]=f.name,l[f.name]=f});let s=0;for(let c in a)l[c]||(o[99]||(o[99]=new yn,this._ownedBindGroups.push(o[99])),l[c]={group:99,binding:s,name:c},u[99]=u[99]||{},u[99][s]=c,s++);for(let c in a){let f=c,d=a[c];!d.source&&!d._resourceType&&(d=new Qe(d));let p=l[f];p&&(o[p.group]||(o[p.group]=new yn,this._ownedBindGroups.push(o[p.group])),o[p.group].setResource(d,p.binding))}}this.groups=o,this._uniformBindMap=u,this.resources=this._buildResourceAccessor(o,l)}addResource(t,e,n){var o,a;(o=this._uniformBindMap)[e]||(o[e]={}),(a=this._uniformBindMap[e])[n]||(a[n]=t),this.groups[e]||(this.groups[e]=new yn,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){let n={};for(let o in e){let a=e[o];Object.defineProperty(n,a.name,{get(){return t[a.group].getResource(a.binding)},set(i){t[a.group].setResource(i,a.binding)}})}return n}destroy(t=!1){this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(e=>{e.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){let{gpu:e,gl:n,...o}=t,a,i;return e&&(a=$a.from(e)),n&&(i=ka.from(n)),new r({gpuProgram:a,glProgram:i,...o})}}});var Z0,QL=b(()=>{$l();Dm();wm();Ll();j0();hi();Z0=class extends Er{constructor(t){let e=Wi({name:"batch",bits:[ud,sd(t),zi]}),n=Bi({name:"batch",bits:[id,ld(t),Gi]});super({glProgram:e,gpuProgram:n,resources:{batchSamplers:cd(t)}})}}});var HL,VL,xm,x2=b(()=>{I();W$();Q$();QL();HL=null,VL=class jL extends B${constructor(){super(...arguments),this.geometry=new Q0,this.shader=HL||(HL=new Z0(this.maxTextures)),this.name=jL.extension.name,this.vertexSize=6}packAttributes(t,e,n,o,a){let i=a<<16|t.roundPixels&65535,u=t.transform,l=u.a,s=u.b,c=u.c,f=u.d,d=u.tx,p=u.ty,{positions:h,uvs:m}=t,_=t.color,y=t.attributeOffset,D=y+t.attributeSize;for(let w=y;w<D;w++){let T=w*2,R=h[T],C=h[T+1];e[o++]=l*R+c*C+d,e[o++]=f*C+s*R+p,e[o++]=m[T],e[o++]=m[T+1],n[o++]=_,n[o++]=i}}packQuadAttributes(t,e,n,o,a){let i=t.texture,u=t.transform,l=u.a,s=u.b,c=u.c,f=u.d,d=u.tx,p=u.ty,h=t.bounds,m=h.maxX,_=h.minX,y=h.maxY,D=h.minY,w=i.uvs,T=t.color,R=a<<16|t.roundPixels&65535;e[o+0]=l*_+c*D+d,e[o+1]=f*D+s*_+p,e[o+2]=w.x0,e[o+3]=w.y0,n[o+4]=T,n[o+5]=R,e[o+6]=l*m+c*D+d,e[o+7]=f*D+s*m+p,e[o+8]=w.x1,e[o+9]=w.y1,n[o+10]=T,n[o+11]=R,e[o+12]=l*m+c*y+d,e[o+13]=f*y+s*m+p,e[o+14]=w.x2,e[o+15]=w.y2,n[o+16]=T,n[o+17]=R,e[o+18]=l*_+c*y+d,e[o+19]=f*y+s*_+p,e[o+20]=w.x3,e[o+21]=w.y3,n[o+22]=T,n[o+23]=R}};VL.extension={type:[x.Batcher],name:"default"};xm=VL});function ZL(r,t,e,n,o,a,i,u=null){let l=0;e*=t,o*=a;let s=u.a,c=u.b,f=u.c,d=u.d,p=u.tx,h=u.ty;for(;l<i;){let m=r[e],_=r[e+1];n[o]=s*m+f*_+p,n[o+1]=c*m+d*_+h,o+=a,e+=t,l++}}function YL(r,t,e,n){let o=0;for(t*=e;o<n;)r[t]=0,r[t+1]=0,t+=e,o++}var XL=b(()=>{"use strict"});function T2(r,t,e,n,o){let a=t.a,i=t.b,u=t.c,l=t.d,s=t.tx,c=t.ty;e=e||0,n=n||2,o=o||r.length/n-e;let f=e*n;for(let d=0;d<o;d++){let p=r[f],h=r[f+1];r[f]=a*p+u*h+s,r[f+1]=i*p+l*h+c,f+=n}}var JL=b(()=>{"use strict"});function KL(r,t){if(r===16777215||!t)return t;if(t===16777215||!r)return r;let e=r>>16&255,n=r>>8&255,o=r&255,a=t>>16&255,i=t>>8&255,u=t&255,l=e*a/255,s=n*i/255,c=o*u/255;return(l<<16)+(s<<8)+c}var tU=b(()=>{"use strict"});var vht,hc,R2=b(()=>{Oe();tU();vht=new J,hc=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,n=this.renderable;return n?KL(e,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||vht}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0,this.renderable=null}}});var fd,eU,rU,nU=b(()=>{I();fd={extension:{type:x.ShapeBuilder,name:"circle"},build(r,t){let e,n,o,a,i,u;if(r.type==="circle"){let T=r;e=T.x,n=T.y,i=u=T.radius,o=a=0}else if(r.type==="ellipse"){let T=r;e=T.x,n=T.y,i=T.halfWidth,u=T.halfHeight,o=a=0}else{let T=r,R=T.width/2,C=T.height/2;e=T.x+R,n=T.y+C,i=u=Math.max(0,Math.min(T.radius,Math.min(R,C))),o=R-i,a=C-u}if(!(i>=0&&u>=0&&o>=0&&a>=0))return t;let l=Math.ceil(2.3*Math.sqrt(i+u)),s=l*8+(o?4:0)+(a?4:0);if(s===0)return t;if(l===0)return t[0]=t[6]=e+o,t[1]=t[3]=n+a,t[2]=t[4]=e-o,t[5]=t[7]=n-a,t;let c=0,f=l*4+(o?2:0)+2,d=f,p=s,h=o+i,m=a,_=e+h,y=e-h,D=n+m;if(t[c++]=_,t[c++]=D,t[--f]=D,t[--f]=y,a){let T=n-m;t[d++]=y,t[d++]=T,t[--p]=T,t[--p]=_}for(let T=1;T<l;T++){let R=Math.PI/2*(T/l),C=o+Math.cos(R)*i,S=a+Math.sin(R)*u,A=e+C,E=e-C,N=n+S,et=n-S;t[c++]=A,t[c++]=N,t[--f]=N,t[--f]=E,t[d++]=E,t[d++]=et,t[--p]=et,t[--p]=A}h=o,m=a+u,_=e+h,y=e-h,D=n+m;let w=n-m;return t[c++]=_,t[c++]=D,t[--p]=w,t[--p]=_,o&&(t[c++]=y,t[c++]=D,t[--p]=w,t[--p]=y),t},triangulate(r,t,e,n,o,a){if(r.length===0)return;let i=0,u=0;for(let c=0;c<r.length;c+=2)i+=r[c],u+=r[c+1];i/=r.length/2,u/=r.length/2;let l=n;t[l*e]=i,t[l*e+1]=u;let s=l++;for(let c=0;c<r.length;c+=2)t[l*e]=r[c],t[l*e+1]=r[c+1],c>0&&(o[a++]=l,o[a++]=s,o[a++]=l-1),l++;o[a++]=s+1,o[a++]=s,o[a++]=l-1}},eU={...fd,extension:{...fd.extension,name:"ellipse"}},rU={...fd,extension:{...fd.extension,name:"roundedRectangle"}}});function oU(r){let t=r.length;if(t<6)return 1;let e=0;for(let n=0,o=r[t-2],a=r[t-1];n<t;n+=2){let i=r[n],u=r[n+1];e+=(i-o)*(u+a),o=i,a=u}return e<0?-1:1}var aU=b(()=>{"use strict"});function iU(r,t,e,n,o,a,i,u){let l=r-e*o,s=t-n*o,c=r+e*a,f=t+n*a,d,p;i?(d=n,p=-e):(d=-n,p=e);let h=l+d,m=s+p,_=c+d,y=f+p;return u.push(h,m),u.push(_,y),2}function mc(r,t,e,n,o,a,i,u){let l=e-r,s=n-t,c=Math.atan2(l,s),f=Math.atan2(o-r,a-t);u&&c<f?c+=Math.PI*2:!u&&c>f&&(f+=Math.PI*2);let d=c,p=f-c,h=Math.abs(p),m=Math.sqrt(l*l+s*s),_=(15*h*Math.sqrt(m)/Math.PI>>0)+1,y=p/_;if(d+=y,u){i.push(r,t),i.push(e,n);for(let D=1,w=d;D<_;D++,w+=y)i.push(r,t),i.push(r+Math.sin(w)*m,t+Math.cos(w)*m);i.push(r,t),i.push(o,a)}else{i.push(e,n),i.push(r,t);for(let D=1,w=d;D<_;D++,w+=y)i.push(r+Math.sin(w)*m,t+Math.cos(w)*m),i.push(r,t);i.push(o,a),i.push(r,t)}return _*2}function uU(r,t,e,n,o,a,i,u,l){let s=1e-4;if(r.length===0)return;let c=t,f=c.alignment;if(t.alignment!==.5){let St=oU(r);e&&(St*=-1),f=(f-.5)*St+.5}let d=new ye(r[0],r[1]),p=new ye(r[r.length-2],r[r.length-1]),h=n,m=Math.abs(d.x-p.x)<s&&Math.abs(d.y-p.y)<s;if(h){r=r.slice(),m&&(r.pop(),r.pop(),p.set(r[r.length-2],r[r.length-1]));let St=(d.x+p.x)*.5,V=(p.y+d.y)*.5;r.unshift(St,V),r.push(St,V)}let _=o,y=r.length/2,D=r.length,w=_.length/2,T=c.width/2,R=T*T,C=c.miterLimit*c.miterLimit,S=r[0],A=r[1],E=r[2],N=r[3],et=0,X=0,Z=-(A-N),z=S-E,Dt=0,kt=0,Et=Math.sqrt(Z*Z+z*z);Z/=Et,z/=Et,Z*=T,z*=T;let Ge=f,st=(1-Ge)*2,Tt=Ge*2;h||(c.cap==="round"?D+=mc(S-Z*(st-Tt)*.5,A-z*(st-Tt)*.5,S-Z*st,A-z*st,S+Z*Tt,A+z*Tt,_,!0)+2:c.cap==="square"&&(D+=iU(S,A,Z,z,st,Tt,!0,_))),_.push(S-Z*st,A-z*st),_.push(S+Z*Tt,A+z*Tt);for(let St=1;St<y-1;++St){S=r[(St-1)*2],A=r[(St-1)*2+1],E=r[St*2],N=r[St*2+1],et=r[(St+1)*2],X=r[(St+1)*2+1],Z=-(A-N),z=S-E,Et=Math.sqrt(Z*Z+z*z),Z/=Et,z/=Et,Z*=T,z*=T,Dt=-(N-X),kt=E-et,Et=Math.sqrt(Dt*Dt+kt*kt),Dt/=Et,kt/=Et,Dt*=T,kt*=T;let V=E-S,Gt=A-N,ve=E-et,ee=X-N,wt=V*ve+Gt*ee,rt=Gt*ve-ee*V,ge=rt<0;if(Math.abs(rt)<.001*Math.abs(wt)){_.push(E-Z*st,N-z*st),_.push(E+Z*Tt,N+z*Tt),wt>=0&&(c.join==="round"?D+=mc(E,N,E-Z*st,N-z*st,E-Dt*st,N-kt*st,_,!1)+4:D+=2,_.push(E-Dt*Tt,N-kt*Tt),_.push(E+Dt*st,N+kt*st));continue}let re=(-Z+S)*(-z+N)-(-Z+E)*(-z+A),Ke=(-Dt+et)*(-kt+N)-(-Dt+E)*(-kt+X),_r=(V*Ke-ve*re)/rt,Se=(ee*re-Gt*Ke)/rt,or=(_r-E)*(_r-E)+(Se-N)*(Se-N),eo=E+(_r-E)*st,Gr=N+(Se-N)*st,Ln=E-(_r-E)*Tt,Un=N-(Se-N)*Tt,cr=Math.min(V*V+Gt*Gt,ve*ve+ee*ee),Nt=ge?st:Tt,ue=cr+Nt*Nt*R;or<=ue?c.join==="bevel"||or/R>C?(ge?(_.push(eo,Gr),_.push(E+Z*Tt,N+z*Tt),_.push(eo,Gr),_.push(E+Dt*Tt,N+kt*Tt)):(_.push(E-Z*st,N-z*st),_.push(Ln,Un),_.push(E-Dt*st,N-kt*st),_.push(Ln,Un)),D+=2):c.join==="round"?ge?(_.push(eo,Gr),_.push(E+Z*Tt,N+z*Tt),D+=mc(E,N,E+Z*Tt,N+z*Tt,E+Dt*Tt,N+kt*Tt,_,!0)+4,_.push(eo,Gr),_.push(E+Dt*Tt,N+kt*Tt)):(_.push(E-Z*st,N-z*st),_.push(Ln,Un),D+=mc(E,N,E-Z*st,N-z*st,E-Dt*st,N-kt*st,_,!1)+4,_.push(E-Dt*st,N-kt*st),_.push(Ln,Un)):(_.push(eo,Gr),_.push(Ln,Un)):(_.push(E-Z*st,N-z*st),_.push(E+Z*Tt,N+z*Tt),c.join==="round"?ge?D+=mc(E,N,E+Z*Tt,N+z*Tt,E+Dt*Tt,N+kt*Tt,_,!0)+2:D+=mc(E,N,E-Z*st,N-z*st,E-Dt*st,N-kt*st,_,!1)+2:c.join==="miter"&&or/R<=C&&(ge?(_.push(Ln,Un),_.push(Ln,Un)):(_.push(eo,Gr),_.push(eo,Gr)),D+=2),_.push(E-Dt*st,N-kt*st),_.push(E+Dt*Tt,N+kt*Tt),D+=2)}S=r[(y-2)*2],A=r[(y-2)*2+1],E=r[(y-1)*2],N=r[(y-1)*2+1],Z=-(A-N),z=S-E,Et=Math.sqrt(Z*Z+z*z),Z/=Et,z/=Et,Z*=T,z*=T,_.push(E-Z*st,N-z*st),_.push(E+Z*Tt,N+z*Tt),h||(c.cap==="round"?D+=mc(E-Z*(st-Tt)*.5,N-z*(st-Tt)*.5,E-Z*st,N-z*st,E+Z*Tt,N+z*Tt,_,!1)+2:c.cap==="square"&&(D+=iU(E,N,Z,z,st,Tt,!1,_)));let $n=1e-4*1e-4;for(let St=w;St<D+w-2;++St)S=_[St*2],A=_[St*2+1],E=_[(St+1)*2],N=_[(St+1)*2+1],et=_[(St+2)*2],X=_[(St+2)*2+1],!(Math.abs(S*(N-X)+E*(X-A)+et*(A-N))<$n)&&u.push(St,St+1,St+2)}var lU=b(()=>{Ma();aU()});var F2=tr((ZBt,E2)=>{"use strict";E2.exports=J0;E2.exports.default=J0;function J0(r,t,e){e=e||2;var n=t&&t.length,o=n?t[0]*e:r.length,a=cU(r,0,o,e,!0),i=[];if(!a||a.next===a.prev)return i;var u,l,s,c,f,d,p;if(n&&(a=wht(r,t,a,e)),r.length>80*e){u=s=r[0],l=c=r[1];for(var h=e;h<o;h+=e)f=r[h],d=r[h+1],f<u&&(u=f),d<l&&(l=d),f>s&&(s=f),d>c&&(c=d);p=Math.max(s-u,c-l),p=p!==0?32767/p:0}return Tm(a,i,e,u,l,p,0),i}function cU(r,t,e,n,o){var a,i;if(o===O2(r,t,e,n)>0)for(a=t;a<e;a+=n)i=sU(a,r[a],r[a+1],i);else for(a=e-n;a>=t;a-=n)i=sU(a,r[a],r[a+1],i);return i&&K0(i,i.next)&&(Cm(i),i=i.next),i}function vc(r,t){if(!r)return r;t||(t=r);var e=r,n;do if(n=!1,!e.steiner&&(K0(e,e.next)||xr(e.prev,e,e.next)===0)){if(Cm(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function Tm(r,t,e,n,o,a,i){if(r){!i&&a&&Sht(r,n,o,a);for(var u=r,l,s;r.prev!==r.next;){if(l=r.prev,s=r.next,a?yht(r,n,o,a):_ht(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(s.i/e|0),Cm(r),r=s.next,u=s.next;continue}if(r=s,r===u){i?i===1?(r=bht(vc(r),t,e),Tm(r,t,e,n,o,a,2)):i===2&&Dht(r,t,e,n,o,a):Tm(vc(r),t,e,n,o,a,1);break}}}}function _ht(r){var t=r.prev,e=r,n=r.next;if(xr(t,e,n)>=0)return!1;for(var o=t.x,a=e.x,i=n.x,u=t.y,l=e.y,s=n.y,c=o<a?o<i?o:i:a<i?a:i,f=u<l?u<s?u:s:l<s?l:s,d=o>a?o>i?o:i:a>i?a:i,p=u>l?u>s?u:s:l>s?l:s,h=n.next;h!==t;){if(h.x>=c&&h.x<=d&&h.y>=f&&h.y<=p&&dd(o,u,a,l,i,s,h.x,h.y)&&xr(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function yht(r,t,e,n){var o=r.prev,a=r,i=r.next;if(xr(o,a,i)>=0)return!1;for(var u=o.x,l=a.x,s=i.x,c=o.y,f=a.y,d=i.y,p=u<l?u<s?u:s:l<s?l:s,h=c<f?c<d?c:d:f<d?f:d,m=u>l?u>s?u:s:l>s?l:s,_=c>f?c>d?c:d:f>d?f:d,y=C2(p,h,t,e,n),D=C2(m,_,t,e,n),w=r.prevZ,T=r.nextZ;w&&w.z>=y&&T&&T.z<=D;){if(w.x>=p&&w.x<=m&&w.y>=h&&w.y<=_&&w!==o&&w!==i&&dd(u,c,l,f,s,d,w.x,w.y)&&xr(w.prev,w,w.next)>=0||(w=w.prevZ,T.x>=p&&T.x<=m&&T.y>=h&&T.y<=_&&T!==o&&T!==i&&dd(u,c,l,f,s,d,T.x,T.y)&&xr(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;w&&w.z>=y;){if(w.x>=p&&w.x<=m&&w.y>=h&&w.y<=_&&w!==o&&w!==i&&dd(u,c,l,f,s,d,w.x,w.y)&&xr(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;T&&T.z<=D;){if(T.x>=p&&T.x<=m&&T.y>=h&&T.y<=_&&T!==o&&T!==i&&dd(u,c,l,f,s,d,T.x,T.y)&&xr(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function bht(r,t,e){var n=r;do{var o=n.prev,a=n.next.next;!K0(o,a)&&fU(o,n,n.next,a)&&Rm(o,a)&&Rm(a,o)&&(t.push(o.i/e|0),t.push(n.i/e|0),t.push(a.i/e|0),Cm(n),Cm(n.next),n=r=a),n=n.next}while(n!==r);return vc(n)}function Dht(r,t,e,n,o,a){var i=r;do{for(var u=i.next.next;u!==i.prev;){if(i.i!==u.i&&Fht(i,u)){var l=dU(i,u);i=vc(i,i.next),l=vc(l,l.next),Tm(i,t,e,n,o,a,0),Tm(l,t,e,n,o,a,0);return}u=u.next}i=i.next}while(i!==r)}function wht(r,t,e,n){var o=[],a,i,u,l,s;for(a=0,i=t.length;a<i;a++)u=t[a]*n,l=a<i-1?t[a+1]*n:r.length,s=cU(r,u,l,n,!1),s===s.next&&(s.steiner=!0),o.push(Eht(s));for(o.sort(xht),a=0;a<o.length;a++)e=Tht(o[a],e);return e}function xht(r,t){return r.x-t.x}function Tht(r,t){var e=Rht(r,t);if(!e)return t;var n=dU(e,r);return vc(n,n.next),vc(e,e.next)}function Rht(r,t){var e=t,n=r.x,o=r.y,a=-1/0,i;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){var u=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(u<=n&&u>a&&(a=u,i=e.x<e.next.x?e:e.next,u===n))return i}e=e.next}while(e!==t);if(!i)return null;var l=i,s=i.x,c=i.y,f=1/0,d;e=i;do n>=e.x&&e.x>=s&&n!==e.x&&dd(o<c?n:a,o,s,c,o<c?a:n,o,e.x,e.y)&&(d=Math.abs(o-e.y)/(n-e.x),Rm(e,r)&&(d<f||d===f&&(e.x>i.x||e.x===i.x&&Cht(i,e)))&&(i=e,f=d)),e=e.next;while(e!==l);return i}function Cht(r,t){return xr(r.prev,r,t.prev)<0&&xr(t.next,r,r.next)<0}function Sht(r,t,e,n){var o=r;do o.z===0&&(o.z=C2(o.x,o.y,t,e,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,Oht(o)}function Oht(r){var t,e,n,o,a,i,u,l,s=1;do{for(e=r,r=null,a=null,i=0;e;){for(i++,n=e,u=0,t=0;t<s&&(u++,n=n.nextZ,!!n);t++);for(l=s;u>0||l>0&&n;)u!==0&&(l===0||!n||e.z<=n.z)?(o=e,e=e.nextZ,u--):(o=n,n=n.nextZ,l--),a?a.nextZ=o:r=o,o.prevZ=a,a=o;e=n}a.nextZ=null,s*=2}while(i>1);return r}function C2(r,t,e,n,o){return r=(r-e)*o|0,t=(t-n)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function Eht(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function dd(r,t,e,n,o,a,i,u){return(o-i)*(t-u)>=(r-i)*(a-u)&&(r-i)*(n-u)>=(e-i)*(t-u)&&(e-i)*(a-u)>=(o-i)*(n-u)}function Fht(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!Mht(r,t)&&(Rm(r,t)&&Rm(t,r)&&Aht(r,t)&&(xr(r.prev,r,t.prev)||xr(r,t.prev,t))||K0(r,t)&&xr(r.prev,r,r.next)>0&&xr(t.prev,t,t.next)>0)}function xr(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function K0(r,t){return r.x===t.x&&r.y===t.y}function fU(r,t,e,n){var o=X0(xr(r,t,e)),a=X0(xr(r,t,n)),i=X0(xr(e,n,r)),u=X0(xr(e,n,t));return!!(o!==a&&i!==u||o===0&&Y0(r,e,t)||a===0&&Y0(r,n,t)||i===0&&Y0(e,r,n)||u===0&&Y0(e,t,n))}function Y0(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function X0(r){return r>0?1:r<0?-1:0}function Mht(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&fU(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function Rm(r,t){return xr(r.prev,r,r.next)<0?xr(r,t,r.next)>=0&&xr(r,r.prev,t)>=0:xr(r,t,r.prev)<0||xr(r,r.next,t)<0}function Aht(r,t){var e=r,n=!1,o=(r.x+t.x)/2,a=(r.y+t.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&o<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==r);return n}function dU(r,t){var e=new S2(r.i,r.x,r.y),n=new S2(t.i,t.x,t.y),o=r.next,a=t.prev;return r.next=t,t.prev=r,e.next=o,o.prev=e,n.next=e,e.prev=n,a.next=n,n.prev=a,n}function sU(r,t,e,n){var o=new S2(r,t,e);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Cm(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function S2(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}J0.deviation=function(r,t,e,n){var o=t&&t.length,a=o?t[0]*e:r.length,i=Math.abs(O2(r,0,a,e));if(o)for(var u=0,l=t.length;u<l;u++){var s=t[u]*e,c=u<l-1?t[u+1]*e:r.length;i-=Math.abs(O2(r,s,c,e))}var f=0;for(u=0;u<n.length;u+=3){var d=n[u]*e,p=n[u+1]*e,h=n[u+2]*e;f+=Math.abs((r[d]-r[h])*(r[p+1]-r[d+1])-(r[d]-r[p])*(r[h+1]-r[d+1]))}return i===0&&f===0?0:Math.abs((f-i)/i)};function O2(r,t,e,n){for(var o=0,a=t,i=e-n;a<e;a+=n)o+=(r[i]-r[a])*(r[a+1]+r[i+1]),i=a;return o}J0.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},n=0,o=0;o<r.length;o++){for(var a=0;a<r[o].length;a++)for(var i=0;i<t;i++)e.vertices.push(r[o][a][i]);o>0&&(n+=r[o-1].length,e.holes.push(n))}return e}});function ty(r,t,e,n,o,a,i){let u=(0,pU.default)(r,t,2);if(!u)return;for(let s=0;s<u.length;s+=3)a[i++]=u[s]+o,a[i++]=u[s+1]+o,a[i++]=u[s+2]+o;let l=o*n;for(let s=0;s<r.length;s+=2)e[l]=r[s],e[l+1]=r[s+1],l+=n}var pU,M2=b(()=>{pU=bp(F2(),1)});var Pht,hU,mU=b(()=>{I();M2();Pht=[],hU={extension:{type:x.ShapeBuilder,name:"polygon"},build(r,t){for(let e=0;e<r.points.length;e++)t[e]=r.points[e];return t},triangulate(r,t,e,n,o,a){ty(r,Pht,t,e,n,o,a)}}});var vU,gU=b(()=>{I();vU={extension:{type:x.ShapeBuilder,name:"rectangle"},build(r,t){let e=r,n=e.x,o=e.y,a=e.width,i=e.height;return a>=0&&i>=0&&(t[0]=n,t[1]=o,t[2]=n+a,t[3]=o,t[4]=n+a,t[5]=o+i,t[6]=n,t[7]=o+i),t},triangulate(r,t,e,n,o,a){let i=0;n*=e,t[n+i]=r[0],t[n+i+1]=r[1],i+=e,t[n+i]=r[2],t[n+i+1]=r[3],i+=e,t[n+i]=r[6],t[n+i+1]=r[7],i+=e,t[n+i]=r[4],t[n+i+1]=r[5],i+=e;let u=n/e;o[a++]=u,o[a++]=u+1,o[a++]=u+2,o[a++]=u+1,o[a++]=u+3,o[a++]=u+2}}});var _U,yU=b(()=>{I();_U={extension:{type:x.ShapeBuilder,name:"triangle"},build(r,t){return t[0]=r.x,t[1]=r.y,t[2]=r.x2,t[3]=r.y2,t[4]=r.x3,t[5]=r.y3,t},triangulate(r,t,e,n,o,a){let i=0;n*=e,t[n+i]=r[0],t[n+i+1]=r[1],i+=e,t[n+i]=r[2],t[n+i+1]=r[3],i+=e,t[n+i]=r[4],t[n+i+1]=r[5];let u=n/e;o[a++]=u,o[a++]=u+1,o[a++]=u+2}}});function DU(r,t){let{geometryData:e,batches:n}=t;n.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let o=0;o<r.instructions.length;o++){let a=r.instructions[o];if(a.action==="texture")Nht(a.data,n,e);else if(a.action==="fill"||a.action==="stroke"){let i=a.action==="stroke",u=a.data.path.shapePath,l=a.data.style,s=a.data.hole;i&&s&&bU(s.shapePath,l,null,!0,n,e),bU(u,l,s,i,n,e)}}}function Nht(r,t,e){let{vertices:n,uvs:o,indices:a}=e,i=a.length,u=n.length/2,l=[],s=ey.rectangle,c=Iht,f=r.image;c.x=r.dx,c.y=r.dy,c.width=r.dw,c.height=r.dh;let d=r.transform;s.build(c,l),d&&T2(l,d),s.triangulate(l,n,2,u,a,i);let p=f.uvs;o.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);let h=Kt.get(hc);h.indexOffset=i,h.indexSize=a.length-i,h.attributeOffset=u,h.attributeSize=n.length/2-u,h.baseColor=r.style,h.alpha=r.alpha,h.texture=f,h.geometryData=e,t.push(h)}function bU(r,t,e,n,o,a){let{vertices:i,uvs:u,indices:l}=a,s=r.shapePrimitives.length-1;r.shapePrimitives.forEach(({shape:c,transform:f},d)=>{let p=l.length,h=i.length/2,m=[],_=ey[c.type];if(_.build(c,m),f&&T2(m,f),n){let T=c.closePath??!0;uU(m,t,!1,T,i,2,h,l,p)}else if(e&&s===d){s!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");let T=[],R=m.slice();kht(e.shapePath).forEach(S=>{T.push(R.length/2),R.push(...S)}),ty(R,T,i,2,h,l,p)}else _.triangulate(m,i,2,h,l,p);let y=u.length/2,D=t.texture;if(D!==Y.WHITE){let T=t.matrix;T&&(f&&T.append(f.clone().invert()),ZL(i,2,h,u,y,2,i.length/2-h,T))}else YL(u,y,2,i.length/2-h);let w=Kt.get(hc);w.indexOffset=p,w.indexSize=l.length-p,w.attributeOffset=h,w.attributeSize=i.length/2-h,w.baseColor=t.color,w.alpha=t.alpha,w.texture=D,w.geometryData=a,o.push(w)})}function kht(r){if(!r)return[];let t=r.shapePrimitives,e=[];for(let n=0;n<t.length;n++){let o=t[n].shape,a=[];ey[o.type].build(o,a),e.push(a)}return e}var ey,Iht,wU=b(()=>{I();An();XL();JL();Be();$o();R2();nU();lU();mU();gU();yU();M2();ey={};dt.handleByMap(x.ShapeBuilder,ey);dt.add(vU,hU,_U,fd,eU,rU);Iht=new de});var A2,P2,N2,pd,ry=b(()=>{I();G0();x2();CC();Vr();$o();wU();A2=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},P2=class{constructor(){this.batcher=new xm,this.instructions=new Hf}init(){this.instructions.reset()}get geometry(){return Ut(nk,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}},N2=class I2{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){I2.defaultOptions.bezierSmoothness=t?.bezierSmoothness??I2.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),DU(t,e);let n=t.batchMode;t.customShader||n==="no-batch"?e.isBatchable=!1:n==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){let e=Kt.get(P2),{batches:n,geometryData:o}=this._gpuContextHash[t.uid],a=o.vertices.length,i=o.indices.length;for(let c=0;c<n.length;c++)n[c].applyTransform=!1;let u=e.batcher;u.ensureAttributeBuffer(a),u.ensureIndexBuffer(i),u.begin();for(let c=0;c<n.length;c++){let f=n[c];u.add(f)}u.finish(e.instructions);let l=u.geometry;l.indexBuffer.setDataWithSize(u.indexBuffer,u.indexSize,!0),l.buffers[0].setDataWithSize(u.attributeBuffer.float32View,u.attributeSize,!0);let s=u.batches;for(let c=0;c<s.length;c++){let f=s[c];f.bindGroup=rd(f.textures.textures,f.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){let e=new A2;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){let e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(Kt.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(n=>{Kt.return(n)})}destroy(){for(let t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};N2.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"graphicsContext"};N2.defaultOptions={bezierSmoothness:.5};pd=N2});var $ht,k2,$2,L2,U2,B2,W2,G2,Br,mi=b(()=>{"use strict";$ht={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},k2=0,$2=1,L2=2,U2=3,B2=4,W2=5,G2=class xU{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<k2)}set blend(t){!!(this.data&1<<k2)!==t&&(this.data^=1<<k2)}get offsets(){return!!(this.data&1<<$2)}set offsets(t){!!(this.data&1<<$2)!==t&&(this.data^=1<<$2)}set cullMode(t){if(t==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=t==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<L2)}set culling(t){!!(this.data&1<<L2)!==t&&(this.data^=1<<L2)}get depthTest(){return!!(this.data&1<<U2)}set depthTest(t){!!(this.data&1<<U2)!==t&&(this.data^=1<<U2)}get depthMask(){return!!(this.data&1<<W2)}set depthMask(t){!!(this.data&1<<W2)!==t&&(this.data^=1<<W2)}get clockwiseFrontFace(){return!!(this.data&1<<B2)}set clockwiseFrontFace(t){!!(this.data&1<<B2)!==t&&(this.data^=1<<B2)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!=="none",this._blendMode=t,this._blendModeId=$ht[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let t=new xU;return t.depthTest=!1,t.blend=!0,t}};G2.default2d=G2.for2d();Br=G2});function Qi(r,t,e){let n=(r>>24&255)/255;t[e++]=(r&255)/255*n,t[e++]=(r>>8&255)/255*n,t[e++]=(r>>16&255)/255*n,t[e++]=n}var hd=b(()=>{"use strict"});var Sm,TU=b(()=>{I();mi();$o();hd();R2();Sm=class{constructor(t,e){this.state=Br.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=t,this._adaptor=e,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(t){let e=t.context,n=!!this._graphicsBatchesHash[t.uid],o=this.renderer.graphicsContext.updateGpuContext(e);return!!(o.isBatchable||n!==o.isBatchable)}addRenderable(t,e){let n=this.renderer.graphicsContext.updateGpuContext(t.context);t.didViewUpdate&&this._rebuild(t),n.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){let e=this._graphicsBatchesHash[t.uid];if(e)for(let n=0;n<e.length;n++){let o=e[n];o._batcher.updateElement(o)}}destroyRenderable(t){this._graphicsBatchesHash[t.uid]&&this._removeBatchForRenderable(t.uid),t.off("destroyed",this._destroyRenderableBound)}execute(t){if(!t.isRenderable)return;let e=this.renderer,n=t.context;if(!e.graphicsContext.getGpuContext(n).batches.length)return;let a=n.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;let i=a.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=e._roundPixels|t._roundPixels,Qi(t.groupColorAlpha,i.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){let e=!!this._graphicsBatchesHash[t.uid],n=this.renderer.graphicsContext.updateGpuContext(t.context);e&&this._removeBatchForRenderable(t.uid),n.isBatchable&&this._initBatchesForRenderable(t),t.batched=n.isBatchable}_addToBatcher(t,e){let n=this.renderer.renderPipes.batch,o=this._getBatchesForRenderable(t);for(let a=0;a<o.length;a++){let i=o[a];n.addToBatch(i,e)}}_getBatchesForRenderable(t){return this._graphicsBatchesHash[t.uid]||this._initBatchesForRenderable(t)}_initBatchesForRenderable(t){let e=t.context,n=this.renderer.graphicsContext.getGpuContext(e),o=this.renderer._roundPixels|t._roundPixels,a=n.batches.map(i=>{let u=Kt.get(hc);return i.copyTo(u),u.renderable=t,u.roundPixels=o,u});return this._graphicsBatchesHash[t.uid]===void 0&&t.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[t.uid]=a,a}_removeBatchForRenderable(t){this._graphicsBatchesHash[t].forEach(e=>{Kt.return(e)}),this._graphicsBatchesHash[t]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(let t in this._graphicsBatchesHash)this._removeBatchForRenderable(t);this._graphicsBatchesHash=null}};Sm.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"graphics"}});var z2=b(()=>{I();ry();TU();dt.add(Sm);dt.add(pd)});var Ul,ny=b(()=>{"use strict";Ul=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get uvs(){let e=this.geometry.getBuffer("aUV"),n=e.data,o=n,a=this.texture.textureMatrix;return a.isSimple||(o=this._transformedUvs,(this._textureMatrixUpdateId!==a._updateID||this._uvUpdateId!==e._updateID)&&((!o||o.length<n.length)&&(o=this._transformedUvs=new Float32Array(n.length)),this._textureMatrixUpdateId=a._updateID,this._uvUpdateId=e._updateID,a.multiplyUvs(n,o))),o}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}});var Om,RU=b(()=>{I();Oe();Il();po();_m();$o();hd();ny();Om=class{constructor(t,e){this.localUniforms=new Qe({uTransformMatrix:{value:new J,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new yn({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=t,this._adaptor=e,this._adaptor.init(),t.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),t.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(t){let e=this._getMeshData(t),n=e.batched,o=t.batched;if(e.batched=o,n!==o)return!0;if(o){let a=t._geometry;if(a.indices.length!==e.indexSize||a.positions.length!==e.vertexSize)return e.indexSize=a.indices.length,e.vertexSize=a.positions.length,!0;let i=this._getBatchableMesh(t),u=t.texture;if(i.texture._source!==u._source&&i.texture._source!==u._source)return!i._batcher.checkAndUpdateTexture(i,u)}return!1}addRenderable(t,e){let n=this.renderer.renderPipes.batch,{batched:o}=this._getMeshData(t);if(o){let a=this._getBatchableMesh(t);a.texture=t._texture,a.geometry=t._geometry,n.addToBatch(a,e)}else n.break(e),e.add(t)}updateRenderable(t){if(t.batched){let e=this._gpuBatchableMeshHash[t.uid];e.texture=t._texture,e.geometry=t._geometry,e._batcher.updateElement(e)}}destroyRenderable(t){this._meshDataHash[t.uid]=null;let e=this._gpuBatchableMeshHash[t.uid];e&&(Kt.return(e),this._gpuBatchableMeshHash[t.uid]=null),t.off("destroyed",this._destroyRenderableBound)}execute(t){if(!t.isRenderable)return;t.state.blendMode=ku(t.groupBlendMode,t.texture._source);let e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),Qi(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){return this._meshDataHash[t.uid]||this._initMeshData(t)}_initMeshData(t){return this._meshDataHash[t.uid]={batched:t.batched,indexSize:t._geometry.indices?.length,vertexSize:t._geometry.positions?.length},t.on("destroyed",this._destroyRenderableBound),this._meshDataHash[t.uid]}_getBatchableMesh(t){return this._gpuBatchableMeshHash[t.uid]||this._initBatchableMesh(t)}_initBatchableMesh(t){let e=Kt.get(Ul);return e.renderable=t,e.texture=t._texture,e.transform=t.groupTransform,e.roundPixels=this.renderer._roundPixels|t._roundPixels,this._gpuBatchableMeshHash[t.uid]=e,e}destroy(){for(let t in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[t]&&Kt.return(this._gpuBatchableMeshHash[t]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}};Om.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"mesh"}});var q2=b(()=>{I();RU();dt.add(Om)});var oy,CU=b(()=>{"use strict";oy=class{execute(t,e){let n=t.state,o=t.renderer,a=e.shader||t.defaultShader;a.resources.uTexture=e.texture._source,a.resources.uniforms=t.localUniforms;let i=o.gl,u=t.getBuffers(e);o.shader.bind(a),o.state.set(n),o.geometry.bind(u.geometry,a.glProgram);let s=u.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?i.UNSIGNED_SHORT:i.UNSIGNED_INT;i.drawElements(i.TRIANGLES,e.particleChildren.length*6,s,0)}}});function Q2(r,t=null){let e=r*6;if(e>65535?t=t||new Uint32Array(e):t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let n=0,o=0;n<e;n+=6,o+=4)t[n+0]=o+0,t[n+1]=o+1,t[n+2]=o+2,t[n+3]=o+0,t[n+4]=o+2,t[n+5]=o+3;return t}var SU=b(()=>{"use strict"});function EU(r){return{dynamicUpdate:OU(r,!0),staticUpdate:OU(r,!1)}}function OU(r,t){let e=[];e.push(`
      
        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let n=0;for(let a in r){let i=r[a];if(t!==i.dynamic)continue;e.push(`offset = index + ${n}`),e.push(i.code);let u=Wo(i.format);n+=u.stride/4}e.push(`
            index += stride * 4;
        }
    `),e.unshift(`
        var stride = ${n};
    `);let o=e.join(`
`);return new Function("ps","f32v","u32v",o)}var FU=b(()=>{pc()});function Lht(r){let t=[];for(let e in r){let n=r[e];t.push(e,n.code,n.dynamic?"d":"s")}return t.join("_")}var ay,MU=b(()=>{Nl();$u();nd();pc();a2();SU();FU();ay=class{constructor(t){this._size=0,this._generateParticleUpdateCache={};let e=this._size=t.size??1e3,n=t.properties,o=0,a=0;for(let c in n){let f=n[c],d=Wo(f.format);f.dynamic?a+=d.stride:o+=d.stride}this._dynamicStride=a/4,this._staticStride=o/4,this.staticAttributeBuffer=new Ui(e*4*o),this.dynamicAttributeBuffer=new Ui(e*4*a),this.indexBuffer=Q2(e);let i=new Na,u=0,l=0;this._staticBuffer=new Or({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:le.VERTEX|le.COPY_DST}),this._dynamicBuffer=new Or({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:le.VERTEX|le.COPY_DST});for(let c in n){let f=n[c],d=Wo(f.format);f.dynamic?(i.addAttribute(f.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:u*4,format:f.format}),u+=d.size):(i.addAttribute(f.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:l*4,format:f.format}),l+=d.size)}i.addIndex(this.indexBuffer);let s=this.getParticleUpdate(n);this._dynamicUpload=s.dynamicUpdate,this._staticUpload=s.staticUpdate,this.geometry=i}getParticleUpdate(t){let e=Lht(t);return this._generateParticleUpdateCache[e]?this._generateParticleUpdateCache[e]:(this._generateParticleUpdateCache[e]=this.generateParticleUpdate(t),this._generateParticleUpdateCache[e])}generateParticleUpdate(t){return EU(t)}update(t,e){t.length>this._size&&(e=!0,this._size=Math.max(t.length,this._size*1.5|0),this.staticAttributeBuffer=new Ui(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Ui(this._size*this._dynamicStride*4*4),this.indexBuffer=Q2(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let n=this.dynamicAttributeBuffer;if(this._dynamicUpload(t,n.float32View,n.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,t.length*this._dynamicStride*4,!0),e){let o=this.staticAttributeBuffer;this._staticUpload(t,o.float32View,o.uint32View),this._staticBuffer.setDataWithSize(o.float32View,t.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}});var AU,PU=b(()=>{AU=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`});var IU,NU=b(()=>{IU=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = aColor * uColor;
}
`});var H2,kU=b(()=>{H2=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

  return VSOutput(
   position,
   aUV,
   aColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`});var iy,$U=b(()=>{Zn();Oe();dc();ad();hi();Be();QC();PU();NU();kU();iy=class extends Er{constructor(){let t=ka.from({vertex:IU,fragment:AU}),e=$a.from({fragment:{source:H2,entryPoint:"mainFragment"},vertex:{source:H2,entryPoint:"mainVertex"}});super({glProgram:t,gpuProgram:e,resources:{uTexture:Y.WHITE.source,uSampler:new F0({}),uniforms:{uTranslationMatrix:{value:new J,type:"mat3x3<f32>"},uColor:{value:new oe(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}});var md,V2=b(()=>{Oe();po();_m();mi();hd();MU();$U();md=class{constructor(t,e){this.state=Br.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new Qe({uTranslationMatrix:{value:new J,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=t,this.adaptor=e,this.defaultShader=new iy,this.state=Br.for2d()}validateRenderable(t){return!1}addRenderable(t,e){this.renderer.renderPipes.batch.break(e),e.add(t)}getBuffers(t){return this._gpuBufferHash[t.uid]||this._initBuffer(t)}_initBuffer(t){return this._gpuBufferHash[t.uid]=new ay({size:t.particleChildren.length,properties:t._properties}),t.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[t.uid]}updateRenderable(t){}destroyRenderable(t){this._gpuBufferHash[t.uid].destroy(),this._gpuBufferHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}execute(t){let e=t.particleChildren;if(e.length===0)return;let n=this.renderer,o=this.getBuffers(t);t.texture||(t.texture=e[0].texture);let a=this.state;o.update(e,t._childrenDirty),t._childrenDirty=!1,a.blendMode=ku(t.blendMode,t.texture._source);let i=this.localUniforms.uniforms,u=i.uTranslationMatrix;t.worldTransform.copyTo(u),u.prepend(n.globalUniforms.globalUniformData.projectionMatrix),i.uResolution=n.globalUniforms.globalUniformData.resolution,i.uRound=n._roundPixels|t._roundPixels,Qi(t.groupColorAlpha,i.uColor,0),this.adaptor.execute(this,t)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}});var Em,LU=b(()=>{I();CU();V2();Em=class extends md{constructor(t){super(t,new oy)}};Em.extension={type:[x.WebGLPipes],name:"particle"}});var uy,UU=b(()=>{"use strict";uy=class{execute(t,e){let n=t.renderer,o=e.shader||t.defaultShader;o.groups[0]=n.renderPipes.uniformBatch.getUniformBindGroup(t.localUniforms,!0),o.groups[1]=n.texture.getTextureBindGroup(e.texture);let a=t.state,i=t.getBuffers(e);n.encoder.draw({geometry:i.geometry,shader:e.shader||t.defaultShader,state:a,size:e.particleChildren.length*6})}}});var Fm,BU=b(()=>{I();UU();V2();Fm=class extends md{constructor(t){super(t,new uy)}};Fm.extension={type:[x.WebGPUPipes],name:"particle"}});var j2=b(()=>{I();LU();BU();dt.add(Em);dt.add(Fm)});var Bl,ly=b(()=>{"use strict";Bl=class{constructor(){this.batcherName="default",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}});var Mm,WU=b(()=>{I();A0();$o();ly();Mm=class{constructor(t){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let t in this._gpuText){let e=this._gpuText[t];if(!e)continue;let n=e.batchableSprite.renderable;n._autoResolution&&(n._resolution=this._renderer.resolution,n.onViewUpdate())}}validateRenderable(t){let e=this._getGpuText(t),n=t._getKey();return e.currentKey!==n}addRenderable(t,e){let o=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(o,e)}updateRenderable(t){let n=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),n._batcher.updateElement(n)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.canvasText.decreaseReferenceCount(e.currentKey),Kt.return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),n=this._getGpuText(t),o=n.batchableSprite;n.currentKey!==e&&this._updateGpuText(t),t._didTextUpdate=!1;let a=t._style.padding;sc(o.bounds,t._anchor,o.texture,a)}_updateGpuText(t){let e=this._getGpuText(t),n=e.batchableSprite;e.texture&&this._renderer.canvasText.decreaseReferenceCount(e.currentKey),e.texture=n.texture=this._renderer.canvasText.getManagedTexture(t),e.currentKey=t._getKey(),n.texture=e.texture}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:null,currentKey:"--",batchableSprite:Kt.get(Bl)};return e.batchableSprite.renderable=t,e.batchableSprite.transform=t.groupTransform,e.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},e.batchableSprite.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuText[t.uid]=e,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,this._updateText(t),t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}};Mm.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"text"}});var Z2,Go,vd=b(()=>{rr();dm();Z2=class{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){let n=Ct.get().createCanvas();n.width=t,n.height=e;let o=n.getContext("2d");return{canvas:n,context:o}}getOptimalCanvasAndContext(t,e,n=1){t=Math.ceil(t*n-1e-6),e=Math.ceil(e*n-1e-6),t=Nu(t),e=Nu(e);let o=(t<<17)+(e<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let a=this._canvasPool[o].pop();return a||(a=this._createCanvasAndContext(t,e)),a}returnCanvasAndContext(t){let e=t.canvas,{width:n,height:o}=e,a=(n<<17)+(o<<1);t.context.clearRect(0,0,n,o),this._canvasPool[a].push(t)}clear(){this._canvasPool={}}},Go=new Z2});var Uht,Y2,Pn,gd=b(()=>{dm();Uo();Be();Uht=0,Y2=class{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,n){let o=new ke({...this.textureOptions,width:t,height:e,resolution:1,antialias:n,autoGarbageCollect:!0});return new Y({source:o,label:`texturePool_${Uht++}`})}getOptimalTexture(t,e,n=1,o){let a=Math.ceil(t*n-1e-6),i=Math.ceil(e*n-1e-6);a=Nu(a),i=Nu(i);let u=(a<<17)+(i<<1)+(o?1:0);this._texturePool[u]||(this._texturePool[u]=[]);let l=this._texturePool[u].pop();return l||(l=this.createTexture(a,i,o)),l.source._resolution=n,l.source.width=a/n,l.source.height=i/n,l.source.pixelWidth=a,l.source.pixelHeight=i,l.frame.x=0,l.frame.y=0,l.frame.width=t,l.frame.height=e,l.updateUvs(),this._poolKeyHash[l.uid]=u,l}getSameSizeTexture(t,e=!1){let n=t.source;return this.getOptimalTexture(t.width,t.height,n._resolution,e)}returnTexture(t){let e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(let e in this._texturePool){let n=this._texturePool[e];if(n)for(let o=0;o<n.length;o++)n[o].destroy(!0)}this._texturePool={}}},Pn=new Y2});function GU(r,t,e){for(let n=0,o=4*e*t;n<t;++n,o+=4)if(r[o+3]!==0)return!1;return!0}function zU(r,t,e,n,o){let a=4*t;for(let i=n,u=n*a+4*e;i<=o;++i,u+=a)if(r[u+3]!==0)return!1;return!0}function qU(r,t=1){let{width:e,height:n}=r,o=r.getContext("2d",{willReadFrequently:!0});if(o===null)throw new TypeError("Failed to get canvas 2D context");let i=o.getImageData(0,0,e,n).data,u=0,l=0,s=e-1,c=n-1;for(;l<n&&GU(i,e,l);)++l;if(l===n)return de.EMPTY;for(;GU(i,e,c);)--c;for(;zU(i,e,u,l,c);)++u;for(;zU(i,e,s,l,c);)--s;return++s,++c,new de(u/t,l/t,(s-u)/t,(c-l)/t)}var QU=b(()=>{An()});var HU,Wl,sy=b(()=>{Zn();rr();Oe();Kf();Be();Yn();HU=class X2{constructor(t,e,n,o){this.uid=be("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=n,this.y1=o}addColorStop(t,e){return this.gradientStops.push({offset:t,color:oe.shared.setValue(e).toHexa()}),this._styleKey=null,this}buildLinearGradient(){let t=X2.defaultTextureSize,{gradientStops:e}=this,n=Ct.get().createCanvas();n.width=t,n.height=t;let o=n.getContext("2d"),a=o.createLinearGradient(0,0,X2.defaultTextureSize,1);for(let m=0;m<e.length;m++){let _=e[m];a.addColorStop(_.offset,_.color)}o.fillStyle=a,o.fillRect(0,0,t,t),this.texture=new Y({source:new la({resource:n,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:i,y0:u,x1:l,y1:s}=this,c=new J,f=l-i,d=s-u,p=Math.sqrt(f*f+d*d),h=Math.atan2(d,f);c.translate(-i,-u),c.scale(1/t,1/t),c.rotate(-h),c.scale(256/p,1),this.transform=c,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;let t=this.gradientStops.map(o=>`${o.offset}-${o.color}`).join("-"),e=this.texture.uid,n=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${e}-${n}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};HU.defaultTextureSize=256;Wl=HU});var VU,Uu,cy=b(()=>{Oe();Yn();VU={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},Uu=class{constructor(t,e){this.uid=be("fillPattern"),this.transform=new J,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=VU[e].addressModeU,t.source.style.addressModeV=VU[e].addressModeV)}setTransform(t){let e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}});var ZU=tr((dzt,jU)=>{jU.exports=Wht;var J2={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Bht=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function Wht(r){var t=[];return r.replace(Bht,function(e,n,o){var a=n.toLowerCase();for(o=zht(o),a=="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),a="l",n=n=="m"?"l":"L");;){if(o.length==J2[a])return o.unshift(n),t.push(o);if(o.length<J2[a])throw new Error("malformed path data");t.push([n].concat(o.splice(0,J2[a])))}}),t}var Ght=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function zht(r){var t=r.match(Ght);return t?t.map(Number):[]}});function XU(r,t){let e=(0,YU.default)(r),n=[],o=null,a=0,i=0;for(let u=0;u<e.length;u++){let l=e[u],s=l[0],c=l;switch(s){case"M":a=c[1],i=c[2],t.moveTo(a,i);break;case"m":a+=c[1],i+=c[2],t.moveTo(a,i);break;case"H":a=c[1],t.lineTo(a,i);break;case"h":a+=c[1],t.lineTo(a,i);break;case"V":i=c[1],t.lineTo(a,i);break;case"v":i+=c[1],t.lineTo(a,i);break;case"L":a=c[1],i=c[2],t.lineTo(a,i);break;case"l":a+=c[1],i+=c[2],t.lineTo(a,i);break;case"C":a=c[5],i=c[6],t.bezierCurveTo(c[1],c[2],c[3],c[4],a,i);break;case"c":t.bezierCurveTo(a+c[1],i+c[2],a+c[3],i+c[4],a+c[5],i+c[6]),a+=c[5],i+=c[6];break;case"S":a=c[3],i=c[4],t.bezierCurveToShort(c[1],c[2],a,i);break;case"s":t.bezierCurveToShort(a+c[1],i+c[2],a+c[3],i+c[4]),a+=c[3],i+=c[4];break;case"Q":a=c[3],i=c[4],t.quadraticCurveTo(c[1],c[2],a,i);break;case"q":t.quadraticCurveTo(a+c[1],i+c[2],a+c[3],i+c[4]),a+=c[3],i+=c[4];break;case"T":a=c[1],i=c[2],t.quadraticCurveToShort(a,i);break;case"t":a+=c[1],i+=c[2],t.quadraticCurveToShort(a,i);break;case"A":a=c[6],i=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],a,i);break;case"a":a+=c[6],i+=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],a,i);break;case"Z":case"z":t.closePath(),n.length>0&&(o=n.pop(),o?(a=o.startX,i=o.startY):(a=0,i=0)),o=null;break;default:ct(`Unknown SVG path command: ${s}`)}s!=="Z"&&s!=="z"&&o===null&&(o={startX:a,startY:i},n.push(o))}return t}var YU,JU=b(()=>{YU=bp(ZU(),1);er()});var fy,KU=b(()=>{An();fy=class r{constructor(t=0,e=0,n=0){this.type="circle",this.x=t,this.y=e,this.radius=n}clone(){return new r(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;let n=this.radius*this.radius,o=this.x-t,a=this.y-e;return o*=o,a*=a,o+a<=n}strokeContains(t,e,n){if(this.radius===0)return!1;let o=this.x-t,a=this.y-e,i=this.radius,u=n/2,l=Math.sqrt(o*o+a*a);return l<i+u&&l>i-u}getBounds(t){return t=t||new de,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}});var dy,tB=b(()=>{An();dy=class r{constructor(t=0,e=0,n=0,o=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=n,this.halfHeight=o}clone(){return new r(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(t-this.x)/this.halfWidth,o=(e-this.y)/this.halfHeight;return n*=n,o*=o,n+o<=1}strokeContains(t,e,n){let{halfWidth:o,halfHeight:a}=this;if(o<=0||a<=0)return!1;let i=n/2,u=o-i,l=a-i,s=o+i,c=a+i,f=t-this.x,d=e-this.y,p=f*f/(u*u)+d*d/(l*l),h=f*f/(s*s)+d*d/(c*c);return p>1&&h<=1}getBounds(t){return t=t||new de,t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}});function eB(r,t,e,n,o,a){let i=r-e,u=t-n,l=o-e,s=a-n,c=i*l+u*s,f=l*l+s*s,d=-1;f!==0&&(d=c/f);let p,h;d<0?(p=e,h=n):d>1?(p=o,h=a):(p=e+d*l,h=n+d*s);let m=r-p,_=t-h;return m*m+_*_}var rB=b(()=>{"use strict"});var _d,nB=b(()=>{rB();An();_d=class r{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){let n=[];for(let o=0,a=e.length;o<a;o++)n.push(e[o].x,e[o].y);e=n}this.points=e,this.closePath=!0}clone(){let t=this.points.slice(),e=new r(t);return e.closePath=this.closePath,e}contains(t,e){let n=!1,o=this.points.length/2;for(let a=0,i=o-1;a<o;i=a++){let u=this.points[a*2],l=this.points[a*2+1],s=this.points[i*2],c=this.points[i*2+1];l>e!=c>e&&t<(s-u)*((e-l)/(c-l))+u&&(n=!n)}return n}strokeContains(t,e,n){let o=n/2,a=o*o,{points:i}=this,u=i.length-(this.closePath?0:2);for(let l=0;l<u;l+=2){let s=i[l],c=i[l+1],f=i[(l+2)%i.length],d=i[(l+3)%i.length];if(eB(t,e,s,c,f,d)<=a)return!0}return!1}getBounds(t){t=t||new de;let e=this.points,n=1/0,o=-1/0,a=1/0,i=-1/0;for(let u=0,l=e.length;u<l;u+=2){let s=e[u],c=e[u+1];n=s<n?s:n,o=s>o?s:o,a=c<a?c:a,i=c>i?c:i}return t.x=n,t.width=o-n,t.y=a,t.height=i-a,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}});var py,hy,oB=b(()=>{An();py=(r,t,e,n,o,a)=>{let i=r-e,u=t-n,l=Math.sqrt(i*i+u*u);return l>=o-a&&l<=o+a},hy=class r{constructor(t=0,e=0,n=0,o=0,a=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=n,this.height=o,this.radius=a}getBounds(t){return t=t||new de,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new r(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){let n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+n&&e<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let o=t-(this.x+n),a=e-(this.y+n),i=n*n;if(o*o+a*a<=i||(o=t-(this.x+this.width-n),o*o+a*a<=i)||(a=e-(this.y+this.height-n),o*o+a*a<=i)||(o=t-(this.x+n),o*o+a*a<=i))return!0}return!1}strokeContains(t,e,n){let{x:o,y:a,width:i,height:u,radius:l}=this,s=n/2,c=o+l,f=a+l,d=i-l*2,p=u-l*2,h=o+i,m=a+u;return(t>=o-s&&t<=o+s||t>=h-s&&t<=h+s)&&e>=f&&e<=f+p||(e>=a-s&&e<=a+s||e>=m-s&&e<=m+s)&&t>=c&&t<=c+d?!0:t<c&&e<f&&py(t,e,c,f,l,s)||t>h-l&&e<f&&py(t,e,h-l,f,l,s)||t>h-l&&e>m-l&&py(t,e,h-l,m-l,l,s)||t<c&&e>m-l&&py(t,e,c,m-l,l,s)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}});function vy(r,t,e,n,o,a,i,u,l,s){let f=Math.min(.99,Math.max(0,s??pd.defaultOptions.bezierSmoothness)),d=(Qht-f)/1;return d*=d,Hht(t,e,n,o,a,i,u,l,r,d),r}function Hht(r,t,e,n,o,a,i,u,l,s){tS(r,t,e,n,o,a,i,u,l,s,0),l.push(i,u)}function tS(r,t,e,n,o,a,i,u,l,s,c){if(c>qht)return;let f=Math.PI,d=(r+e)/2,p=(t+n)/2,h=(e+o)/2,m=(n+a)/2,_=(o+i)/2,y=(a+u)/2,D=(d+h)/2,w=(p+m)/2,T=(h+_)/2,R=(m+y)/2,C=(D+T)/2,S=(w+R)/2;if(c>0){let A=i-r,E=u-t,N=Math.abs((e-i)*E-(n-u)*A),et=Math.abs((o-i)*E-(a-u)*A),X,Z;if(N>my&&et>my){if((N+et)*(N+et)<=s*(A*A+E*E)){if(yd<K2){l.push(C,S);return}let z=Math.atan2(a-n,o-e);if(X=Math.abs(z-Math.atan2(n-t,e-r)),Z=Math.abs(Math.atan2(u-a,i-o)-z),X>=f&&(X=2*f-X),Z>=f&&(Z=2*f-Z),X+Z<yd){l.push(C,S);return}if(gc!==0){if(X>gc){l.push(e,n);return}if(Z>gc){l.push(o,a);return}}}}else if(N>my){if(N*N<=s*(A*A+E*E)){if(yd<K2){l.push(C,S);return}if(X=Math.abs(Math.atan2(a-n,o-e)-Math.atan2(n-t,e-r)),X>=f&&(X=2*f-X),X<yd){l.push(e,n),l.push(o,a);return}if(gc!==0&&X>gc){l.push(e,n);return}}}else if(et>my){if(et*et<=s*(A*A+E*E)){if(yd<K2){l.push(C,S);return}if(X=Math.abs(Math.atan2(u-a,i-o)-Math.atan2(a-n,o-e)),X>=f&&(X=2*f-X),X<yd){l.push(e,n),l.push(o,a);return}if(gc!==0&&X>gc){l.push(o,a);return}}}else if(A=C-(r+i)/2,E=S-(t+u)/2,A*A+E*E<=s){l.push(C,S);return}}tS(r,t,d,p,D,w,C,S,l,s,c+1),tS(C,S,T,R,_,y,i,u,l,s,c+1)}var qht,my,Qht,K2,yd,gc,eS=b(()=>{ry();qht=8,my=11920929e-14,Qht=1,K2=.01,yd=0,gc=0});function iB(r,t,e,n,o,a,i,u){let s=Math.min(.99,Math.max(0,u??pd.defaultOptions.bezierSmoothness)),c=(Zht-s)/1;return c*=c,Xht(t,e,n,o,a,i,r,c),r}function Xht(r,t,e,n,o,a,i,u){rS(i,r,t,e,n,o,a,u,0),i.push(o,a)}function rS(r,t,e,n,o,a,i,u,l){if(l>Vht)return;let s=Math.PI,c=(t+n)/2,f=(e+o)/2,d=(n+a)/2,p=(o+i)/2,h=(c+d)/2,m=(f+p)/2,_=a-t,y=i-e,D=Math.abs((n-a)*y-(o-i)*_);if(D>jht){if(D*D<=u*(_*_+y*y)){if(aB<Yht){r.push(h,m);return}let w=Math.abs(Math.atan2(i-o,a-n)-Math.atan2(o-e,n-t));if(w>=s&&(w=2*s-w),w<aB){r.push(h,m);return}}}else if(_=h-(t+a)/2,y=m-(e+i)/2,_*_+y*y<=u){r.push(h,m);return}rS(r,t,e,c,f,h,m,u,l+1),rS(r,h,m,d,p,a,i,u,l+1)}var Vht,jht,Zht,Yht,aB,uB=b(()=>{ry();Vht=8,jht=11920929e-14,Zht=1,Yht=.01,aB=0});function gy(r,t,e,n,o,a,i,u){let l=Math.abs(o-a);(!i&&o>a||i&&a>o)&&(l=2*Math.PI-l),u=u||Math.max(6,Math.floor(6*Math.pow(n,1/3)*(l/Math.PI))),u=Math.max(u,3);let s=l/u,c=o;s*=i?-1:1;for(let f=0;f<u+1;f++){let d=Math.cos(c),p=Math.sin(c),h=t+d*n,m=e+p*n;r.push(h,m),c+=s}}var nS=b(()=>{"use strict"});function lB(r,t,e,n,o,a){let i=r[r.length-2],l=r[r.length-1]-e,s=i-t,c=o-e,f=n-t,d=Math.abs(l*f-s*c);if(d<1e-8||a===0){(r[r.length-2]!==t||r[r.length-1]!==e)&&r.push(t,e);return}let p=l*l+s*s,h=c*c+f*f,m=l*c+s*f,_=a*Math.sqrt(p)/d,y=a*Math.sqrt(h)/d,D=_*m/p,w=y*m/h,T=_*f+y*s,R=_*c+y*l,C=s*(y+D),S=l*(y+D),A=f*(_+w),E=c*(_+w),N=Math.atan2(S-R,C-T),et=Math.atan2(E-R,A-T);gy(r,T+t,R+e,a,N,et,s*c>f*l)}var sB=b(()=>{nS()});function Jht(r,t){let e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),n=t===1.5707963267948966?.551915024494:e,o=Math.cos(r),a=Math.sin(r),i=Math.cos(r+t),u=Math.sin(r+t);return[{x:o-a*n,y:a+o*n},{x:i+u*n,y:u-i*n},{x:i,y:u}]}function fB(r,t,e,n,o,a,i,u=0,l=0,s=0){if(a===0||i===0)return;let c=Math.sin(u*Am/360),f=Math.cos(u*Am/360),d=f*(t-n)/2+c*(e-o)/2,p=-c*(t-n)/2+f*(e-o)/2;if(d===0&&p===0)return;a=Math.abs(a),i=Math.abs(i);let h=Math.pow(d,2)/Math.pow(a,2)+Math.pow(p,2)/Math.pow(i,2);h>1&&(a*=Math.sqrt(h),i*=Math.sqrt(h)),Kht(t,e,n,o,a,i,l,s,c,f,d,p,oS);let{ang1:m,ang2:_}=oS,{centerX:y,centerY:D}=oS,w=Math.abs(_)/(Am/4);Math.abs(1-w)<1e-7&&(w=1);let T=Math.max(Math.ceil(w),1);_/=T;let R=r[r.length-2],C=r[r.length-1],S={x:0,y:0};for(let A=0;A<T;A++){let E=Jht(m,_),{x:N,y:et}=aS(E[0],a,i,f,c,y,D,S),{x:X,y:Z}=aS(E[1],a,i,f,c,y,D,S),{x:z,y:Dt}=aS(E[2],a,i,f,c,y,D,S);vy(r,R,C,N,et,X,Z,z,Dt),R=z,C=Dt,m+=_}}var Am,oS,aS,cB,Kht,dB=b(()=>{eS();Am=Math.PI*2,oS={centerX:0,centerY:0,ang1:0,ang2:0},aS=({x:r,y:t},e,n,o,a,i,u,l)=>{r*=e,t*=n;let s=o*r-a*t,c=a*r+o*t;return l.x=s+i,l.y=c+u,l};cB=(r,t,e,n)=>{let o=r*n-t*e<0?-1:1,a=r*e+t*n;return a>1&&(a=1),a<-1&&(a=-1),o*Math.acos(a)},Kht=(r,t,e,n,o,a,i,u,l,s,c,f,d)=>{let p=Math.pow(o,2),h=Math.pow(a,2),m=Math.pow(c,2),_=Math.pow(f,2),y=p*h-p*_-h*m;y<0&&(y=0),y/=p*_+h*m,y=Math.sqrt(y)*(i===u?-1:1);let D=y*o/a*f,w=y*-a/o*c,T=s*D-l*w+(r+e)/2,R=l*D+s*w+(t+n)/2,C=(c-D)/o,S=(f-w)/a,A=(-c-D)/o,E=(-f-w)/a,N=cB(1,0,C,S),et=cB(C,S,A,E);u===0&&et>0&&(et-=Am),u===1&&et<0&&(et+=Am),d.centerX=T,d.centerY=R,d.ang1=N,d.ang2=et}});function pB(r,t,e){let n=(i,u)=>{let l=u.x-i.x,s=u.y-i.y,c=Math.sqrt(l*l+s*s),f=l/c,d=s/c;return{len:c,nx:f,ny:d}},o=(i,u)=>{i===0?r.moveTo(u.x,u.y):r.lineTo(u.x,u.y)},a=t[t.length-1];for(let i=0;i<t.length;i++){let u=t[i%t.length],l=u.radius??e;if(l<=0){o(i,u),a=u;continue}let s=t[(i+1)%t.length],c=n(u,a),f=n(u,s);if(c.len<1e-4||f.len<1e-4){o(i,u),a=u;continue}let d=Math.asin(c.nx*f.ny-c.ny*f.nx),p=1,h=!1;c.nx*f.nx-c.ny*-f.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,p=-1,h=!0):d>0&&(p=-1,h=!0);let m=d/2,_,y=Math.abs(Math.cos(m)*l/Math.sin(m));y>Math.min(c.len/2,f.len/2)?(y=Math.min(c.len/2,f.len/2),_=Math.abs(y*Math.sin(m)/Math.cos(m))):_=l;let D=u.x+f.nx*y+-f.ny*_*p,w=u.y+f.ny*y+f.nx*_*p,T=Math.atan2(c.ny,c.nx)+Math.PI/2*p,R=Math.atan2(f.ny,f.nx)-Math.PI/2*p;i===0&&r.moveTo(D+Math.cos(T)*_,w+Math.sin(T)*_),r.arc(D,w,_,T,R,h),a=u}}function hB(r,t,e,n){let o=(u,l)=>Math.sqrt((u.x-l.x)**2+(u.y-l.y)**2),a=(u,l,s)=>({x:u.x+(l.x-u.x)*s,y:u.y+(l.y-u.y)*s}),i=t.length;for(let u=0;u<i;u++){let l=t[(u+1)%i],s=l.radius??e;if(s<=0){u===0?r.moveTo(l.x,l.y):r.lineTo(l.x,l.y);continue}let c=t[u],f=t[(u+2)%i],d=o(c,l),p;if(d<1e-4)p=l;else{let _=Math.min(d/2,s);p=a(l,c,_/d)}let h=o(f,l),m;if(h<1e-4)m=l;else{let _=Math.min(h/2,s);m=a(l,f,_/h)}u===0?r.moveTo(p.x,p.y):r.lineTo(p.x,p.y),r.quadraticCurveTo(l.x,l.y,m.x,m.y,n)}}var mB=b(()=>{"use strict"});var tmt,_y,vB=b(()=>{KU();tB();nB();An();oB();Aa();eS();uB();nS();sB();dB();mB();tmt=new de,_y=class{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new fr,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();let n=this._currentPoly.points,o=n[n.length-2],a=n[n.length-1];return(o!==t||a!==e)&&n.push(t,e),this}arc(t,e,n,o,a,i){this._ensurePoly(!1);let u=this._currentPoly.points;return gy(u,t,e,n,o,a,i),this}arcTo(t,e,n,o,a){this._ensurePoly();let i=this._currentPoly.points;return lB(i,t,e,n,o,a),this}arcToSvg(t,e,n,o,a,i,u){let l=this._currentPoly.points;return fB(l,this._currentPoly.lastX,this._currentPoly.lastY,i,u,t,e,n,o,a),this}bezierCurveTo(t,e,n,o,a,i,u){this._ensurePoly();let l=this._currentPoly;return vy(this._currentPoly.points,l.lastX,l.lastY,t,e,n,o,a,i,u),this}quadraticCurveTo(t,e,n,o,a){this._ensurePoly();let i=this._currentPoly;return iB(this._currentPoly.points,i.lastX,i.lastY,t,e,n,o,a),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));for(let n=0;n<t.instructions.length;n++){let o=t.instructions[n];this[o.action](...o.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,n,o,a){return this.drawShape(new de(t,e,n,o),a),this}circle(t,e,n,o){return this.drawShape(new fy(t,e,n),o),this}poly(t,e,n){let o=new _d(t);return o.closePath=e,this.drawShape(o,n),this}regularPoly(t,e,n,o,a=0,i){o=Math.max(o|0,3);let u=-1*Math.PI/2+a,l=Math.PI*2/o,s=[];for(let c=0;c<o;c++){let f=c*l+u;s.push(t+n*Math.cos(f),e+n*Math.sin(f))}return this.poly(s,!0,i),this}roundPoly(t,e,n,o,a,i=0,u){if(o=Math.max(o|0,3),a<=0)return this.regularPoly(t,e,n,o,i);let l=n*Math.sin(Math.PI/o)-.001;a=Math.min(a,l);let s=-1*Math.PI/2+i,c=Math.PI*2/o,f=(o-2)*Math.PI/o/2;for(let d=0;d<o;d++){let p=d*c+s,h=t+n*Math.cos(p),m=e+n*Math.sin(p),_=p+Math.PI+f,y=p-Math.PI-f,D=h+a*Math.cos(_),w=m+a*Math.sin(_),T=h+a*Math.cos(y),R=m+a*Math.sin(y);d===0?this.moveTo(D,w):this.lineTo(D,w),this.quadraticCurveTo(h,m,T,R,u)}return this.closePath()}roundShape(t,e,n=!1,o){return t.length<3?this:(n?hB(this,t,e,o):pB(this,t,e),this.closePath())}filletRect(t,e,n,o,a){if(a===0)return this.rect(t,e,n,o);let i=Math.min(n,o)/2,u=Math.min(i,Math.max(-i,a)),l=t+n,s=e+o,c=u<0?-u:0,f=Math.abs(u);return this.moveTo(t,e+f).arcTo(t+c,e+c,t+f,e,f).lineTo(l-f,e).arcTo(l-c,e+c,l,e+f,f).lineTo(l,s-f).arcTo(l-c,s-c,t+n-f,s,f).lineTo(t+f,s).arcTo(t+c,s-c,t,s-f,f).closePath()}chamferRect(t,e,n,o,a,i){if(a<=0)return this.rect(t,e,n,o);let u=Math.min(a,Math.min(n,o)/2),l=t+n,s=e+o,c=[t+u,e,l-u,e,l,e+u,l,s-u,l-u,s,t+u,s,t,s-u,t,e+u];for(let f=c.length-1;f>=2;f-=2)c[f]===c[f-2]&&c[f-1]===c[f-3]&&c.splice(f-1,2);return this.poly(c,!0,i)}ellipse(t,e,n,o,a){return this.drawShape(new dy(t,e,n,o),a),this}roundRect(t,e,n,o,a,i){return this.drawShape(new hy(t,e,n,o,a),i),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let n=this._currentPoly;return n&&this.endPoly(),n=new _d,n.points.push(t,e),this._currentPoly=n,this}endPoly(t=!1){let e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new _d,t)){let e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let n=e.shape.x,o=e.shape.y;if(e.transform&&!e.transform.isIdentity()){let a=e.transform,i=n;n=a.a*n+a.c*o+a.tx,o=a.b*i+a.d*o+a.ty}this._currentPoly.points.push(n,o)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){let n=t.instructions[e];this[n.action](...n.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let e=this.shapePrimitives;for(let n=0;n<e.length;n++){let o=e[n],a=o.shape.getBounds(tmt);o.transform?t.addRect(a,o.transform):t.addRect(a)}return t}}});function Pm(r,t){return r?r.prepend(t):t.clone()}var Gl,iS=b(()=>{Ma();Yn();er();JU();vB();Gl=class r{constructor(t){this.instructions=[],this.uid=be("graphicsPath"),this._dirty=!0,typeof t=="string"?XU(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new _y(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,n,o,a){let i=this.instructions[this.instructions.length-1],u=this.getLastPoint(ye.shared),l=0,s=0;if(!i||i.action!=="bezierCurveTo")l=u.x,s=u.y;else{l=i.data[2],s=i.data[3];let c=u.x,f=u.y;l=c+(c-l),s=f+(f-s)}return this.instructions.push({action:"bezierCurveTo",data:[l,s,t,e,n,o,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,n){let o=this.instructions[this.instructions.length-1],a=this.getLastPoint(ye.shared),i=0,u=0;if(!o||o.action!=="quadraticCurveTo")i=a.x,u=a.y;else{i=o.data[0],u=o.data[1];let l=a.x,s=a.y;i=l+(l-i),u=s+(s-u)}return this.instructions.push({action:"quadraticCurveTo",data:[i,u,t,e,n]}),this._dirty=!0,this}rect(t,e,n,o,a){return this.instructions.push({action:"rect",data:[t,e,n,o,a]}),this._dirty=!0,this}circle(t,e,n,o){return this.instructions.push({action:"circle",data:[t,e,n,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,n,o,a,i,u){a=a||o/2;let l=-1*Math.PI/2+i,s=n*2,c=Math.PI*2/s,f=[];for(let d=0;d<s;d++){let p=d%2?a:o,h=d*c+l;f.push(t+p*Math.cos(h),e+p*Math.sin(h))}return this.poly(f,!0,u),this}clone(t=!1){let e=new r;if(!t)e.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){let o=this.instructions[n];e.instructions.push({action:o.action,data:o.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;let e=t.a,n=t.b,o=t.c,a=t.d,i=t.tx,u=t.ty,l=0,s=0,c=0,f=0,d=0,p=0,h=0,m=0;for(let _=0;_<this.instructions.length;_++){let y=this.instructions[_],D=y.data;switch(y.action){case"moveTo":case"lineTo":l=D[0],s=D[1],D[0]=e*l+o*s+i,D[1]=n*l+a*s+u;break;case"bezierCurveTo":c=D[0],f=D[1],d=D[2],p=D[3],l=D[4],s=D[5],D[0]=e*c+o*f+i,D[1]=n*c+a*f+u,D[2]=e*d+o*p+i,D[3]=n*d+a*p+u,D[4]=e*l+o*s+i,D[5]=n*l+a*s+u;break;case"quadraticCurveTo":c=D[0],f=D[1],l=D[2],s=D[3],D[0]=e*c+o*f+i,D[1]=n*c+a*f+u,D[2]=e*l+o*s+i,D[3]=n*l+a*s+u;break;case"arcToSvg":l=D[5],s=D[6],h=D[0],m=D[1],D[0]=e*h+o*m,D[1]=n*h+a*m,D[5]=e*l+o*s+i,D[6]=n*l+a*s+u;break;case"circle":D[4]=Pm(D[3],t);break;case"rect":D[4]=Pm(D[4],t);break;case"ellipse":D[8]=Pm(D[8],t);break;case"roundRect":D[5]=Pm(D[5],t);break;case"addPath":D[0].transform(t);break;case"poly":D[2]=Pm(D[2],t);break;default:ct("unknown transform action",y.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,n=this.instructions[e];if(!n)return t.x=0,t.y=0,t;for(;n.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;n=this.instructions[e]}switch(n.action){case"moveTo":case"lineTo":t.x=n.data[0],t.y=n.data[1];break;case"quadraticCurveTo":t.x=n.data[2],t.y=n.data[3];break;case"bezierCurveTo":t.x=n.data[4],t.y=n.data[5];break;case"arc":case"arcToSvg":t.x=n.data[5],t.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(t);break}return t}}});function gB(r,t){if(typeof r=="string"){let n=document.createElement("div");n.innerHTML=r.trim(),r=n.querySelector("svg")}let e={context:t,path:new Gl};return _B(r,e,null,null),t}function _B(r,t,e,n){let o=r.children,{fillStyle:a,strokeStyle:i}=emt(r);a&&e?e={...e,...a}:a&&(e=a),i&&n?n={...n,...i}:i&&(n=i),t.context.fillStyle=e,t.context.strokeStyle=n;let u,l,s,c,f,d,p,h,m,_,y,D,w,T,R,C,S;switch(r.nodeName.toLowerCase()){case"path":T=r.getAttribute("d"),R=new Gl(T),t.context.path(R),e&&t.context.fill(),n&&t.context.stroke();break;case"circle":p=bn(r,"cx",0),h=bn(r,"cy",0),m=bn(r,"r",0),t.context.ellipse(p,h,m,m),e&&t.context.fill(),n&&t.context.stroke();break;case"rect":u=bn(r,"x",0),l=bn(r,"y",0),C=bn(r,"width",0),S=bn(r,"height",0),_=bn(r,"rx",0),y=bn(r,"ry",0),_||y?t.context.roundRect(u,l,C,S,_||y):t.context.rect(u,l,C,S),e&&t.context.fill(),n&&t.context.stroke();break;case"ellipse":p=bn(r,"cx",0),h=bn(r,"cy",0),_=bn(r,"rx",0),y=bn(r,"ry",0),t.context.beginPath(),t.context.ellipse(p,h,_,y),e&&t.context.fill(),n&&t.context.stroke();break;case"line":s=bn(r,"x1",0),c=bn(r,"y1",0),f=bn(r,"x2",0),d=bn(r,"y2",0),t.context.beginPath(),t.context.moveTo(s,c),t.context.lineTo(f,d),n&&t.context.stroke();break;case"polygon":w=r.getAttribute("points"),D=w.match(/\d+/g).map(A=>parseInt(A,10)),t.context.poly(D,!0),e&&t.context.fill(),n&&t.context.stroke();break;case"polyline":w=r.getAttribute("points"),D=w.match(/\d+/g).map(A=>parseInt(A,10)),t.context.poly(D,!1),n&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}for(let A=0;A<o.length;A++)_B(o[A],t,e,n)}function bn(r,t,e){let n=r.getAttribute(t);return n?Number(n):e}function emt(r){let t=r.getAttribute("style"),e={},n={},o=!1,a=!1;if(t){let i=t.split(";");for(let u=0;u<i.length;u++){let l=i[u],[s,c]=l.split(":");switch(s){case"stroke":c!=="none"&&(e.color=oe.shared.setValue(c).toNumber(),a=!0);break;case"stroke-width":e.width=Number(c);break;case"fill":c!=="none"&&(o=!0,n.color=oe.shared.setValue(c).toNumber());break;case"fill-opacity":n.alpha=Number(c);break;case"stroke-opacity":e.alpha=Number(c);break;case"opacity":n.alpha=Number(c),e.alpha=Number(c);break}}}else{let i=r.getAttribute("stroke");i&&i!=="none"&&(a=!0,e.color=oe.shared.setValue(i).toNumber(),e.width=bn(r,"stroke-width",1));let u=r.getAttribute("fill");u&&u!=="none"&&(o=!0,n.color=oe.shared.setValue(u).toNumber())}return{strokeStyle:a?e:null,fillStyle:o?n:null}}var yB=b(()=>{Zn();iS()});function rmt(r){return oe.isColorLike(r)}function bB(r){return r instanceof Uu}function DB(r){return r instanceof Wl}function nmt(r,t,e){let n=oe.shared.setValue(t??0);return r.color=n.toNumber(),r.alpha=n.alpha===1?e.alpha:n.alpha,r.texture=Y.WHITE,{...e,...r}}function wB(r,t,e){return r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...e,...r}}function xB(r,t,e){return t.buildLinearGradient(),r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...e,...r}}function omt(r,t){let e={...t,...r};if(e.texture){if(e.texture!==Y.WHITE){let a=e.matrix?.invert()||new J;a.translate(e.texture.frame.x,e.texture.frame.y),a.scale(1/e.texture.source.width,1/e.texture.source.height),e.matrix=a}let o=e.texture.source.style;o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update())}let n=oe.shared.setValue(e.color);return e.alpha*=n.alpha,e.color=n.toNumber(),e.matrix=e.matrix?e.matrix.clone():null,e}function Bu(r,t){if(r==null)return null;let e={},n=r;return rmt(r)?nmt(e,r,t):bB(r)?wB(e,r,t):DB(r)?xB(e,r,t):n.fill&&bB(n.fill)?wB(n,n.fill,t):n.fill&&DB(n.fill)?xB(n,n.fill,t):omt(n,t)}function bd(r,t){let{width:e,alignment:n,miterLimit:o,cap:a,join:i,...u}=t,l=Bu(r,u);return l?{width:e,alignment:n,miterLimit:o,cap:a,join:i,...l}:null}var uS=b(()=>{Zn();Oe();Be();sy();cy()});var amt,TB,lS,ho,yy=b(()=>{jn();Zn();Oe();Ma();Be();Yn();Vr();Aa();iS();yB();uS();amt=new ye,TB=new J,lS=class Hi extends Ze{constructor(){super(...arguments),this.uid=be("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Gl,this._transform=new J,this._fillStyle={...Hi.defaultFillStyle},this._strokeStyle={...Hi.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new fr,this._boundsDirty=!0}clone(){let t=new Hi;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Bu(t,Hi.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=bd(t,Hi.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Bu(t,Hi.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Bu(t,Hi.defaultStrokeStyle),this}texture(t,e,n,o,a,i){return this.instructions.push({action:"texture",data:{image:t,dx:n||0,dy:o||0,dw:a||t.frame.width,dh:i||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?oe.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Gl,this}fill(t,e){let n,o=this.instructions[this.instructions.length-1];return this._tick===0&&o&&o.action==="stroke"?n=o.data.path:n=this._activePath.clone(),n?(t!=null&&(e!==void 0&&typeof t=="number"&&(Ut(Ht,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Bu(t,Hi.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:t,y:e}=this._activePath.getLastPoint(ye.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e,n=this.instructions[this.instructions.length-1];return this._tick===0&&n&&n.action==="fill"?e=n.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=bd(t,Hi.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){let e=this.instructions[this.instructions.length-1-t],n=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(n);else{e.data.hole=n;break}}return this._initNextPathLocation(),this}arc(t,e,n,o,a,i){this._tick++;let u=this._transform;return this._activePath.arc(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,n,o,a,i),this}arcTo(t,e,n,o,a){this._tick++;let i=this._transform;return this._activePath.arcTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty,i.a*n+i.c*o+i.tx,i.b*n+i.d*o+i.ty,a),this}arcToSvg(t,e,n,o,a,i,u){this._tick++;let l=this._transform;return this._activePath.arcToSvg(t,e,n,o,a,l.a*i+l.c*u+l.tx,l.b*i+l.d*u+l.ty),this}bezierCurveTo(t,e,n,o,a,i,u){this._tick++;let l=this._transform;return this._activePath.bezierCurveTo(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,l.a*n+l.c*o+l.tx,l.b*n+l.d*o+l.ty,l.a*a+l.c*i+l.tx,l.b*a+l.d*i+l.ty,u),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,n,o){return this._tick++,this._activePath.ellipse(t,e,n,o,this._transform.clone()),this}circle(t,e,n){return this._tick++,this._activePath.circle(t,e,n,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;let n=this._transform;return this._activePath.lineTo(n.a*t+n.c*e+n.tx,n.b*t+n.d*e+n.ty),this}moveTo(t,e){this._tick++;let n=this._transform,o=this._activePath.instructions,a=n.a*t+n.c*e+n.tx,i=n.b*t+n.d*e+n.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=a,o[0].data[1]=i,this):(this._activePath.moveTo(a,i),this)}quadraticCurveTo(t,e,n,o,a){this._tick++;let i=this._transform;return this._activePath.quadraticCurveTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty,i.a*n+i.c*o+i.tx,i.b*n+i.d*o+i.ty,a),this}rect(t,e,n,o){return this._tick++,this._activePath.rect(t,e,n,o,this._transform.clone()),this}roundRect(t,e,n,o,a){return this._tick++,this._activePath.roundRect(t,e,n,o,a,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,n,o,a=0,i){return this._tick++,this._activePath.regularPoly(t,e,n,o,a,i),this}roundPoly(t,e,n,o,a,i){return this._tick++,this._activePath.roundPoly(t,e,n,o,a,i),this}roundShape(t,e,n,o){return this._tick++,this._activePath.roundShape(t,e,n,o),this}filletRect(t,e,n,o,a){return this._tick++,this._activePath.filletRect(t,e,n,o,a),this}chamferRect(t,e,n,o,a,i){return this._tick++,this._activePath.chamferRect(t,e,n,o,a,i),this}star(t,e,n,o,a=0,i=0){return this._tick++,this._activePath.star(t,e,n,o,a,i,this._transform.clone()),this}svg(t){return this._tick++,gB(t,this),this}restore(){let t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,n,o,a,i){return t instanceof J?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,n,o,a,i),this)}transform(t,e,n,o,a,i){return t instanceof J?(this._transform.append(t),this):(TB.set(t,e,n,o,a,i),this._transform.append(TB),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){let n=this.instructions[e],o=n.action;if(o==="fill"){let a=n.data;t.addBounds(a.path.bounds)}else if(o==="texture"){let a=n.data;t.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(o==="stroke"){let a=n.data,i=a.style.width/2,u=a.path.bounds;t.addFrame(u.minX-i,u.minY-i,u.maxX+i,u.maxY+i)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;let e=this.instructions,n=!1;for(let o=0;o<e.length;o++){let a=e[o],i=a.data,u=i.path;if(!a.action||!u)continue;let l=i.style,s=u.shapePath.shapePrimitives;for(let c=0;c<s.length;c++){let f=s[c].shape;if(!l||!f)continue;let d=s[c].transform,p=d?d.applyInverse(t,amt):t;a.action==="fill"?n=f.contains(p.x,p.y):n=f.strokeContains(p.x,p.y,l.width);let h=i.hole;if(h){let m=h.shapePath?.shapePrimitives;if(m)for(let _=0;_<m.length;_++)m[_].shape.contains(p.x,p.y)&&(n=!1)}if(n)return!0}}return n}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){let n=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(n),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(n)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};lS.defaultFillStyle={color:16777215,alpha:1,texture:Y.WHITE,matrix:null,fill:null};lS.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Y.WHITE,matrix:null,fill:null};ho=lS});function by(r){let t=[],e=0;for(let n=0;n<RB.length;n++){let o=`_${RB[n]}`;t[e++]=r[o]}return e=CB(r._fill,t,e),e=imt(r._stroke,t,e),e=umt(r.dropShadow,t,e),t.join("-")}function CB(r,t,e){return r&&(t[e++]=r.color,t[e++]=r.alpha,t[e++]=r.fill?.styleKey),e}function imt(r,t,e){return r&&(e=CB(r,t,e),t[e++]=r.width,t[e++]=r.alignment,t[e++]=r.cap,t[e++]=r.join,t[e++]=r.miterLimit),e}function umt(r,t,e){return r&&(t[e++]=r.alpha,t[e++]=r.angle,t[e++]=r.blur,t[e++]=r.distance,t[e++]=oe.shared.setValue(r.color).toNumber()),e}var RB,sS=b(()=>{Zn();RB=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"]});function lmt(r){let t=r;if(typeof t.dropShadow=="boolean"&&t.dropShadow){let e=In.defaultDropShadow;r.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){Ut(Ht,"strokeThickness is now a part of stroke");let e=t.stroke,n={};if(oe.isColorLike(e))n.color=e;else if(e instanceof Wl||e instanceof Uu)n.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))n=e;else throw new Error("Invalid stroke value.");r.stroke={...n,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){Ut(Ht,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;r.fontSize==null?r.fontSize=In.defaultTextStyle.fontSize:typeof r.fontSize=="string"?e=parseInt(r.fontSize,10):e=r.fontSize;let n=new Wl(0,0,0,e*1.7),o=t.fillGradientStops.map(a=>oe.shared.setValue(a).toNumber());o.forEach((a,i)=>{let u=i/(o.length-1);n.addColorStop(u,a)}),r.fill={fill:n}}}var cS,In,_c=b(()=>{jn();Zn();Vr();sy();cy();yy();uS();sS();cS=class Dd extends Ze{constructor(t={}){super(),lmt(t);let e={...Dd.defaultTextStyle,...t};for(let n in e){let o=n;this[o]=e[n]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Dd.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Dd.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...ho.defaultFillStyle,...t},()=>{this._fill=Bu({...this._originalFill},ho.defaultFillStyle)})),this._fill=Bu(t===0?"black":t,ho.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...ho.defaultStrokeStyle,...t},()=>{this._stroke=bd({...this._originalStroke},ho.defaultStrokeStyle)})),this._stroke=bd(t,ho.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=by(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let t=Dd.defaultTextStyle;for(let e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Dd({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){let n=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(n),this._originalFill?.texture&&this._originalFill.texture.destroy(n),this._stroke?.texture&&this._stroke.texture.destroy(n),this._originalStroke?.texture&&this._originalStroke.texture.destroy(n)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(n,o,a)=>(n[o]=a,e?.(o,a),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(oe.isColorLike(t)||t instanceof Wl||t instanceof Uu)}};cS.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};cS.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};In=cS});function Dy(r,t,e,n){let o=smt;o.minX=0,o.minY=0,o.maxX=r.width/n|0,o.maxY=r.height/n|0;let a=Pn.getOptimalTexture(o.width,o.height,n,!1);return a.source.uploadMethodId="image",a.source.resource=r,a.source.alphaMode="premultiply-alpha-on-upload",a.frame.width=t/n,a.frame.height=e/n,a.source.emit("update",a.source),a.updateUvs(),a}var smt,fS=b(()=>{gd();Aa();smt=new fr});function yc(r){let t=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize,e=r.fontFamily;Array.isArray(r.fontFamily)||(e=r.fontFamily.split(","));for(let n=e.length-1;n>=0;n--){let o=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!cmt.includes(o)&&(o=`"${o}"`),e[n]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${t} ${e.join(",")}`}var cmt,wy=b(()=>{"use strict";cmt=["serif","sans-serif","monospace","cursive","fantasy","system-ui"]});var dS,vi,La,xy=b(()=>{rr();wy();dS={willReadFrequently:!0},vi=class Ot{static get experimentalLetterSpacingSupported(){let t=Ot._experimentalLetterSpacingSupported;if(t!==void 0){let e=Ct.get().getCanvasRenderingContext2D().prototype;t=Ot._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,n,o,a,i,u,l,s){this.text=t,this.style=e,this.width=n,this.height=o,this.lines=a,this.lineWidths=i,this.lineHeight=u,this.maxLineWidth=l,this.fontProperties=s}static measureText(t=" ",e,n=Ot._canvas,o=e.wordWrap){let a=`${t}:${e.styleKey}`;if(Ot._measurementCache[a])return Ot._measurementCache[a];let i=yc(e),u=Ot.measureFont(i);u.fontSize===0&&(u.fontSize=e.fontSize,u.ascent=e.fontSize);let l=Ot.__context;l.font=i;let c=(o?Ot._wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),f=new Array(c.length),d=0;for(let D=0;D<c.length;D++){let w=Ot._measureText(c[D],e.letterSpacing,l);f[D]=w,d=Math.max(d,w)}let p=e._stroke?.width||0,h=d+p;e.dropShadow&&(h+=e.dropShadow.distance);let m=e.lineHeight||u.fontSize,_=Math.max(m,u.fontSize+p)+(c.length-1)*(m+e.leading);return e.dropShadow&&(_+=e.dropShadow.distance),new Ot(t,e,h,_,c,f,m+e.leading,d,u)}static _measureText(t,e,n){let o=!1;Ot.experimentalLetterSpacingSupported&&(Ot.experimentalLetterSpacing?(n.letterSpacing=`${e}px`,n.textLetterSpacing=`${e}px`,o=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let a=n.measureText(t),i=a.width,u=-a.actualBoundingBoxLeft,s=a.actualBoundingBoxRight-u;if(i>0)if(o)i-=e,s-=e;else{let c=(Ot.graphemeSegmenter(t).length-1)*e;i+=c,s+=c}return Math.max(i,s)}static _wordWrap(t,e,n=Ot._canvas){let o=n.getContext("2d",dS),a=0,i="",u="",l=Object.create(null),{letterSpacing:s,whiteSpace:c}=e,f=Ot._collapseSpaces(c),d=Ot._collapseNewlines(c),p=!f,h=e.wordWrapWidth+s,m=Ot._tokenize(t);for(let _=0;_<m.length;_++){let y=m[_];if(Ot._isNewline(y)){if(!d){u+=Ot._addLine(i),p=!f,i="",a=0;continue}y=" "}if(f){let w=Ot.isBreakingSpace(y),T=Ot.isBreakingSpace(i[i.length-1]);if(w&&T)continue}let D=Ot._getFromCache(y,s,l,o);if(D>h)if(i!==""&&(u+=Ot._addLine(i),i="",a=0),Ot.canBreakWords(y,e.breakWords)){let w=Ot.wordWrapSplit(y);for(let T=0;T<w.length;T++){let R=w[T],C=R,S=1;for(;w[T+S];){let E=w[T+S];if(!Ot.canBreakChars(C,E,y,T,e.breakWords))R+=E;else break;C=E,S++}T+=S-1;let A=Ot._getFromCache(R,s,l,o);A+a>h&&(u+=Ot._addLine(i),p=!1,i="",a=0),i+=R,a+=A}}else{i.length>0&&(u+=Ot._addLine(i),i="",a=0);let w=_===m.length-1;u+=Ot._addLine(y,!w),p=!1,i="",a=0}else D+a>h&&(p=!1,u+=Ot._addLine(i),i="",a=0),(i.length>0||!Ot.isBreakingSpace(y)||p)&&(i+=y,a+=D)}return u+=Ot._addLine(i,!1),u}static _addLine(t,e=!0){return t=Ot._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,n,o){let a=n[t];return typeof a!="number"&&(a=Ot._measureText(t,e,o)+e,n[t]=a),a}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){let n=t[e];if(!Ot.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:Ot._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Ot._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){let e=[],n="";if(typeof t!="string")return e;for(let o=0;o<t.length;o++){let a=t[o],i=t[o+1];if(Ot.isBreakingSpace(a,i)||Ot._isNewline(a)){n!==""&&(e.push(n),n=""),e.push(a);continue}n+=a}return n!==""&&e.push(n),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,n,o,a){return!0}static wordWrapSplit(t){return Ot.graphemeSegmenter(t)}static measureFont(t){if(Ot._fonts[t])return Ot._fonts[t];let e=Ot._context;e.font=t;let n=e.measureText(Ot.METRICS_STRING+Ot.BASELINE_SYMBOL),o={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return Ot._fonts[t]=o,o}static clearMetrics(t=""){t?delete Ot._fonts[t]:Ot._fonts={}}static get _canvas(){if(!Ot.__canvas){let t;try{let e=new OffscreenCanvas(0,0);if(e.getContext("2d",dS)?.measureText)return Ot.__canvas=e,e;t=Ct.get().createCanvas()}catch{t=Ct.get().createCanvas()}t.width=t.height=10,Ot.__canvas=t}return Ot.__canvas}static get _context(){return Ot.__context||(Ot.__context=Ot._canvas.getContext("2d",dS)),Ot.__context}};vi.METRICS_STRING="|\xC9q\xC5";vi.BASELINE_SYMBOL="M";vi.BASELINE_MULTIPLIER=1.4;vi.HEIGHT_MULTIPLIER=2;vi.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})();vi.experimentalLetterSpacing=!1;vi._fonts={};vi._newlines=[10,13];vi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];vi._measurementCache={};La=vi});function wd(r,t){if(r.texture===Y.WHITE&&!r.fill)return oe.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof Uu){let e=r.fill,n=t.createPattern(e.texture.source.resource,"repeat"),o=e.transform.copyTo(J.shared);return o.scale(e.texture.frame.width,e.texture.frame.height),n.setTransform(o),n}else if(r.fill instanceof Wl){let e=r.fill;if(e.type==="linear"){let n=t.createLinearGradient(e.x0,e.y0,e.x1,e.y1);return e.gradientStops.forEach(o=>{n.addColorStop(o.offset,oe.shared.setValue(o.color).toHex())}),n}}}else{let e=t.createPattern(r.texture.source.resource,"repeat"),n=r.matrix.copyTo(J.shared);return n.scale(r.texture.frame.width,r.texture.frame.height),e.setTransform(n),e}return ct("FillStyle not recognised",r),"red"}var pS=b(()=>{Zn();Oe();Be();er();sy();cy()});var Im,SB=b(()=>{Zn();I();dm();vd();gd();QU();Vr();_c();fS();xy();wy();pS();Im=class{constructor(t){this._activeTextures={},this._renderer=t}getTextureSize(t,e,n){let o=La.measureText(t||" ",n),a=Math.ceil(Math.ceil(Math.max(1,o.width)+n.padding*2)*e),i=Math.ceil(Math.ceil(Math.max(1,o.height)+n.padding*2)*e);return a=Math.ceil(a-1e-6),i=Math.ceil(i-1e-6),a=Nu(a),i=Nu(i),{width:a,height:i}}getTexture(t,e,n,o){typeof t=="string"&&(Ut("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),t={text:t,style:n,resolution:e}),t.style instanceof In||(t.style=new In(t.style));let{texture:a,canvasAndContext:i}=this.createTextureAndCanvas(t);return this._renderer.texture.initSource(a._source),Go.returnCanvasAndContext(i),a}createTextureAndCanvas(t){let{text:e,style:n}=t,o=t.resolution??this._renderer.resolution,a=La.measureText(e||" ",n),i=Math.ceil(Math.ceil(Math.max(1,a.width)+n.padding*2)*o),u=Math.ceil(Math.ceil(Math.max(1,a.height)+n.padding*2)*o),l=Go.getOptimalCanvasAndContext(i,u),{canvas:s}=l;this.renderTextToCanvas(e,n,o,l);let c=Dy(s,i,u,o);if(n.trim){let f=qU(s,o);c.frame.copyFrom(f),c.updateUvs()}return{texture:c,canvasAndContext:l}}getManagedTexture(t){t._resolution=t._autoResolution?this._renderer.resolution:t.resolution;let e=t._getKey();if(this._activeTextures[e])return this._increaseReferenceCount(e),this._activeTextures[e].texture;let{texture:n,canvasAndContext:o}=this.createTextureAndCanvas(t);return this._activeTextures[e]={canvasAndContext:o,texture:n,usageCount:1},n}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];if(e.usageCount--,e.usageCount===0){Go.returnCanvasAndContext(e.canvasAndContext),Pn.returnTexture(e.texture);let n=e.texture.source;n.resource=null,n.uploadMethodId="unknown",n.alphaMode="no-premultiply-alpha",this._activeTextures[t]=null}}getReferenceCount(t){return this._activeTextures[t].usageCount}renderTextToCanvas(t,e,n,o){let{canvas:a,context:i}=o,u=yc(e),l=La.measureText(t||" ",e),s=l.lines,c=l.lineHeight,f=l.lineWidths,d=l.maxLineWidth,p=l.fontProperties,h=a.height;if(i.resetTransform(),i.scale(n,n),i.textBaseline=e.textBaseline,e._stroke?.width){let D=e._stroke;i.lineWidth=D.width,i.miterLimit=D.miterLimit,i.lineJoin=D.join,i.lineCap=D.cap}i.font=u;let m,_,y=e.dropShadow?2:1;for(let D=0;D<y;++D){let w=e.dropShadow&&D===0,T=w?Math.ceil(Math.max(1,h)+e.padding*2):0,R=T*n;if(w){i.fillStyle="black",i.strokeStyle="black";let A=e.dropShadow,E=A.color,N=A.alpha;i.shadowColor=oe.shared.setValue(E).setAlpha(N).toRgbaString();let et=A.blur*n,X=A.distance*n;i.shadowBlur=et,i.shadowOffsetX=Math.cos(A.angle)*X,i.shadowOffsetY=Math.sin(A.angle)*X+R}else i.fillStyle=e._fill?wd(e._fill,i):null,e._stroke?.width&&(i.strokeStyle=wd(e._stroke,i)),i.shadowColor="black";let C=(c-p.fontSize)/2;c-p.fontSize<0&&(C=0);let S=e._stroke?.width??0;for(let A=0;A<s.length;A++)m=S/2,_=S/2+A*c+p.ascent+C,e.align==="right"?m+=d-f[A]:e.align==="center"&&(m+=(d-f[A])/2),e._stroke?.width&&this._drawLetterSpacing(s[A],e,o,m+e.padding,_+e.padding-T,!0),e._fill!==void 0&&this._drawLetterSpacing(s[A],e,o,m+e.padding,_+e.padding-T)}}_drawLetterSpacing(t,e,n,o,a,i=!1){let{context:u}=n,l=e.letterSpacing,s=!1;if(La.experimentalLetterSpacingSupported&&(La.experimentalLetterSpacing?(u.letterSpacing=`${l}px`,u.textLetterSpacing=`${l}px`,s=!0):(u.letterSpacing="0px",u.textLetterSpacing="0px")),l===0||s){i?u.strokeText(t,o,a):u.fillText(t,o,a);return}let c=o,f=La.graphemeSegmenter(t),d=u.measureText(t).width,p=0;for(let h=0;h<f.length;++h){let m=f[h];i?u.strokeText(m,c,a):u.fillText(m,c,a);let _="";for(let y=h+1;y<f.length;++y)_+=f[y];p=u.measureText(_).width,c+=d-p+l,d=p}}destroy(){this._activeTextures=null}};Im.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"canvasText"}});var hS=b(()=>{I();WU();SB();dt.add(Im);dt.add(Mm)});var bc,mS=b(()=>{Vr();P0();yy();bc=class r extends Al{constructor(t){t instanceof ho&&(t={context:t});let{context:e,roundPixels:n,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new ho,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=n??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new r(this._context.clone()):(this._ownedContext=null,new r(this._context))}lineStyle(t,e,n){Ut(Ht,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let o={};return t&&(o.width=t),e&&(o.color=e),n&&(o.alpha=n),this.context.strokeStyle=o,this}beginFill(t,e){Ut(Ht,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let n={};return t&&(n.color=t),e&&(n.alpha=e),this.context.fillStyle=n,this}endFill(){Ut(Ht,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let t=this.context.strokeStyle;return(t.width!==ho.defaultStrokeStyle.width||t.color!==ho.defaultStrokeStyle.color||t.alpha!==ho.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Ut(Ht,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Ut(Ht,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Ut(Ht,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Ut(Ht,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Ut(Ht,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Ut(Ht,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}});var OB,EB,FB=b(()=>{"use strict";OB={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:` 
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},EB={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:` 
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}}});var MB,AB,PB=b(()=>{"use strict";MB={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {
                
                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));
            
                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;
             
            }
        `}},AB={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {
                
                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));
               
                // SDF
                median = min(median, msdfColor.a);
            
                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
           
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);  
              
                return coverage;
            }
        `}}});var vS,gS,Ty,IB=b(()=>{Oe();cc();$l();Dm();wm();Ll();j0();hi();po();FB();PB();Ty=class extends Er{constructor(){let t=new Qe({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new J,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),e=Ia();vS??(vS=Bi({name:"sdf-shader",bits:[id,ld(e),OB,MB,Gi]})),gS??(gS=Wi({name:"sdf-shader",bits:[ud,sd(e),EB,AB,zi]})),super({glProgram:gS,gpuProgram:vS,resources:{localUniforms:t,batchSamplers:cd(e)}})}}});var xd,_S=b(()=>{jn();Vr();xd=class extends Ze{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Ut(Ht,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Ut(Ht,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Ut(Ht,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Ut(Ht,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Ut(Ht,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(let e in this.chars)this.chars[e].texture?.destroy();this.chars=null,t&&(this.pages.forEach(e=>e.texture.destroy(!0)),this.pages=null)}}});function Ry(r){if(r==="")return[];typeof r=="string"&&(r=[r]);let t=[];for(let e=0,n=r.length;e<n;e++){let o=r[e];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let a=o[0].charCodeAt(0),i=o[1].charCodeAt(0);if(i<a)throw new Error("[BitmapFont]: Invalid character range.");for(let u=a,l=i;u<=l;u++)t.push(String.fromCharCode(u))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var yS=b(()=>{"use strict"});var NB,bS,$B=b(()=>{Zn();An();vd();Kf();Be();Vr();xy();wy();pS();_c();_S();yS();NB=class kB extends xd{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let e={...kB.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;let n=e.style.clone();e.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=Y.WHITE,n._fill.fill=null),this.applyFillAsTint=e.overrideFill;let o=n.fontSize;n.fontSize=this.baseMeasurementFontSize;let a=yc(n);e.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/o):n.fontSize=this.baseRenderedFontSize=o,this._style=n,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,this.fontMetrics=La.measureFont(a),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(t){let e=Ry(t).filter(h=>!this._currentChars.includes(h)).filter((h,m,_)=>_.indexOf(h)===m);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:o,context:a}=n.canvasAndContext,i=n.texture.source,u=this._style,l=this._currentX,s=this._currentY,c=this.baseRenderedFontSize/this.baseMeasurementFontSize,f=this._padding*c,d=0,p=!1;for(let h=0;h<e.length;h++){let m=e[h],_=La.measureText(m,u,o,!1),y=Math.ceil((u.fontStyle==="italic"?2:1)*_.width);_.lineHeight=_.height;let D=_.width*c,w=_.height*c,T=y+f*2,R=w+f*2;if(p=!1,m!==`
`&&m!=="\r"&&m!=="	"&&m!==" "&&(p=!0,d=Math.ceil(Math.max(R,d))),l+T>this._textureSize&&(s+=d,d=R,l=0,s+d>this._textureSize)){i.update();let S=this._nextPage();o=S.canvasAndContext.canvas,a=S.canvasAndContext.context,i=S.texture.source,s=0}let C=D/c-(u.dropShadow?.distance??0)-(u._stroke?.width??0);if(this.chars[m]={id:m.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:C,kerning:{}},p){this._drawGlyph(a,_,l+f,s+f,c,u);let S=i.width*c,A=i.height*c,E=new de(l/S*i.width,s/A*i.height,T/S*i.width,R/A*i.height);this.chars[m].texture=new Y({source:i,frame:E}),l+=Math.ceil(T)}}i.update(),this._currentX=l,this._currentY=s,this._skipKerning&&this._applyKerning(e,a)}get pageTextures(){return Ut(Ht,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){let n=this._measureCache;for(let o=0;o<t.length;o++){let a=t[o];for(let i=0;i<this._currentChars.length;i++){let u=this._currentChars[i],l=n[a];l||(l=n[a]=e.measureText(a).width);let s=n[u];s||(s=n[u]=e.measureText(u).width);let c=e.measureText(a+u).width,f=c-(l+s);f&&(this.chars[a].kerning[u]=f),c=e.measureText(a+u).width,f=c-(l+s),f&&(this.chars[u].kerning[a]=f)}}}_nextPage(){this._currentPageIndex++;let t=this.resolution,e=Go.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);let n=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Y({source:new la({resource:e.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),a={canvasAndContext:e,texture:o};return this.pages[this._currentPageIndex]=a,a}_setupContext(t,e,n){e.fontSize=this.baseRenderedFontSize,t.scale(n,n),t.font=yc(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;let o=e._stroke,a=o?.width??0;if(o&&(t.lineWidth=a,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=wd(o,t)),e._fill&&(t.fillStyle=wd(e._fill,t)),e.dropShadow){let i=e.dropShadow,u=oe.shared.setValue(i.color).toArray(),l=i.blur*n,s=i.distance*n;t.shadowColor=`rgba(${u[0]*255},${u[1]*255},${u[2]*255},${i.alpha})`,t.shadowBlur=l,t.shadowOffsetX=Math.cos(i.angle)*s,t.shadowOffsetY=Math.sin(i.angle)*s}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,n,o,a,i){let u=e.text,l=e.fontProperties,c=(i._stroke?.width??0)*a,f=n+c/2,d=o-c/2,p=l.descent*a,h=e.lineHeight*a;i.stroke&&c&&t.strokeText(u,f,d+h-p),i._fill&&t.fillText(u,f,d+h-p)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{canvasAndContext:e,texture:n}=this.pages[t];Go.returnCanvasAndContext(e),n.destroy(!0)}this.pages=null}};NB.defaultOptions={textureSize:512,style:new In,mipmap:!0};bS=NB});function Cy(r,t,e,n){let o={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=e.baseLineOffset;let a=o.lines[0],i=null,u=!0,l={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},s=h=>{let m=a.width;for(let _=0;_<l.index;_++){let y=h.positions[_];a.chars.push(h.chars[_]),a.charPositions.push(y+m)}a.width+=h.width,u=!1,l.width=0,l.index=0,l.chars.length=0},c=()=>{let h=a.chars.length-1;if(n){let m=a.chars[h];for(;m===" ";)a.width-=e.chars[m].xAdvance,m=a.chars[--h]}o.width=Math.max(o.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},u=!0,o.lines.push(a),o.height+=e.lineHeight},f=e.baseMeasurementFontSize/t.fontSize,d=t.letterSpacing*f,p=t.wordWrapWidth*f;for(let h=0;h<r.length+1;h++){let m,_=h===r.length;_||(m=r[h]);let y=e.chars[m]||e.chars[" "];if(/(?:\s)/.test(m)||m==="\r"||m===`
`||_){if(!u&&t.wordWrap&&a.width+l.width-d>p?(c(),s(l),_||a.charPositions.push(0)):(l.start=a.width,s(l),_||a.charPositions.push(0)),m==="\r"||m===`
`)a.width!==0&&c();else if(!_){let R=y.xAdvance+(y.kerning[i]||0)+d;a.width+=R,a.spaceWidth=R,a.spacesIndex.push(a.charPositions.length),a.chars.push(m)}}else{let T=y.kerning[i]||0,R=y.xAdvance+T+d;l.positions[l.index++]=l.width+T,l.chars.push(m),l.width+=R}i=m}return c(),t.align==="center"?fmt(o):t.align==="right"?dmt(o):t.align==="justify"&&pmt(o),o}function fmt(r){for(let t=0;t<r.lines.length;t++){let e=r.lines[t],n=r.width/2-e.width/2;for(let o=0;o<e.charPositions.length;o++)e.charPositions[o]+=n}}function dmt(r){for(let t=0;t<r.lines.length;t++){let e=r.lines[t],n=r.width-e.width;for(let o=0;o<e.charPositions.length;o++)e.charPositions[o]+=n}}function pmt(r){let t=r.width;for(let e=0;e<r.lines.length;e++){let n=r.lines[e],o=0,a=n.spacesIndex[o++],i=0,u=n.spacesIndex.length,s=(t-n.width)/u;for(let c=0;c<n.charPositions.length;c++)c===a&&(a=n.spacesIndex[o++],i+=s),n.charPositions[c]+=i}}var DS=b(()=>{"use strict"});var Sy,wS,Nm,xS=b(()=>{Pl();Vr();er();_c();$B();DS();yS();Sy=0,wS=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){let n=`${e.fontFamily}-bitmap`,o=!0;if(e._fill.fill&&!e._stroke)n+=e._fill.fill.styleKey,o=!1;else if(e._stroke||e.dropShadow){let i=e.styleKey;i=i.substring(0,i.lastIndexOf("-")),n=`${i}-bitmap`,o=!1}if(!Pe.has(n)){let i=new bS({style:e,overrideFill:o,overrideSize:!0,...this.defaultOptions});Sy++,Sy>50&&ct("BitmapText",`You have dynamically created ${Sy} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),i.once("destroy",()=>{Sy--,Pe.remove(n)}),Pe.set(n,i)}let a=Pe.get(n);return a.ensureCharacters?.(t),a}getLayout(t,e,n=!0){let o=this.getFont(t,e);return Cy([...t],e,o,n)}measureText(t,e,n=!0){return this.getLayout(t,e,n)}install(...t){let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},Ut(Ht,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));let n=e?.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};let o=e.style,a=o instanceof In?o:new In(o),i=a._fill.fill!==null&&a._fill.fill!==void 0,u=new bS({style:a,overrideFill:i,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),l=Ry(e.chars);return u.ensureCharacters(l.join("")),Pe.set(`${n}-bitmap`,u),u.once("destroy",()=>Pe.remove(`${n}-bitmap`)),u}uninstall(t){let e=`${t}-bitmap`,n=Pe.get(e);n&&n.destroy()}},Nm=new wS});function LB(r,t){t.groupTransform=r.groupTransform,t.groupColorAlpha=r.groupColorAlpha,t.groupColor=r.groupColor,t.groupBlendMode=r.groupBlendMode,t.globalDisplayStatus=r.globalDisplayStatus,t.groupTransform=r.groupTransform,t.localDisplayStatus=r.localDisplayStatus,t.groupAlpha=r.groupAlpha,t._roundPixels=r._roundPixels}var km,UB=b(()=>{Pl();I();$o();mS();IB();xS();DS();km=class{constructor(t){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(t){let e=this._getGpuBitmapText(t);return t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,e)),this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){let n=this._getGpuBitmapText(t);LB(t,n),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,n)),this._renderer.renderPipes.graphics.addRenderable(n,e),n.context.customShader&&this._updateDistanceField(t)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(t.uid)}_destroyRenderableByUid(t){let e=this._gpuBitmapText[t].context;e.customShader&&(Kt.return(e.customShader),e.customShader=null),Kt.return(this._gpuBitmapText[t]),this._gpuBitmapText[t]=null}updateRenderable(t){let e=this._getGpuBitmapText(t);LB(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){let{context:n}=e,o=Nm.getFont(t.text,t._style);n.clear(),o.distanceField.type!=="none"&&(n.customShader||(n.customShader=Kt.get(Ty)));let a=Array.from(t.text),i=t._style,u=o.baseLineOffset,l=Cy(a,i,o,!0),s=0,c=i.padding,f=l.scale,d=l.width,p=l.height+l.offsetY;i._stroke&&(d+=i._stroke.width/f,p+=i._stroke.width/f),n.translate(-t._anchor._x*d-c,-t._anchor._y*p-c).scale(f,f);let h=o.applyFillAsTint?i._fill.color:16777215;for(let m=0;m<l.lines.length;m++){let _=l.lines[m];for(let y=0;y<_.charPositions.length;y++){let D=a[s++],w=o.chars[D];w?.texture&&n.texture(w.texture,h||"black",Math.round(_.charPositions[y]+w.xOffset),Math.round(u+w.yOffset))}u+=o.lineHeight}}_getGpuBitmapText(t){return this._gpuBitmapText[t.uid]||this.initGpuText(t)}initGpuText(t){let e=Kt.get(bc);return this._gpuBitmapText[t.uid]=e,this._updateContext(t,e),t.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[t.uid]}_updateDistanceField(t){let e=this._getGpuBitmapText(t).context,n=t._style.fontFamily,o=Pe.get(`${n}-bitmap`),{a,b:i,c:u,d:l}=t.groupTransform,s=Math.sqrt(a*a+i*i),c=Math.sqrt(u*u+l*l),f=(Math.abs(s)+Math.abs(c))/2,d=o.baseRenderedFontSize/t._style.fontSize,p=f*o.distanceField.range*(1/d);e.customShader.resources.localUniforms.uniforms.uDistance=p}destroy(){for(let t in this._gpuBitmapText)this._destroyRenderableByUid(t);this._gpuBitmapText=null,this._renderer=null}};km.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"bitmapText"}});var TS=b(()=>{I();UB();dt.add(km)});var $m,BB=b(()=>{I();Be();A0();$o();ly();$m=class{constructor(t){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let t in this._gpuText){let e=this._gpuText[t];if(!e)continue;let n=e.batchableSprite.renderable;n._autoResolution&&(n._resolution=this._renderer.resolution,n.onViewUpdate())}}validateRenderable(t){let e=this._getGpuText(t),n=t._getKey();return e.textureNeedsUploading?(e.textureNeedsUploading=!1,!0):e.currentKey!==n}addRenderable(t,e){let o=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(o,e)}updateRenderable(t){let n=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),n._batcher.updateElement(n)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.htmlText.decreaseReferenceCount(e.currentKey),Kt.return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),n=this._getGpuText(t),o=n.batchableSprite;n.currentKey!==e&&this._updateGpuText(t).catch(i=>{console.error(i)}),t._didTextUpdate=!1;let a=t._style.padding;sc(o.bounds,t._anchor,o.texture,a)}async _updateGpuText(t){t._didTextUpdate=!1;let e=this._getGpuText(t);if(e.generatingTexture)return;let n=t._getKey();this._renderer.htmlText.decreaseReferenceCount(e.currentKey),e.generatingTexture=!0,e.currentKey=n;let o=t.resolution??this._renderer.resolution,a=await this._renderer.htmlText.getManagedTexture(t.text,o,t._style,t._getKey()),i=e.batchableSprite;i.texture=e.texture=a,e.generatingTexture=!1,e.textureNeedsUploading=!0,t.onViewUpdate();let u=t._style.padding;sc(i.bounds,t._anchor,i.texture,u)}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:Y.EMPTY,currentKey:"--",batchableSprite:Kt.get(Bl),textureNeedsUploading:!1,generatingTexture:!1},n=e.batchableSprite;return n.renderable=t,n.transform=t.groupTransform,n.texture=Y.EMPTY,n.bounds={minX:0,maxX:1,minY:0,maxY:0},n.roundPixels=this._renderer._roundPixels|t._roundPixels,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,this._gpuText[t.uid]=e,t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}};$m.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"htmlText"}});function WB(){let{userAgent:r}=Ct.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(r)}var GB=b(()=>{rr()});var zB,qB,Td,RS=b(()=>{"use strict";zB="http://www.w3.org/2000/svg",qB="http://www.w3.org/1999/xhtml",Td=class{constructor(){this.svgRoot=document.createElementNS(zB,"svg"),this.foreignObject=document.createElementNS(zB,"foreignObject"),this.domElement=document.createElementNS(qB,"div"),this.styleElement=document.createElementNS(qB,"style"),this.image=new Image;let{foreignObject:t,svgRoot:e,styleElement:n,domElement:o}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(n),t.appendChild(o)}}});function VB(r){let t=r._stroke,e=r._fill,o=[`div { ${[`color: ${oe.shared.setValue(e.color).toHex()}`,`font-size: ${r.fontSize}px`,`font-family: ${r.fontFamily}`,`font-weight: ${r.fontWeight}`,`font-style: ${r.fontStyle}`,`font-variant: ${r.fontVariant}`,`letter-spacing: ${r.letterSpacing}px`,`text-align: ${r.align}`,`padding: ${r.padding}px`,`white-space: ${r.whiteSpace==="pre"&&r.wordWrap?"pre-wrap":r.whiteSpace}`,...r.lineHeight?[`line-height: ${r.lineHeight}px`]:[],...r.wordWrap?[`word-wrap: ${r.breakWords?"break-all":"break-word"}`,`max-width: ${r.wordWrapWidth}px`]:[],...t?[ZB(t)]:[],...r.dropShadow?[jB(r.dropShadow)]:[],...r.cssOverrides].join(";")} }`];return hmt(r.tagStyles,o),o.join(" ")}function jB(r){let t=oe.shared.setValue(r.color).setAlpha(r.alpha).toHexa(),e=Math.round(Math.cos(r.angle)*r.distance),n=Math.round(Math.sin(r.angle)*r.distance),o=`${e}px ${n}px`;return r.blur>0?`text-shadow: ${o} ${r.blur}px ${t}`:`text-shadow: ${o} ${t}`}function ZB(r){return[`-webkit-text-stroke-width: ${r.width}px`,`-webkit-text-stroke-color: ${oe.shared.setValue(r.color).toHex()}`,`text-stroke-width: ${r.width}px`,`text-stroke-color: ${oe.shared.setValue(r.color).toHex()}`,"paint-order: stroke"].join(";")}function hmt(r,t){for(let e in r){let n=r[e],o=[];for(let a in n)HB[a]?o.push(HB[a](n[a])):QB[a]&&o.push(QB[a].replace("{{VALUE}}",n[a]));t.push(`${e} { ${o.join(";")} }`)}}var QB,HB,YB=b(()=>{Zn();QB={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},HB={fill:r=>`color: ${oe.shared.setValue(r).toHex()}`,breakWords:r=>`word-wrap: ${r?"break-all":"break-word"}`,stroke:ZB,dropShadow:jB}});var Oy,XB=b(()=>{er();_c();sS();YB();Oy=class r extends In{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=t.cssOverrides),this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=by(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new r({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=VB(this)),this._cssStyle}addOverride(...t){let e=t.filter(n=>!this.cssOverrides.includes(n));e.length>0&&(this.cssOverrides.push(...e),this.update())}removeOverride(...t){let e=t.filter(n=>this.cssOverrides.includes(n));e.length>0&&(this.cssOverrides=this.cssOverrides.filter(n=>!e.includes(n)),this.update())}set fill(t){typeof t!="string"&&typeof t!="number"&&ct("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&typeof t!="string"&&typeof t!="number"&&ct("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}});function JB(r,t){let e=t.fontFamily,n=[],o={},a=/font-family:([^;"\s]+)/g,i=r.match(a);function u(l){o[l]||(n.push(l),o[l]=!0)}if(Array.isArray(e))for(let l=0;l<e.length;l++)u(e[l]);else u(e);i&&i.forEach(l=>{let s=l.split(":")[1].trim();u(s)});for(let l in t.tagStyles){let s=t.tagStyles[l].fontFamily;u(s)}return n}var KB=b(()=>{"use strict"});async function tW(r){let e=await(await Ct.get().fetch(r)).blob(),n=new FileReader;return await new Promise((a,i)=>{n.onloadend=()=>a(n.result),n.onerror=i,n.readAsDataURL(e)})}var eW=b(()=>{rr()});async function CS(r,t){let e=await tW(t);return`@font-face {
        font-family: "${r.fontFamily}";
        src: url('${e}');
        font-weight: ${r.fontWeight};
        font-style: ${r.fontStyle};
    }`}var rW=b(()=>{eW()});async function nW(r,t,e){let n=r.filter(o=>Pe.has(`${o}-and-url`)).map((o,a)=>{if(!Ey.has(o)){let{url:i}=Pe.get(`${o}-and-url`);a===0?Ey.set(o,CS({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:o},i)):Ey.set(o,CS({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:o},i))}return Ey.get(o)});return(await Promise.all(n)).join(`
`)}var Ey,oW=b(()=>{Pl();rW();Ey=new Map});function aW(r,t,e,n,o){let{domElement:a,styleElement:i,svgRoot:u}=o;a.innerHTML=`<style>${t.cssStyle}</style><div style='padding:0;'>${r}</div>`,a.setAttribute("style",`transform: scale(${e});transform-origin: top left; display: inline-block`),i.textContent=n;let{width:l,height:s}=o.image;return u.setAttribute("width",l.toString()),u.setAttribute("height",s.toString()),new XMLSerializer().serializeToString(u)}var iW=b(()=>{"use strict"});function uW(r,t){let e=Go.getOptimalCanvasAndContext(r.width,r.height,t),{context:n}=e;return n.clearRect(0,0,r.width,r.height),n.drawImage(r,0,0),e}var lW=b(()=>{vd()});function sW(r,t,e){return new Promise(async n=>{e&&await new Promise(o=>setTimeout(o,100)),r.onload=()=>{n()},r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(t)}`,r.crossOrigin="anonymous"})}var cW=b(()=>{"use strict"});function dW(r,t,e,n){n=n||fW||(fW=new Td);let{domElement:o,styleElement:a,svgRoot:i}=n;o.innerHTML=`<style>${t.cssStyle};</style><div style='padding:0'>${r}</div>`,o.setAttribute("style","transform-origin: top left; display: inline-block"),e&&(a.textContent=e),document.body.appendChild(i);let u=o.getBoundingClientRect();i.remove();let l=t.padding*2;return{width:u.width-l,height:u.height-l}}var fW,pW=b(()=>{RS()});var Rd,hW=b(()=>{I();vd();gd();qi();GB();er();$o();fS();RS();XB();KB();oW();iW();lW();cW();pW();Rd=class{constructor(t){this._activeTextures={},this._renderer=t,this._createCanvas=t.type===jr.WEBGPU}getTexture(t){return this._buildTexturePromise(t.text,t.resolution,t.style)}getManagedTexture(t,e,n,o){if(this._activeTextures[o])return this._increaseReferenceCount(o),this._activeTextures[o].promise;let a=this._buildTexturePromise(t,e,n).then(i=>(this._activeTextures[o].texture=i,i));return this._activeTextures[o]={texture:null,promise:a,usageCount:1},a}async _buildTexturePromise(t,e,n){let o=Kt.get(Td),a=JB(t,n),i=await nW(a,n,Oy.defaultTextStyle),u=dW(t,n,i,o),l=Math.ceil(Math.ceil(Math.max(1,u.width)+n.padding*2)*e),s=Math.ceil(Math.ceil(Math.max(1,u.height)+n.padding*2)*e),c=o.image,f=2;c.width=(l|0)+f,c.height=(s|0)+f;let d=aW(t,n,e,i,o);await sW(c,d,WB()&&a.length>0);let p=c,h;this._createCanvas&&(h=uW(c,e));let m=Dy(h?h.canvas:p,c.width-f,c.height-f,e);return this._createCanvas&&(this._renderer.texture.initSource(m.source),Go.returnCanvasAndContext(h)),Kt.return(o),m}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];e&&(e.usageCount--,e.usageCount===0&&(e.texture?this._cleanUp(e):e.promise.then(n=>{e.texture=n,this._cleanUp(e)}).catch(()=>{ct("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[t]=null))}_cleanUp(t){Pn.returnTexture(t.texture),t.texture.source.resource=null,t.texture.source.uploadMethodId="unknown"}getReferenceCount(t){return this._activeTextures[t].usageCount}destroy(){this._activeTextures=null}};Rd.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"htmlText"};Rd.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"}});var SS=b(()=>{I();BB();hW();dt.add(Rd);dt.add($m)});var mW,Cd,Fy=b(()=>{Nl();$u();nd();Vr();mW=class vW extends Na{constructor(...t){let e=t[0]??{};e instanceof Float32Array&&(Ut(Ht,"use new MeshGeometry({ positions, uvs, indices }) instead"),e={positions:e,uvs:t[1],indices:t[2]}),e={...vW.defaultOptions,...e};let n=e.positions||new Float32Array([0,0,1,0,1,1,0,1]),o=e.uvs||new Float32Array([0,0,1,0,1,1,0,1]),a=e.indices||new Uint32Array([0,1,2,0,2,3]),i=e.shrinkBuffersToFit,u=new Or({data:n,label:"attribute-mesh-positions",shrinkToFit:i,usage:le.VERTEX|le.COPY_DST}),l=new Or({data:o,label:"attribute-mesh-uvs",shrinkToFit:i,usage:le.VERTEX|le.COPY_DST}),s=new Or({data:a,label:"index-mesh-buffer",shrinkToFit:i,usage:le.INDEX|le.COPY_DST});super({attributes:{aPosition:{buffer:u,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:l,format:"float32x2",stride:2*4,offset:0}},indexBuffer:s,topology:e.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};mW.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};Cd=mW});var Dc,gW,Sd,Od=b(()=>{"use strict";Dc={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},gW={...Dc,vertex:{...Dc.vertex,header:Dc.vertex.header.replace("group(1)","group(2)")}},Sd={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}}});var _W,yW,bW=b(()=>{"use strict";_W={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            } 

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},yW={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;
        
        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);
        
        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0
    
        `}}});var OS,ES,My,DW=b(()=>{Oe();$l();Od();Ll();hi();po();Be();bW();My=class extends Er{constructor(){OS??(OS=Bi({name:"tiling-sprite-shader",bits:[Dc,_W,Gi]})),ES??(ES=Wi({name:"tiling-sprite-shader",bits:[Sd,yW,zi]}));let t=new Qe({uMapCoord:{value:new J,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new J,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:ES,gpuProgram:OS,resources:{localUniforms:new Qe({uTransformMatrix:{value:new J,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:t,uTexture:Y.EMPTY.source,uSampler:Y.EMPTY.source.style}})}updateUniforms(t,e,n,o,a,i){let u=this.resources.tilingUniforms,l=i.width,s=i.height,c=i.textureMatrix,f=u.uniforms.uTextureTransform;f.set(n.a*l/t,n.b*l/e,n.c*s/t,n.d*s/e,n.tx/t,n.ty/e),f.invert(),u.uniforms.uMapCoord=c.mapCoord,u.uniforms.uClampFrame=c.uClampFrame,u.uniforms.uClampOffset=c.uClampOffset,u.uniforms.uTextureTransform=f,u.uniforms.uSizeAnchor[0]=t,u.uniforms.uSizeAnchor[1]=e,u.uniforms.uSizeAnchor[2]=o,u.uniforms.uSizeAnchor[3]=a,i&&(this.resources.uTexture=i.source,this.resources.uSampler=i.source.style)}}});var Ay,wW=b(()=>{Fy();Ay=class extends Cd{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}});function xW(r,t){let e=r.anchor.x,n=r.anchor.y;t[0]=-e*r.width,t[1]=-n*r.height,t[2]=(1-e)*r.width,t[3]=-n*r.height,t[4]=(1-e)*r.width,t[5]=(1-n)*r.height,t[6]=-e*r.width,t[7]=(1-n)*r.height}var TW=b(()=>{"use strict"});function RW(r,t,e,n){let o=0,a=r.length/(t||2),i=n.a,u=n.b,l=n.c,s=n.d,c=n.tx,f=n.ty;for(e*=t;o<a;){let d=r[e],p=r[e+1];r[e]=i*d+l*p+c,r[e+1]=u*d+s*p+f,e+=t,o++}}var CW=b(()=>{"use strict"});function SW(r,t){let e=r.texture,n=e.frame.width,o=e.frame.height,a=0,i=0;r._applyAnchorToTexture&&(a=r.anchor.x,i=r.anchor.y),t[0]=t[6]=-a,t[2]=t[4]=1-a,t[1]=t[3]=-i,t[5]=t[7]=1-i;let u=J.shared;u.copyFrom(r._tileTransform.matrix),u.tx/=r.width,u.ty/=r.height,u.invert(),u.scale(r.width/n,r.height/o),RW(t,2,0,u)}var OW=b(()=>{Oe();CW()});var Py,Lm,EW=b(()=>{I();_m();mi();qi();hd();ny();Fy();DW();wW();TW();OW();Py=new Ay,Lm=class{constructor(t){this._state=Br.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(t){let e=this._getTilingSpriteData(t),n=e.canBatch;this._updateCanBatch(t);let o=e.canBatch;if(o&&o===n){let{batchableMesh:a}=e;if(a&&a.texture._source!==t.texture._source)return!a._batcher.checkAndUpdateTexture(a,t.texture)}return n!==o}addRenderable(t,e){let n=this._renderer.renderPipes.batch;this._updateCanBatch(t);let o=this._getTilingSpriteData(t),{geometry:a,canBatch:i}=o;if(i){o.batchableMesh||(o.batchableMesh=new Ul);let u=o.batchableMesh;t.didViewUpdate&&(this._updateBatchableMesh(t),u.geometry=a,u.renderable=t,u.transform=t.groupTransform,u.texture=t._texture),u.roundPixels=this._renderer._roundPixels|t._roundPixels,n.addToBatch(u,e)}else n.break(e),o.shader||(o.shader=new My),this.updateRenderable(t),e.add(t)}execute(t){let{shader:e}=this._tilingSpriteDataHash[t.uid];e.groups[0]=this._renderer.globalUniforms.bindGroup;let n=e.resources.localUniforms.uniforms;n.uTransformMatrix=t.groupTransform,n.uRound=this._renderer._roundPixels|t._roundPixels,Qi(t.groupColorAlpha,n.uColor,0),this._state.blendMode=ku(t.groupBlendMode,t.texture._source),this._renderer.encoder.draw({geometry:Py,shader:e,state:this._state})}updateRenderable(t){let e=this._getTilingSpriteData(t),{canBatch:n}=e;if(n){let{batchableMesh:o}=e;t.didViewUpdate&&this._updateBatchableMesh(t),o._batcher.updateElement(o)}else if(t.didViewUpdate){let{shader:o}=e;o.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}}destroyRenderable(t){let e=this._getTilingSpriteData(t);e.batchableMesh=null,e.shader?.destroy(),this._tilingSpriteDataHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(t){return this._tilingSpriteDataHash[t.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){let e=new Cd({indices:Py.indices,positions:Py.positions.slice(),uvs:Py.uvs.slice()});return this._tilingSpriteDataHash[t.uid]={canBatch:!0,renderable:t,geometry:e},t.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[t.uid]}_updateBatchableMesh(t){let e=this._getTilingSpriteData(t),{geometry:n}=e,o=t.texture.source.style;o.addressMode!=="repeat"&&(o.addressMode="repeat",o.update()),SW(t,n.uvs),xW(t,n.positions)}destroy(){for(let t in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[t].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(t){let e=this._getTilingSpriteData(t),n=t.texture,o=!0;return this._renderer.type===jr.WEBGL&&(o=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=n.textureMatrix.isSimple&&(o||n.source.isPowerOfTwo),e.canBatch}};Lm.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"tilingSprite"}});var FS=b(()=>{I();EW();dt.add(Lm)});var FW,AW,PW=b(()=>{Vr();Fy();FW=class MW extends Cd{constructor(...t){super({});let e=t[0]??{};typeof e=="number"&&(Ut(Ht,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),e={width:e,height:t[1],verticesX:t[2],verticesY:t[3]}),this.build(e)}build(t){t={...MW.defaultOptions,...t},this.verticesX=this.verticesX??t.verticesX,this.verticesY=this.verticesY??t.verticesY,this.width=this.width??t.width,this.height=this.height??t.height;let e=this.verticesX*this.verticesY,n=[],o=[],a=[],i=this.verticesX-1,u=this.verticesY-1,l=this.width/i,s=this.height/u;for(let f=0;f<e;f++){let d=f%this.verticesX,p=f/this.verticesX|0;n.push(d*l,p*s),o.push(d/i,p/u)}let c=i*u;for(let f=0;f<c;f++){let d=f%i,p=f/i|0,h=p*this.verticesX+d,m=p*this.verticesX+d+1,_=(p+1)*this.verticesX+d,y=(p+1)*this.verticesX+d+1;a.push(h,m,_,m,y,_)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(o),this.indexBuffer.data=new Uint32Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};FW.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};AW=FW});var IW,kW,$W=b(()=>{PW();IW=class NW extends AW{constructor(t={}){t={...NW.defaultOptions,...t},super({width:t.width,height:t.height,verticesX:4,verticesY:4}),this.update(t)}update(t){this.width=t.width??this.width,this.height=t.height??this.height,this._originalWidth=t.originalWidth??this._originalWidth,this._originalHeight=t.originalHeight??this._originalHeight,this._leftWidth=t.leftWidth??this._leftWidth,this._rightWidth=t.rightWidth??this._rightWidth,this._topHeight=t.topHeight??this._topHeight,this._bottomHeight=t.bottomHeight??this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){let t=this.positions,e=this._leftWidth+this._rightWidth,n=this.width>e?1:this.width/e,o=this._topHeight+this._bottomHeight,a=this.height>o?1:this.height/o,i=Math.min(n,a);t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this.height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this.height,t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this.width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let t=this.uvs;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1;let e=1/this._originalWidth,n=1/this._originalHeight;t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.getBuffer("aUV").update()}};IW.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};kW=IW});var Um,LW=b(()=>{I();$o();ny();$W();Um=class{constructor(t){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(t,e){let n=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,n),this._renderer.renderPipes.batch.addToBatch(n,e)}updateRenderable(t){let e=this._gpuSpriteHash[t.uid];t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){let e=t._texture,n=this._getGpuSprite(t);return n.texture._source!==e._source?!n._batcher.checkAndUpdateTexture(n,e):!1}destroyRenderable(t){let e=this._gpuSpriteHash[t.uid];Kt.return(e.geometry),Kt.return(e),this._gpuSpriteHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(t,e){e.geometry.update(t),e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=Kt.get(Ul);return e.geometry=Kt.get(kW),e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.didViewUpdate||this._updateBatchableSprite(t,e),t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuSpriteHash)this._gpuSpriteHash[t].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}};Um.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"nineSliceSprite"}});var MS=b(()=>{I();LW();dt.add(Um)});var Bm,UW=b(()=>{I();Bm=class{constructor(t){this._renderer=t}push(t,e,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){t.action==="pushFilter"?this._renderer.filter.push(t):t.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}};Bm.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"filter"}});function BW(r,t){return t.clear(),WW(r,t),t.isValid||t.set(0,0,0,0),r.renderGroup?t.applyMatrix(r.renderGroup.localTransform):t.applyMatrix(r.parentRenderGroup.worldTransform),t}function WW(r,t){if(r.localDisplayStatus!==7||!r.measurable)return;let e=!!r.effects.length,n=t;if((r.renderGroup||e)&&(n=aa.get().clear()),r.boundsArea)t.addRect(r.boundsArea,r.worldTransform);else{if(r.renderPipeId){let a=r.bounds;n.addFrame(a.minX,a.minY,a.maxX,a.maxY,r.groupTransform)}let o=r.children;for(let a=0;a<o.length;a++)WW(o[a],n)}if(e){let o=!1;for(let a=0;a<r.effects.length;a++)r.effects[a].addBounds&&(o||(o=!0,n.applyMatrix(r.parentRenderGroup.worldTransform)),r.effects[a].addBounds(n,!0));o&&(n.applyMatrix(r.parentRenderGroup.worldTransform.copyTo(mmt).invert()),t.addBounds(n,r.relativeGroupTransform)),t.addBounds(n),aa.return(n)}else r.renderGroup&&(t.addBounds(n,r.relativeGroupTransform),aa.return(n))}var mmt,GW=b(()=>{Oe();Kh();mmt=new J});function zW(r,t){t.clear();let e=t.matrix;for(let n=0;n<r.length;n++){let o=r[n];o.globalDisplayStatus<7||(t.matrix=o.worldTransform,o.addBounds(t))}return t.matrix=e,t}var qW=b(()=>{"use strict"});var vmt,Wm,QW=b(()=>{I();Oe();Ma();Il();nd();po();Be();gd();qi();Aa();GW();qW();er();vmt=new Na({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),Wm=class{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new Qe({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new yn({}),this.renderer=t}get activeBackTexture(){return this._activeFilterData?.backTexture}push(t){let e=this.renderer,n=t.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let o=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,n.length===0){o.skip=!0;return}let a=o.bounds;t.renderables?zW(t.renderables,a):t.filterEffect.filterArea?(a.clear(),a.addRect(t.filterEffect.filterArea),a.applyMatrix(t.container.worldTransform)):BW(t.container,a);let i=e.renderTarget.renderTarget.colorTexture.source,u=1/0,l=0,s=!0,c=!1,f=!1,d=!0;for(let p=0;p<n.length;p++){let h=n[p];if(u=Math.min(u,h.resolution==="inherit"?i._resolution:h.resolution),l+=h.padding,h.antialias==="off"?s=!1:h.antialias==="inherit"&&s&&(s=i.antialias),h.clipToViewport||(d=!1),!!!(h.compatibleRenderers&e.type)){f=!1;break}if(h.blendRequired&&!(e.backBuffer?.useBackBuffer??!0)){ct("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),f=!1;break}f=h.enabled||f,c=c||h.blendRequired}if(!f){o.skip=!0;return}if(a.scale(u),d){let p=e.renderTarget.rootViewPort;a.fitBounds(0,p.width,0,p.height)}if(a.ceil().scale(1/u).pad(l|0),!a.isPositive){o.skip=!0;return}o.skip=!1,o.bounds=a,o.blendRequired=c,o.container=t.container,o.filterEffect=t.filterEffect,o.previousRenderSurface=e.renderTarget.renderSurface,o.inputTexture=Pn.getOptimalTexture(a.width,a.height,u,s),e.renderTarget.bind(o.inputTexture,!0),e.globalUniforms.push({offset:a})}pop(){let t=this.renderer;this._filterStackIndex--;let e=this._filterStack[this._filterStackIndex];if(e.skip)return;this._activeFilterData=e;let n=e.inputTexture,o=e.bounds,a=Y.EMPTY;if(t.renderTarget.finishRenderPass(),e.blendRequired){let u=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,l=t.renderTarget.getRenderTarget(e.previousRenderSurface);a=this.getBackTexture(l,o,u)}e.backTexture=a;let i=e.filterEffect.filters;if(this._globalFilterBindGroup.setResource(n.source.style,2),this._globalFilterBindGroup.setResource(a.source,3),t.globalUniforms.pop(),i.length===1)i[0].apply(this,n,e.previousRenderSurface,!1),Pn.returnTexture(n);else{let u=e.inputTexture,l=Pn.getOptimalTexture(o.width,o.height,u.source._resolution,!1),s=0;for(s=0;s<i.length-1;++s){i[s].apply(this,u,l,!0);let f=u;u=l,l=f}i[s].apply(this,u,e.previousRenderSurface,!1),Pn.returnTexture(u),Pn.returnTexture(l)}e.blendRequired&&Pn.returnTexture(a)}getBackTexture(t,e,n){let o=t.colorTexture.source._resolution,a=Pn.getOptimalTexture(e.width,e.height,o,!1),i=e.minX,u=e.minY;n&&(i-=n.minX,u-=n.minY),i=Math.floor(i*o),u=Math.floor(u*o);let l=Math.ceil(e.width*o),s=Math.ceil(e.height*o);return this.renderer.renderTarget.copyToTexture(t,a,{x:i,y:u},{width:l,height:s},{x:0,y:0}),a}applyFilter(t,e,n,o){let a=this.renderer,i=this._filterStack[this._filterStackIndex],u=i.bounds,l=ye.shared,c=i.previousRenderSurface===n,f=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,d=this._filterStackIndex-1;for(;d>0&&this._filterStack[d].skip;)--d;d>0&&(f=this._filterStack[d].inputTexture.source._resolution);let p=this._filterGlobalUniforms,h=p.uniforms,m=h.uOutputFrame,_=h.uInputSize,y=h.uInputPixel,D=h.uInputClamp,w=h.uGlobalFrame,T=h.uOutputTexture;if(c){let S=this._filterStackIndex;for(;S>0;){S--;let A=this._filterStack[this._filterStackIndex-1];if(!A.skip){l.x=A.bounds.minX,l.y=A.bounds.minY;break}}m[0]=u.minX-l.x,m[1]=u.minY-l.y}else m[0]=0,m[1]=0;m[2]=e.frame.width,m[3]=e.frame.height,_[0]=e.source.width,_[1]=e.source.height,_[2]=1/_[0],_[3]=1/_[1],y[0]=e.source.pixelWidth,y[1]=e.source.pixelHeight,y[2]=1/y[0],y[3]=1/y[1],D[0]=.5*y[2],D[1]=.5*y[3],D[2]=e.frame.width*_[2]-.5*y[2],D[3]=e.frame.height*_[3]-.5*y[3];let R=this.renderer.renderTarget.rootRenderTarget.colorTexture;w[0]=l.x*f,w[1]=l.y*f,w[2]=R.source.width*f,w[3]=R.source.height*f;let C=this.renderer.renderTarget.getRenderTarget(n);if(a.renderTarget.bind(n,!!o),n instanceof Y?(T[0]=n.frame.width,T[1]=n.frame.height):(T[0]=C.width,T[1]=C.height),T[2]=C.isRoot?-1:1,p.update(),a.renderPipes.uniformBatch){let S=a.renderPipes.uniformBatch.getUboResource(p);this._globalFilterBindGroup.setResource(S,0)}else this._globalFilterBindGroup.setResource(p,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,a.encoder.draw({geometry:vmt,shader:t,state:t._state,topology:"triangle-list"}),a.type===jr.WEBGL&&a.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new fr,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(t,e){let n=this._activeFilterData,o=t.set(n.inputTexture._source.width,0,0,n.inputTexture._source.height,n.bounds.minX,n.bounds.minY),a=e.worldTransform.copyTo(J.shared);return a.invert(),o.prepend(a),o.scale(1/e.texture.frame.width,1/e.texture.frame.height),o.translate(e.anchor.x,e.anchor.y),o}};Wm.extension={type:[x.WebGLSystem,x.WebGPUSystem],name:"filter"}});var AS=b(()=>{I();UW();QW();dt.add(Wm);dt.add(Bm)});var gmt={};var HW=b(()=>{Hk();PC();t$();M0();U0();z2();q2();j2();hS();TS();SS();FS();MS();AS()});var _mt={};var jW=b(()=>{PC();M0();U0();z2();q2();j2();hS();TS();SS();FS();MS();AS()});var YW,XW,JW=b(()=>{dc();ad();hi();mi();YW=class PS extends Er{constructor(t){t={...PS.defaultOptions,...t},super(t),this.enabled=!0,this._state=Br.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,typeof t.antialias=="boolean"?this.antialias=t.antialias?"on":"off":this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource("uTexture",0,1)}apply(t,e,n,o){t.applyFilter(this,e,n,o)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(t){let{gpu:e,gl:n,...o}=t,a,i;return e&&(a=$a.from(e)),n&&(i=ka.from(n)),new PS({gpuProgram:a,glProgram:i,...o})}};YW.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};XW=YW});async function KW(r){if(!r)for(let t=0;t<IS.length;t++){let e=IS[t];if(e.value.test()){await e.value.load();return}}}var IS,tG=b(()=>{I();IS=[];dt.handleByNamedList(x.Environment,IS)});function Iy(){if(typeof Gm=="boolean")return Gm;try{Gm=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Gm=!1}return Gm}var Gm,NS=b(()=>{"use strict"});var Dn,Ed=b(()=>{"use strict";Dn=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(Dn||{})});var Fd,kS=b(()=>{"use strict";Fd=class{constructor(t){this.items=[],this._name=t}emit(t,e,n,o,a,i,u,l){let{name:s,items:c}=this;for(let f=0,d=c.length;f<d;f++)c[f][s](t,e,n,o,a,i,u,l);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){let e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}});var ymt,eG,zl,zm=b(()=>{Zn();tG();di();NS();Vr();Ed();kS();jn();ymt=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],eG=class rG extends Ze{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;let e=[...ymt,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){let e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await KW(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let n in this._systemsHash)t={...this._systemsHash[n].constructor.defaultOptions,...t};t={...rG.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(t);this._initOptions=t}render(t,e){let n=t;if(n instanceof Ae&&(n={container:n},e&&(Ut(Ht,"passing a second argument is deprecated, please use render options instead"),n.target=e.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor=this.background.colorRgba),n.clearColor){let o=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=o?n.clearColor:oe.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n)}resize(t,e,n){let o=this.view.resolution;this.view.resize(t,e,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==o&&this.runners.resolutionChange.emit(n)}clear(t={}){let e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Dn.ALL);let{clear:n,clearColor:o,target:a}=t;oe.shared.setValue(o??this.background.colorRgba),e.renderTarget.clear(a,n,oe.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new Fd(e)})}_addSystems(t){let e;for(e in t){let n=t[e];this._addSystem(n.value,n.name)}}_addSystem(t,e){let n=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=n,this._systemsHash[e]=n;for(let o in this.runners)this.runners[o].add(n);return this}_addPipes(t,e){let n=e.reduce((o,a)=>(o[a.name]=a.value,o),{});t.forEach(o=>{let a=o.value,i=o.name,u=n[i];this.renderPipes[i]=new a(this,u?new u:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Iy())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};eG.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};zl=eG});var qm,aG=b(()=>{I();Oe();cc();G0();$l();Dm();wm();Od();Ll();hi();po();qm=class{init(){let t=new Qe({uTransformMatrix:{value:new J,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),e=Bi({name:"graphics",bits:[id,ld(Ia()),gW,Gi]});this.shader=new Er({gpuProgram:e,resources:{localUniforms:t}})}execute(t,e){let n=e.context,o=n.customShader||this.shader,a=t.renderer,i=a.graphicsContext,{batcher:u,instructions:l}=i.getContextRenderData(n),s=a.encoder;s.setPipelineFromGeometryProgramAndState(u.geometry,o.gpuProgram,t.state),s.setGeometry(u.geometry,o.gpuProgram);let c=a.globalUniforms.bindGroup;s.setBindGroup(0,c,o.gpuProgram);let f=a.renderPipes.uniformBatch.getUniformBindGroup(o.resources.localUniforms,!0);s.setBindGroup(2,f,o.gpuProgram);let d=l.instructions;for(let p=0;p<l.instructionSize;p++){let h=d[p];if(o.groups[1]=h.bindGroup,!h.gpuBindGroup){let m=h.textures;h.bindGroup=rd(m.textures,m.count),h.gpuBindGroup=a.bindGroup.getBindGroup(h.bindGroup,o.gpuProgram,1)}s.setBindGroup(1,h.bindGroup,o.gpuProgram),s.renderPassEncoder.drawIndexed(h.size,1,h.start)}}destroy(){this.shader.destroy(!0),this.shader=null}};qm.extension={type:[x.WebGPUPipesAdaptor],name:"graphics"}});var iG,uG,$S=b(()=>{"use strict";iG={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;

         
        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},uG={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;

         
        `,main:`
            outColor = texture(uTexture, vUV);
        `}}});var Qm,lG=b(()=>{I();Oe();$l();Od();Ll();$S();hi();Be();er();Qm=class{init(){let t=Bi({name:"mesh",bits:[Dc,iG,Gi]});this._shader=new Er({gpuProgram:t,resources:{uTexture:Y.EMPTY._source,uSampler:Y.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new J}}}})}execute(t,e){let n=t.renderer,o=e._shader;if(!o)o=this._shader,o.groups[2]=n.texture.getTextureBindGroup(e.texture);else if(!o.gpuProgram){ct("Mesh shader has no gpuProgram",e.shader);return}let a=o.gpuProgram;if(a.autoAssignGlobalUniforms&&(o.groups[0]=n.globalUniforms.bindGroup),a.autoAssignLocalUniforms){let i=t.localUniforms;o.groups[1]=n.renderPipes.uniformBatch.getUniformBindGroup(i,!0)}n.encoder.draw({geometry:e._geometry,shader:o,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}};Qm.extension={type:[x.WebGPUPipesAdaptor],name:"mesh"}});var $y,Hm,sG=b(()=>{I();mi();G0();$y=Br.for2d(),Hm=class{start(t,e,n){let o=t.renderer,a=o.encoder,i=n.gpuProgram;this._shader=n,this._geometry=e,a.setGeometry(e,i),$y.blendMode="normal",o.pipeline.getPipeline(e,i,$y);let u=o.globalUniforms.bindGroup;a.resetBindGroup(1),a.setBindGroup(0,u,i)}execute(t,e){let n=this._shader.gpuProgram,o=t.renderer,a=o.encoder;if(!e.bindGroup){let l=e.textures;e.bindGroup=rd(l.textures,l.count)}$y.blendMode=e.blendMode;let i=o.bindGroup.getBindGroup(e.bindGroup,n,1),u=o.pipeline.getPipeline(this._geometry,n,$y);e.bindGroup._touch(o.textureGC.count),a.setPipeline(u),a.renderPassEncoder.setBindGroup(1,i),a.renderPassEncoder.drawIndexed(e.size,1,e.start)}};Hm.extension={type:[x.WebGPUPipesAdaptor],name:"batch"}});var Vm,cG=b(()=>{I();Vm=class{constructor(t){this._renderer=t}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&t.render(this._renderer)}destroy(){this._renderer=null}};Vm.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"customRender"}});function Ly(r,t){let e=r.instructionSet,n=e.instructions;for(let o=0;o<e.instructionSize;o++){let a=n[o];t[a.renderPipeId].execute(a)}}var LS=b(()=>{"use strict"});var jm,fG=b(()=>{I();LS();jm=class{constructor(t){this._renderer=t}addRenderGroup(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&(this._renderer.globalUniforms.push({worldTransformMatrix:t.worldTransform,worldColor:t.worldColorAlpha}),Ly(t,this._renderer.renderPipes),this._renderer.globalUniforms.pop())}destroy(){this._renderer=null}};jm.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"renderGroup"}});function dG(r,t){let e=r.root,n=r.instructionSet;n.reset();let o=t.renderPipes?t:t.batch.renderer,a=o.renderPipes;a.batch.buildStart(n),a.blendMode.buildStart(),a.colorMask.buildStart(),e.sortableChildren&&e.sortChildren(),pG(e,n,o,!0),a.batch.buildEnd(n),a.blendMode.buildEnd(n)}function Md(r,t,e){let n=e.renderPipes?e:e.batch.renderer;r.globalDisplayStatus<7||!r.includeInBuild||(r.sortableChildren&&r.sortChildren(),r.isSimple?bmt(r,t,n):pG(r,t,n,!1))}function bmt(r,t,e){if(r.renderPipeId){let n=r,{renderPipes:o,renderableGC:a}=e;o.blendMode.setBlendMode(n,r.groupBlendMode,t),o[n.renderPipeId].addRenderable(n,t),a.addRenderable(n,t),n.didViewUpdate=!1}if(!r.renderGroup){let n=r.children,o=n.length;for(let a=0;a<o;a++)Md(n[a],t,e)}}function pG(r,t,e,n){let{renderPipes:o,renderableGC:a}=e;if(!n&&r.renderGroup)o.renderGroup.addRenderGroup(r.renderGroup,t);else{for(let s=0;s<r.effects.length;s++){let c=r.effects[s];o[c.pipe].push(c,r,t)}let i=r,u=i.renderPipeId;u&&(o.blendMode.setBlendMode(i,i.groupBlendMode,t),o[u].addRenderable(i,t),a.addRenderable(i,t),i.didViewUpdate=!1);let l=r.children;if(l.length)for(let s=0;s<l.length;s++)Md(l[s],t,e);for(let s=r.effects.length-1;s>=0;s--){let c=r.effects[s];o[c.pipe].pop(c,r,t)}}}var Uy=b(()=>{"use strict"});function Zm(r,t){t||(t=0);for(let e=t;e<r.length&&r[e];e++)r[e]=null}var US=b(()=>{"use strict"});function BS(r,t=[]){t.push(r);for(let e=0;e<r.renderGroupChildren.length;e++)BS(r.renderGroupChildren[e],t);return t}var hG=b(()=>{"use strict"});function mG(r,t,e){let n=r>>16&255,o=r>>8&255,a=r&255,i=t>>16&255,u=t>>8&255,l=t&255,s=n+(i-n)*e,c=o+(u-o)*e,f=a+(l-a)*e;return(s<<16)+(c<<8)+f}var vG=b(()=>{"use strict"});function GS(r,t){return r===WS||t===WS?r+t-WS:mG(r,t,.5)}var WS,gG=b(()=>{vG();WS=16777215});function zS(r,t=!1){wmt(r);let e=r.childrenToUpdate,n=r.updateTick++;for(let o in e){let a=Number(o),i=e[o],u=i.list,l=i.index;for(let s=0;s<l;s++){let c=u[s];c.parentRenderGroup===r&&c.relativeRenderGroupDepth===a&&bG(c,n,0)}Zm(u,l),i.index=0}if(t)for(let o=0;o<r.renderGroupChildren.length;o++)zS(r.renderGroupChildren[o],t)}function wmt(r){let t=r.root,e;if(r.renderGroupParent){let n=r.renderGroupParent;r.worldTransform.appendFrom(t.relativeGroupTransform,n.worldTransform),r.worldColor=GS(t.groupColor,n.worldColor),e=t.groupAlpha*n.worldAlpha}else r.worldTransform.copyFrom(t.localTransform),r.worldColor=t.localColor,e=t.localAlpha;e=e<0?0:e>1?1:e,r.worldAlpha=e,r.worldColorAlpha=r.worldColor+((e*255|0)<<24)}function bG(r,t,e){if(t===r.updateTick)return;r.updateTick=t,r.didChange=!1;let n=r.localTransform;r.updateLocalTransform();let o=r.parent;if(o&&!o.renderGroup?(e=e|r._updateFlags,r.relativeGroupTransform.appendFrom(n,o.relativeGroupTransform),e&_G&&yG(r,o,e)):(e=r._updateFlags,r.relativeGroupTransform.copyFrom(n),e&_G&&yG(r,Dmt,e)),!r.renderGroup){let a=r.children,i=a.length;for(let s=0;s<i;s++)bG(a[s],t,e);let u=r.parentRenderGroup,l=r;l.renderPipeId&&!u.structureDidChange&&u.updateRenderable(l)}}function yG(r,t,e){if(e&Vf){r.groupColor=GS(r.localColor,t.groupColor);let n=r.localAlpha*t.groupAlpha;n=n<0?0:n>1?1:n,r.groupAlpha=n,r.groupColorAlpha=r.groupColor+((n*255|0)<<24)}e&rm&&(r.groupBlendMode=r.localBlendMode==="inherit"?t.groupBlendMode:r.localBlendMode),e&ec&&(r.globalDisplayStatus=r.localDisplayStatus&t.globalDisplayStatus),r._updateFlags=0}var Dmt,_G,DG=b(()=>{di();US();gG();Dmt=new Ae,_G=ec|Vf|rm});function wG(r,t){let{list:e,index:n}=r.childrenRenderablesToUpdate,o=!1;for(let a=0;a<n;a++){let i=e[a];if(o=t[i.renderPipeId].validateRenderable(i),o)break}return r.structureDidChange=o,o}var xG=b(()=>{"use strict"});function Tmt(r){let{list:t,index:e}=r.childrenRenderablesToUpdate;for(let n=0;n<e;n++){let o=t[n];o.didViewUpdate&&r.updateRenderable(o)}Zm(t,e)}var xmt,Ym,TG=b(()=>{I();Oe();Uy();US();hG();LS();DG();xG();xmt=new J,Ym=class{constructor(t){this._renderer=t}render({container:t,transform:e}){t.isRenderGroup=!0;let n=t.parent,o=t.renderGroup.renderGroupParent;t.parent=null,t.renderGroup.renderGroupParent=null;let a=this._renderer,i=BS(t.renderGroup,[]),u=xmt;e&&(u=u.copyFrom(t.renderGroup.localTransform),t.renderGroup.localTransform.copyFrom(e));let l=a.renderPipes;for(let s=0;s<i.length;s++){let c=i[s];c.runOnRender(),c.instructionSet.renderPipes=l,c.structureDidChange?Zm(c.childrenRenderablesToUpdate.list,0):wG(c,l),zS(c),c.structureDidChange?(c.structureDidChange=!1,dG(c,a)):Tmt(c),c.childrenRenderablesToUpdate.index=0,a.renderPipes.batch.upload(c.instructionSet)}a.globalUniforms.start({worldTransformMatrix:e?t.renderGroup.localTransform:t.renderGroup.worldTransform,worldColor:t.renderGroup.worldColorAlpha}),Ly(t.renderGroup,l),l.uniformBatch&&l.uniformBatch.renderEnd(),e&&t.renderGroup.localTransform.copyFrom(u),t.parent=n,t.renderGroup.renderGroupParent=o}destroy(){this._renderer=null}};Ym.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"renderGroup"}});var Xm,RG=b(()=>{I();$o();ly();Xm=class{constructor(t){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(t,e){let n=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,n),this._renderer.renderPipes.batch.addToBatch(n,e)}updateRenderable(t){let e=this._gpuSpriteHash[t.uid];t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){let e=t._texture,n=this._getGpuSprite(t);return n.texture._source!==e._source?!n._batcher.checkAndUpdateTexture(n,e):!1}destroyRenderable(t){let e=this._gpuSpriteHash[t.uid];Kt.return(e),this._gpuSpriteHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(t,e){e.bounds=t.bounds,e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=Kt.get(Bl);return e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.bounds=t.bounds,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuSpriteHash)Kt.return(this._gpuSpriteHash[t]);this._gpuSpriteHash=null,this._renderer=null}};Xm.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"sprite"}});var Ad,qS=b(()=>{jn();Ad="8.5.2"});var Jm,Km,QS=b(()=>{I();qS();Jm=class{static init(){globalThis.__PIXI_APP_INIT__?.(this,Ad)}static destroy(){}};Jm.extension=x.Application;Km=class{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,Ad)}destroy(){this._renderer=null}};Km.extension={type:[x.WebGLSystem,x.WebGPUSystem],name:"initHook",priority:-10}});var HS,VS,SG=b(()=>{I();mi();x2();HS=class CG{constructor(t,e){this.state=Br.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=t,this._adaptor=e,this._adaptor.init?.(this)}static getBatcher(t){return new this._availableBatchers[t]}buildStart(t){let e=this._batchersByInstructionSet[t.uid];e||(e=this._batchersByInstructionSet[t.uid]=Object.create(null),e.default||(e.default=new xm)),this._activeBatches=e,this._activeBatch=this._activeBatches.default;for(let n in this._activeBatches)this._activeBatches[n].begin()}addToBatch(t,e){if(this._activeBatch.name!==t.batcherName){this._activeBatch.break(e);let n=this._activeBatches[t.batcherName];n||(n=this._activeBatches[t.batcherName]=CG.getBatcher(t.batcherName),n.begin()),this._activeBatch=n}this._activeBatch.add(t)}break(t){this._activeBatch.break(t)}buildEnd(t){this._activeBatch.break(t);let e=this._activeBatches;for(let n in e){let o=e[n],a=o.geometry;a.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),a.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!1)}}upload(t){let e=this._batchersByInstructionSet[t.uid];for(let n in e){let o=e[n],a=o.geometry;o.dirty&&(o.dirty=!1,a.buffers[0].update(o.attributeSize*4))}}execute(t){if(t.action==="startBatch"){let e=t.batcher,n=e.geometry,o=e.shader;this._adaptor.start(this,n,o)}this._adaptor.execute(this,t)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let t in this._activeBatches)this._activeBatches[t].destroy();this._activeBatches=null}};HS.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"batch"};HS._availableBatchers=Object.create(null);VS=HS;dt.handleByMap(x.Batcher,VS._availableBatchers);dt.add(xm)});var OG,EG=b(()=>{OG=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`});var FG,MG=b(()=>{FG=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`});var jS,AG=b(()=>{jS=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`});var By,PG=b(()=>{Oe();dc();ad();po();VC();JW();EG();MG();AG();By=class extends XW{constructor(t){let{sprite:e,...n}=t,o=new Xf(e.texture),a=new Qe({uFilterMatrix:{value:new J,type:"mat3x3<f32>"},uMaskClamp:{value:o.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:t.inverse?1:0,type:"f32"}}),i=$a.from({vertex:{source:jS,entryPoint:"mainVertex"},fragment:{source:jS,entryPoint:"mainFragment"}}),u=ka.from({vertex:FG,fragment:OG,name:"mask-filter"});super({...n,gpuProgram:i,glProgram:u,resources:{filterUniforms:a,uMaskTexture:e.texture.source}}),this.sprite=e,this._textureMatrix=o}set inverse(t){this.resources.filterUniforms.uniforms.uInverse=t?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(t,e,n,o){this._textureMatrix.texture=this.sprite.texture,t.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,t.applyFilter(this,e,n,o)}}});var Rmt,ZS,tv,IG=b(()=>{I();v0();PG();Aa();em();Uy();I0();$o();Be();gd();qi();Rmt=new fr,ZS=class extends Au{constructor(){super(),this.filters=[new By({sprite:new Li(Y.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(t){this.filters[0].sprite=t}get inverse(){return this.filters[0].inverse}set inverse(t){this.filters[0].inverse=t}},tv=class{constructor(t){this._activeMaskStage=[],this._renderer=t}push(t,e,n){let o=this._renderer;if(o.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1,maskedContainer:e}),t.inverse=e._maskOptions.inverse,t.renderMaskToTexture){let a=t.mask;a.includeInBuild=!0,Md(a,n,o),a.includeInBuild=!1}o.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:t,maskedContainer:e,inverse:e._maskOptions.inverse,canBundle:!1})}pop(t,e,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1})}execute(t){let e=this._renderer,n=t.mask.renderMaskToTexture;if(t.action==="pushMaskBegin"){let o=Kt.get(ZS);if(o.inverse=t.inverse,n){t.mask.mask.measurable=!0;let a=qf(t.mask.mask,!0,Rmt);t.mask.mask.measurable=!1,a.ceil();let i=e.renderTarget.renderTarget.colorTexture.source,u=Pn.getOptimalTexture(a.width,a.height,i._resolution,i.antialias);e.renderTarget.push(u,!0),e.globalUniforms.push({offset:a,worldColor:4294967295});let l=o.sprite;l.texture=u,l.worldTransform.tx=a.minX,l.worldTransform.ty=a.minY,this._activeMaskStage.push({filterEffect:o,maskedContainer:t.maskedContainer,filterTexture:u})}else o.sprite=t.mask.mask,this._activeMaskStage.push({filterEffect:o,maskedContainer:t.maskedContainer})}else if(t.action==="pushMaskEnd"){let o=this._activeMaskStage[this._activeMaskStage.length-1];n&&(e.type===jr.WEBGL&&e.renderTarget.finishRenderPass(),e.renderTarget.pop(),e.globalUniforms.pop()),e.filter.push({renderPipeId:"filter",action:"pushFilter",container:o.maskedContainer,filterEffect:o.filterEffect,canBundle:!1})}else if(t.action==="popMaskEnd"){e.filter.pop();let o=this._activeMaskStage.pop();n&&Pn.returnTexture(o.filterTexture),Kt.return(o.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}};tv.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"alphaMask"}});var ev,NG=b(()=>{I();ev=class{constructor(t){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=t}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(t,e,n){this._renderer.renderPipes.batch.break(n);let a=this._colorStack;a[this._colorStackIndex]=a[this._colorStackIndex-1]&t.mask;let i=this._colorStack[this._colorStackIndex];i!==this._currentColor&&(this._currentColor=i,n.add({renderPipeId:"colorMask",colorMask:i,canBundle:!1})),this._colorStackIndex++}pop(t,e,n){this._renderer.renderPipes.batch.break(n);let a=this._colorStack;this._colorStackIndex--;let i=a[this._colorStackIndex-1];i!==this._currentColor&&(this._currentColor=i,n.add({renderPipeId:"colorMask",colorMask:i,canBundle:!1}))}execute(t){this._renderer.colorMask.setMask(t.colorMask)}destroy(){this._colorStack=null}};ev.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"colorMask"}});var rv,kG=b(()=>{I();Uy();Ed();fc();rv=class{constructor(t){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=t}push(t,e,n){var o;let a=t,i=this._renderer;i.renderPipes.batch.break(n),i.renderPipes.blendMode.setBlendMode(a.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});let u=a.mask;u.includeInBuild=!0,this._maskHash.has(a)||this._maskHash.set(a,{instructionsStart:0,instructionsLength:0});let l=this._maskHash.get(a);l.instructionsStart=n.instructionSize,Md(u,n,i),u.includeInBuild=!1,i.renderPipes.batch.break(n),n.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});let s=n.instructionSize-l.instructionsStart-1;l.instructionsLength=s;let c=i.renderTarget.renderTarget.uid;(o=this._maskStackHash)[c]??(o[c]=0)}pop(t,e,n){let o=t,a=this._renderer;a.renderPipes.batch.break(n),a.renderPipes.blendMode.setBlendMode(o.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:e._maskOptions.inverse,canBundle:!1});let i=this._maskHash.get(t);for(let u=0;u<i.instructionsLength;u++)n.instructions[n.instructionSize++]=n.instructions[i.instructionsStart++];n.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(t){var e;let n=this._renderer,o=n.renderTarget.renderTarget.uid,a=(e=this._maskStackHash)[o]??(e[o]=0);t.action==="pushMaskBegin"?(n.renderTarget.ensureDepthStencil(),n.stencil.setStencilMode(lr.RENDERING_MASK_ADD,a),a++,n.colorMask.setMask(0)):t.action==="pushMaskEnd"?(t.inverse?n.stencil.setStencilMode(lr.INVERSE_MASK_ACTIVE,a):n.stencil.setStencilMode(lr.MASK_ACTIVE,a),n.colorMask.setMask(15)):t.action==="popMaskBegin"?(n.colorMask.setMask(0),a!==0?n.stencil.setStencilMode(lr.RENDERING_MASK_REMOVE,a):(n.renderTarget.clear(null,Dn.STENCIL),n.stencil.setStencilMode(lr.DISABLED,a)),a--):t.action==="popMaskEnd"&&(t.inverse?n.stencil.setStencilMode(lr.INVERSE_MASK_ACTIVE,a):n.stencil.setStencilMode(lr.MASK_ACTIVE,a),n.colorMask.setMask(15)),this._maskStackHash[o]=a}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}};rv.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"stencilMask"}});var YS,LG,UG=b(()=>{Zn();I();YS=class $G{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new oe(0),this.color=this._backgroundColor,this.alpha=1}init(t){t={...$G.defaultOptions,...t},this.clearBeforeRender=t.clearBeforeRender,this.color=t.background||t.backgroundColor||this._backgroundColor,this.alpha=t.backgroundAlpha,this._backgroundColor.setAlpha(t.backgroundAlpha)}get color(){return this._backgroundColor}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};YS.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"background",priority:0};YS.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};LG=YS});var nv,ov,BG=b(()=>{I();v0();er();nv={};dt.handle(x.BlendMode,r=>{if(!r.name)throw new Error("BlendMode extension must have a name property");nv[r.name]=r.ref},r=>{delete nv[r.name]});ov=class{constructor(t){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=t}setBlendMode(t,e,n){if(this._activeBlendMode===e){this._isAdvanced&&this._renderableList.push(t);return}this._activeBlendMode=e,this._isAdvanced&&this._endAdvancedBlendMode(n),this._isAdvanced=!!nv[e],this._isAdvanced&&(this._beginAdvancedBlendMode(n),this._renderableList.push(t))}_beginAdvancedBlendMode(t){this._renderer.renderPipes.batch.break(t);let e=this._activeBlendMode;if(!nv[e]){ct(`Unable to assign BlendMode: '${e}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let n=this._filterHash[e];n||(n=this._filterHash[e]=new Au,n.filters=[new nv[e]]);let o={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:n,canBundle:!1};this._renderableList=o.renderables,t.add(o)}_endAdvancedBlendMode(t){this._renderableList=null,this._renderer.renderPipes.batch.break(t),t.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(t){this._isAdvanced&&this._endAdvancedBlendMode(t)}destroy(){this._renderer=null,this._renderableList=null;for(let t in this._filterHash)this._filterHash[t].destroy();this._filterHash=null}};ov.extension={type:[x.WebGLPipes,x.WebGPUPipes,x.CanvasPipes],name:"blendMode"}});var XS,JS,GG,zG=b(()=>{I();di();Be();XS={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},JS=class WG{constructor(t){this._renderer=t}_normalizeOptions(t,e={}){return t instanceof Ae||t instanceof Y?{target:t,...e}:{...e,...t}}async image(t){let e=new Image;return e.src=await this.base64(t),e}async base64(t){t=this._normalizeOptions(t,WG.defaultImageOptions);let{format:e,quality:n}=t,o=this.canvas(t);if(o.toBlob!==void 0)return new Promise((a,i)=>{o.toBlob(u=>{if(!u){i(new Error("ICanvas.toBlob failed!"));return}let l=new FileReader;l.onload=()=>a(l.result),l.onerror=i,l.readAsDataURL(u)},XS[e],n)});if(o.toDataURL!==void 0)return o.toDataURL(XS[e],n);if(o.convertToBlob!==void 0){let a=await o.convertToBlob({type:XS[e],quality:n});return new Promise((i,u)=>{let l=new FileReader;l.onload=()=>i(l.result),l.onerror=u,l.readAsDataURL(a)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t){t=this._normalizeOptions(t);let e=t.target,n=this._renderer;if(e instanceof Y)return n.texture.generateCanvas(e);let o=n.textureGenerator.generateTexture(t),a=n.texture.generateCanvas(o);return o.destroy(),a}pixels(t){t=this._normalizeOptions(t);let e=t.target,n=this._renderer,o=e instanceof Y?e:n.textureGenerator.generateTexture(t),a=n.texture.getPixels(o);return e instanceof Ae&&o.destroy(),a}texture(t){return t=this._normalizeOptions(t),t.target instanceof Y?t.target:this._renderer.textureGenerator.generateTexture(t)}download(t){t=this._normalizeOptions(t);let e=this.canvas(t),n=document.createElement("a");n.download=t.filename??"image.png",n.href=e.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}log(t){let e=t.width??200;t=this._normalizeOptions(t);let n=this.canvas(t),o=n.toDataURL();console.log(`[Pixi Texture] ${n.width}px ${n.height}px`);let a=["font-size: 1px;",`padding: ${e}px 300px;`,`background: url(${o}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",a)}destroy(){this._renderer=null}};JS.extension={type:[x.WebGLSystem,x.WebGPUSystem],name:"extract"};JS.defaultImageOptions={format:"png",quality:1};GG=JS});var Wy,qG=b(()=>{Uo();Be();Wy=class r extends Y{static create(t){return new r({source:new ke(t)})}resize(t,e,n){return this.source.resize(t,e,n),this}}});var Cmt,Smt,Omt,av,QG=b(()=>{Zn();I();Oe();An();Aa();y0();di();qG();Cmt=new de,Smt=new fr,Omt=[0,0,0,0],av=class{constructor(t){this._renderer=t}generateTexture(t){t instanceof Ae&&(t={target:t,frame:void 0,textureSourceOptions:{},resolution:void 0});let e=t.resolution||this._renderer.resolution,n=t.antialias||this._renderer.view.antialias,o=t.target,a=t.clearColor;a?a=Array.isArray(a)&&a.length===4?a:oe.shared.setValue(a).toArray():a=Omt;let i=t.frame?.copyTo(Cmt)||Qf(o,Smt).rectangle;i.width=Math.max(i.width,1/e)|0,i.height=Math.max(i.height,1/e)|0;let u=Wy.create({...t.textureSourceOptions,width:i.width,height:i.height,resolution:e,antialias:n}),l=J.shared.translate(-i.x,-i.y);return this._renderer.render({container:o,transform:l,target:u,clearColor:a}),u.source.updateMipmaps(),u}destroy(){this._renderer=null}};av.extension={type:[x.WebGLSystem,x.WebGPUSystem],name:"textureGenerator"}});var iv,HG=b(()=>{I();Oe();Ma();hd();Il();qi();po();iv=class{constructor(t){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=t}reset(){this._stackIndex=0;for(let t=0;t<this._activeUniforms.length;t++)this._uniformsPool.push(this._activeUniforms[t]);for(let t=0;t<this._activeBindGroups.length;t++)this._bindGroupPool.push(this._activeBindGroups[t]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(t){this.reset(),this.push(t)}bind({size:t,projectionMatrix:e,worldTransformMatrix:n,worldColor:o,offset:a}){let i=this._renderer.renderTarget.renderTarget,u=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:i,worldTransformMatrix:new J,worldColor:4294967295,offset:new ye},l={projectionMatrix:e||this._renderer.renderTarget.projectionMatrix,resolution:t||i.size,worldTransformMatrix:n||u.worldTransformMatrix,worldColor:o||u.worldColor,offset:a||u.offset,bindGroup:null},s=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(s);let c=s.uniforms;c.uProjectionMatrix=l.projectionMatrix,c.uResolution=l.resolution,c.uWorldTransformMatrix.copyFrom(l.worldTransformMatrix),c.uWorldTransformMatrix.tx-=l.offset.x,c.uWorldTransformMatrix.ty-=l.offset.y,Qi(l.worldColor,c.uWorldColorAlpha,0),s.update();let f;this._renderer.renderPipes.uniformBatch?f=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(s,!1):(f=this._bindGroupPool.pop()||new yn,this._activeBindGroups.push(f),f.setResource(s,0)),l.bindGroup=f,this._currentGlobalUniformData=l}push(t){this.bind(t),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===jr.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new Qe({uProjectionMatrix:{value:new J,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new J,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}};iv.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"globalUniforms"}});var Emt,uv,VG=b(()=>{I();im();Emt=1,uv=class{constructor(){this._tasks=[],this._offset=0}init(){Lo.system.add(this._update,this)}repeat(t,e,n=!0){let o=Emt++,a=0;return n&&(this._offset+=1e3,a=this._offset),this._tasks.push({func:t,duration:e,start:performance.now(),offset:a,last:performance.now(),repeat:!0,id:o}),o}cancel(t){for(let e=0;e<this._tasks.length;e++)if(this._tasks[e].id===t){this._tasks.splice(e,1);return}}_update(){let t=performance.now();for(let e=0;e<this._tasks.length;e++){let n=this._tasks[e];if(t-n.offset-n.last>=n.duration){let o=t-n.start;n.func(o),n.last=t}}}destroy(){Lo.system.remove(this._update,this),this._tasks.length=0}};uv.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"scheduler",priority:0}});function ZG(r){if(!jG){if(Ct.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let t=[`%c  %c  %c  %c  %c PixiJS %c v${Ad} (${r}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...t)}else globalThis.console&&globalThis.console.log(`PixiJS ${Ad} - ${r} - http://www.pixijs.com/`);jG=!0}}var jG,YG=b(()=>{rr();qS();jG=!1});var Pd,XG=b(()=>{I();YG();qi();Pd=class{constructor(t){this._renderer=t}init(t){if(t.hello){let e=this._renderer.name;this._renderer.type===jr.WEBGL&&(e+=` ${this._renderer.context.webGLVersion}`),ZG(e)}}};Pd.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"hello",priority:-2};Pd.defaultOptions={hello:!1}});function JG(r){let t=!1;for(let n in r)if(r[n]==null){t=!0;break}if(!t)return r;let e=Object.create(null);for(let n in r){let o=r[n];o&&(e[n]=o)}return e}function KG(r){let t=0;for(let e=0;e<r.length;e++)r[e]==null?t++:r[e-t]=r[e];return r.length=r.length-t,r}var tz=b(()=>{"use strict"});var KS,rz,nz=b(()=>{I();tz();KS=class ez{constructor(t){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=t}init(t){t={...ez.defaultOptions,...t},this.maxUnusedTime=t.renderableGCMaxUnusedTime,this._frequency=t.renderableGCFrequency,this.enabled=t.renderableGCActive}get enabled(){return!!this._handler}set enabled(t){this.enabled!==t&&(t?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let e of this._managedHashes)e.context[e.hash]=JG(e.context[e.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let e of this._managedArrays)KG(e.context[e.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(t,e){this._managedHashes.push({context:t,hash:e})}addManagedArray(t,e){this._managedArrays.push({context:t,hash:e})}prerender(){this._now=performance.now()}addRenderable(t,e){this.enabled&&(t._lastUsed=this._now,t._lastInstructionTick===-1&&(this._managedRenderables.push(t),t.once("destroyed",this._removeRenderable,this)),t._lastInstructionTick=e.tick)}run(){let t=performance.now(),e=this._managedRenderables,n=this._renderer.renderPipes,o=0;for(let a=0;a<e.length;a++){let i=e[a];if(i===null){o++;continue}let l=(i.renderGroup??i.parentRenderGroup)?.instructionSet?.tick??-1;i._lastInstructionTick!==l&&t-i._lastUsed>this.maxUnusedTime?(i.destroyed||n[i.renderPipeId].destroyRenderable(i),i._lastInstructionTick=-1,o++,i.off("destroyed",this._removeRenderable,this)):e[a-o]=i}e.length=e.length-o}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(t){let e=this._managedRenderables.indexOf(t);e>=0&&(t.off("destroyed",this._removeRenderable,this),this._managedRenderables[e]=null)}};KS.extension={type:[x.WebGLSystem,x.WebGPUSystem],name:"renderableGC",priority:0};KS.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};rz=KS});var tO,az,iz=b(()=>{I();tO=class oz{constructor(t){this._renderer=t,this.count=0,this.checkCount=0}init(t){t={...oz.defaultOptions,...t},this.checkCountMax=t.textureGCCheckCountMax,this.maxIdle=t.textureGCAMaxIdle??t.textureGCMaxIdle,this.active=t.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let t=this._renderer.texture.managedTextures;for(let e=0;e<t.length;e++){let n=t[e];n.autoGarbageCollect&&n.resource&&n._touched>-1&&this.count-n._touched>this.maxIdle&&(n._touched=-1,n.unload())}}destroy(){this._renderer=null}};tO.extension={type:[x.WebGLSystem,x.WebGPUSystem],name:"textureGC"};tO.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};az=tO});var uz,lv,eO=b(()=>{Yn();Uo();Be();uz=class lz{constructor(t={}){if(this.uid=be("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,t={...lz.defaultOptions,...t},this.stencil=t.stencil,this.depth=t.depth,this.isRoot=t.isRoot,typeof t.colorTextures=="number"){this._managedColorTextures=!0;for(let e=0;e<t.colorTextures;e++)this.colorTextures.push(new ke({width:t.width,height:t.height,resolution:t.resolution,antialias:t.antialias}))}else{this.colorTextures=[...t.colorTextures.map(n=>n.source)];let e=this.colorTexture.source;this.resize(e.width,e.height,e._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(t.depthStencilTexture||this.stencil)&&(t.depthStencilTexture instanceof Y||t.depthStencilTexture instanceof ke?this.depthStencilTexture=t.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let t=this._size;return t[0]=this.pixelWidth,t[1]=this.pixelHeight,t}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(t){this.resize(t.width,t.height,t._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new ke({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(t,e,n=this.resolution,o=!1){this.dirtyId++,this.colorTextures.forEach((a,i)=>{o&&i===0||a.source.resize(t,e,n)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(t,e,n)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(t=>{t.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};uz.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};lv=uz});function Gy(r,t){if(!sv.has(r)){let e=new Y({source:new Bo({resource:r,...t})}),n=()=>{sv.get(r)===e&&sv.delete(r)};e.once("destroy",n),e.source.once("destroy",n),sv.set(r,e)}return sv.get(r)}var sv,rO=b(()=>{Jf();Be();sv=new Map});var nO,cz,fz=b(()=>{rr();I();An();Vr();eO();rO();nO=class sz{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(t){this.texture.source.autoDensity=t}get resolution(){return this.texture.source._resolution}set resolution(t){this.texture.source.resize(this.texture.source.width,this.texture.source.height,t)}init(t){t={...sz.defaultOptions,...t},t.view&&(Ut(Ht,"ViewSystem.view has been renamed to ViewSystem.canvas"),t.canvas=t.view),this.screen=new de(0,0,t.width,t.height),this.canvas=t.canvas||Ct.get().createCanvas(),this.antialias=!!t.antialias,this.texture=Gy(this.canvas,t),this.renderTarget=new lv({colorTextures:[this.texture],depth:!!t.depth,isRoot:!0}),this.texture.source.transparent=t.backgroundAlpha<1,this.resolution=t.resolution}resize(t,e,n){this.texture.source.resize(t,e,n),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(t=!1){(typeof t=="boolean"?t:!!t?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};nO.extension={type:[x.WebGLSystem,x.WebGPUSystem,x.CanvasSystem],name:"view",priority:0};nO.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};cz=nO});var zy,qy,oO=b(()=>{cG();fG();TG();RG();QS();SG();IG();NG();kG();UG();BG();zG();QG();HG();VG();XG();nz();iz();fz();zy=[LG,iv,Pd,cz,Ym,az,av,GG,Km,rz,uv],qy=[ov,VS,Xm,jm,tv,rv,ev,Vm]});var cv,dz=b(()=>{I();cv=class{constructor(t){this._hash=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(t){this._gpu=t}getBindGroup(t,e,n){return t._updateKey(),this._hash[t._key]||this._createBindGroup(t,e,n)}_createBindGroup(t,e,n){let o=this._gpu.device,a=e.layout[n],i=[],u=this._renderer;for(let c in a){let f=t.resources[c]??t.resources[a[c]],d;if(f._resourceType==="uniformGroup"){let p=f;u.ubo.updateUniformGroup(p);let h=p.buffer;d={buffer:u.buffer.getGPUBuffer(h),offset:0,size:h.descriptor.size}}else if(f._resourceType==="buffer"){let p=f;d={buffer:u.buffer.getGPUBuffer(p),offset:0,size:p.descriptor.size}}else if(f._resourceType==="bufferResource"){let p=f;d={buffer:u.buffer.getGPUBuffer(p.buffer),offset:p.offset,size:p.size}}else if(f._resourceType==="textureSampler"){let p=f;d=u.texture.getGpuSampler(p)}else if(f._resourceType==="textureSource"){let p=f;d=u.texture.getGpuSource(p).createView({})}i.push({binding:a[c],resource:d})}let l=u.shader.getProgramData(e).bindGroups[n],s=o.createBindGroup({layout:l,entries:i});return this._hash[t._key]=s,s}destroy(){for(let t of Object.keys(this._hash))this._hash[t]=null;this._hash=null,this._renderer=null}};cv.extension={type:[x.WebGPUSystem],name:"bindGroup"}});var fv,pz=b(()=>{I();i2();fv=class{constructor(t){this._gpuBuffers=Object.create(null),this._managedBuffers=[],t.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(t){this._gpu=t}getGPUBuffer(t){return this._gpuBuffers[t.uid]||this.createGPUBuffer(t)}updateBuffer(t){let e=this._gpuBuffers[t.uid]||this.createGPUBuffer(t),n=t.data;return t._updateID&&n&&(t._updateID=0,this._gpu.device.queue.writeBuffer(e,0,n.buffer,0,(t._updateSize||n.byteLength)+3&-4)),e}destroyAll(){for(let t in this._gpuBuffers)this._gpuBuffers[t].destroy();this._gpuBuffers={}}createGPUBuffer(t){this._gpuBuffers[t.uid]||(t.on("update",this.updateBuffer,this),t.on("change",this.onBufferChange,this),t.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(t));let e=this._gpu.device.createBuffer(t.descriptor);return t._updateID=0,t.data&&(gm(t.data.buffer,e.getMappedRange()),e.unmap()),this._gpuBuffers[t.uid]=e,e}onBufferChange(t){this._gpuBuffers[t.uid].destroy(),t._updateID=0,this._gpuBuffers[t.uid]=this.createGPUBuffer(t)}onBufferDestroy(t){this._managedBuffers.splice(this._managedBuffers.indexOf(t),1),this._destroyBuffer(t)}destroy(){this._managedBuffers.forEach(t=>this._destroyBuffer(t)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(t){this._gpuBuffers[t.uid].destroy(),t.off("update",this.updateBuffer,this),t.off("change",this.onBufferChange,this),t.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[t.uid]=null}};fv.extension={type:[x.WebGPUSystem],name:"buffer"}});var dv,hz=b(()=>{I();dv=class{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.pipeline.setColorMask(t))}destroy(){this._renderer=null,this._colorMaskCache=null}};dv.extension={type:[x.WebGPUSystem],name:"colorMask"}});var Id,mz=b(()=>{rr();I();Id=class{constructor(t){this._renderer=t}async init(t){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(t).then(e=>{this.gpu=e,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(t){this._renderer.gpu=t}async _createDeviceAndAdaptor(t){let e=await Ct.get().getNavigator().gpu.requestAdapter({powerPreference:t.powerPreference,forceFallbackAdapter:t.forceFallbackAdapter}),n=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(a=>e.features.has(a)),o=await e.requestDevice({requiredFeatures:n});return{adapter:e,device:o}}destroy(){this.gpu=null,this._renderer=null}};Id.extension={type:[x.WebGPUSystem],name:"device"};Id.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1}});var pv,vz=b(()=>{I();pv=class{constructor(t){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=t}renderStart(){this.commandFinished=new Promise(t=>{this._resolveCommandFinished=t}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(t){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(t.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(t){this.renderPassEncoder.setViewport(t.x,t.y,t.width,t.height,0,1)}setPipelineFromGeometryProgramAndState(t,e,n,o){let a=this._renderer.pipeline.getPipeline(t,e,n,o);this.setPipeline(a)}setPipeline(t){this._boundPipeline!==t&&(this._boundPipeline=t,this.renderPassEncoder.setPipeline(t))}_setVertexBuffer(t,e){this._boundVertexBuffer[t]!==e&&(this._boundVertexBuffer[t]=e,this.renderPassEncoder.setVertexBuffer(t,this._renderer.buffer.updateBuffer(e)))}_setIndexBuffer(t){if(this._boundIndexBuffer===t)return;this._boundIndexBuffer=t;let e=t.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(t),e)}resetBindGroup(t){this._boundBindGroup[t]=null}setBindGroup(t,e,n){if(this._boundBindGroup[t]===e)return;this._boundBindGroup[t]=e,e._touch(this._renderer.textureGC.count);let o=this._renderer.bindGroup.getBindGroup(e,n,t);this.renderPassEncoder.setBindGroup(t,o)}setGeometry(t,e){let n=this._renderer.pipeline.getBufferNamesToBind(t,e);for(let o in n)this._setVertexBuffer(o,t.attributes[n[o]].buffer);t.indexBuffer&&this._setIndexBuffer(t.indexBuffer)}_setShaderBindGroups(t,e){for(let n in t.groups){let o=t.groups[n];e||this._syncBindGroup(o),this.setBindGroup(n,o,t.gpuProgram)}}_syncBindGroup(t){for(let e in t.resources){let n=t.resources[e];n.isUniformGroup&&this._renderer.ubo.updateUniformGroup(n)}}draw(t){let{geometry:e,shader:n,state:o,topology:a,size:i,start:u,instanceCount:l,skipSync:s}=t;this.setPipelineFromGeometryProgramAndState(e,n.gpuProgram,o,a),this.setGeometry(e,n.gpuProgram),this._setShaderBindGroups(n,s),e.indexBuffer?this.renderPassEncoder.drawIndexed(i||e.indexBuffer.data.length,l||e.instanceCount,u||0):this.renderPassEncoder.draw(i||e.getSize(),l||e.instanceCount,u||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let t=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(t);let e=this._boundPipeline,n={...this._boundVertexBuffer},o=this._boundIndexBuffer,a={...this._boundBindGroup};this._clearCache();let i=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(i.x,i.y,i.width,i.height,0,1),this.setPipeline(e);for(let u in n)this._setVertexBuffer(u,n[u]);for(let u in a)this.setBindGroup(u,a[u],null);this._setIndexBuffer(o)}_clearCache(){for(let t=0;t<16;t++)this._boundBindGroup[t]=null,this._boundVertexBuffer[t]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(t){this._gpu=t}};pv.extension={type:[x.WebGPUSystem],name:"encoder",priority:1}});var hv,gz=b(()=>{I();fc();hv=class{constructor(t){this._renderTargetStencilState=Object.create(null),this._renderer=t,t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:lr.DISABLED,stencilReference:0}),this._activeRenderTarget=t,this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){let n=this._renderTargetStencilState[this._activeRenderTarget.uid];n.stencilMode=t,n.stencilReference=e;let o=this._renderer;o.pipeline.setStencilMode(t),o.encoder.renderPassEncoder.setStencilReference(e)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}};hv.extension={type:[x.WebGPUSystem],name:"stencil"}});var Nd,aO=b(()=>{NS();Nl();$u();Nd=class{constructor(t){this._syncFunctionHash=Object.create(null),this._adaptor=t,this._systemCheck()}_systemCheck(){if(!Iy())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(t){let e=this.getUniformGroupData(t);t.buffer||(t.buffer=new Or({data:new Float32Array(e.layout.size/4),usage:le.UNIFORM|le.COPY_DST}))}getUniformGroupData(t){return this._syncFunctionHash[t._signature]||this._initUniformGroup(t)}_initUniformGroup(t){let e=t._signature,n=this._syncFunctionHash[e];if(!n){let o=Object.keys(t.uniformStructures).map(u=>t.uniformStructures[u]),a=this._adaptor.createUboElements(o),i=this._generateUboSync(a.uboElements);n=this._syncFunctionHash[e]={layout:a,syncFunction:i}}return this._syncFunctionHash[e]}_generateUboSync(t){return this._adaptor.generateUboSync(t)}syncUniformGroup(t,e,n){let o=this.getUniformGroupData(t);return t.buffer||(t.buffer=new Or({data:new Float32Array(o.layout.size/4),usage:le.UNIFORM|le.COPY_DST})),e||(e=t.buffer.data),n||(n=0),o.syncFunction(t.uniforms,e,n),!0}updateUniformGroup(t){if(t.isStatic&&!t._dirtyId)return!1;t._dirtyId=0;let e=this.syncUniformGroup(t);return t.buffer.update(),e}destroy(){this._syncFunctionHash=null}}});function _z(r){let t=r.map(n=>({data:n,offset:0,size:0})),e=0;for(let n=0;n<t.length;n++){let o=t[n],a=mv[o.data.type].size,i=mv[o.data.type].align;if(!mv[o.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${o.data.type}`);o.data.size>1&&(a=Math.max(a,i)*o.data.size),e=Math.ceil(e/i)*i,o.size=a,o.offset=e,e+=a}return e=Math.ceil(e/16)*16,{uboElements:t,size:e}}var mv,iO=b(()=>{"use strict";mv={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}}});var Wu,uO=b(()=>{"use strict";Wu=[{type:"mat3x3<f32>",test:r=>r.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:r=>r.type==="vec4<f32>"&&r.size===1&&r.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:r=>r.type==="vec2<f32>"&&r.size===1&&r.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:r=>r.type==="vec4<f32>"&&r.size===1&&r.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:r=>r.type==="vec3<f32>"&&r.size===1&&r.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}]});function Qy(r,t,e,n){let o=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `],a=0;for(let u=0;u<r.length;u++){let l=r[u],s=l.data.name,c=!1,f=0;for(let d=0;d<Wu.length;d++)if(Wu[d].test(l.data)){f=l.offset/4,o.push(`name = "${s}";`,`offset += ${f-a};`,Wu[d][t]||Wu[d].ubo),c=!0;break}if(!c)if(l.data.size>1)f=l.offset/4,o.push(e(l,f-a));else{let d=n[l.data.type];f=l.offset/4,o.push(`
                    v = uv.${s};
                    offset += ${f-a};
                    ${d};
                `)}a=f}let i=o.join(`
`);return new Function("uv","data","offset",i)}var lO=b(()=>{uO()});function kd(r,t){return`
        for (let i = 0; i < ${r*t}; i++) {
            data[offset + (((i / ${r})|0) * 4) + (i % ${r})] = v[i];
        }
    `}var sO,yz,cO=b(()=>{"use strict";sO={f32:`
        data[offset] = v;`,i32:`
        data[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":kd(3,2),"mat4x2<f32>":kd(4,2),"mat2x3<f32>":kd(2,3),"mat4x3<f32>":kd(4,3),"mat2x4<f32>":kd(2,4),"mat3x4<f32>":kd(3,4)},yz={...sO,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `}});function bz(r,t){let{size:e,align:n}=mv[r.data.type],o=(n-e)/4;return`
         v = uv.${r.data.name};
         ${t!==0?`offset += ${t};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${r.data.size*(e/4)}; i++)
         {
             for(var j = 0; j < ${e/4}; j++)
             {
                 data[arrayOffset++] = v[t++];
             }
             ${o!==0?`arrayOffset += ${o};`:""}
         }
     `}var Dz=b(()=>{iO()});function wz(r){return Qy(r,"uboWgsl",bz,yz)}var xz=b(()=>{lO();cO();Dz()});var vv,Tz=b(()=>{I();aO();iO();xz();vv=class extends Nd{constructor(){super({createUboElements:_z,generateUboSync:wz})}};vv.extension={type:[x.WebGPUSystem],name:"ubo"}});var ql,Hy=b(()=>{jn();Yn();ql=class extends Ze{constructor({buffer:t,offset:e,size:n}){super(),this.uid=be("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=be("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=t,this.offset=e|0,this.size=n,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=be("resource"),this.emit("change",this)}destroy(t=!1){this.destroyed=!0,t&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}});var Vy,Rz=b(()=>{"use strict";Vy=class{constructor({minUniformOffsetAlignment:t}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=t,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(t){if(t>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${t*4}`);let e=this.byteIndex,n=e+t*4;if(n=Math.ceil(n/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,n>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=n,e}addGroup(t){let e=this.addEmptyGroup(t.length);for(let n=0;n<t.length;n++)this.data[e/4+n]=t[n];return e}destroy(){this._buffer.destroy(),this._buffer=null,this.data=null}}});var Ql,gv,Cz=b(()=>{I();Nl();Hy();$u();Rz();Il();Ql=128,gv=class{constructor(t){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new Vy({minUniformOffsetAlignment:Ql});let e=256/Ql;for(let n=0;n<e;n++){let o=le.UNIFORM|le.COPY_DST;n===0&&(o|=le.COPY_SRC),this._buffers.push(new Or({data:this._batchBuffer.data,usage:o}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let t in this._bindGroupHash)this._bindGroupHash[t]=null;this._batchBuffer.clear()}getUniformBindGroup(t,e){if(!e&&this._bindGroupHash[t.uid])return this._bindGroupHash[t.uid];this._renderer.ubo.ensureUniformGroup(t);let n=t.buffer.data,o=this._batchBuffer.addEmptyGroup(n.length);return this._renderer.ubo.syncUniformGroup(t,this._batchBuffer.data,o/4),this._bindGroupHash[t.uid]=this._getBindGroup(o/Ql),this._bindGroupHash[t.uid]}getUboResource(t){this._renderer.ubo.updateUniformGroup(t);let e=t.buffer.data,n=this._batchBuffer.addGroup(e);return this._getBufferResource(n/Ql)}getArrayBindGroup(t){let e=this._batchBuffer.addGroup(t);return this._getBindGroup(e/Ql)}getArrayBufferResource(t){let n=this._batchBuffer.addGroup(t)/Ql;return this._getBufferResource(n)}_getBufferResource(t){if(!this._bufferResources[t]){let e=this._buffers[t%2];this._bufferResources[t]=new ql({buffer:e,offset:(t/2|0)*256,size:Ql})}return this._bufferResources[t]}_getBindGroup(t){if(!this._bindGroups[t]){let e=new yn({0:this._getBufferResource(t)});this._bindGroups[t]=e}return this._bindGroups[t]}_uploadBindGroups(){let t=this._renderer.buffer,e=this._buffers[0];e.update(this._batchBuffer.byteIndex),t.updateBuffer(e);let n=this._renderer.gpu.device.createCommandEncoder();for(let o=1;o<this._buffers.length;o++){let a=this._buffers[o];n.copyBufferToBuffer(t.getGPUBuffer(e),Ql,t.getGPUBuffer(a),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([n.finish()])}destroy(){for(let t=0;t<this._bindGroups.length;t++)this._bindGroups[t].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let t=0;t<this._buffers.length;t++)this._buffers[t].destroy();this._buffers=null;for(let t=0;t<this._bufferResources.length;t++)this._bufferResources[t].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}};gv.extension={type:[x.WebGPUPipes],name:"uniformBatch"}});function jy(r,t){for(let e in r.attributes){let n=r.attributes[e],o=t[e];o?(n.format??(n.format=o.format),n.offset??(n.offset=o.offset),n.instance??(n.instance=o.instance)):ct(`Attribute ${e} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}Fmt(r)}function Fmt(r){let{buffers:t,attributes:e}=r,n={},o={};for(let a in t){let i=t[a];n[i.uid]=0,o[i.uid]=0}for(let a in e){let i=e[a];n[i.buffer.uid]+=Wo(i.format).stride}for(let a in e){let i=e[a];i.stride??(i.stride=n[i.buffer.uid]),i.start??(i.start=o[i.buffer.uid]),o[i.buffer.uid]+=Wo(i.format).stride}}var fO=b(()=>{er();pc()});var Vi,dO=b(()=>{fc();Vi=[];Vi[lr.NONE]=void 0;Vi[lr.DISABLED]={stencilWriteMask:0,stencilReadMask:0};Vi[lr.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};Vi[lr.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};Vi[lr.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};Vi[lr.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}}});function Amt(r,t,e,n,o){return r<<24|t<<16|e<<10|n<<5|o}function Pmt(r,t,e,n){return e<<6|r<<3|n<<1|t}var Mmt,_v,Sz=b(()=>{I();er();fO();fc();bm();dO();Mmt={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};_v=class{constructor(t){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=t}contextChange(t){this._gpu=t,this.setStencilMode(lr.DISABLED),this._updatePipeHash()}setMultisampleCount(t){this._multisampleCount!==t&&(this._multisampleCount=t,this._updatePipeHash())}setRenderTarget(t){this._multisampleCount=t.msaaSamples,this._depthStencilAttachment=t.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(t){this._colorMask!==t&&(this._colorMask=t,this._updatePipeHash())}setStencilMode(t){this._stencilMode!==t&&(this._stencilMode=t,this._stencilState=Vi[t],this._updatePipeHash())}setPipeline(t,e,n,o){let a=this.getPipeline(t,e,n);o.setPipeline(a)}getPipeline(t,e,n,o){t._layoutKey||(jy(t,e.attributeData),this._generateBufferKey(t)),o=o||t.topology;let a=Amt(t._layoutKey,e._layoutKey,n.data,n._blendModeId,Mmt[o]);return this._pipeCache[a]?this._pipeCache[a]:(this._pipeCache[a]=this._createPipeline(t,e,n,o),this._pipeCache[a])}_createPipeline(t,e,n,o){let a=this._gpu.device,i=this._createVertexBufferLayouts(t,e),u=this._renderer.state.getColorTargets(n);u[0].writeMask=this._stencilMode===lr.RENDERING_MASK_ADD?0:this._colorMask;let l=this._renderer.shader.getProgramData(e).pipeline,s={vertex:{module:this._getModule(e.vertex.source),entryPoint:e.vertex.entryPoint,buffers:i},fragment:{module:this._getModule(e.fragment.source),entryPoint:e.fragment.entryPoint,targets:u},primitive:{topology:o,cullMode:n.cullMode},layout:l,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(s.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:n.depthTest,depthCompare:n.depthTest?"less":"always"}),a.createRenderPipeline(s)}_getModule(t){return this._moduleCache[t]||this._createModule(t)}_createModule(t){let e=this._gpu.device;return this._moduleCache[t]=e.createShaderModule({code:t}),this._moduleCache[t]}_generateBufferKey(t){let e=[],n=0,o=Object.keys(t.attributes).sort();for(let i=0;i<o.length;i++){let u=t.attributes[o[i]];e[n++]=u.offset,e[n++]=u.format,e[n++]=u.stride,e[n++]=u.instance}let a=e.join("|");return t._layoutKey=Lu(a,"geometry"),t._layoutKey}_generateAttributeLocationsKey(t){let e=[],n=0,o=Object.keys(t.attributeData).sort();for(let i=0;i<o.length;i++){let u=t.attributeData[o[i]];e[n++]=u.location}let a=e.join("|");return t._attributeLocationsKey=Lu(a,"programAttributes"),t._attributeLocationsKey}getBufferNamesToBind(t,e){let n=t._layoutKey<<16|e._attributeLocationsKey;if(this._bindingNamesCache[n])return this._bindingNamesCache[n];let o=this._createVertexBufferLayouts(t,e),a=Object.create(null),i=e.attributeData;for(let u=0;u<o.length;u++)for(let l in i)if(i[l].location===u){a[u]=l;break}return this._bindingNamesCache[n]=a,a}_createVertexBufferLayouts(t,e){e._attributeLocationsKey||this._generateAttributeLocationsKey(e);let n=t._layoutKey<<16|e._attributeLocationsKey;if(this._bufferLayoutsCache[n])return this._bufferLayoutsCache[n];let o=[];return t.buffers.forEach(a=>{let i={arrayStride:0,stepMode:"vertex",attributes:[]},u=i.attributes;for(let l in e.attributeData){let s=t.attributes[l];(s.divisor??1)!==1&&ct(`Attribute ${l} has an invalid divisor value of '${s.divisor}'. WebGPU only supports a divisor value of 1`),s.buffer===a&&(i.arrayStride=s.stride,i.stepMode=s.instance?"instance":"vertex",u.push({shaderLocation:e.attributeData[l].location,offset:s.offset,format:s.format}))}u.length&&o.push(i)}),this._bufferLayoutsCache[n]=o,o}_updatePipeHash(){let t=Pmt(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[t]||(this._pipeStateCaches[t]=Object.create(null)),this._pipeCache=this._pipeStateCaches[t]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}};_v.extension={type:[x.WebGPUSystem],name:"pipeline"}});function Oz(r,t,e,n,o,a){let i=a?1:-1;return r.identity(),r.a=1/n*2,r.d=i*(1/o*2),r.tx=-1-t*r.a,r.ty=-i-e*r.d,r}var Ez=b(()=>{"use strict"});function Fz(r){let t=r.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement&&document.body.contains(t)}var Mz=b(()=>{"use strict"});var $d,pO=b(()=>{Oe();An();Ed();Ez();kS();Jf();Uo();Be();rO();Mz();eO();$d=class{constructor(t){this.rootViewPort=new de,this.viewport=new de,this.onRenderTargetChange=new Fd("onRenderTargetChange"),this.projectionMatrix=new J,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:t,clear:e,clearColor:n,frame:o}){this._renderTargetStack.length=0,this.push(t,e,n,o),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=Fz(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(t,e=!0,n,o){let a=this.getRenderTarget(t),i=this.renderTarget!==a;this.renderTarget=a,this.renderSurface=t;let u=this.getGpuRenderTarget(a);(a.pixelWidth!==u.width||a.pixelHeight!==u.height)&&(this.adaptor.resizeGpuRenderTarget(a),u.width=a.pixelWidth,u.height=a.pixelHeight);let l=a.colorTexture,s=this.viewport,c=l.pixelWidth,f=l.pixelHeight;if(!o&&t instanceof Y&&(o=t.frame),o){let d=l._resolution;s.x=o.x*d+.5|0,s.y=o.y*d+.5|0,s.width=o.width*d+.5|0,s.height=o.height*d+.5|0}else s.x=0,s.y=0,s.width=c,s.height=f;return Oz(this.projectionMatrix,0,0,s.width/l.resolution,s.height/l.resolution,!a.isRoot),this.adaptor.startRenderPass(a,e,n,s),i&&this.onRenderTargetChange.emit(a),a}clear(t,e=Dn.ALL,n){e&&(t&&(t=this.getRenderTarget(t)),this.adaptor.clear(t||this.renderTarget,e,n,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(t,e=Dn.ALL,n,o){let a=this.bind(t,e,n,o);return this._renderTargetStack.push({renderTarget:a,frame:o}),a}pop(){this._renderTargetStack.pop();let t=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(t.renderTarget,!1,null,t.frame)}getRenderTarget(t){return t.isTexture&&(t=t.source),this._renderSurfaceToRenderTargetHash.get(t)??this._initRenderTarget(t)}copyToTexture(t,e,n,o,a){n.x<0&&(o.width+=n.x,a.x-=n.x,n.x=0),n.y<0&&(o.height+=n.y,a.y-=n.y,n.y=0);let{pixelWidth:i,pixelHeight:u}=t;return o.width=Math.min(o.width,i-n.x),o.height=Math.min(o.height,u-n.y),this.adaptor.copyToTexture(t,e,n,o,a)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((t,e)=>{t!==e&&t.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(t){let e=null;return Bo.test(t)&&(t=Gy(t).source),t instanceof lv?e=t:t instanceof ke&&(e=new lv({colorTextures:[t]}),Bo.test(t.source.resource)&&(e.isRoot=!0),t.once("destroy",()=>{e.destroy(),this._renderSurfaceToRenderTargetHash.delete(t);let n=this._gpuRenderTargetHash[e.uid];n&&(this._gpuRenderTargetHash[e.uid]=null,this.adaptor.destroyGpuRenderTarget(n))})),this._renderSurfaceToRenderTargetHash.set(t,e),e}getGpuRenderTarget(t){return this._gpuRenderTargetHash[t.uid]||(this._gpuRenderTargetHash[t.uid]=this.adaptor.initGpuRenderTarget(t))}}});var Zy,Az=b(()=>{"use strict";Zy=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}});var Yy,Pz=b(()=>{Ed();Jf();Uo();Az();Yy=class{init(t,e){this._renderer=t,this._renderTargetSystem=e}copyToTexture(t,e,n,o,a){let i=this._renderer,u=this._getGpuColorTexture(t),l=i.texture.getGpuSource(e.source);return i.encoder.commandEncoder.copyTextureToTexture({texture:u,origin:n},{texture:l,origin:a},o),e}startRenderPass(t,e=!0,n,o){let i=this._renderTargetSystem.getGpuRenderTarget(t),u=this.getDescriptor(t,e,n);i.descriptor=u,this._renderer.pipeline.setRenderTarget(i),this._renderer.encoder.beginRenderPass(i),this._renderer.encoder.setViewport(o)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);return e.contexts[0]?e.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(t.colorTextures[0].source)}getDescriptor(t,e,n){typeof e=="boolean"&&(e=e?Dn.ALL:Dn.NONE);let o=this._renderTargetSystem,a=o.getGpuRenderTarget(t),i=t.colorTextures.map((s,c)=>{let f=a.contexts[c],d,p;f?d=f.getCurrentTexture().createView():d=this._renderer.texture.getGpuSource(s).createView({mipLevelCount:1}),a.msaaTextures[c]&&(p=d,d=this._renderer.texture.getTextureView(a.msaaTextures[c]));let h=e&Dn.COLOR?"clear":"load";return n??(n=o.defaultClearColor),{view:d,resolveTarget:p,clearValue:n,storeOp:"store",loadOp:h}}),u;if((t.stencil||t.depth)&&!t.depthStencilTexture&&(t.ensureDepthStencilTexture(),t.depthStencilTexture.source.sampleCount=a.msaa?4:1),t.depthStencilTexture){let s=e&Dn.STENCIL?"clear":"load",c=e&Dn.DEPTH?"clear":"load";u={view:this._renderer.texture.getGpuSource(t.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:s,depthClearValue:1,depthLoadOp:c,depthStoreOp:"store"}}return{colorAttachments:i,depthStencilAttachment:u}}clear(t,e=!0,n,o){if(!e)return;let{gpu:a,encoder:i}=this._renderer,u=a.device;if(i.commandEncoder===null){let s=u.createCommandEncoder(),c=this.getDescriptor(t,e,n),f=s.beginRenderPass(c);f.setViewport(o.x,o.y,o.width,o.height,0,1),f.end();let d=s.finish();u.queue.submit([d])}else this.startRenderPass(t,e,n,o)}initGpuRenderTarget(t){t.isRoot=!0;let e=new Zy;return t.colorTextures.forEach((n,o)=>{if(Bo.test(n.resource)){let a=n.resource.getContext("webgpu"),i=n.transparent?"premultiplied":"opaque";try{a.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:i})}catch(u){console.error(u)}e.contexts[o]=a}if(e.msaa=n.source.antialias,n.source.antialias){let a=new ke({width:0,height:0,sampleCount:4});e.msaaTextures[o]=a}}),e.msaa&&(e.msaaSamples=4,t.depthStencilTexture&&(t.depthStencilTexture.source.sampleCount=4)),e}destroyGpuRenderTarget(t){t.contexts.forEach(e=>{e.unconfigure()}),t.msaaTextures.forEach(e=>{e.destroy()}),t.msaaTextures.length=0,t.contexts.length=0}ensureDepthStencilTexture(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);t.depthStencilTexture&&e.msaa&&(t.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);e.width=t.width,e.height=t.height,e.msaa&&t.colorTextures.forEach((n,o)=>{e.msaaTextures[o]?.resize(n.source.width,n.source.height,n.source._resolution)})}}});var yv,Iz=b(()=>{I();pO();Pz();yv=class extends $d{constructor(t){super(t),this.adaptor=new Yy,this.adaptor.init(t,this)}};yv.extension={type:[x.WebGPUSystem],name:"renderTarget"}});var bv,Nz=b(()=>{I();bv=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(t){this._gpu=t,this.maxTextures=t.device.limits.maxSampledTexturesPerShaderStage}getProgramData(t){return this._gpuProgramData[t._layoutKey]||this._createGPUProgramData(t)}_createGPUProgramData(t){let e=this._gpu.device,n=t.gpuLayout.map(a=>e.createBindGroupLayout({entries:a})),o={bindGroupLayouts:n};return this._gpuProgramData[t._layoutKey]={bindGroups:n,pipeline:e.createPipelineLayout(o)},this._gpuProgramData[t._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}};bv.extension={type:[x.WebGPUSystem],name:"shader"}});var mo,kz=b(()=>{"use strict";mo={};mo.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};mo.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};mo.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};mo.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};mo.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};mo.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};mo["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};mo["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};mo["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};mo.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};mo.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};mo.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}}});var Dv,$z=b(()=>{I();mi();kz();Dv=class{constructor(){this.defaultState=new Br,this.defaultState.blend=!0}contextChange(t){this.gpu=t}getColorTargets(t){return[{format:"bgra8unorm",writeMask:0,blend:mo[t.blendMode]||mo.normal}]}destroy(){this.gpu=null}};Dv.extension={type:[x.WebGPUSystem],name:"state"}});var Lz,Uz=b(()=>{"use strict";Lz={type:"image",upload(r,t,e){let n=r.resource,o=(r.pixelWidth|0)*(r.pixelHeight|0),a=n.byteLength/o;e.device.queue.writeTexture({texture:t},n,{offset:0,rowsPerImage:r.pixelHeight,bytesPerRow:r.pixelHeight*a},{width:r.pixelWidth,height:r.pixelHeight,depthOrArrayLayers:1})}}});var hO,Imt,Bz,Wz=b(()=>{"use strict";hO={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},Imt={blockBytes:4,blockWidth:1,blockHeight:1},Bz={type:"compressed",upload(r,t,e){let n=r.pixelWidth,o=r.pixelHeight,a=hO[r.format]||Imt;for(let i=0;i<r.resource.length;i++){let u=r.resource[i],l=Math.ceil(n/a.blockWidth)*a.blockBytes;e.device.queue.writeTexture({texture:t,mipLevel:i},u,{offset:0,bytesPerRow:l},{width:Math.ceil(n/a.blockWidth)*a.blockWidth,height:Math.ceil(o/a.blockHeight)*a.blockHeight,depthOrArrayLayers:1}),n=Math.max(n>>1,1),o=Math.max(o>>1,1)}}}});var Xy,mO=b(()=>{"use strict";Xy={type:"image",upload(r,t,e){let n=r.resource;if(!n)return;let o=Math.min(t.width,r.resourceWidth||r.pixelWidth),a=Math.min(t.height,r.resourceHeight||r.pixelHeight),i=r.alphaMode==="premultiply-alpha-on-upload";e.device.queue.copyExternalImageToTexture({source:n},{texture:t,premultipliedAlpha:i},{width:o,height:a})}}});var Gz,zz=b(()=>{mO();Gz={type:"video",upload(r,t,e){Xy.upload(r,t,e)}}});var Jy,qz=b(()=>{"use strict";Jy=class{constructor(t){this.device=t,this.sampler=t.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(t){let e=this.pipelines[t];return e||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),e=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:t}]}}),this.pipelines[t]=e),e}generateMipmap(t){let e=this._getMipmapPipeline(t.format);if(t.dimension==="3d"||t.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let n=t,o=t.depthOrArrayLayers||1,a=t.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!a){let l={size:{width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:o},format:t.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:t.mipLevelCount-1};n=this.device.createTexture(l)}let i=this.device.createCommandEncoder({}),u=e.getBindGroupLayout(0);for(let l=0;l<o;++l){let s=t.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:l,arrayLayerCount:1}),c=a?1:0;for(let f=1;f<t.mipLevelCount;++f){let d=n.createView({baseMipLevel:c++,mipLevelCount:1,dimension:"2d",baseArrayLayer:l,arrayLayerCount:1}),p=i.beginRenderPass({colorAttachments:[{view:d,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),h=this.device.createBindGroup({layout:u,entries:[{binding:0,resource:this.sampler},{binding:1,resource:s}]});p.setPipeline(e),p.setBindGroup(0,h),p.draw(3,1,0,0),p.end(),s=d}}if(!a){let l={width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:o};for(let s=1;s<t.mipLevelCount;++s)i.copyTextureToTexture({texture:n,mipLevel:s-1},{texture:t,mipLevel:s},l),l.width=Math.ceil(l.width/2),l.height=Math.ceil(l.height/2)}return this.device.queue.submit([i.finish()]),a||n.destroy(),t}}});var wv,Qz=b(()=>{rr();I();po();vd();Il();Uz();Wz();mO();zz();qz();wv=class{constructor(t){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:Xy,buffer:Lz,video:Gz,compressed:Bz},this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuSources"),t.renderableGC.addManagedHash(this,"_gpuSamplers"),t.renderableGC.addManagedHash(this,"_bindGroupHash"),t.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(t){this._gpu=t}initSource(t){if(t.autoGenerateMipmaps){let l=Math.max(t.pixelWidth,t.pixelHeight);t.mipLevelCount=Math.floor(Math.log2(l))+1}let e=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;t.uploadMethodId!=="compressed"&&(e|=GPUTextureUsage.RENDER_ATTACHMENT,e|=GPUTextureUsage.COPY_SRC);let n=hO[t.format]||{blockBytes:4,blockWidth:1,blockHeight:1},o=Math.ceil(t.pixelWidth/n.blockWidth)*n.blockWidth,a=Math.ceil(t.pixelHeight/n.blockHeight)*n.blockHeight,i={label:t.label,size:{width:o,height:a},format:t.format,sampleCount:t.sampleCount,mipLevelCount:t.mipLevelCount,dimension:t.dimension,usage:e},u=this._gpu.device.createTexture(i);return this._gpuSources[t.uid]=u,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceResize,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),u}onSourceUpdate(t){let e=this.getGpuSource(t);e&&(this._uploads[t.uploadMethodId]&&this._uploads[t.uploadMethodId].upload(t,e,this._gpu),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t))}onSourceUnload(t){let e=this._gpuSources[t.uid];e&&(this._gpuSources[t.uid]=null,e.destroy())}onUpdateMipmaps(t){this._mipmapGenerator||(this._mipmapGenerator=new Jy(this._gpu.device));let e=this.getGpuSource(t);this._mipmapGenerator.generateMipmap(e)}onSourceDestroy(t){t.off("update",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("destroy",this.onSourceDestroy,this),t.off("resize",this.onSourceResize,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}onSourceResize(t){let e=this._gpuSources[t.uid];e?(e.width!==t.pixelWidth||e.height!==t.pixelHeight)&&(this._textureViewHash[t.uid]=null,this._bindGroupHash[t.uid]=null,this.onSourceUnload(t),this.initSource(t)):this.initSource(t)}_initSampler(t){return this._gpuSamplers[t._resourceId]=this._gpu.device.createSampler(t),this._gpuSamplers[t._resourceId]}getGpuSampler(t){return this._gpuSamplers[t._resourceId]||this._initSampler(t)}getGpuSource(t){return this._gpuSources[t.uid]||this.initSource(t)}getTextureBindGroup(t){return this._bindGroupHash[t.uid]??this._createTextureBindGroup(t)}_createTextureBindGroup(t){let e=t.source;return this._bindGroupHash[t.uid]=new yn({0:e,1:e.style,2:new Qe({uTextureMatrix:{type:"mat3x3<f32>",value:t.textureMatrix.mapCoord}})}),this._bindGroupHash[t.uid]}getTextureView(t){let e=t.source;return this._textureViewHash[e.uid]??this._createTextureView(e)}_createTextureView(t){return this._textureViewHash[t.uid]=this.getGpuSource(t).createView(),this._textureViewHash[t.uid]}generateCanvas(t){let e=this._renderer,n=e.gpu.device.createCommandEncoder(),o=Ct.get().createCanvas();o.width=t.source.pixelWidth,o.height=t.source.pixelHeight;let a=o.getContext("webgpu");return a.configure({device:e.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:Ct.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),n.copyTextureToTexture({texture:e.texture.getGpuSource(t.source),origin:{x:0,y:0}},{texture:a.getCurrentTexture()},{width:o.width,height:o.height}),e.gpu.device.queue.submit([n.finish()]),o}getPixels(t){let e=this.generateCanvas(t),n=Go.getOptimalCanvasAndContext(e.width,e.height),o=n.context;o.drawImage(e,0,0);let{width:a,height:i}=e,u=o.getImageData(0,0,a,i),l=new Uint8ClampedArray(u.data.buffer);return Go.returnCanvasAndContext(n),{pixels:l,width:a,height:i}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null;for(let t of Object.keys(this._bindGroupHash)){let e=Number(t);this._bindGroupHash[e]?.destroy(),this._bindGroupHash[e]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}};wv.extension={type:[x.WebGPUSystem],name:"texture"}});var Zz={};ZM(Zz,{WebGPURenderer:()=>vO});var Nmt,kmt,$mt,Hz,Vz,jz,vO,Yz=b(()=>{I();aG();lG();sG();zm();oO();qi();dz();pz();hz();mz();vz();gz();Tz();Cz();Sz();Iz();Nz();$z();Qz();Nmt=[...zy,vv,pv,Id,fv,wv,yv,bv,Dv,_v,dv,hv,cv],kmt=[...qy,gv],$mt=[Hm,Qm,qm],Hz=[],Vz=[],jz=[];dt.handleByNamedList(x.WebGPUSystem,Hz);dt.handleByNamedList(x.WebGPUPipes,Vz);dt.handleByNamedList(x.WebGPUPipesAdaptor,jz);dt.add(...Nmt,...kmt,...$mt);vO=class extends zl{constructor(){let t={name:"webgpu",type:jr.WEBGPU,systems:Hz,renderPipes:Vz,renderPipeAdaptors:jz};super(t)}}});var xv,Xz=b(()=>{I();Oe();cc();$l();Dm();wm();Od();Ll();j0();hi();po();xv=class{init(){let t=new Qe({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new J,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),e=Ia(),n=Wi({name:"graphics",bits:[ud,sd(e),Sd,zi]});this.shader=new Er({glProgram:n,resources:{localUniforms:t,batchSamplers:cd(e)}})}execute(t,e){let n=e.context,o=n.customShader||this.shader,a=t.renderer,i=a.graphicsContext,{batcher:u,instructions:l}=i.getContextRenderData(n);o.groups[0]=a.globalUniforms.bindGroup,a.state.set(t.state),a.shader.bind(o),a.geometry.bind(u.geometry,o.glProgram);let s=l.instructions;for(let c=0;c<l.instructionSize;c++){let f=s[c];if(f.size){for(let d=0;d<f.textures.count;d++)a.texture.bind(f.textures.textures[d],d);a.geometry.draw("triangle-list",f.size,f.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}};xv.extension={type:[x.WebGLPipesAdaptor],name:"graphics"}});var Tv,Jz=b(()=>{I();Oe();$l();Od();Ll();$S();hi();Be();er();Tv=class{init(){let t=Wi({name:"mesh",bits:[Sd,uG,zi]});this._shader=new Er({glProgram:t,resources:{uTexture:Y.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new J}}}})}execute(t,e){let n=t.renderer,o=e._shader;if(o){if(!o.glProgram){ct("Mesh shader has no glProgram",e.shader);return}}else{o=this._shader;let a=e.texture,i=a.source;o.resources.uTexture=i,o.resources.uSampler=i.style,o.resources.textureUniforms.uniforms.uTextureMatrix=a.textureMatrix.mapCoord}o.groups[100]=n.globalUniforms.bindGroup,o.groups[101]=t.localUniformsBindGroup,n.encoder.draw({geometry:e._geometry,shader:o,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}};Tv.extension={type:[x.WebGLPipesAdaptor],name:"mesh"}});var Rv,Kz=b(()=>{I();mi();Rv=class{constructor(){this._didUpload=!1,this._tempState=Br.for2d()}init(t){t.renderer.runners.contextChange.add(this)}contextChange(){this._didUpload=!1}start(t,e,n){let o=t.renderer;o.shader.bind(n,this._didUpload),o.shader.updateUniformGroup(o.globalUniforms.uniformGroup),o.geometry.bind(e,n.glProgram)}execute(t,e){let n=t.renderer;this._didUpload=!0,this._tempState.blendMode=e.blendMode,n.state.set(this._tempState);let o=e.textures.textures;for(let a=0;a<e.textures.count;a++)n.texture.bind(o[a],a);n.geometry.draw("triangle-list",e.size,e.start)}};Rv.extension={type:[x.WebGLPipesAdaptor],name:"batch"}});var Cv,tq=b(()=>{"use strict";Cv=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Cv||{})});var Ky,eq=b(()=>{"use strict";Ky=class{constructor(t,e){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.type=e}}});var Sv,rq=b(()=>{I();$u();tq();eq();Sv=class{constructor(t){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){this._gpuBuffers=Object.create(null),this._gl=this._renderer.gl}getGlBuffer(t){return this._gpuBuffers[t.uid]||this.createGLBuffer(t)}bind(t){let{_gl:e}=this,n=this.getGlBuffer(t);e.bindBuffer(n.type,n.buffer)}bindBufferBase(t,e){let{_gl:n}=this;if(this._boundBufferBases[e]!==t){let o=this.getGlBuffer(t);this._boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,o.buffer)}}bindBufferRange(t,e,n){let{_gl:o}=this;n=n||0;let a=this.getGlBuffer(t);o.bindBufferRange(o.UNIFORM_BUFFER,e||0,a.buffer,n*256,256)}updateBuffer(t){let{_gl:e}=this,n=this.getGlBuffer(t);if(t._updateID===n.updateID)return n;n.updateID=t._updateID,e.bindBuffer(n.type,n.buffer);let o=t.data;if(n.byteLength>=t.data.byteLength)e.bufferSubData(n.type,0,o,0,t._updateSize/o.BYTES_PER_ELEMENT);else{let a=t.descriptor.usage&le.STATIC?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=o.byteLength,e.bufferData(n.type,o,a)}return n}destroyAll(){let t=this._gl;for(let e in this._gpuBuffers)t.deleteBuffer(this._gpuBuffers[e].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(t,e){let n=this._gpuBuffers[t.uid],o=this._gl;e||o.deleteBuffer(n.buffer),this._gpuBuffers[t.uid]=null}createGLBuffer(t){let{_gl:e}=this,n=Cv.ARRAY_BUFFER;t.descriptor.usage&le.INDEX?n=Cv.ELEMENT_ARRAY_BUFFER:t.descriptor.usage&le.UNIFORM&&(n=Cv.UNIFORM_BUFFER);let o=new Ky(e.createBuffer(),n);return this._gpuBuffers[t.uid]=o,t.on("destroy",this.onBufferDestroy,this),o}};Sv.extension={type:[x.WebGLSystem],name:"buffer"}});var gO,oq,aq=b(()=>{rr();I();er();gO=class nq{constructor(t){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=t,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this._renderer.gl=t}init(t){t={...nq.defaultOptions,...t};let e=this.multiView=t.multiView;if(t.context&&e&&(ct("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),e=!1),e?this.canvas=Ct.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,t.context)this.initFromContext(t.context);else{let n=this._renderer.background.alpha<1,o=t.premultipliedAlpha??!0,a=t.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(t.preferWebGLVersion,{alpha:n,premultipliedAlpha:o,antialias:a,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference??"default"})}}ensureCanvasSize(t){if(!this.multiView){t!==this.canvas&&ct("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:e}=this;(e.width<t.width||e.height<t.height)&&(e.width=Math.max(t.width,t.width),e.height=Math.max(t.height,t.height))}initFromContext(t){this.gl=t,this.webGLVersion=t instanceof Ct.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(t),this._renderer.runners.contextChange.emit(t);let e=this._renderer.view.canvas;e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(t,e){let n,o=this.canvas;if(t===2&&(n=o.getContext("webgl2",e)),!n&&(n=o.getContext("webgl",e),!n))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=n,this.initFromContext(this.gl)}getExtensions(){let{gl:t}=this,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc"),rgtc:t.getExtension("EXT_texture_compression_rgtc"),loseContext:t.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...e,drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:t.getExtension("ANGLE_instanced_arrays"),srgb:t.getExtension("EXT_sRGB")};else{this.extensions={...e,colorBufferFloat:t.getExtension("EXT_color_buffer_float")};let n=t.getExtension("WEBGL_provoking_vertex");n&&n.provokingVertexWEBGL(n.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(t){t.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){let t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(t){let e=t.getContextAttributes();e&&!e.stencil&&ct("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let n=this.supports,o=this.webGLVersion===2,a=this.extensions;n.uint32Indices=o||!!a.uint32ElementIndex,n.uniformBufferObject=o,n.vertexArrayObject=o||!!a.vertexArrayObject,n.srgbTextures=o||!!a.srgb,n.nonPowOf2wrapping=o,n.nonPowOf2mipmaps=o,n.msaa=o,n.uint32Indices||ct("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};gO.extension={type:[x.WebGLSystem],name:"context"};gO.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};oq=gO});var tb,_O,Ee,yO=b(()=>{"use strict";tb=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(tb||{}),_O=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(_O||{}),Ee=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Ee||{})});function uq(r){return iq[r]??iq.float32}var iq,lq=b(()=>{yO();iq={uint8x2:Ee.UNSIGNED_BYTE,uint8x4:Ee.UNSIGNED_BYTE,sint8x2:Ee.BYTE,sint8x4:Ee.BYTE,unorm8x2:Ee.UNSIGNED_BYTE,unorm8x4:Ee.UNSIGNED_BYTE,snorm8x2:Ee.BYTE,snorm8x4:Ee.BYTE,uint16x2:Ee.UNSIGNED_SHORT,uint16x4:Ee.UNSIGNED_SHORT,sint16x2:Ee.SHORT,sint16x4:Ee.SHORT,unorm16x2:Ee.UNSIGNED_SHORT,unorm16x4:Ee.UNSIGNED_SHORT,snorm16x2:Ee.SHORT,snorm16x4:Ee.SHORT,float16x2:Ee.HALF_FLOAT,float16x4:Ee.HALF_FLOAT,float32:Ee.FLOAT,float32x2:Ee.FLOAT,float32x3:Ee.FLOAT,float32x4:Ee.FLOAT,uint32:Ee.UNSIGNED_INT,uint32x2:Ee.UNSIGNED_INT,uint32x3:Ee.UNSIGNED_INT,uint32x4:Ee.UNSIGNED_INT,sint32:Ee.INT,sint32x2:Ee.INT,sint32x3:Ee.INT,sint32x4:Ee.INT}});var Lmt,Ov,sq=b(()=>{I();pc();fO();lq();Lmt={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},Ov=class{constructor(t){this._geometryVaoHash=Object.create(null),this._renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let t=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let e=this._renderer.context.extensions.vertexArrayObject;e&&(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=o=>e.bindVertexArrayOES(o),t.deleteVertexArray=o=>e.deleteVertexArrayOES(o));let n=this._renderer.context.extensions.vertexAttribDivisorANGLE;n&&(t.drawArraysInstanced=(o,a,i,u)=>{n.drawArraysInstancedANGLE(o,a,i,u)},t.drawElementsInstanced=(o,a,i,u,l)=>{n.drawElementsInstancedANGLE(o,a,i,u,l)},t.vertexAttribDivisor=(o,a)=>n.vertexAttribDivisorANGLE(o,a)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(t,e){let n=this.gl;this._activeGeometry=t;let o=this.getVao(t,e);this._activeVao!==o&&(this._activeVao=o,n.bindVertexArray(o)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let t=this._activeGeometry,e=this._renderer.buffer;for(let n=0;n<t.buffers.length;n++){let o=t.buffers[n];e.updateBuffer(o)}}checkCompatibility(t,e){let n=t.attributes,o=e._attributeData;for(let a in o)if(!n[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(t,e){let n=t.attributes,o=e._attributeData,a=["g",t.uid];for(let i in n)o[i]&&a.push(i,o[i].location);return a.join("-")}getVao(t,e){return this._geometryVaoHash[t.uid]?.[e._key]||this.initGeometryVao(t,e)}initGeometryVao(t,e,n=!0){let o=this._renderer.gl,a=this._renderer.buffer;this._renderer.shader._getProgramData(e),this.checkCompatibility(t,e);let i=this.getSignature(t,e);this._geometryVaoHash[t.uid]||(this._geometryVaoHash[t.uid]=Object.create(null),t.on("destroy",this.onGeometryDestroy,this));let u=this._geometryVaoHash[t.uid],l=u[i];if(l)return u[e._key]=l,l;jy(t,e._attributeData);let s=t.buffers;l=o.createVertexArray(),o.bindVertexArray(l);for(let c=0;c<s.length;c++){let f=s[c];a.bind(f)}return this.activateVao(t,e),u[e._key]=l,u[i]=l,o.bindVertexArray(null),l}onGeometryDestroy(t,e){let n=this._geometryVaoHash[t.uid],o=this.gl;if(n){if(e)for(let a in n)this._activeVao!==n[a]&&this.unbind(),o.deleteVertexArray(n[a]);this._geometryVaoHash[t.uid]=null}}destroyAll(t=!1){let e=this.gl;for(let n in this._geometryVaoHash){if(t)for(let o in this._geometryVaoHash[n]){let a=this._geometryVaoHash[n];this._activeVao!==a&&this.unbind(),e.deleteVertexArray(a[o])}this._geometryVaoHash[n]=null}}activateVao(t,e){let n=this._renderer.gl,o=this._renderer.buffer,a=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);let i=null;for(let u in a){let l=a[u],s=l.buffer,c=o.getGlBuffer(s),f=e._attributeData[u];if(f){i!==c&&(o.bind(s),i=c);let d=f.location;n.enableVertexAttribArray(d);let p=Wo(l.format),h=uq(l.format);if(f.format?.substring(1,4)==="int"?n.vertexAttribIPointer(d,p.size,h,l.stride,l.offset):n.vertexAttribPointer(d,p.size,h,p.normalised,l.stride,l.offset),l.instance)if(this.hasInstance){let m=l.divisor??1;n.vertexAttribDivisor(d,m)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,n,o){let{gl:a}=this._renderer,i=this._activeGeometry,u=Lmt[i.topology||t];if(o||(o=i.instanceCount),i.indexBuffer){let l=i.indexBuffer.data.BYTES_PER_ELEMENT,s=l===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;o>1?a.drawElementsInstanced(u,e||i.indexBuffer.data.length,s,(n||0)*l,o):a.drawElements(u,e||i.indexBuffer.data.length,s,(n||0)*l)}else o>1?a.drawArraysInstanced(u,n||0,e||i.getSize(),o):a.drawArrays(u,n||0,e||i.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}};Ov.extension={type:[x.WebGLSystem],name:"geometry"}});var Umt,bO,fq,dq=b(()=>{I();er();nd();hi();mi();Uo();Be();dc();Umt=new Na({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),bO=class cq{constructor(t){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=t}init(t={}){let{useBackBuffer:e,antialias:n}={...cq.defaultOptions,...t};this.useBackBuffer=e,this._antialias=n,this._renderer.context.supports.msaa||(ct("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Br.for2d();let o=new ka({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new Er({glProgram:o,resources:{uTexture:Y.WHITE.source}})}renderStart(t){let e=this._renderer.renderTarget.getRenderTarget(t.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!e.isRoot,this._useBackBufferThisRender){let n=this._renderer.renderTarget.getRenderTarget(t.target);this._targetTexture=n.colorTexture,t.target=this._getBackBufferTexture(n.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let t=this._renderer;t.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(t.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,t.encoder.draw({geometry:Umt,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(t){return this._backBufferTexture=this._backBufferTexture||new Y({source:new ke({width:t.width,height:t.height,resolution:t._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(t.width,t.height,t._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};bO.extension={type:[x.WebGLSystem],name:"backBuffer",priority:1};bO.defaultOptions={useBackBuffer:!1};fq=bO});var Ev,pq=b(()=>{I();Ev=class{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.gl.colorMask(!!(t&8),!!(t&4),!!(t&2),!!(t&1)))}};Ev.extension={type:[x.WebGLSystem],name:"colorMask"}});var Fv,hq=b(()=>{I();Fv=class{constructor(t){this.commandFinished=Promise.resolve(),this._renderer=t}setGeometry(t,e){this._renderer.geometry.bind(t,e.glProgram)}finishRenderPass(){}draw(t){let e=this._renderer,{geometry:n,shader:o,state:a,skipSync:i,topology:u,size:l,start:s,instanceCount:c}=t;e.shader.bind(o,i),e.geometry.bind(n,e.shader._activeProgram),a&&e.state.set(a),e.geometry.draw(u,l,s,c??n.instanceCount)}destroy(){this._renderer=null}};Fv.extension={type:[x.WebGLSystem],name:"encoder"}});var Mv,mq=b(()=>{I();dO();fc();Mv=class{constructor(t){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:lr.NONE},this._renderTargetStencilState=Object.create(null),t.renderTarget.onRenderTargetChange.add(this)}contextChange(t){this._gl=t,this._comparisonFuncMapping={always:t.ALWAYS,never:t.NEVER,equal:t.EQUAL,"not-equal":t.NOTEQUAL,less:t.LESS,"less-equal":t.LEQUAL,greater:t.GREATER,"greater-equal":t.GEQUAL},this._stencilOpsMapping={keep:t.KEEP,zero:t.ZERO,replace:t.REPLACE,invert:t.INVERT,"increment-clamp":t.INCR,"decrement-clamp":t.DECR,"increment-wrap":t.INCR_WRAP,"decrement-wrap":t.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=lr.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(t){if(this._activeRenderTarget===t)return;this._activeRenderTarget=t;let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:lr.DISABLED,stencilReference:0}),this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){let n=this._renderTargetStencilState[this._activeRenderTarget.uid],o=this._gl,a=Vi[t],i=this._stencilCache;if(n.stencilMode=t,n.stencilReference=e,t===lr.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,o.disable(o.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,o.enable(o.STENCIL_TEST)),(t!==i.stencilMode||i.stencilReference!==e)&&(i.stencilMode=t,i.stencilReference=e,o.stencilFunc(this._comparisonFuncMapping[a.stencilBack.compare],e,255),o.stencilOp(o.KEEP,o.KEEP,this._stencilOpsMapping[a.stencilBack.passOp]))}};Mv.extension={type:[x.WebGLSystem],name:"stencil"}});function vq(r){let t=r.map(a=>({data:a,offset:0,size:0})),e=0,n=0,o=0;for(let a=0;a<t.length;a++){let i=t[a];if(e=DO[i.data.type],!e)throw new Error(`Unknown type ${i.data.type}`);if(i.data.size>1&&(e=Math.max(e,16)*i.data.size),i.size=e,n%e!==0&&n<16){let u=n%e%16;n+=u,o+=u}n+e>16?(o=Math.ceil(o/16)*16,i.offset=o,o+=e,n=e):(i.offset=o,n+=e,o+=e)}return o=Math.ceil(o/16)*16,{uboElements:t,size:o}}var DO,wO=b(()=>{"use strict";DO={f32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64}});function gq(r,t){let e=Math.max(DO[r.data.type]/16,1),n=r.data.value.length/r.data.size,o=(4-n%4)%4;return`
        v = uv.${r.data.name};
        offset += ${t};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${r.data.size*e}; i++)
        {
            for(var j = 0; j < ${n}; j++)
            {
                data[arrayOffset++] = v[t++];
            }
            ${o!==0?`arrayOffset += ${o};`:""}
        }
    `}var _q=b(()=>{wO()});function yq(r){return Qy(r,"uboStd40",gq,sO)}var bq=b(()=>{lO();cO();_q()});var Av,Dq=b(()=>{I();aO();wO();bq();Av=class extends Nd{constructor(){super({createUboElements:vq,generateUboSync:yq})}};Av.extension={type:[x.WebGLSystem],name:"ubo"}});var eb,wq=b(()=>{"use strict";eb=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}});var rb,xq=b(()=>{An();er();Jf();Ed();wq();rb=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new de}init(t,e){this._renderer=t,this._renderTargetSystem=e,t.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new de}copyToTexture(t,e,n,o,a){let i=this._renderTargetSystem,u=this._renderer,l=i.getGpuRenderTarget(t),s=u.gl;return this.finishRenderPass(t),s.bindFramebuffer(s.FRAMEBUFFER,l.resolveTargetFramebuffer),u.texture.bind(e,0),s.copyTexSubImage2D(s.TEXTURE_2D,0,a.x,a.y,n.x,n.y,o.width,o.height),e}startRenderPass(t,e=!0,n,o){let a=this._renderTargetSystem,i=t.colorTexture,u=a.getGpuRenderTarget(t),l=o.y;t.isRoot&&(l=i.pixelHeight-o.height),t.colorTextures.forEach(f=>{this._renderer.texture.unbind(f)});let s=this._renderer.gl;s.bindFramebuffer(s.FRAMEBUFFER,u.framebuffer);let c=this._viewPortCache;(c.x!==o.x||c.y!==l||c.width!==o.width||c.height!==o.height)&&(c.x=o.x,c.y=l,c.width=o.width,c.height=o.height,s.viewport(o.x,l,o.width,o.height)),!u.depthStencilRenderBuffer&&(t.stencil||t.depth)&&this._initStencil(u),this.clear(t,e,n)}finishRenderPass(t){let n=this._renderTargetSystem.getGpuRenderTarget(t);if(!n.msaa)return;let o=this._renderer.gl;o.bindFramebuffer(o.FRAMEBUFFER,n.resolveTargetFramebuffer),o.bindFramebuffer(o.READ_FRAMEBUFFER,n.framebuffer),o.blitFramebuffer(0,0,n.width,n.height,0,0,n.width,n.height,o.COLOR_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,n.framebuffer)}initGpuRenderTarget(t){let e=this._renderer,n=e.gl,o=new eb;return t.colorTexture.resource===e.canvas?(this._renderer.context.ensureCanvasSize(t.colorTexture.resource),o.framebuffer=null,o):(this._initColor(t,o),n.bindFramebuffer(n.FRAMEBUFFER,null),o)}destroyGpuRenderTarget(t){let e=this._renderer.gl;t.framebuffer&&(e.deleteFramebuffer(t.framebuffer),t.framebuffer=null),t.resolveTargetFramebuffer&&(e.deleteFramebuffer(t.resolveTargetFramebuffer),t.resolveTargetFramebuffer=null),t.depthStencilRenderBuffer&&(e.deleteRenderbuffer(t.depthStencilRenderBuffer),t.depthStencilRenderBuffer=null),t.msaaRenderBuffer.forEach(n=>{e.deleteRenderbuffer(n)}),t.msaaRenderBuffer=null}clear(t,e,n){if(!e)return;let o=this._renderTargetSystem;typeof e=="boolean"&&(e=e?Dn.ALL:Dn.NONE);let a=this._renderer.gl;if(e&Dn.COLOR){n??(n=o.defaultClearColor);let i=this._clearColorCache,u=n;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3])&&(i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],a.clearColor(u[0],u[1],u[2],u[3]))}a.clear(e)}resizeGpuRenderTarget(t){if(t.isRoot)return;let n=this._renderTargetSystem.getGpuRenderTarget(t);this._resizeColor(t,n),(t.stencil||t.depth)&&this._resizeStencil(n)}_initColor(t,e){let n=this._renderer,o=n.gl,a=o.createFramebuffer();if(e.resolveTargetFramebuffer=a,o.bindFramebuffer(o.FRAMEBUFFER,a),e.width=t.colorTexture.source.pixelWidth,e.height=t.colorTexture.source.pixelHeight,t.colorTextures.forEach((i,u)=>{let l=i.source;l.antialias&&(n.context.supports.msaa?e.msaa=!0:ct("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),n.texture.bindSource(l,0);let c=n.texture.getGlSource(l).texture;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+u,3553,c,0)}),e.msaa){let i=o.createFramebuffer();e.framebuffer=i,o.bindFramebuffer(o.FRAMEBUFFER,i),t.colorTextures.forEach((u,l)=>{let s=o.createRenderbuffer();e.msaaRenderBuffer[l]=s})}else e.framebuffer=a;this._resizeColor(t,e)}_resizeColor(t,e){let n=t.colorTexture.source;if(e.width=n.pixelWidth,e.height=n.pixelHeight,t.colorTextures.forEach((o,a)=>{a!==0&&o.source.resize(n.width,n.height,n._resolution)}),e.msaa){let o=this._renderer,a=o.gl,i=e.framebuffer;a.bindFramebuffer(a.FRAMEBUFFER,i),t.colorTextures.forEach((u,l)=>{let s=u.source;o.texture.bindSource(s,0);let f=o.texture.getGlSource(s).internalFormat,d=e.msaaRenderBuffer[l];a.bindRenderbuffer(a.RENDERBUFFER,d),a.renderbufferStorageMultisample(a.RENDERBUFFER,4,f,s.pixelWidth,s.pixelHeight),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+l,a.RENDERBUFFER,d)})}}_initStencil(t){if(t.framebuffer===null)return;let e=this._renderer.gl,n=e.createRenderbuffer();t.depthStencilRenderBuffer=n,e.bindRenderbuffer(e.RENDERBUFFER,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n),this._resizeStencil(t)}_resizeStencil(t){let e=this._renderer.gl;e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilRenderBuffer),t.msaa?e.renderbufferStorageMultisample(e.RENDERBUFFER,4,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,this._renderer.context.webGLVersion===2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t.width,t.height)}postrender(t){if(this._renderer.context.multiView&&Bo.test(t.colorTexture.resource)){let e=this._renderer.context.canvas,n=t.colorTexture;n.context2D.drawImage(e,0,n.pixelHeight-e.height)}}}});var Pv,Tq=b(()=>{I();pO();xq();Pv=class extends $d{constructor(t){super(t),this.adaptor=new rb,this.adaptor.init(t,this)}};Pv.extension={type:[x.WebGLSystem],name:"renderTarget"}});function Rq(r,t){let e=[],n=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `],o=!1,a=0,i=0,u=t._getProgramData(r.glProgram);for(let s in r.groups){let c=r.groups[s];e.push(`
            resources = g[${s}].resources;
        `);for(let f in c.resources){let d=c.resources[f];if(d instanceof Qe)d.ubo?e.push(`
                        sS.bindUniformBlock(
                            resources[${f}],
                            sS._uniformBindMap[${s}[${f}],
                            ${a++}
                        );
                    `):e.push(`
                        ugS.updateUniformGroup(resources[${f}], p, sD);
                    `);else if(d instanceof ql)e.push(`
                    sS.bindUniformBlock(
                        resources[${f}],
                        sS._uniformBindMap[${s}[${f}],
                        ${a++}
                    );
                `);else if(d instanceof ke){let p=r._uniformBindMap[s][f],h=u.uniformData[p];h&&(o||(o=!0,n.push(`
                        var tS = r.texture;
                        `)),t._gl.uniform1i(h.location,i),e.push(`
                        tS.bind(resources[${f}], ${i});
                    `),i++)}}}let l=[...n,...e].join(`
`);return new Function("r","s","sD",l)}var Cq=b(()=>{Hy();po();Uo()});var nb,Sq=b(()=>{"use strict";nb=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}});function xO(r,t,e){let n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}var Oq=b(()=>{"use strict"});function TO(r){let t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function ob(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return TO(2*t);case"bvec3":return TO(3*t);case"bvec4":return TO(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var RO=b(()=>{"use strict"});function CO(r,t){if(!ab){let e=Object.keys(Eq);ab={};for(let n=0;n<e.length;++n){let o=e[n];ab[r[o]]=Eq[o]}}return ab[t]}function Fq(r,t){let e=CO(r,t);return Bmt[e]||"float32"}var ab,Eq,Bmt,SO=b(()=>{"use strict";ab=null,Eq={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},Bmt={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"}});function Mq(r,t,e=!1){let n={},o=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let i=0;i<o;i++){let u=t.getActiveAttrib(r,i);if(u.name.startsWith("gl_"))continue;let l=Fq(t,u.type);n[u.name]={location:0,format:l,stride:Wo(l).stride,offset:0,instance:!1,start:0}}let a=Object.keys(n);if(e){a.sort((i,u)=>i>u?1:-1);for(let i=0;i<a.length;i++)n[a[i]].location=i,t.bindAttribLocation(r,i,a[i]);t.linkProgram(r)}else for(let i=0;i<a.length;i++)n[a[i]].location=t.getAttribLocation(r,a[i]);return n}var Aq=b(()=>{pc();SO()});function Pq(r,t){if(!t.ACTIVE_UNIFORM_BLOCKS)return{};let e={},n=t.getProgramParameter(r,t.ACTIVE_UNIFORM_BLOCKS);for(let o=0;o<n;o++){let a=t.getActiveUniformBlockName(r,o),i=t.getUniformBlockIndex(r,a),u=t.getActiveUniformBlockParameter(r,o,t.UNIFORM_BLOCK_DATA_SIZE);e[a]={name:a,index:i,size:u}}return e}var Iq=b(()=>{"use strict"});function Nq(r,t){let e={},n=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let o=0;o<n;o++){let a=t.getActiveUniform(r,o),i=a.name.replace(/\[.*?\]$/,""),u=!!a.name.match(/\[.*?\]$/),l=CO(t,a.type);e[i]={name:i,index:o,type:l,size:a.size,isArray:u,value:ob(l,a.size)}}return e}var kq=b(()=>{RO();SO()});function $q(r,t){let e=r.getShaderSource(t).split(`
`).map((s,c)=>`${c}: ${s}`),n=r.getShaderInfoLog(t),o=n.split(`
`),a={},i=o.map(s=>parseFloat(s.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(s=>s&&!a[s]?(a[s]=!0,!0):!1),u=[""];i.forEach(s=>{e[s-1]=`%c${e[s-1]}%c`,u.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let l=e.join(`
`);u[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...u),console.groupEnd()}function Lq(r,t,e,n){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||$q(r,e),r.getShaderParameter(n,r.COMPILE_STATUS)||$q(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}var Uq=b(()=>{"use strict"});function Bq(r,t){let e=xO(r,r.VERTEX_SHADER,t.vertex),n=xO(r,r.FRAGMENT_SHADER,t.fragment),o=r.createProgram();r.attachShader(o,e),r.attachShader(o,n);let a=t.transformFeedbackVaryings;a&&(typeof r.transformFeedbackVaryings!="function"?ct("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(o,a.names,a.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)||Lq(r,o,e,n),t._attributeData=Mq(o,r,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertex)),t._uniformData=Nq(o,r),t._uniformBlockData=Pq(o,r),r.deleteShader(e),r.deleteShader(n);let i={};for(let l in t._uniformData){let s=t._uniformData[l];i[l]={location:r.getUniformLocation(o,l),value:ob(s.type,s.size)}}return new nb(o,i)}var Wq=b(()=>{er();Sq();Oq();RO();Aq();Iq();kq();Uq()});var ib,Iv,Gq=b(()=>{I();cc();Cq();Wq();ib={textureCount:0,blockIndex:0},Iv=class{constructor(t){this._activeProgram=null,this._programDataHash=Object.create(null),this._nextIndex=0,this._boundUniformsIdsToIndexHash=Object.create(null),this._boundIndexToUniformsHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(t){this._gl=t,this._maxBindings=t.MAX_UNIFORM_BUFFER_BINDINGS?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0,this._programDataHash=Object.create(null),this._boundUniformsIdsToIndexHash=Object.create(null),this._boundIndexToUniformsHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=Ia()}bind(t,e){if(this._setProgram(t.glProgram),e)return;ib.textureCount=0,ib.blockIndex=0;let n=this._shaderSyncFunctions[t.glProgram._key];n||(n=this._shaderSyncFunctions[t.glProgram._key]=this._generateShaderSync(t,this)),n(this._renderer,t,ib)}updateUniformGroup(t){this._renderer.uniformGroup.updateUniformGroup(t,this._activeProgram,ib)}bindUniformBlock(t,e,n=0){let o=this._renderer.buffer,a=this._getProgramData(this._activeProgram),i=t._bufferResource;i&&this._renderer.ubo.updateUniformGroup(t),o.updateBuffer(t.buffer);let u=this._boundUniformsIdsToIndexHash[t.uid];if(u===void 0){let c=this._nextIndex++%this._maxBindings,f=this._boundIndexToUniformsHash[c];f&&(this._boundUniformsIdsToIndexHash[f.uid]=void 0),u=this._boundUniformsIdsToIndexHash[t.uid]=c,this._boundIndexToUniformsHash[c]=t,i?o.bindBufferRange(t.buffer,c,t.offset):o.bindBufferBase(t.buffer,c)}let l=this._gl,s=this._activeProgram._uniformBlockData[e].index;a.uniformBlockBindings[n]!==u&&(a.uniformBlockBindings[n]=u,l.uniformBlockBinding(a.program,s,u))}_setProgram(t){if(this._activeProgram===t)return;this._activeProgram=t;let e=this._getProgramData(t);this._gl.useProgram(e.program)}_getProgramData(t){return this._programDataHash[t._key]||this._createProgramData(t)}_createProgramData(t){let e=t._key;return this._programDataHash[e]=Bq(this._gl,t),this._programDataHash[e]}destroy(){for(let t of Object.keys(this._programDataHash))this._programDataHash[t].destroy(),this._programDataHash[t]=null;this._programDataHash=null,this._boundUniformsIdsToIndexHash=null}_generateShaderSync(t,e){return Rq(t,e)}};Iv.extension={type:[x.WebGLSystem],name:"shader"}});var zq,qq,Qq=b(()=>{"use strict";zq={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},qq={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"}});function Hq(r,t){let e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(let n in r.uniforms){if(!t[n]){r.uniforms[n]instanceof Qe?r.uniforms[n].ubo?e.push(`
                        renderer.shader.bindUniformBlock(uv.${n}, "${n}");
                    `):e.push(`
                        renderer.shader.updateUniformGroup(uv.${n});
                    `):r.uniforms[n]instanceof ql&&e.push(`
                        renderer.shader.bindBufferResource(uv.${n}, "${n}");
                    `);continue}let o=r.uniformStructures[n],a=!1;for(let i=0;i<Wu.length;i++){let u=Wu[i];if(o.type===u.type&&u.test(o)){e.push(`name = "${n}";`,Wu[i].uniform),a=!0;break}}if(!a){let u=(o.size===1?zq:qq)[o.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var Vq=b(()=>{Hy();po();uO();Qq()});var Nv,jq=b(()=>{I();Vq();Nv=class{constructor(t){this._cache={},this._uniformGroupSyncHash={},this._renderer=t,this.gl=null,this._cache={}}contextChange(t){this.gl=t}updateUniformGroup(t,e,n){let o=this._renderer.shader._getProgramData(e);(!t.isStatic||t._dirtyId!==o.uniformDirtyGroups[t.uid])&&(o.uniformDirtyGroups[t.uid]=t._dirtyId,this._getUniformSyncFunction(t,e)(o.uniformData,t.uniforms,this._renderer,n))}_getUniformSyncFunction(t,e){return this._uniformGroupSyncHash[t._signature]?.[e._key]||this._createUniformSyncFunction(t,e)}_createUniformSyncFunction(t,e){let n=this._uniformGroupSyncHash[t._signature]||(this._uniformGroupSyncHash[t._signature]={}),o=this._getSignature(t,e._uniformData,"u");return this._cache[o]||(this._cache[o]=this._generateUniformsSync(t,e._uniformData)),n[e._key]=this._cache[o],n[e._key]}_generateUniformsSync(t,e){return Hq(t,e)}_getSignature(t,e,n){let o=t.uniforms,a=[`${n}-`];for(let i in o)a.push(i),e[i]&&a.push(e[i].type);return a.join("-")}destroy(){this._renderer=null,this._cache=null}};Nv.extension={type:[x.WebGLSystem],name:"uniformGroup"}});function Zq(r){let t={};if(t.normal=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t.add=[r.ONE,r.ONE],t.multiply=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t.screen=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t.none=[0,0],t["normal-npm"]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t["add-npm"]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t["screen-npm"]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t.erase=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],!(r instanceof Ct.get().getWebGLRenderingContext()))t.min=[r.ONE,r.ONE,r.ONE,r.ONE,r.MIN,r.MIN],t.max=[r.ONE,r.ONE,r.ONE,r.ONE,r.MAX,r.MAX];else{let n=r.getExtension("EXT_blend_minmax");n&&(t.min=[r.ONE,r.ONE,r.ONE,r.ONE,n.MIN_EXT,n.MIN_EXT],t.max=[r.ONE,r.ONE,r.ONE,r.ONE,n.MAX_EXT,n.MAX_EXT])}return t}var Yq=b(()=>{rr()});var Wmt,Gmt,zmt,qmt,Qmt,Hmt,Xq,Jq,Kq=b(()=>{I();mi();Yq();Wmt=0,Gmt=1,zmt=2,qmt=3,Qmt=4,Hmt=5,Xq=class OO{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[Wmt]=this.setBlend,this.map[Gmt]=this.setOffset,this.map[zmt]=this.setCullFace,this.map[qmt]=this.setDepthTest,this.map[Qmt]=this.setFrontFace,this.map[Hmt]=this.setDepthMask,this.checks=[],this.defaultState=Br.for2d()}contextChange(t){this.gl=t,this.blendModesMap=Zq(t),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,n=0;for(;e;)e&1&&this.map[n].call(this,!!(t.data&1<<n)),e=e>>1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this._updateCheck(OO._checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this._updateCheck(OO._checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(this.blendModesMap[t]||(t="normal"),t===this.blendMode)return;this.blendMode=t;let e=this.blendModesMap[t],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(t,e){let n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):!e&&n!==-1&&this.checks.splice(n,1)}static _checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static _checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};Xq.extension={type:[x.WebGLSystem],name:"state"};Jq=Xq});var ub,tQ=b(()=>{yO();ub=class{constructor(t){this.target=_O.TEXTURE_2D,this.texture=t,this.width=-1,this.height=-1,this.type=Ee.UNSIGNED_BYTE,this.internalFormat=tb.RGBA,this.format=tb.RGBA,this.samplerType=0}}});var eQ,rQ=b(()=>{"use strict";eQ={id:"buffer",upload(r,t,e){t.width===r.width||t.height===r.height?e.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,t.format,t.type,r.resource):e.texImage2D(t.target,0,t.internalFormat,r.width,r.height,0,t.format,t.type,r.resource),t.width=r.width,t.height=r.height}}});var Vmt,nQ,oQ=b(()=>{"use strict";Vmt={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},nQ={id:"compressed",upload(r,t,e){e.pixelStorei(e.UNPACK_ALIGNMENT,4);let n=r.pixelWidth,o=r.pixelHeight,a=!!Vmt[r.format];for(let i=0;i<r.resource.length;i++){let u=r.resource[i];a?e.compressedTexImage2D(e.TEXTURE_2D,i,t.internalFormat,n,o,0,u):e.texImage2D(e.TEXTURE_2D,i,t.internalFormat,n,o,0,t.format,t.type,u),n=Math.max(n>>1,1),o=Math.max(o>>1,1)}}}});var lb,EO=b(()=>{"use strict";lb={id:"image",upload(r,t,e,n){let o=r.alphaMode==="premultiply-alpha-on-upload";e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o);let a=t.width,i=t.height,u=r.pixelWidth,l=r.pixelHeight,s=r.resourceWidth,c=r.resourceHeight;s<u||c<l?((a!==u||i!==l)&&e.texImage2D(t.target,0,t.internalFormat,u,l,0,t.format,t.type,null),n===2?e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,c,t.format,t.type,r.resource):e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.format,t.type,r.resource)):a===u||i===l?e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.format,t.type,r.resource):n===2?e.texImage2D(t.target,0,t.internalFormat,u,l,0,t.format,t.type,r.resource):e.texImage2D(t.target,0,t.internalFormat,t.format,t.type,r.resource),t.width=u,t.height=l}}});var aQ,iQ=b(()=>{EO();aQ={id:"video",upload(r,t,e,n){if(!r.isValid){e.texImage2D(t.target,0,t.internalFormat,1,1,0,t.format,t.type,null);return}lb.upload(r,t,e,n)}}});var FO,uQ,sb,lQ,sQ=b(()=>{"use strict";FO={linear:9729,nearest:9728},uQ={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},sb={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},lQ={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519}});function MO(r,t,e,n,o,a,i,u){let l=a;if(!u||r.addressModeU!=="repeat"||r.addressModeV!=="repeat"||r.addressModeW!=="repeat"){let s=sb[i?"clamp-to-edge":r.addressModeU],c=sb[i?"clamp-to-edge":r.addressModeV],f=sb[i?"clamp-to-edge":r.addressModeW];t[o](l,t.TEXTURE_WRAP_S,s),t[o](l,t.TEXTURE_WRAP_T,c),t.TEXTURE_WRAP_R&&t[o](l,t.TEXTURE_WRAP_R,f)}if((!u||r.magFilter!=="linear")&&t[o](l,t.TEXTURE_MAG_FILTER,FO[r.magFilter]),e){if(!u||r.mipmapFilter!=="linear"){let s=uQ[r.minFilter][r.mipmapFilter];t[o](l,t.TEXTURE_MIN_FILTER,s)}}else t[o](l,t.TEXTURE_MIN_FILTER,FO[r.minFilter]);if(n&&r.maxAnisotropy>1){let s=Math.min(r.maxAnisotropy,t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));t[o](l,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}r.compare&&t[o](l,t.TEXTURE_COMPARE_FUNC,lQ[r.compare])}var cQ=b(()=>{sQ()});function fQ(r){return{r8unorm:r.RED,r8snorm:r.RED,r8uint:r.RED,r8sint:r.RED,r16uint:r.RED,r16sint:r.RED,r16float:r.RED,rg8unorm:r.RG,rg8snorm:r.RG,rg8uint:r.RG,rg8sint:r.RG,r32uint:r.RED,r32sint:r.RED,r32float:r.RED,rg16uint:r.RG,rg16sint:r.RG,rg16float:r.RG,rgba8unorm:r.RGBA,"rgba8unorm-srgb":r.RGBA,rgba8snorm:r.RGBA,rgba8uint:r.RGBA,rgba8sint:r.RGBA,bgra8unorm:r.RGBA,"bgra8unorm-srgb":r.RGBA,rgb9e5ufloat:r.RGB,rgb10a2unorm:r.RGBA,rg11b10ufloat:r.RGB,rg32uint:r.RG,rg32sint:r.RG,rg32float:r.RG,rgba16uint:r.RGBA,rgba16sint:r.RGBA,rgba16float:r.RGBA,rgba32uint:r.RGBA,rgba32sint:r.RGBA,rgba32float:r.RGBA,stencil8:r.STENCIL_INDEX8,depth16unorm:r.DEPTH_COMPONENT,depth24plus:r.DEPTH_COMPONENT,"depth24plus-stencil8":r.DEPTH_STENCIL,depth32float:r.DEPTH_COMPONENT,"depth32float-stencil8":r.DEPTH_STENCIL}}var dQ=b(()=>{"use strict"});function pQ(r,t){let e={},n=r.RGBA;return r instanceof Ct.get().getWebGLRenderingContext()?t.srgb&&(e={"rgba8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT}):(e={"rgba8unorm-srgb":r.SRGB8_ALPHA8,"bgra8unorm-srgb":r.SRGB8_ALPHA8},n=r.RGBA8),{r8unorm:r.R8,r8snorm:r.R8_SNORM,r8uint:r.R8UI,r8sint:r.R8I,r16uint:r.R16UI,r16sint:r.R16I,r16float:r.R16F,rg8unorm:r.RG8,rg8snorm:r.RG8_SNORM,rg8uint:r.RG8UI,rg8sint:r.RG8I,r32uint:r.R32UI,r32sint:r.R32I,r32float:r.R32F,rg16uint:r.RG16UI,rg16sint:r.RG16I,rg16float:r.RG16F,rgba8unorm:r.RGBA,...e,rgba8snorm:r.RGBA8_SNORM,rgba8uint:r.RGBA8UI,rgba8sint:r.RGBA8I,bgra8unorm:n,rgb9e5ufloat:r.RGB9_E5,rgb10a2unorm:r.RGB10_A2,rg11b10ufloat:r.R11F_G11F_B10F,rg32uint:r.RG32UI,rg32sint:r.RG32I,rg32float:r.RG32F,rgba16uint:r.RGBA16UI,rgba16sint:r.RGBA16I,rgba16float:r.RGBA16F,rgba32uint:r.RGBA32UI,rgba32sint:r.RGBA32I,rgba32float:r.RGBA32F,stencil8:r.STENCIL_INDEX8,depth16unorm:r.DEPTH_COMPONENT16,depth24plus:r.DEPTH_COMPONENT24,"depth24plus-stencil8":r.DEPTH24_STENCIL8,depth32float:r.DEPTH_COMPONENT32F,"depth32float-stencil8":r.DEPTH32F_STENCIL8,...t.s3tc?{"bc1-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...t.s3tc_sRGB?{"bc1-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...t.rgtc?{"bc4-r-unorm":t.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":t.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":t.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":t.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...t.bptc?{"bc6h-rgb-float":t.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":t.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":t.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":t.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...t.etc?{"etc2-rgb8unorm":t.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":t.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":t.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":t.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":t.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":t.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":t.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":t.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...t.astc?{"astc-4x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}var hQ=b(()=>{rr()});function mQ(r){return{r8unorm:r.UNSIGNED_BYTE,r8snorm:r.BYTE,r8uint:r.UNSIGNED_BYTE,r8sint:r.BYTE,r16uint:r.UNSIGNED_SHORT,r16sint:r.SHORT,r16float:r.HALF_FLOAT,rg8unorm:r.UNSIGNED_BYTE,rg8snorm:r.BYTE,rg8uint:r.UNSIGNED_BYTE,rg8sint:r.BYTE,r32uint:r.UNSIGNED_INT,r32sint:r.INT,r32float:r.FLOAT,rg16uint:r.UNSIGNED_SHORT,rg16sint:r.SHORT,rg16float:r.HALF_FLOAT,rgba8unorm:r.UNSIGNED_BYTE,"rgba8unorm-srgb":r.UNSIGNED_BYTE,rgba8snorm:r.BYTE,rgba8uint:r.UNSIGNED_BYTE,rgba8sint:r.BYTE,bgra8unorm:r.UNSIGNED_BYTE,"bgra8unorm-srgb":r.UNSIGNED_BYTE,rgb9e5ufloat:r.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:r.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:r.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:r.UNSIGNED_INT,rg32sint:r.INT,rg32float:r.FLOAT,rgba16uint:r.UNSIGNED_SHORT,rgba16sint:r.SHORT,rgba16float:r.HALF_FLOAT,rgba32uint:r.UNSIGNED_INT,rgba32sint:r.INT,rgba32float:r.FLOAT,stencil8:r.UNSIGNED_BYTE,depth16unorm:r.UNSIGNED_SHORT,depth24plus:r.UNSIGNED_INT,"depth24plus-stencil8":r.UNSIGNED_INT_24_8,depth32float:r.FLOAT,"depth32float-stencil8":r.FLOAT_32_UNSIGNED_INT_24_8_REV}}var vQ=b(()=>{"use strict"});var jmt,kv,gQ=b(()=>{rr();I();Be();tQ();rQ();oQ();EO();iQ();cQ();dQ();hQ();vQ();jmt=4,kv=class{constructor(t){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:lb,buffer:eQ,video:aQ,compressed:nQ},this._useSeparateSamplers=!1,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(t){this._gl=t,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=pQ(t,this._renderer.context.extensions),this._mapFormatToType=mQ(t),this._mapFormatToFormat=fQ(t)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null);for(let e=0;e<16;e++)this.bind(Y.EMPTY,e)}initSource(t){this.bind(t)}bind(t,e=0){let n=t.source;t?(this.bindSource(n,e),this._useSeparateSamplers&&this._bindSampler(n.style,e)):(this.bindSource(null,e),this._useSeparateSamplers&&this._bindSampler(null,e))}bindSource(t,e=0){let n=this._gl;if(t._touched=this._renderer.textureGC.count,this._boundTextures[e]!==t){this._boundTextures[e]=t,this._activateLocation(e),t=t||Y.EMPTY.source;let o=this.getGlSource(t);n.bindTexture(o.target,o.texture)}}_bindSampler(t,e=0){let n=this._gl;if(!t){this._boundSamplers[e]=null,n.bindSampler(e,null);return}let o=this._getGlSampler(t);this._boundSamplers[e]!==o&&(this._boundSamplers[e]=o,n.bindSampler(e,o))}unbind(t){let e=t.source,n=this._boundTextures,o=this._gl;for(let a=0;a<n.length;a++)if(n[a]===e){this._activateLocation(a);let i=this.getGlSource(e);o.bindTexture(i.target,null),n[a]=null}}_activateLocation(t){this._activeTextureLocation!==t&&(this._activeTextureLocation=t,this._gl.activeTexture(this._gl.TEXTURE0+t))}_initSource(t){let e=this._gl,n=new ub(e.createTexture());if(n.type=this._mapFormatToType[t.format],n.internalFormat=this._mapFormatToInternalFormat[t.format],n.format=this._mapFormatToFormat[t.format],t.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||t.isPowerOfTwo)){let o=Math.max(t.width,t.height);t.mipLevelCount=Math.floor(Math.log2(o))+1}return this._glTextures[t.uid]=n,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceUpdate,this),t.on("styleChange",this.onStyleChange,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),this.updateStyle(t,!1),n}onStyleChange(t){this.updateStyle(t,!1)}updateStyle(t,e){let n=this._gl,o=this.getGlSource(t);n.bindTexture(n.TEXTURE_2D,o.texture),this._boundTextures[this._activeTextureLocation]=t,MO(t.style,n,t.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",n.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!t.isPowerOfTwo,e)}onSourceUnload(t){let e=this._glTextures[t.uid];e&&(this.unbind(t),this._glTextures[t.uid]=null,this._gl.deleteTexture(e.texture))}onSourceUpdate(t){let e=this._gl,n=this.getGlSource(t);e.bindTexture(e.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=t,this._uploads[t.uploadMethodId]?this._uploads[t.uploadMethodId].upload(t,n,e,this._renderer.context.webGLVersion):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.pixelWidth,t.pixelHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t,!1)}onUpdateMipmaps(t,e=!0){e&&this.bindSource(t,0);let n=this.getGlSource(t);this._gl.generateMipmap(n.target)}onSourceDestroy(t){t.off("destroy",this.onSourceDestroy,this),t.off("update",this.onSourceUpdate,this),t.off("resize",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("styleChange",this.onStyleChange,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}_initSampler(t){let e=this._gl,n=this._gl.createSampler();return this._glSamplers[t._resourceId]=n,MO(t,e,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",n,!1,!0),this._glSamplers[t._resourceId]}_getGlSampler(t){return this._glSamplers[t._resourceId]||this._initSampler(t)}getGlSource(t){return this._glTextures[t.uid]||this._initSource(t)}generateCanvas(t){let{pixels:e,width:n,height:o}=this.getPixels(t),a=Ct.get().createCanvas();a.width=n,a.height=o;let i=a.getContext("2d");if(i){let u=i.createImageData(n,o);u.data.set(e),i.putImageData(u,0,0)}return a}getPixels(t){let e=t.source.resolution,n=t.frame,o=Math.max(Math.round(n.width*e),1),a=Math.max(Math.round(n.height*e),1),i=new Uint8Array(jmt*o*a),u=this._renderer,l=u.renderTarget.getRenderTarget(t),s=u.renderTarget.getGpuRenderTarget(l),c=u.gl;return c.bindFramebuffer(c.FRAMEBUFFER,s.resolveTargetFramebuffer),c.readPixels(Math.round(n.x*e),Math.round(n.y*e),o,a,c.RGBA,c.UNSIGNED_BYTE,i),{pixels:new Uint8ClampedArray(i.buffer),width:o,height:a}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null,this._renderer=null}};kv.extension={type:[x.WebGLSystem],name:"texture"}});var DQ={};ZM(DQ,{WebGLRenderer:()=>AO});var Zmt,Ymt,Xmt,_Q,yQ,bQ,AO,wQ=b(()=>{I();Xz();Jz();Kz();zm();oO();qi();rq();aq();sq();dq();pq();hq();mq();Dq();Tq();Gq();jq();Kq();gQ();Zmt=[...zy,Av,fq,oq,Sv,kv,Pv,Ov,Nv,Iv,Fv,Jq,Mv,Ev],Ymt=[...qy],Xmt=[Rv,Tv,xv],_Q=[],yQ=[],bQ=[];dt.handleByNamedList(x.WebGLSystem,_Q);dt.handleByNamedList(x.WebGLPipes,yQ);dt.handleByNamedList(x.WebGLPipesAdaptor,bQ);dt.add(...Zmt,...Ymt,...Xmt);AO=class extends zl{constructor(){let t={name:"webgl",type:jr.WEBGL,systems:_Q,renderPipes:yQ,renderPipeAdaptors:bQ};super(t)}}});var YM=function(r){return function(t){for(var e=r.length,n=t.length,o=new Array(e*n),a=0,i=0;i<e;i++)for(var u=r[i],l=0;l<n;l++)o[a++]=u(t[l]);return o}};var ss={compose:function(r){return function(t){return function(e){return r(t(e))}}}},cs=function(r){return r.compose};var qt=function(r){return r.identity},Qt={identity:function(r){return r},Semigroupoid0:function(){return ss}};var Re=!0;var _e=function(r){return function(t){return function(e){return r(e)(t)}}},Xt=function(r){return function(t){return r}};var XM=function(r){return function(t){for(var e=t.length,n=new Array(e),o=0;o<e;o++)n[o]=r(t[o]);return n}};var Zt=function(){function r(){}return r.value=new r,r}();var O=function(r){return r.map},ja=function(r){var t=O(r);return function(e){return function(n){return t(n)(e)}}},zr=function(r){return O(r)(Xt(void 0))};var Za={map:cs(ss)},ze={map:XM};var IX=qt(Qt);var Dp={apply:function(r){return function(t){return function(e){return r(e)(t(e))}}},Functor0:function(){return Za}},wp={apply:YM,Functor0:function(){return ze}},pe=function(r){return r.apply};var Bg=function(r){var t=pe(r),e=O(r.Functor0());return function(n){return function(o){return t(e(Xt(IX))(n))(o)}}};var $=function(r){return r.pure};var Ti=function(r){var t=$(r);return function(e){return function(n){if(e)return n;if(!e)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[e.constructor.name,n.constructor.name])}}},xp=function(r){var t=pe(r.Apply0()),e=$(r);return function(n){return function(o){return t(e(n))(o)}}};var Wg={pure:function(r){return function(t){return r}},Apply0:function(){return Dp}},Tp={pure:function(r){return[r]},Apply0:function(){return wp}};var JM=function(r){return function(t){for(var e=[],n=0,o=r.length;n<o;n++)Array.prototype.push.apply(e,t(r[n]));return e}};var va=function(r){return r.discard};var Gg={bind:function(r){return function(t){return function(e){return t(r(e))(e)}}},Apply0:function(){return Dp}},Qc={bind:JM,Apply0:function(){return wp}},lt=function(r){return r.bind},Tn=function(r){return _e(lt(r))},Hc=function(r){var t=Tn(r);return function(e){return function(n){return function(o){return t(e)(n(o))}}}};var ga={discard:function(r){return lt(r)}};var dw={Applicative0:function(){return Wg},Bind1:function(){return Gg}};var ro=function(r){var t=lt(r.Bind1()),e=$(r.Applicative0());return function(n){return function(o){return t(n)(function(a){return t(o)(function(i){return e(a(i))})})}}};var t3={ask:qt(Qt),Monad0:function(){return dw}};var Vo=function(r){return r.ask};var j=function(r){return r};var e3=function(r){return function(t){return function(){return r(t())}}};var zg=function(r){return function(t){return function(){for(var e=0,n=r.length;e<n;e++)t(r[e])()}}};var r3=function(r){return function(t){return r+t}},n3=function(r){return function(t){return r.length===0?t:t.length===0?r:r.concat(t)}};var Me=function(r){return r.reflectSymbol};var wo=function(r){return function(t){return t[r]}};var Qg={append:r3};var xo={append:n3};var bt=function(r){return r.append};var qr=function(r){return r.alt};var a3="\uFFFF",i3="\0",GX=Number.POSITIVE_INFINITY,zX=Number.NEGATIVE_INFINITY;var Hg=function(r){return function(t){return function(e){return function(n){return function(o){return n<o?r:n===o?t:e}}}}};var u3=Hg,l3=Hg,s3=Hg,c3=Hg;var Cp=function(r){return function(t){return r===t}},f3=Cp,d3=Cp,p3=Cp,h3=Cp,m3=Cp,v3=function(r){return function(t){return function(e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n])(e[n]))return!1;return!0}}};var To={eq:m3},_a={eqRecord:function(r){return function(t){return function(e){return!0}}}},g3=function(r){return r.eqRecord},ya=function(){return function(r){return{eq:g3(r)(Zt.value)}}};var Vg={eq:p3},Xa={eq:d3},_3={eq:h3},ju={eq:f3},Ri=function(r){return r.eq1},Rt=function(r){return r.eq},VX=Rt(ju),Zu=function(r){return{eq:v3(Rt(r))}};var qe=function(r){var t=g3(r);return function(){return function(e){var n=Me(e);return function(o){var a=Rt(o);return{eqRecord:function(i){return function(u){return function(l){var s=t(Zt.value)(u)(l),c=n(Zt.value),f=wo(c);return a(f(u))(f(l))&&s}}}}}}}},ds=function(r){var t=Rt(r);return function(e){return function(n){return VX(t(e)(n))(!1)}}};var Wt=function(){function r(){}return r.value=new r,r}(),Lt=function(){function r(){}return r.value=new r,r}(),te=function(){function r(){}return r.value=new r,r}();var y3=function(r){return function(t){return r-t|0}};var b3=function(r){return function(t){return r+t|0}},D3=function(r){return function(t){return r*t|0}},w3=function(r){return function(t){return r+t}},x3=function(r){return function(t){return r*t}};var no=function(r){return r.zero};var Sp={add:w3,zero:0,mul:x3,one:1},Yu={add:b3,zero:0,mul:D3,one:1};var Ro=function(r){return r.one};var Co=function(r){return r.mul};var Rn=function(r){return r.add};var jg={sub:y3,Semiring0:function(){return Yu}};var ba=function(){return{compare:s3(Wt.value)(te.value)(Lt.value),Eq0:function(){return To}}}();var ps=function(){return{compare:l3(Wt.value)(te.value)(Lt.value),Eq0:function(){return Vg}}}(),Ar=function(){return{compare:u3(Wt.value)(te.value)(Lt.value),Eq0:function(){return Xa}}}(),Zg=function(){return{compare:c3(Wt.value)(te.value)(Lt.value),Eq0:function(){return _3}}}();var Pt=function(r){return r.compare};var Ep=function(r){var t=Pt(r);return function(e){return function(n){var o=t(e)(n);if(o instanceof Wt)return n;if(o instanceof te||o instanceof Lt)return e;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[o.constructor.name])}}},hw=function(r){var t=Pt(r);return function(e){return function(n){var o=t(e)(n);if(o instanceof Wt||o instanceof te)return e;if(o instanceof Lt)return n;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[o.constructor.name])}}};var tn=function(r){return r.top};var hs={top:2147483647,bottom:-2147483648,Ord0:function(){return Ar}},Xu={top:a3,bottom:i3,Ord0:function(){return Zg}};var en=function(r){return r.bottom};var T3=function(r){return r.toString()},R3=function(r){var t=r.toString();return isNaN(t+".0")?t:t+".0"};var C3=function(r){var t=r.length;return'"'+r.replace(/[\0-\x1F\x7F"\\]/g,function(e,n){switch(e){case'"':case"\\":return"\\"+e;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var o=n+1,a=o<t&&r[o]>="0"&&r[o]<="9"?"\\&":"";return"\\"+e.charCodeAt(0).toString(10)+a})+'"'},S3=function(r){return function(t){for(var e=[],n=0,o=t.length;n<o;n++)e[n]=r(t[n]);return"["+e.join(",")+"]"}};var mw={show:function(r){return"unit"}},Qr={show:C3};var O3=function(r){return r.showRecordFields},Bn=function(){return function(){return function(r){var t=O3(r);return{show:function(e){return"{"+(t(Zt.value)(e)+"}")}}}}};var Fp={show:R3},Pr={show:T3};var vw={show:function(r){if(r)return"true";if(!r)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[r.constructor.name])}},U=function(r){return r.show},au=function(r){return{show:S3(U(r))}},je=function(r){var t=Me(r);return function(e){var n=O3(e);return function(o){var a=U(o);return{showRecordFields:function(i){return function(u){var l=n(Zt.value)(u),s=t(Zt.value),c=wo(s)(u);return" "+(s+(": "+(a(c)+(","+l))))}}}}}},Ce=function(r){var t=Me(r);return function(e){var n=U(e);return{showRecordFields:function(o){return function(a){var i=t(Zt.value),u=wo(i)(a);return" "+(i+(": "+(n(u)+" ")))}}}}};var It=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),B=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}();var Ku=function(){function r(){}return r.value=new r,r}(),gw=function(r){return r},Yg=function(r){return r},Xg=function(r){return r.to};var ms=function(r){return r.from};var aJ=qt(Qt),P=function(){function r(){}return r.value=new r,r}(),M=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Ci=function(r){var t=U(r);return{show:function(e){if(e instanceof M)return"(Just "+(t(e.value0)+")");if(e instanceof P)return"Nothing";throw new Error("Failed pattern match at Data.Maybe (line 223, column 1 - line 225, column 28): "+[e.constructor.name])}}};var Ir=function(r){return function(t){return function(e){if(e instanceof P)return r;if(e instanceof M)return t(e.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[r.constructor.name,t.constructor.name,e.constructor.name])}}},vs=Ir(!0)(Xt(!1));var Fe={map:function(r){return function(t){return t instanceof M?new M(r(t.value0)):P.value}}},iJ=O(Fe);var Da=function(r){return Ir(r)(aJ)},rn=function(){return function(r){if(r instanceof M)return r.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[r.constructor.name])}};var gs=function(r){var t=Rt(r);return{eq:function(e){return function(n){return e instanceof P&&n instanceof P?!0:e instanceof M&&n instanceof M?t(e.value0)(n.value0):!1}}}};var iu={apply:function(r){return function(t){if(r instanceof M)return iJ(r.value0)(t);if(r instanceof P)return P.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[r.constructor.name,t.constructor.name])}},Functor0:function(){return Fe}};var wa={bind:function(r){return function(t){if(r instanceof M)return t(r.value0);if(r instanceof P)return P.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[r.constructor.name,t.constructor.name])}},Apply0:function(){return iu}};var Mp=function(){return{pure:M.create,Apply0:function(){return iu}}}();var G=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Q=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}();var Si={map:function(r){return function(t){if(t instanceof G)return new G(t.value0);if(t instanceof Q)return new Q(r(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},uJ=O(Si);var uu=function(r){return function(t){return function(e){if(e instanceof G)return r(e.value0);if(e instanceof Q)return t(e.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[r.constructor.name,t.constructor.name,e.constructor.name])}}};var _w={apply:function(r){return function(t){if(r instanceof G)return new G(r.value0);if(r instanceof Q)return uJ(r.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[r.constructor.name,t.constructor.name])}},Functor0:function(){return Si}};var Ap=function(){return{pure:Q.create,Apply0:function(){return _w}}}();var So=function(r){return r};var Oo={map:function(r){return function(t){return r(t)}}};var E3={apply:function(r){return function(t){return r(t)}},Functor0:function(){return Oo}},yw={bind:function(r){return function(t){return t(r)}},Apply0:function(){return E3}},Jg={pure:So,Apply0:function(){return E3}},Yt={Applicative0:function(){return Jg},Bind1:function(){return yw}};var F3=function(r){return Math.min(Math.abs(r),2147483647)},M3=function(r){return function(t){return t===0?0:t>0?Math.floor(r/t):-Math.floor(r/-t)}},A3=function(r){return function(t){if(t===0)return 0;var e=Math.abs(t);return(r%e+e)%e}};var I3={Ring0:function(){return jg}};var tl=function(r){return r.mod};var el={degree:F3,div:M3,mod:A3,CommutativeRing0:function(){return I3}},Pp=function(r){return r.div};var rl={mempty:"",Semigroup0:function(){return Qg}};var jo={mempty:[],Semigroup0:function(){return xo}};var ie=function(r){return r.mempty};var N3=function(r){return function(){return r}},k3=function(r){return function(t){return function(){return t(r())()}}};var $3=function(r,t,e){var n=0,o;return function(a){if(n===2)return o;if(n===1)throw new ReferenceError(r+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return n=1,o=e(),n=2,o}},lu={Applicative0:function(){return Cn},Bind1:function(){return Zc}},Zc={bind:k3,Apply0:function(){return U3(0)}},Cn={pure:N3,Apply0:function(){return U3(0)}},L3=$3("functorEffect","Effect",function(){return{map:xp(Cn)}}),U3=$3("applyEffect","Effect",function(){return{apply:ro(lu),Functor0:function(){return L3(0)}}}),me=L3(20);var B3=function(r){return function(){return{value:r}}};var nl=function(r){return function(){return r.value}};var su=function(r){return function(t){return function(){t.value=r}}};var _s=B3;var e_={map:e3};var q3=function(r){return function(t){return r&&t}},Q3=function(r){return function(t){return r||t}},H3=function(r){return!r};var Yc=function(r){return r.not};var Np=function(r){return r.disj},ys={ff:!1,tt:!0,implies:function(r){return function(t){return Np(ys)(Yc(ys)(r))(t)}},conj:q3,disj:Q3,not:H3};var tt=function(){function r(t,e){this.value0=t,this.value1=e}return r.create=function(t){return function(e){return new r(t,e)}},r}();var dn=function(r){return r.value1},Cw=function(r){var t=U(r);return function(e){var n=U(e);return{show:function(o){return"(Tuple "+(t(o.value0)+(" "+(n(o.value1)+")")))}}}};var bs={map:function(r){return function(t){return new tt(t.value0,r(t.value1))}}};var Eo=function(r){return r.value0};var Xo=function(r){return r.state},kp=function(r){var t=Xo(r);return function(e){return t(function(n){return new tt(void 0,e)})}};var $p=function(r){return Xo(r)(function(t){return new tt(t,t)})};var kr=function(r){return r.lift};var j3={liftEffect:qt(Qt),Monad0:function(){return lu}},Rr=function(r){return r.liftEffect};function Ds(r){return new Error(r)}function Jc(r){return r.message}function r_(r){return function(){throw r}}function n_(r){return function(t){return function(){try{return t()}catch(e){return e instanceof Error||Object.prototype.toString.call(e)==="[object Error]"?r(e)():r(new Error(e.toString()))()}}}}var bJ=$(Cn),DJ=O(me),Y3=function(r){return n_(function(t){return bJ(G.create(t))})(DJ(Q.create)(r))},Sw=function(r){return r_(Ds(r))};var Jo=function(r){return r.throwError};var Oi=function(r){return r.catchError};var Up=function(r){var t=Oi(r),e=r.MonadThrow0().Monad0(),n=O(e.Bind1().Apply0().Functor0()),o=$(e.Applicative0());return function(a){return t(n(Q.create)(a))(function(i){return o(G.create(i))})}};var ul=function(r){return r.tell};var wJ=O(Si);var tf=function(r){return r},Ow=function(r){var t=O(r);return function(e){return function(n){var o=function(a){return function(i){if(i instanceof Q)return new Q(i.value0);if(i instanceof G)return new G(a(i.value0));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 43, column 3 - line 43, column 32): "+[a.constructor.name,i.constructor.name])}};return t(o(e))(n)}}},Ew=function(r){return r};var zp=function(r){return function(t){return r(t)}},ll=function(r){var t=O(r);return{map:function(e){return zp(t(wJ(e)))}}},Fw=function(r){var t=$(r);return function(e){return tf(t(e))}},o_=function(r){return{Applicative0:function(){return pn(r)},Bind1:function(){return xa(r)}}},xa=function(r){var t=lt(r.Bind1()),e=$(r.Applicative0());return{bind:function(n){return function(o){return t(n)(uu(function(a){return e(G.create(a))})(function(a){var i=o(a);return i}))}},Apply0:function(){return a_(r)}}},a_=function(r){var t=ll(r.Bind1().Apply0().Functor0());return{apply:ro(o_(r)),Functor0:function(){return t}}},pn=function(r){return{pure:function(){var t=$(r.Applicative0());return function(e){return tf(t(Q.create(e)))}}(),Apply0:function(){return a_(r)}}};var Mw=function(r){var t=o_(r);return{throwError:function(){var e=$(r.Applicative0());return function(n){return tf(e(G.create(n)))}}(),Monad0:function(){return t}}};var Aw=function(r){var t=bt(r);return function(e){var n=e.Bind1(),o=lt(n),a=$(e.Applicative0()),i=ll(n.Apply0().Functor0());return{alt:function(u){return function(l){return o(u)(function(s){if(s instanceof Q)return a(new Q(s.value0));if(s instanceof G)return o(l)(function(c){if(c instanceof Q)return a(new Q(c.value0));if(c instanceof G)return a(new G(t(s.value0)(c.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 87, column 9 - line 89, column 49): "+[c.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 83, column 5 - line 89, column 49): "+[s.constructor.name])})}},Functor0:function(){return i}}}};var oo=function(r){return r.empty};var i_=function(){return j};var TJ=i_();var Mo=function(){return TJ};var J3=function(r){return r};var K3=function(r){return r};var t4={lift:function(r){return function(t){return J3(Xt(t))}}},OJ=kr(t4),e4=function(r){return function(t){return function(e){return r(t(e))}}},r4=function(r){return{map:function(){var t=O(r);return function(e){return e4(t(e))}}()}};var l_=function(r){var t=pe(r),e=r4(r.Functor0());return{apply:function(n){return function(o){return function(a){return t(n(a))(o(a))}}},Functor0:function(){return e}}},Nw=function(r){var t=lt(r),e=l_(r.Apply0());return{bind:function(n){return function(o){return function(a){return t(n(a))(function(i){var u=o(i);return u(a)})}}},Apply0:function(){return e}}};var n4=function(r){var t=l_(r.Apply0());return{pure:function(){var e=$(r);return function(n){return J3(Xt(e(n)))}}(),Apply0:function(){return t}}},s_=function(r){var t=n4(r.Applicative0()),e=Nw(r.Bind1());return{Applicative0:function(){return t},Bind1:function(){return e}}},o4=function(r){var t=s_(r);return{ask:$(r.Applicative0()),Monad0:function(){return t}}};var kw=function(r){var t=r.Monad0(),e=s_(t);return{liftEffect:function(){var n=OJ(t),o=Rr(r);return function(a){return n(o(a))}}(),Monad0:function(){return e}}};var d_=function(r){return r.sequential},ef=function(r){return r.parallel};var c4=function(r){return function(t){return function(e){for(var n=t,o=e.length,a=o-1;a>=0;a--)n=r(e[a])(n);return n}}},f4=function(r){return function(t){return function(e){for(var n=t,o=e.length,a=0;a<o;a++)n=r(n)(e[a]);return n}}};var LJ=qt(Qt),rf=function(r){return r.bimap},xs=function(r){var t=rf(r);return function(e){return t(e)(LJ)}};var pu={bimap:function(r){return function(t){return function(e){if(e instanceof G)return new G(r(e.value0));if(e instanceof Q)return new Q(t(e.value0));throw new Error("Failed pattern match at Data.Bifunctor (line 32, column 1 - line 34, column 36): "+[r.constructor.name,t.constructor.name,e.constructor.name])}}}};var $r=function(r){return r.foldr};var Rs=function(r){var t=Bg(r.Apply0()),e=$(r);return function(n){var o=$r(n);return function(a){return o(function(i){return t(a(i))})(e(void 0))}}},h_=function(r){var t=Rs(r);return function(e){return _e(t(e))}};var ir=function(r){return r.foldl};var Cs=function(r){var t=ir(r);return function(e){var n=bt(e.Semigroup0()),o=ie(e);return function(a){return function(i){var u=function(l){return function(s){return l.init?{init:!1,acc:s}:{init:!1,acc:n(l.acc)(n(a)(s))}}};return t(u)({init:!0,acc:o})(i).acc}}}};var m_={foldr:function(r){return function(t){return function(e){if(e instanceof P)return t;if(e instanceof M)return r(e.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[r.constructor.name,t.constructor.name,e.constructor.name])}}},foldl:function(r){return function(t){return function(e){if(e instanceof P)return t;if(e instanceof M)return r(t)(e.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[r.constructor.name,t.constructor.name,e.constructor.name])}}},foldMap:function(r){var t=ie(r);return function(e){return function(n){if(n instanceof P)return t;if(n instanceof M)return e(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,n.constructor.name])}}}};var h4=function(r){var t=$r(r);return function(e){var n=bt(e.Semigroup0()),o=ie(e);return function(a){return t(function(i){return function(u){return n(a(i))(u)}})(o)}}},ur={foldr:c4,foldl:f4,foldMap:function(r){return h4(ur)(r)}};var Sn=function(r){return r.foldMap};var m4=function(r){var t=ir(r);return function(e){var n=lt(e.Bind1()),o=$(e.Applicative0());return function(a){return function(i){return t(function(u){return function(l){return n(u)(_e(a)(l))}})(o(i))}}}};var M4=function(r){var t=d_(r),e=ef(r);return function(n){var o=Rs(n);return function(a){var i=o(a);return function(u){var l=i(function(s){return e(u(s))});return function(s){return t(l(s))}}}}};var SK=U(Fp);var P4=qt(Qt);var g_={show:function(r){return"(Milliseconds "+(SK(r)+")")}};var __=function(r){return r.fromDuration};var y_=Vg;var b_={fromDuration:P4,toDuration:P4};var ta=void 0;var I4=function(r){return r()};var N4=function(r){throw new Error(r)};var Yp=function(){return N4};var FK=Yp(),MK=I4,Ra=function(r){return MK(function(){return FK(r)})};var ti=function(r){return r.toInt},k4=function(r){var t=ti(r);return function(e){return t(ta)}};var $4={toInt:function(r){return 1}},Zw={Nat0:function(){return $4}};var AK=function(r){return function(t){return ta}},PK=function(r){var t=AK(r);return function(e){var n=ti(e);return function(o){return function(a){return 10*a|0}(n(t(o)))}}};var L4=function(r){var t=r.Nat0();return{toInt:function(e){return PK(L4(r))(t)(e)+6|0}}},U4=function(r){var t=L4(r);return{Nat0:function(){return t}}};var On=function(){var r={},t="Pure",e="Throw",n="Catch",o="Sync",a="Async",i="Bind",u="Bracket",l="Fork",s="Sequential",c="Map",f="Apply",d="Alt",p="Cons",h="Resume",m="Release",_="Finalizer",y="Finalized",D="Forked",w="Fiber",T="Thunk";function R(V,Gt,ve,ee){this.tag=V,this._1=Gt,this._2=ve,this._3=ee}function C(V){var Gt=function(ve,ee,wt){return new R(V,ve,ee,wt)};return Gt.tag=V,Gt}function S(V){return new R(t,void 0)}function A(V){try{V()}catch(Gt){setTimeout(function(){throw Gt},0)}}function E(V,Gt,ve){try{return Gt(ve())}catch(ee){return V(ee)}}function N(V,Gt,ve){try{return Gt(ve)()}catch(ee){return ve(V(ee))(),S}}var et=function(){var V=1024,Gt=0,ve=0,ee=new Array(V),wt=!1;function rt(){var ge;for(wt=!0;Gt!==0;)Gt--,ge=ee[ve],ee[ve]=void 0,ve=(ve+1)%V,ge();wt=!1}return{isDraining:function(){return wt},enqueue:function(ge){var re,Ke;Gt===V&&(Ke=wt,rt(),wt=Ke),ee[(ve+Gt)%V]=ge,Gt++,wt||rt()}}}();function X(V){var Gt={},ve=0,ee=0;return{register:function(wt){var rt=ve++;wt.onComplete({rethrow:!0,handler:function(ge){return function(){ee--,delete Gt[rt]}}})(),Gt[rt]=wt,ee++},isEmpty:function(){return ee===0},killAll:function(wt,rt){return function(){if(ee===0)return rt();var ge=0,re={};function Ke(Se){re[Se]=Gt[Se].kill(wt,function(or){return function(){delete re[Se],ge--,V.isLeft(or)&&V.fromLeft(or)&&setTimeout(function(){throw V.fromLeft(or)},0),ge===0&&rt()}})()}for(var _r in Gt)Gt.hasOwnProperty(_r)&&(ge++,Ke(_r));return Gt={},ve=0,ee=0,function(Se){return new R(o,function(){for(var or in re)re.hasOwnProperty(or)&&re[or]()})}}}}}var Z=0,z=1,Dt=2,kt=3,Et=4,Ge=5,st=6;function Tt(V,Gt,ve){var ee=0,wt=Z,rt=ve,ge=null,re=null,Ke=null,_r=null,Se=null,or=0,eo=0,Gr=null,Ln=!0;function Un(At){for(var $t,De,Te;;)switch($t=null,De=null,Te=null,wt){case Dt:wt=z;try{rt=Ke(rt),_r===null?Ke=null:(Ke=_r._1,_r=_r._2)}catch(xn){wt=Ge,ge=V.left(xn),rt=null}break;case kt:V.isLeft(rt)?(wt=Ge,ge=rt,rt=null):Ke===null?wt=Ge:(wt=Dt,rt=V.fromRight(rt));break;case z:switch(rt.tag){case i:Ke&&(_r=new R(p,Ke,_r)),Ke=rt._2,wt=z,rt=rt._1;break;case t:Ke===null?(wt=Ge,rt=V.right(rt._1)):(wt=Dt,rt=rt._1);break;case o:wt=kt,rt=E(V.left,V.right,rt._1);break;case a:wt=Et,rt=N(V.left,rt._1,function(xn){return function(){ee===At&&(ee++,et.enqueue(function(){ee===At+1&&(wt=kt,rt=xn,Un(ee))}))}});return;case e:wt=Ge,ge=V.left(rt._1),rt=null;break;case n:Ke===null?Se=new R(p,rt,Se,re):Se=new R(p,rt,new R(p,new R(h,Ke,_r),Se,re),re),Ke=null,_r=null,wt=z,rt=rt._1;break;case u:or++,Ke===null?Se=new R(p,rt,Se,re):Se=new R(p,rt,new R(p,new R(h,Ke,_r),Se,re),re),Ke=null,_r=null,wt=z,rt=rt._1;break;case l:wt=kt,$t=Tt(V,Gt,rt._2),Gt&&Gt.register($t),rt._1&&$t.run(),rt=V.right($t);break;case s:wt=z,rt=St(V,Gt,rt._1);break}break;case Ge:if(Ke=null,_r=null,Se===null)wt=st,rt=re||ge||rt;else switch($t=Se._3,Te=Se._1,Se=Se._2,Te.tag){case n:re&&re!==$t&&or===0?wt=Ge:ge&&(wt=z,rt=Te._2(V.fromLeft(ge)),ge=null);break;case h:re&&re!==$t&&or===0||ge?wt=Ge:(Ke=Te._1,_r=Te._2,wt=Dt,rt=V.fromRight(rt));break;case u:or--,ge===null&&(De=V.fromRight(rt),Se=new R(p,new R(m,Te._2,De),Se,$t),(re===$t||or>0)&&(wt=z,rt=Te._3(De)));break;case m:Se=new R(p,new R(y,rt,ge),Se,re),wt=z,re&&re!==$t&&or===0?rt=Te._1.killed(V.fromLeft(re))(Te._2):ge?rt=Te._1.failed(V.fromLeft(ge))(Te._2):rt=Te._1.completed(V.fromRight(rt))(Te._2),ge=null,or++;break;case _:or++,Se=new R(p,new R(y,rt,ge),Se,re),wt=z,rt=Te._1;break;case y:or--,wt=Ge,rt=Te._1,ge=Te._2;break}break;case st:for(var yr in Gr)Gr.hasOwnProperty(yr)&&(Ln=Ln&&Gr[yr].rethrow,A(Gr[yr].handler(rt)));Gr=null,re&&ge?setTimeout(function(){throw V.fromLeft(ge)},0):V.isLeft(rt)&&Ln&&setTimeout(function(){if(Ln)throw V.fromLeft(rt)},0);return;case Z:wt=z;break;case Et:return}}function cr(At){return function(){if(wt===st)return Ln=Ln&&At.rethrow,At.handler(rt)(),function(){};var $t=eo++;return Gr=Gr||{},Gr[$t]=At,function(){Gr!==null&&delete Gr[$t]}}}function Nt(At,$t){return function(){if(wt===st)return $t(V.right(void 0))(),function(){};var De=cr({rethrow:!1,handler:function(){return $t(V.right(void 0))}})();switch(wt){case Z:re=V.left(At),wt=st,rt=re,Un(ee);break;case Et:re===null&&(re=V.left(At)),or===0&&(wt===Et&&(Se=new R(p,new R(_,rt(At)),Se,re)),wt=Ge,rt=null,ge=null,Un(++ee));break;default:re===null&&(re=V.left(At)),or===0&&(wt=Ge,rt=null,ge=null)}return De}}function ue(At){return function(){var $t=cr({rethrow:!1,handler:At})();return wt===Z&&Un(ee),$t}}return{kill:Nt,join:ue,onComplete:cr,isSuspended:function(){return wt===Z},run:function(){wt===Z&&(et.isDraining()?Un(ee):et.enqueue(function(){Un(ee)}))}}}function $n(V,Gt,ve,ee){var wt=0,rt={},ge=0,re={},Ke=new Error("[ParAff] Early exit"),_r=null,Se=r;function or(cr,Nt,ue){var At=Nt,$t=null,De=null,Te=0,yr={},xn,yp;t:for(;;)switch(xn=null,At.tag){case D:if(At._3===r&&(xn=rt[At._1],yr[Te++]=xn.kill(cr,function(RX){return function(){Te--,Te===0&&ue(RX)()}})),$t===null)break t;At=$t._2,De===null?$t=null:($t=De._1,De=De._2);break;case c:At=At._2;break;case f:case d:$t&&(De=new R(p,$t,De)),$t=At,At=At._1;break}if(Te===0)ue(V.right(void 0))();else for(yp=0,xn=Te;yp<xn;yp++)yr[yp]=yr[yp]();return yr}function eo(cr,Nt,ue){var At,$t,De,Te,yr,xn;for(V.isLeft(cr)?(At=cr,$t=null):($t=cr,At=null);;){if(De=null,Te=null,yr=null,xn=null,_r!==null)return;if(Nt===null){ee(At||$t)();return}if(Nt._3!==r)return;switch(Nt.tag){case c:At===null?(Nt._3=V.right(Nt._1(V.fromRight($t))),$t=Nt._3):Nt._3=At;break;case f:if(De=Nt._1._3,Te=Nt._2._3,At){if(Nt._3=At,yr=!0,xn=ge++,re[xn]=or(Ke,At===De?Nt._2:Nt._1,function(){return function(){delete re[xn],yr?yr=!1:ue===null?eo(At,null,null):eo(At,ue._1,ue._2)}}),yr){yr=!1;return}}else{if(De===r||Te===r)return;$t=V.right(V.fromRight(De)(V.fromRight(Te))),Nt._3=$t}break;case d:if(De=Nt._1._3,Te=Nt._2._3,De===r&&V.isLeft(Te)||Te===r&&V.isLeft(De))return;if(De!==r&&V.isLeft(De)&&Te!==r&&V.isLeft(Te))At=$t===De?Te:De,$t=null,Nt._3=At;else if(Nt._3=$t,yr=!0,xn=ge++,re[xn]=or(Ke,$t===De?Nt._2:Nt._1,function(){return function(){delete re[xn],yr?yr=!1:ue===null?eo($t,null,null):eo($t,ue._1,ue._2)}}),yr){yr=!1;return}break}ue===null?Nt=null:(Nt=ue._1,ue=ue._2)}}function Gr(cr){return function(Nt){return function(){delete rt[cr._1],cr._3=Nt,eo(Nt,cr._2._1,cr._2._2)}}}function Ln(){var cr=z,Nt=ve,ue=null,At=null,$t,De;t:for(;;)switch($t=null,De=null,cr){case z:switch(Nt.tag){case c:ue&&(At=new R(p,ue,At)),ue=new R(c,Nt._1,r,r),Nt=Nt._2;break;case f:ue&&(At=new R(p,ue,At)),ue=new R(f,r,Nt._2,r),Nt=Nt._1;break;case d:ue&&(At=new R(p,ue,At)),ue=new R(d,r,Nt._2,r),Nt=Nt._1;break;default:De=wt++,cr=Ge,$t=Nt,Nt=new R(D,De,new R(p,ue,At),r),$t=Tt(V,Gt,$t),$t.onComplete({rethrow:!1,handler:Gr(Nt)})(),rt[De]=$t,Gt&&Gt.register($t)}break;case Ge:if(ue===null)break t;ue._1===r?(ue._1=Nt,cr=z,Nt=ue._2,ue._2=r):(ue._2=Nt,Nt=ue,At===null?ue=null:(ue=At._1,At=At._2))}for(Se=Nt,De=0;De<wt;De++)rt[De].run()}function Un(cr,Nt){_r=V.left(cr);var ue;for(var At in re)if(re.hasOwnProperty(At)){ue=re[At];for(At in ue)ue.hasOwnProperty(At)&&ue[At]()}re=null;var $t=or(cr,Se,Nt);return function(De){return new R(a,function(Te){return function(){for(var yr in $t)$t.hasOwnProperty(yr)&&$t[yr]();return S}})}}return Ln(),function(cr){return new R(a,function(Nt){return function(){return Un(cr,Nt)}})}}function St(V,Gt,ve){return new R(a,function(ee){return function(){return $n(V,Gt,ve,ee)}})}return R.EMPTY=r,R.Pure=C(t),R.Throw=C(e),R.Catch=C(n),R.Sync=C(o),R.Async=C(a),R.Bind=C(i),R.Bracket=C(u),R.Fork=C(l),R.Seq=C(s),R.ParMap=C(c),R.ParApply=C(f),R.ParAlt=C(d),R.Fiber=Tt,R.Supervisor=X,R.Scheduler=et,R.nonCanceler=S,R}(),B4=On.Pure,W4=On.Throw;function G4(r){return function(t){return On.Catch(r,t)}}function z4(r){return function(t){return t.tag===On.Pure.tag?On.Pure(r(t._1)):On.Bind(t,function(e){return On.Pure(r(e))})}}function q4(r){return function(t){return On.Bind(r,t)}}function Q4(r){return function(t){return On.Fork(r,t)}}var H4=On.Sync;function V4(r){return function(t){return On.ParMap(r,t)}}function j4(r){return function(t){return On.ParApply(r,t)}}var Yw=On.Async;function Z4(r,t){return function(){return On.Fiber(r,null,t)}}var Y4=function(){function r(e,n){return e===0&&typeof setImmediate<"u"?setImmediate(n):setTimeout(n,e)}function t(e,n){return e===0&&typeof clearImmediate<"u"?clearImmediate(n):clearTimeout(n)}return function(e,n){return On.Async(function(o){return function(){var a=r(n,o(e()));return function(){return On.Sync(function(){return e(t(n,a))})}}})}}(),X4=On.Seq;var D_=function(r){return r()};var $K=function(r,t,e){var n=0,o;return function(a){if(n===2)return o;if(n===1)throw new ReferenceError(r+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return n=1,o=e(),n=2,o}},LK=$(Cn),K4=zr(me),UK=O(me);var BK=function(r){return r};var WK={map:V4},tA={map:z4};var eA=Q4(!0),GK=function(){var r=function(n){if(n instanceof Q)return n.value0;if(n instanceof G)return Ra("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[n.constructor.name])},t=function(n){if(n instanceof G)return n.value0;if(n instanceof Q)return Ra("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[n.constructor.name])},e=function(n){if(n instanceof G)return!0;if(n instanceof Q)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[n.constructor.name])};return{isLeft:e,fromLeft:t,fromRight:r,left:G.create,right:Q.create}}(),zK=function(r){return Z4(GK,r)},qK=function(r){return function(){var e=zK(r)();return e.run(),e}};var rA=function(r){return Y4(Q.create,r)};var nA={apply:j4,Functor0:function(){return WK}};var x_={Applicative0:function(){return nf},Bind1:function(){return sl}},sl={bind:q4,Apply0:function(){return Xw(0)}},nf={pure:B4,Apply0:function(){return Xw(0)}},Xw=$K("applyAff","Effect.Aff",function(){return{apply:ro(x_),Functor0:function(){return tA}}}),oA=Xw(73),QK=$(nf),HK=lt(sl);var VK=Tn(sl);var Jw={parallel:j,sequential:X4,Apply0:function(){return oA},Apply1:function(){return nA}},jK=ef(Jw),aA={pure:function(r){return jK(QK(r))},Apply0:function(){return nA}};var ei={liftEffect:H4,Monad0:function(){return x_}},w_=Rr(ei),ZK=function(r){return BK(Xt(w_(r)))};var iA=function(r){return function(t){return HK(w_(t.isSuspended))(function(e){return e?w_(K4(t.kill(r,Xt(LK(void 0))))):Yw(function(n){return UK(ZK)(t.kill(r,n))})})}};var YK={throwError:W4,Monad0:function(){return x_}},Kw={catchError:G4,MonadThrow0:function(){return YK}},XK=Up(Kw);var JK=function(r){return function(t){return qK(VK(function(e){return w_(r(e))})(XK(t)))}},uA=function(r){return function(t){return K4(JK(r)(t))}};var Jp=function(r){return function(){console.log(r)}};var T_=function(r){return function(){console.error(r)}};var R_=function(r){return function(){console.debug(r)}};var pA=function(r){var t=Rr(r);return function(e){return t(T_(e))}};var hA=function(r){var t=Rr(r);return function(e){return t(R_(e))}};function vu(){return Date.now()}function cl(r){return r.charCodeAt(0)}function mA(r){return String.fromCharCode(r)}var gA=function(r){return function(t){return function(e){return function(n){return function(o){return function(a){for(var i=[],u=a;;){var l=o(u);if(r(l))return i;var s=t(l);i.push(e(s)),u=n(s)}}}}}}};var _A=function(r){return function(t){return function(e){return function(n){return function(o){return function(a){for(var i=[],u=a;;){var l=o(u);i.push(e(l));var s=n(l);if(r(s))return i;u=t(s)}}}}}}};var _tt=rn();var tx={unfoldr1:_A(vs)(_tt)(Eo)(dn)};var btt=rn(),ri=function(r){return r.unfoldr};var Ca={unfoldr:gA(vs)(btt)(Eo)(dn),Unfoldable10:function(){return tx}};var wA=en(Xu),xA=tn(Xu);var ea=function(r){return r.toEnum};var io=function(r){return r.fromEnum},nx=function(r){var t=ea(r),e=io(r),n=en(r.Bounded0());return function(o){return function(a){return function(i){var u=t(i);if(u instanceof M)return u.value0;if(u instanceof P){var l=i<e(n);return l?o:a}throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): "+[u.constructor.name])}}}};var Kp=function(r){return function(t){return function(e){return r(t(e)+1|0)}}},th=function(r){return function(t){return function(e){return r(t(e)-1|0)}}};var ex=function(r){return r>=cl(wA)&&r<=cl(xA)?new M(mA(r)):P.value},Rtt={succ:Kp(ex)(cl),pred:th(ex)(cl),Ord0:function(){return Zg}};var eh=function(){return{cardinality:cl(xA)-cl(wA)|0,toEnum:ex,fromEnum:cl,Bounded0:function(){return Xu},Enum1:function(){return Rtt}}}();var TA=function(r){return function(t){return function(e){return(e|0)===e?r(e):t}}},pr=function(r){return r};var E_=isFinite;var F_=Math.floor;var rh=function(r){return function(t){return r%t}};var CA=tn(hs),SA=en(hs);var fl=function(){return TA(M.create)(P.value)}(),Mtt=function(r){if(!E_(r))return 0;if(r>=pr(CA))return CA;if(r<=pr(SA))return SA;if(Re)return Da(0)(fl(r));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[r.constructor.name])};var uf=function(r){return Mtt(F_(r))};var Ytt=U(g_);var ZA={show:function(r){return"(Instant "+(Ytt(r)+")")}};var YA=y_;function XA(r){return document.querySelector(r)}function JA(r,t){window.addEventListener(r,function(e){t(e)()})}function KA(r,t){document.addEventListener(r,function(e){t(e)()})}function t8(r,t){document.addEventListener(r,function(e){t(e.detail)()})}function e8(r,t){document.dispatchEvent(new CustomEvent(r,{detail:t}))}function r8(r,t,e){return r==null?t:e(r)}var Dr=function(r){return r8(r,P.value,M.create)};var Fi=function(t){return function(e){return function(){return t(e)}}},Mi=function(t){return function(e){return function(n){return function(){return t(e,n)}}}};var oh=function(t){return function(e){return function(n){return function(o){return function(a){return function(){return t(e,n,o,a)}}}}}};var vx=function(r){return function(){var e=XA(r);return Dr(e)}},n8=Mi(e8),o8=Mi(JA),a8=Mi(KA),gx=Mi(t8);var i8=function(r){return function(t){return function(e){return function(n){try{return t(new RegExp(e,n))}catch(o){return r(o.message)}}}}};var _x=function(r){return function(t){var e=r.lastIndex,n=r.test(t);return r.lastIndex=e,n}},u8=function(r){return function(t){return function(e){return function(n){var o=n.match(e);if(o==null||o.length===0)return t;for(var a=0;a<o.length;a++)o[a]=o[a]==null?t:r(o[a]);return r(o)}}}};var l8=function(r){return function(t){return function(e){return function(n){return function(o){return o.replace(e,function(a){for(var i=[],u,l=1;typeof(u=arguments[l++])!="number";)i.push(u==null?t:r(u));return n(a)(i)})}}}}};var ah=function(r){return r};var lf=function(r){return r.length};var sf=function(r){return function(t){return t.substring(r)}};var gu=function(r){return function(t){if(r>=0&&r<t.length)return t.charAt(r);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var N_=function(r){return function(t){return t.split(r)}},cf=function(r){return r.toLowerCase()},ih=function(r){return r.toUpperCase()};var ra=function(r){return function(t){return t.join(r)}};var p8=function(r){return r===""};var uh={global:!0,ignoreCase:!1,multiline:!1,dotAll:!1,sticky:!1,unicode:!1};var m8=function(){return l8(M.create)(P.value)}(),Aet=function(r){return function(){return r.global?"g":""}()+(function(){return r.ignoreCase?"i":""}()+(function(){return r.multiline?"m":""}()+(function(){return r.dotAll?"s":""}()+(function(){return r.sticky?"y":""}()+function(){return r.unicode?"u":""}()))))},$_=function(r){return function(t){return i8(G.create)(Q.create)(r)(Aet(t))}};var Dx=function(){return u8(M.create)(P.value)}();var Pet=qt(Qt),wx=function(r){return function(t){return uu(Ra)(Pet)($_(r)(t))}};var Iet=1,Net=2,ket=3;function xx(r){return function(t){return[ket,r,t]}}function g8(r){return[Net,r]}function _8(r){return[Iet,r]}var y8=function(r,t){for(var e=r>t?-1:1,n=new Array(e*(t-r)+1),o=r,a=0;o!==t;)n[a++]=o,o+=e;return n[a]=o,n},Let=function(r,t){if(r<1)return[];var e=new Array(r);return e.fill(t)},Uet=function(r,t){for(var e=[],n=0,o=0;o<r;o++)e[n++]=t;return e},Bet=typeof Array.prototype.fill=="function"?Let:Uet,b8=function(){function r(o,a){this.head=o,this.tail=a}var t={};function e(o){return function(a){return new r(o,a)}}function n(o){for(var a=[],i=0,u=o;u!==t;)a[i++]=u.head,u=u.tail;return a}return function(o,a){return n(o(e)(t)(a))}}(),En=function(r){return r.length};var D8=function(r,t){return t.filter(r)};var w8=function(r,t){return r[t]};var dl=function(r){return function(t){return function(e){return r(t,e)}}};var U_=function(r){return function(t){return function(e){return function(n){return function(o){return r(t,e,n,o)}}}}};var R8=function(r){return function(t){for(var e=t.length,n=Array(e),o=0;o<e;o++)n[o]=r(o)(t[o]);return n}};var Fs=function(r){return r.mapWithIndex};var Ms={mapWithIndex:R8,Functor0:function(){return ze}};var ff=function(){return dl(w8)},nrt=ff();var W_=function(r){var t=ri(r);return function(e){var n=En(e),o=function(a){if(a<n)return new M(new tt(nrt(e)(a),a+1|0));if(Re)return P.value;throw new Error("Failed pattern match at Data.Array (line 163, column 3 - line 165, column 26): "+[a.constructor.name])};return t(o)(0)}};var df=function(r){return[r]};var Rx=dl(y8);var Cx=function(r){return En(r)===0};var pf=function(r){return dl(b8)($r(r))};var F8=ir(ur);var Sx=dl(D8);var Ox=_e(lt(Qc)),M8=function(r){return Ox(function(){var t=Ir([])(df);return function(e){return t(r(e))}}())};var G_=M8(qt(Qt));var ort=typeof Array.from=="function",art=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",A8=typeof String.prototype.fromCodePoint=="function",irt=typeof String.prototype.codePointAt=="function",P8=function(r){return irt?function(t){return t.codePointAt(0)}:r};var I8=function(r){return A8?function(t){return t.length<1e4?String.fromCodePoint.apply(String,t):t.map(r).join("")}:function(t){return t.map(r).join("")}},N8=function(r){return A8?String.fromCodePoint:r},k8=function(r){return function(t){return art?function(e){for(var n="",o=e[Symbol.iterator](),a=0;a<t;++a){var i=o.next();if(i.done)return n;n+=i.value}return n}:r(t)}},$8=function(r){return function(t){return ort?function(e){return Array.from(e,t)}:r}};var sh=io(eh),hrt=O(Fe),mrt=ri(Ca),vrt=Pp(el),grt=tl(el);var L8=function(r){return function(t){return(((r-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var U8=function(r){return 56320<=r&&r<=57343},B8=function(r){return 55296<=r&&r<=56319},ch=function(r){var t=lf(r);if(t===0)return P.value;if(t===1)return new M({head:sh(gu(0)(r)),tail:""});var e=sh(gu(1)(r)),n=sh(gu(0)(r)),o=B8(n)&&U8(e);return o?new M({head:L8(n)(e),tail:sf(2)(r)}):new M({head:n,tail:sf(1)(r)})},_rt=function(r){return hrt(function(t){return new tt(t.head,t.tail)})(ch(r))},yrt=function(r){return mrt(_rt)(r)},brt=function(r){var t=sh(gu(0)(r)),e=B8(t)&&lf(r)>1;if(e){var n=sh(gu(1)(r)),o=U8(n);return o?L8(t)(n):t}return t},Drt=P8(brt),Fx=$8(yrt)(Drt),W8=function(r){return En(Fx(r))};var Ex=function(){var r=nx(eh)(en(Xu))(tn(Xu));return function(t){return ah(r(t))}}(),G8=function(r){if(r<=65535)return Ex(r);var t=vrt(r-65536|0)(1024)+55296|0,e=grt(r-65536|0)(1024)+56320|0;return Ex(t)+Ex(e)},Mx=I8(G8),z_=N8(G8),z8=function(r){return function(t){if(r<1)return"";var e=ch(t);return e instanceof M?z_(e.value0.head)+z8(r-1|0)(e.value0.tail):t}},q8=k8(z8);function Q8(r){return function(){var t={};for(var e in r)hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t}}var Ps={};function q_(r){return r()}function H8(r,t){var e={};for(var n in r)hasOwnProperty.call(r,n)&&(e[n]=t(n)(r[n]));return e}function V8(r,t,e,n){return e in n?t(n[e]):r}function Q_(r){return function(t){var e=[];for(var n in t)hasOwnProperty.call(t,n)&&e.push(r(n)(t[n]));return e}}var j8=Object.keys||Q_(function(r){return function(){return r}});var Is=function(r){return r.foldlWithIndex};var Z8=function(r){var t=Is(r);return function(e){var n=lt(e.Bind1()),o=$(e.Applicative0());return function(a){return function(i){return t(function(u){return function(l){return function(s){return n(l)(_e(a(u))(s))}}})(o(i))}}}};var Ax=function(){return{}};function H_(r){return function(t){return function(e){return function(){return e[r]=t,e}}}}var Ert=zr(e_);var V_=function(r){var t=W_(r),e=Q_(tt.create);return function(n){return t(e(n))}};var Frt=Q8;var Mrt=function(r){return function(t){return q_(function(){var n=Frt(t)();return r(n)(),n})}};var K8=function(r){return function(t){return H8(t,r)}},mf=function(){return U_(V8)(P.value)(M.create)}();var fh=function(r){return function(t){return Mrt(H_(r)(t))}};var t7=function(){return j};var dh=function(r){var t=pf(r);return function(e){return q_(function(){var o=Ax();return zg(t(e))(function(a){return Ert(H_(a.value0)(a.value1)(o))})(),o})}};var Art=t7();var Prt=rn(),Irt=Yp(),Nrt=U(Qr),n7=O(ze),krt=V_(Ca),$rt=dh(ur);var o7={to:function(){var r=Sx(function(){var e=Yc(ys);return function(n){return e(p8(n))}}()),t=N_(" ");return function(e){return r(t(e))}}()};var Lrt=function(r){return r.toStyleList},Urt=function(r){return r.to};var Ix=function(r){var t=Lrt(r);return function(e){return _8(t(e))}};var Nx=xx("id");var a7=function(r){if(r===ih(r))return cf(r);if(Re){var t=Prt(ch(r)),e=function(a){return Xt(function(i){return"-"+i}(cf(a)))},n=function(){var a=$_("[A-Z]")(uh);if(a instanceof Q)return a.value0;if(a instanceof G)return Irt(Nrt(a.value0));throw new Error("Failed pattern match at Flame.Html.Attribute.Internal (line 90, column 40 - line 92, column 57): "+[a.constructor.name])}(),o=m8(n)(e)(t.tail);return cf(z_(t.head))+o}throw new Error("Failed pattern match at Flame.Html.Attribute.Internal (line 83, column 1 - line 83, column 26): "+[r.constructor.name])},i7=function(r){var t=n7(a7),e=Urt(r);return function(n){return g8(t(e(n)))}},kx=function(){return{toStyleList:function(){var r=function(n){return krt(Art(n))},t=function(n){return new tt(a7(n.value0),n.value1)},e=n7(t);return function(n){return $rt(e(r(n)))}}()}};var $x=1,Lx=2;var u7=6,Brt=1,Wrt=2,Grt=3,zrt=4,qrt=7;function Ux(r){return function(t){return function(e){let n=e,o;return e.length===1&&e[0].nodeType==$x&&(n=void 0,o=e[0].text),{nodeType:Lx,node:void 0,tag:r,nodeData:qx(t),children:n,text:o}}}}function Bx(r){return function(t){let e=t,n;return t.length===1&&t[0].nodeType==$x&&(e=void 0,n=t[0].text),{nodeType:Lx,node:void 0,tag:r,nodeData:{},children:e,text:n}}}function Wx(r){return function(t){return{nodeType:Lx,node:void 0,tag:r,nodeData:qx(t)}}}function yu(r){return{nodeType:$x,node:void 0,text:r}}function Gx(r){return function(t){return function(e){return{nodeType:u7,node:void 0,nodeData:qx(t),createNode:r.createNode,updateNode:r.updateNode,arg:e}}}}function zx(r){return function(t){return{nodeType:u7,node:void 0,nodeData:{},createNode:r.createNode,updateNode:r.updateNode,arg:t}}}function qx(r){let t={};if(r!==void 0)for(let e of r){let n=e[1];switch(e[0]){case Brt:t.styles===void 0&&(t.styles={});for(let o in n)t.styles[o]=n[o];break;case Wrt:t.classes===void 0&&(t.classes=[]),t.classes=t.classes.concat(n);break;case Grt:t.properties===void 0&&(t.properties={}),t.properties[n]=e[2];break;case zrt:t.attributes===void 0&&(t.attributes={}),t.attributes[n]=e[2];break;case qrt:t.key=n;break;default:t.events===void 0&&(t.events={}),t.events[n]===void 0&&(t.events[n]=[]),t.events[n].push(e[2])}}return t}var l7={toNode:function(r){return df(Nx(r))}};var ph={toNode:df},s7={toNode:df},vf=function(r){return r.toNode},gf=function(r){return{toNode:Ox(vf(r))}};var c7=function(r){return function(t){return zx(r)(t)}},f7=function(r){var t=vf(r);return function(e){return function(n){return function(o){return Gx(e)(t(n))(o)}}}};var Krt=function(r){return function(t){var e=vf(t);return function(n){return Bx(r)(e(n))}}};var d7=function(r){return Krt("section")(r)};var tnt=function(r){return function(t){var e=vf(t);return function(n){return Wx(r)(e(n))}}};var p7=function(r){return tnt("div")(r)};var Z_=function(r){return function(t){var e=vf(t);return function(n){var o=vf(n);return function(a){return function(i){return Ux(r)(e(a))(o(i))}}}}};var h7=function(r){return function(t){return Z_("div")(r)(t)}};var m7=function(r){return function(t){return Z_("main")(r)(t)}};var v7=function(r){return function(t){return Z_("button")(r)(t)}};var ent=/[&<>"']/g,nFt=RegExp(ent.source);var ai=function(){function r(t,e){this.value0=t,this.value1=e}return r.create=function(t){return function(e){return new r(t,e)}},r}();var Y_=function(r){var t=oo(r);return function(e){return new ai(e,t)}},y7=function(r){var t=U(r);return function(e){var n=U(e);return{show:function(o){return"(NonEmpty "+(t(o.value0)+(" "+(n(o.value1)+")")))}}}};var b7=function(r){var t=O(r);return{map:function(e){return function(n){return new ai(e(n.value0),t(e)(n.value1))}}}};var D7=function(r){var t=Sn(r),e=ir(r),n=$r(r);return{foldMap:function(o){var a=bt(o.Semigroup0()),i=t(o);return function(u){return function(l){return a(u(l.value0))(i(u)(l.value1))}}},foldl:function(o){return function(a){return function(i){return e(o)(o(a)(i.value0))(i.value1)}}},foldr:function(o){return function(a){return function(i){return o(i.value0)(n(o)(a)(i.value1))}}}}};var w7=function(r){var t=Ri(r);return function(e){var n=Rt(e),o=t(e);return{eq:function(a){return function(i){return n(a.value0)(i.value0)&&o(a.value1)(i.value1)}}}}};var gh=function(r){return r};var Rnt=function(r){return function(t){return r(gh(t))}};var Zx=Rnt(G_);var $e=function(){function r(){}return r.value=new r,r}(),fe=function(){function r(t,e){this.value0=t,this.value1=e}return r.create=function(t){return function(e){return new r(t,e)}},r}(),_h=function(r){return r},Ont=function(r){return new fe(r.value0,r.value1)};var Ent=function(r){var t=function(e){return function(n){var o=e,a=!1,i;function u(l,s){if(s instanceof fe&&s.value1 instanceof fe&&s.value1.value1 instanceof fe){o=new fe(s,l),n=s.value1.value1.value1;return}var c=function(d){return d instanceof fe&&d.value1 instanceof fe&&d.value1.value1 instanceof $e?new fe(r(d.value0),new fe(r(d.value1.value0),$e.value)):d instanceof fe&&d.value1 instanceof $e?new fe(r(d.value0),$e.value):$e.value},f=function(d){return function(p){var h=d,m=!1,_;function y(D,w){if(D instanceof fe&&D.value0 instanceof fe&&D.value0.value1 instanceof fe&&D.value0.value1.value1 instanceof fe){h=D.value1,p=new fe(r(D.value0.value0),new fe(r(D.value0.value1.value0),new fe(r(D.value0.value1.value1.value0),w)));return}return m=!0,w}for(;!m;)_=y(h,p);return _}};return a=!0,f(l)(c(s))}for(;!a;)i=u(o,n);return i}};return t($e.value)},_f={map:Ent},E7=O(_f),ml=b7(_f),Sa={foldr:function(r){return function(t){var e=function(){var o=function(a){return function(i){var u=a,l=!1,s;function c(f,d){if(d instanceof $e)return l=!0,f;if(d instanceof fe){u=new fe(d.value0,f),i=d.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[f.constructor.name,d.constructor.name])}for(;!l;)s=c(u,i);return s}};return o($e.value)}(),n=ir(Sa)(_e(r))(t);return function(o){return n(e(o))}}},foldl:function(r){var t=function(e){return function(n){var o=e,a=!1,i;function u(l,s){if(s instanceof $e)return a=!0,l;if(s instanceof fe){o=r(l)(s.value0),n=s.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[s.constructor.name])}for(;!a;)i=u(o,n);return i}};return t},foldMap:function(r){var t=bt(r.Semigroup0()),e=ie(r);return function(n){return ir(Sa)(function(o){var a=t(o);return function(i){return a(n(i))}})(e)}}};var Fnt=$r(Sa),Mnt=Cs(Sa)(rl),F7=D7(Sa);var Yx={append:function(r){return function(t){return Fnt(fe.create)(t)(r)}}},X_=bt(Yx);var J_={append:function(r){return function(t){return new ai(r.value0,X_(r.value1)(Ont(t)))}}},yh=function(r){var t=U(r);return{show:function(e){return e instanceof $e?"Nil":"("+(Mnt(" : ")(E7(t)(e))+" : Nil)")}}},M7=function(r){var t=U(y7(r)(yh(r)));return{show:function(e){return"(NonEmptyList "+(t(e)+")")}}};var A7={eq1:function(r){var t=Rt(r);return function(e){return function(n){var o=function(a){return function(i){return function(u){var l=a,s=i,c=!1,f;function d(p,h,m){if(!m)return c=!0,!1;if(p instanceof $e&&h instanceof $e)return c=!0,m;if(p instanceof fe&&h instanceof fe){l=p.value1,s=h.value1,u=m&&t(h.value0)(p.value0);return}return c=!0,!1}for(;!c;)f=d(l,s,u);return f}}};return o(e)(n)(!0)}}}},Ant=Ri(A7),Pnt=w7(A7);var Xx=function(r){return{eq:Ant(r)}},P7=function(r){return Pnt(r)};var I7={apply:function(r){return function(t){if(r instanceof $e)return $e.value;if(r instanceof fe)return X_(E7(r.value0)(t))(pe(I7)(r.value1)(t));throw new Error("Failed pattern match at Data.List.Types (line 157, column 1 - line 159, column 48): "+[r.constructor.name,t.constructor.name])}},Functor0:function(){return _f}},O7=pe(I7),Int={apply:function(r){return function(t){return new ai(r.value0(t.value0),X_(O7(r.value1)(new fe(t.value0,$e.value)))(O7(new fe(r.value0,r.value1))(t.value1)))}},Functor0:function(){return ml}};var Nnt={alt:X_,Functor0:function(){return _f}},Jx=function(){return{empty:$e.value,Alt0:function(){return Nnt}}}();var N7={pure:function(){var r=Y_(Jx);return function(t){return _h(r(t))}}(),Apply0:function(){return Int}};var K_=function(r){return $r(r)(fe.create)($e.value)};var yf=function(){var r=Y_(Jx);return function(t){return _h(r(t))}}();var Ls=function(r,t,e){var n=0,o;return function(a){if(n===2)return o;if(n===1)throw new ReferenceError(r+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return n=1,o=e(),n=2,o}};var Ue=function(){function r(){}return r.value=new r,r}(),Le=function(){function r(t,e,n,o,a,i){this.value0=t,this.value1=e,this.value2=n,this.value3=o,this.value4=a,this.value5=i}return r.create=function(t){return function(e){return function(n){return function(o){return function(a){return function(i){return new r(t,e,n,o,a,i)}}}}}},r}(),L7=function(){function r(){}return r.value=new r,r}(),Kx=function(){function r(t,e,n){this.value0=t,this.value1=e,this.value2=n}return r.create=function(t){return function(e){return function(n){return new r(t,e,n)}}},r}(),oT=function(){function r(t,e){this.value0=t,this.value1=e}return r.create=function(t){return function(e){return new r(t,e)}},r}(),U7=function(){function r(){}return r.value=new r,r}(),tT=function(){function r(t,e,n){this.value0=t,this.value1=e,this.value2=n}return r.create=function(t){return function(e){return function(n){return new r(t,e,n)}}},r}(),t1=function(){function r(t,e,n){this.value0=t,this.value1=e,this.value2=n}return r.create=function(t){return function(e){return function(n){return new r(t,e,n)}}},r}(),k7=function(){function r(t,e,n){this.value0=t,this.value1=e,this.value2=n}return r.create=function(t){return function(e){return function(n){return new r(t,e,n)}}},r}(),Oa=function(r,t,e,n){if(e instanceof Ue){if(n instanceof Ue)return new Le(1,1,r,t,e,n);if(n instanceof Le)return new Le(1+n.value0|0,1+n.value1|0,r,t,e,n);throw new Error("Failed pattern match at Data.Map.Internal (line 702, column 5 - line 706, column 39): "+[n.constructor.name])}if(e instanceof Le){if(n instanceof Ue)return new Le(1+e.value0|0,1+e.value1|0,r,t,e,n);if(n instanceof Le)return new Le(1+function(){var o=e.value0>n.value0;return o?e.value0:n.value0}()|0,(1+e.value1|0)+n.value1|0,r,t,e,n);throw new Error("Failed pattern match at Data.Map.Internal (line 708, column 5 - line 712, column 68): "+[n.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 700, column 32 - line 712, column 68): "+[e.constructor.name])},eT=function(){return _e(oT.create)(L7.value)}(),Hnt=function(r){return function(t){return function(e){var n=function(o){var a=!1,i;function u(l){if(l instanceof L7)return a=!0,e(void 0);if(l instanceof Kx)return a=!0,t(l.value0,l.value1,l.value2);if(l instanceof oT){o=r(l.value1)(l.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 940, column 8 - line 946, column 20): "+[l.constructor.name])}for(;!a;)i=u(o);return i};return n}}};var Us=function(r){return function(t){return new Le(1,1,r,t,Ue.value,Ue.value)}},Df=function(){var r=function(n){if(n instanceof Ue)return 0;if(n instanceof Le)return n.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 757, column 12 - line 759, column 26): "+[n.constructor.name])},t=function(n,o,a,i,u,l,s){return l instanceof Le&&l.value0>r(s)?Oa(l.value2,l.value3,Oa(n,o,a,l.value4),Oa(i,u,l.value5,s)):Oa(i,u,Oa(n,o,a,l),s)},e=function(n,o,a,i,u,l,s){return l instanceof Le&&r(u)<=l.value0?Oa(l.value2,l.value3,Oa(a,i,u,l.value4),Oa(n,o,l.value5,s)):Oa(a,i,u,Oa(n,o,l,s))};return function(n,o,a,i){if(a instanceof Ue)return i instanceof Ue?Us(n)(o):i instanceof Le&&i.value0>1?t(n,o,a,i.value2,i.value3,i.value4,i.value5):Oa(n,o,a,i);if(a instanceof Le){if(i instanceof Le){if(i.value0>(a.value0+1|0))return t(n,o,a,i.value2,i.value3,i.value4,i.value5);if(a.value0>(i.value0+1|0))return e(n,o,a.value2,a.value3,a.value4,a.value5,i)}return i instanceof Ue&&a.value0>1?e(n,o,a.value2,a.value3,a.value4,a.value5,i):Oa(n,o,a,i)}throw new Error("Failed pattern match at Data.Map.Internal (line 717, column 40 - line 738, column 34): "+[a.constructor.name])}}(),rT=Ls("unsafeSplit","Data.Map.Internal",function(){return function(r,t,e){if(e instanceof Ue)return new t1(P.value,Ue.value,Ue.value);if(e instanceof Le){var n=r(t)(e.value2);if(n instanceof Wt){var o=rT(793)(r,t,e.value4);return new t1(o.value0,o.value1,Df(e.value2,e.value3,o.value2,e.value5))}if(n instanceof Lt){var o=rT(796)(r,t,e.value5);return new t1(o.value0,Df(e.value2,e.value3,e.value4,o.value1),o.value2)}if(n instanceof te)return new t1(new M(e.value3),e.value4,e.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 791, column 5 - line 799, column 30): "+[n.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 787, column 34 - line 799, column 30): "+[e.constructor.name])}}),Vnt=rT(786),B7=Ls("unsafeSplitLast","Data.Map.Internal",function(){return function(r,t,e,n){if(n instanceof Ue)return new k7(r,t,e);if(n instanceof Le){var o=B7(779)(n.value2,n.value3,n.value4,n.value5);return new k7(o.value0,o.value1,Df(r,t,e,o.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 776, column 37 - line 780, column 57): "+[n.constructor.name])}}),jnt=B7(775),Znt=function(r,t){if(r instanceof Ue)return t;if(r instanceof Le){var e=jnt(r.value2,r.value3,r.value4,r.value5);return Df(e.value0,e.value1,e.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 764, column 25 - line 768, column 38): "+[r.constructor.name,t.constructor.name])},nT=Ls("unsafeDifference","Data.Map.Internal",function(){return function(r,t,e){if(t instanceof Ue)return Ue.value;if(e instanceof Ue)return t;if(e instanceof Le){var n=Vnt(r,e.value2,t),o=nT(841)(r,n.value1,e.value4),a=nT(842)(r,n.value2,e.value5);return Znt(o,a)}throw new Error("Failed pattern match at Data.Map.Internal (line 836, column 39 - line 843, column 33): "+[t.constructor.name,e.constructor.name])}}),Ynt=nT(835);var e1=function(r){var t=Pt(r);return function(e){var n=function(o){var a=!1,i;function u(l){if(l instanceof Ue)return a=!0,P.value;if(l instanceof Le){var s=t(e)(l.value2);if(s instanceof Wt){o=l.value4;return}if(s instanceof Lt){o=l.value5;return}if(s instanceof te)return a=!0,new M(l.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 283, column 7 - line 286, column 22): "+[s.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 280, column 8 - line 286, column 22): "+[l.constructor.name])}for(;!a;)i=u(o);return i};return n}};var Xnt=function(){var r=function(t){return function(e){var n=t,o=!1,a;function i(u,l){if(l instanceof Ue)return o=!0,u;if(l instanceof Le){if(l.value5 instanceof Ue){n=new Kx(l.value2,l.value3,u),e=l.value4;return}n=new Kx(l.value2,l.value3,new oT(l.value5,u)),e=l.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 951, column 13 - line 958, column 48): "+[l.constructor.name])}for(;!o;)a=i(n,e);return a}};return r}(),W7=Hnt(Xnt),$7=function(){return W7(function(r,t,e){return new tT(r,t,e)})(Xt(U7.value))}(),Jnt=function(r){var t=Rt(r);return function(e){var n=Rt(e);return{eq:function(){var o=function(a){return function(i){var u=a,l=!1,s;function c(f,d){var p=$7(f);if(p instanceof tT){var h=$7(d);if(h instanceof tT&&t(p.value0)(h.value0)&&n(p.value1)(h.value1)){u=p.value2,i=h.value2;return}return l=!0,!1}if(p instanceof U7)return l=!0,!0;throw new Error("Failed pattern match at Data.Map.Internal (line 859, column 14 - line 868, column 13): "+[p.constructor.name])}for(;!l;)s=c(u,i);return s}};return o}()}}};var Knt=function(){var r=function(t,e,n){return new M(new tt(new tt(t,e),n))};return W7(r)(function(t){return P.value})}(),aT=function(r){var t=ri(r)(Knt);return function(e){return t(eT(e))}},tot=aT(Ca),r1=function(r){var t=Cw(r);return function(e){var n=U(au(t(e)));return{show:function(o){return"(fromFoldable "+(n(tot(o))+")")}}}};var wf=function(r){var t=Pt(r);return function(e){return function(n){var o=function(a){if(a instanceof Ue)return Us(e)(n);if(a instanceof Le){var i=t(e)(a.value2);if(i instanceof Wt)return Df(a.value2,a.value3,o(a.value4),a.value5);if(i instanceof Lt)return Df(a.value2,a.value3,a.value4,o(a.value5));if(i instanceof te)return new Le(a.value0,a.value1,e,n,a.value4,a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 471, column 7 - line 474, column 35): "+[i.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 468, column 8 - line 474, column 35): "+[a.constructor.name])};return o}}};var G7={foldr:function(r){return function(t){var e=Ls("go","Data.Map.Internal",function(){return function(o,a){if(o instanceof Ue)return a;if(o instanceof Le)return e(172)(o.value4,r(o.value3)(e(172)(o.value5,a)));throw new Error("Failed pattern match at Data.Map.Internal (line 169, column 26 - line 172, column 43): "+[o.constructor.name])}}),n=e(169);return function(o){return n(o,t)}}},foldl:function(r){return function(t){var e=Ls("go","Data.Map.Internal",function(){return function(o,a){if(a instanceof Ue)return o;if(a instanceof Le)return e(178)(r(e(178)(o,a.value4))(a.value3),a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 175, column 26 - line 178, column 43): "+[a.constructor.name])}}),n=e(175);return function(o){return n(t,o)}}},foldMap:function(r){var t=ie(r),e=bt(r.Semigroup0());return function(n){var o=function(a){if(a instanceof Ue)return t;if(a instanceof Le)return e(o(a.value4))(e(n(a.value3))(o(a.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 181, column 10 - line 184, column 28): "+[a.constructor.name])};return o}}},bh={foldrWithIndex:function(r){return function(t){var e=Ls("go","Data.Map.Internal",function(){return function(o,a){if(o instanceof Ue)return a;if(o instanceof Le)return e(192)(o.value4,r(o.value2)(o.value3)(e(192)(o.value5,a)));throw new Error("Failed pattern match at Data.Map.Internal (line 189, column 26 - line 192, column 45): "+[o.constructor.name])}}),n=e(189);return function(o){return n(o,t)}}},foldlWithIndex:function(r){return function(t){var e=Ls("go","Data.Map.Internal",function(){return function(o,a){if(a instanceof Ue)return o;if(a instanceof Le)return e(198)(r(a.value2)(e(198)(o,a.value4))(a.value3),a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 195, column 26 - line 198, column 45): "+[a.constructor.name])}}),n=e(195);return function(o){return n(t,o)}}},foldMapWithIndex:function(r){var t=ie(r),e=bt(r.Semigroup0());return function(n){var o=function(a){if(a instanceof Ue)return t;if(a instanceof Le)return e(o(a.value4))(e(n(a.value2)(a.value3))(o(a.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 201, column 10 - line 204, column 30): "+[a.constructor.name])};return o}},Foldable0:function(){return G7}};var Dh=function(r){var t=Jnt(r);return function(e){var n=Rt(t(e));return{eq:function(o){return function(a){if(o instanceof Ue)return a instanceof Ue;if(o instanceof Le)return a instanceof Le&&o.value1===a.value1?n(eT(o))(eT(a)):!1;throw new Error("Failed pattern match at Data.Map.Internal (line 94, column 14 - line 105, column 16): "+[o.constructor.name])}}}}};var xf=function(){return Ue.value}();var iT=function(r){var t=Pt(r);return function(e){return function(n){return Ynt(t,e,n)}}};var n1=function(r){return r};var Q7=function(r){var t=Me(r);return{nes:function(e){return t(e)}}},H7=function(r){return r.nes};function dT(r){return function(t){return r===t}}var eP=function(r){return function(t){return!dT(r)(t)}};var Rot="http://www.w3.org/2000/svg",mT="__flame_",vT="updater",wh=1,Cot=2,nP=3,bu=4,xh=5,Tf=6,oP=["focus","blur","scroll","load","unload"];function aP(r,t,e,n){return new hr(r,t,e,n,!1)}function iP(r,t,e,n){return new hr(r,t,e,n,!0)}function uP(r,t){r.resume(t)}function hr(r,t,e,n,o){this.eventWrapper=r,this.applicationEvents=new Map,this.root=t,this.updater=e,this.cachedHtml=n.node===void 0?n:Rf(n),o?this.hydrate(this.root,this.cachedHtml):this.createAllNodes(this.root,this.cachedHtml)}hr.prototype.hydrate=function(r,t,e){switch(t.nodeType){case xh:t.node=r,t.rendered=t.render(t.arg),t.render=void 0,this.hydrate(r,t.rendered);break;case wh:t.node=r;break;case Tf:this.createAllNodes(r,t,e);break;default:t.nodeType===bu?t.node=document.createDocumentFragment():(t.node=r,t.nodeData.events!==void 0&&this.createAllEvents(r,t));let n;if(t.text===void 0&&t.children!==void 0&&(n=t.children.length)>0){let o=r.childNodes;for(let a=0,i=0;a<n;++a,++i){let u=t.children[a]=t.children[a].node===void 0?t.children[a]:Rf(t.children[a]);if(o[i]===void 0)this.createAllNodes(r,u);else if(u.nodeType===bu){let l=u.children.length;u.node=document.createDocumentFragment();for(let s=0;s<l;++s){let c=u.children[s]=u.children[s].node===void 0?u.children[s]:Rf(u.children[s]);this.hydrate(o[i++],c)}i--}else u.nodeType===Tf?this.hydrate(r,u,o[i]):this.hydrate(o[i],u)}}}};function Rf(r){switch(r.nodeType){case wh:return{nodeType:wh,node:void 0,text:r.text};case bu:return{nodeType:bu,node:void 0,children:r.children};case xh:return{nodeType:xh,node:void 0,nodeData:r.nodeData,render:r.render,arg:r.arg,rendered:void 0,messageMapper:r.messageMapper};case Tf:return{nodeType:Tf,node:void 0,nodeData:r.nodeData,createNode:r.createNode,updateNode:r.updateNode,arg:r.arg,messageMapper:r.messageMapper};default:return{nodeType:r.nodeType,node:void 0,tag:r.tag,nodeData:r.nodeData,children:r.children,text:r.text,messageMapper:r.messageMapper}}}hr.prototype.createAllNodes=function(r,t,e){let n=this.createNode(t);t.text!==void 0?n.textContent=t.text:t.children!==void 0?this.createChildrenNodes(n,t.children):t.rendered!==void 0&&(t.messageMapper!==void 0&&gT(t.messageMapper,t.rendered),t.rendered.text!==void 0?n.textContent=t.rendered.text:t.rendered.children!==void 0&&this.createChildrenNodes(n,t.rendered.children)),r.insertBefore(n,e)};hr.prototype.checkCreateAllNodes=function(r,t,e){return t.node!==void 0&&(t=Rf(t)),this.createAllNodes(r,t,e),t};hr.prototype.createChildrenNodes=function(r,t){let e=t.length;for(let n=0;n<e;++n){let o=t[n]=t[n].node===void 0?t[n]:Rf(t[n]);this.checkCreateAllNodes(r,o,null)}};hr.prototype.createNode=function(r){switch(r.nodeType){case xh:return r.rendered=r.render(r.arg),r.render=void 0,r.node=this.createNode(r.rendered);case wh:return r.node=document.createTextNode(r.text);case Cot:return r.node=this.createElement(r);case nP:return r.node=this.createSvg(r);case bu:return r.node=document.createDocumentFragment();case Tf:return r.node=this.createManagedNode(r)}};hr.prototype.createElement=function(r){let t=document.createElement(r.tag);return this.createNodeData(t,r,!1),t};hr.prototype.createSvg=function(r){let t=document.createElementNS(Rot,r.tag);return this.createNodeData(t,r,!0),t};hr.prototype.createManagedNode=function(r){let t=r.createNode(r.arg)();return r.createNode=void 0,this.createNodeData(t,r,t instanceof SVGElement||t.nodeName.toLowerCase()==="svg"),t};hr.prototype.createNodeData=function(r,t,e){if(t.nodeData.styles!==void 0&&lP(r,t.nodeData.styles),t.nodeData.classes!==void 0&&t.nodeData.classes.length>0&&pT(r,t.nodeData.classes,e),t.nodeData.attributes!==void 0&&sP(r,t.nodeData.attributes),t.nodeData.properties!==void 0)for(let n in t.nodeData.properties)r[n]=t.nodeData.properties[n];t.nodeData.events!==void 0&&this.createAllEvents(r,t)};function lP(r,t){for(let e in t)r.style.setProperty(e,t[e])}function pT(r,t,e){let n=t.join(" ");e?r.setAttribute("class",n):r.className=n}function sP(r,t){for(let e in t)r.setAttribute(e,t[e])}hr.prototype.createAllEvents=function(r,t){for(let e in t.nodeData.events)this.createEvent(r,e,t)};hr.prototype.createEvent=function(r,t,e){let n=e.nodeData.events[t],o=mT+t;if(oP.includes(t)){let a=this.runNonBubblingEvent(n,e.messageMapper);r[o]=a,r.addEventListener(t,a,!1)}else{r[o]=n,e.messageMapper!==void 0&&(r[o+vT]=e.messageMapper);let a=this.applicationEvents.get(t);if(a===void 0){let i=this.runEvent.bind(this);this.root.addEventListener(t,i,!1),this.applicationEvents.set(t,{count:1,handler:i})}else a.count++}};hr.prototype.runNonBubblingEvent=function(r,t){return function(e){this.runHandlers(r,t,e)}.bind(this)};hr.prototype.runEvent=function(r){let t=r.target,e=mT+r.type;for(;t!==this.root;){let n=t[e];if(n!==void 0){this.runHandlers(n,t[e+vT],r);return}t=t.parentNode}};hr.prototype.runHandlers=function(r,t,e){let n=r.length;for(let o=0;o<n;++o){let a=r[o],i=typeof a=="function"?a(e)():this.eventWrapper(a);this.updater(t===void 0?i:t(i))()}e.stopPropagation()};hr.prototype.resume=function(r){this.cachedHtml=this.updateAllNodes(this.root,this.cachedHtml,r)};hr.prototype.updateAllNodes=function(r,t,e){if(e.node!==void 0&&(e=Rf(e)),t.tag!==e.tag||t.nodeType!==e.nodeType)t.nodeType===bu?(this.createAllNodes(r,e,cP(t.children)),fP(r,t.children)):(this.createAllNodes(r,e,t.node),r.removeChild(t.node));else switch(e.node=t.node,e.nodeType){case xh:e.arg!==t.arg?(e.rendered=e.render(e.arg),e.messageMapper!==void 0&&gT(e.messageMapper,e.rendered),this.updateAllNodes(r,t.rendered,e.rendered)):e.rendered=t.rendered,e.render=void 0;break;case Tf:let n=e.updateNode(t.node)(t.arg)(e.arg)(),o=n instanceof SVGElement||n.nodeName.toLowerCase()==="svg";n!==t.node||n.nodeType!==t.node.nodeType||n.nodeName!==t.node.nodeName?(this.createNodeData(n,e,o),r.insertBefore(n,t.node),r.removeChild(t.node)):this.updateNodeData(n,t.nodeData,e,o),e.node=n;break;case wh:e.text!==t.text&&(e.node.textContent=e.text);break;case bu:this.updateChildrenNodes(r,t,e);break;default:this.updateNodeData(t.node,t.nodeData,e,e.nodeType==nP),(e.text!==void 0||e.children===void 0&&t.text!=null)&&!hT(e.nodeData)&&e.text!=t.node.textContent?t.node.textContent=e.text:this.updateChildrenNodes(t.node,t,e)}return e};function cP(r){let t=r.length;for(let e=0;e<t;++e)return r[e].nodeType===bu?cP(r[e].children):r[e].node}function fP(r,t){let e=t.length;for(let n=0;n<e;++n)t[n].nodeType===bu?fP(t[n].children):r.removeChild(t[n].node)}function rP(r){r.textContent=""}hr.prototype.updateChildrenNodes=function(r,t,e){let n=t.children,o=e.children;if(n===void 0||n.length===0){let a;if(o!==void 0&&(a=o.length)>0){(t.text!==void 0||hT(t.nodeData))&&rP(r);for(let i=0;i<a;++i)o[i]=this.checkCreateAllNodes(r,o[i])}}else o===void 0||o.length===0?n!==void 0&&(n.length>0||t.text!==void 0)&&!hT(e.nodeData)&&rP(r):n[0].nodeData!==void 0&&n[0].nodeData.key!==void 0&&o[0].nodeData!==void 0&&o[0].nodeData.key!==void 0?this.updateKeyedChildrenNodes(r,n,o):this.updateNonKeyedChildrenNodes(r,n,o)};function hT(r){return r!==void 0&&r.properties!==void 0&&r.properties.innerHTML!==void 0}hr.prototype.updateKeyedChildrenNodes=function(r,t,e){let n=0,o=0,a=t.length-1,i=e.length-1,u,l=t[n].node,s=l,c=t[a].node,f=!0;t:for(;f;){f=!1;let d=t[n],p=e[o];for(;d.nodeData.key===p.nodeData.key;){if(p=this.updateAllNodes(r,d,p),s=l=d.node.nextSibling,n++,o++,a<n||i<o)break t;d=t[n],p=e[o]}for(d=t[a],p=e[i];d.nodeData.key===p.nodeData.key;){if(p=this.updateAllNodes(r,d,p),u=c,c=c.previousSibling,a--,i--,a<n||i<o)break t;d=t[a],p=e[i]}for(d=t[a],p=e[o];d.nodeData.key===p.nodeData.key;){if(f=!0,p=this.updateAllNodes(r,d,p),c=d.node.previousSibling,r.insertBefore(d.node,s),o++,a--,a<n||i<o)break t;d=t[a],p=e[o]}for(d=t[n],p=e[i];d.nodeData.key===p.nodeData.key;){if(f=!0,p=this.updateAllNodes(r,d,p),r.insertBefore(d.node,u),u=d.node,n++,i--,a<n||i<o)break t;d=t[n],p=e[i]}}if(i<o)for(;n<=a;)r.removeChild(t[a].node),a--;else if(a<n)for(;o<=i;)e[o]=this.checkCreateAllNodes(r,e[o],u),o++;else{let d=new Int32Array(i+1-o),p=new Map;for(let _=o;_<=i;_++)d[_]=-1,p.set(e[_].nodeData.key,_);let h=o+e.length-1-i,m=[];for(let _=n;_<=a;_++)p.has(t[_].nodeData.key)?(d[p.get(t[_].nodeData.key)]=_,h++):m.push(_);if(h===0){r.textContent="";for(let _=o;_<=i;_++)e[_]=this.checkCreateAllNodes(r,e[_])}else{let _=m.length;for(let w=0;w<_;w++)r.removeChild(t[m[w]].node);let y=Sot(d,o),D=y.length-1;for(let w=i;w>=o;w--)y[D]===w?(currentHtml=t[d[y[D]]],e[w]=this.updateAllNodes(r,currentHtml,e[w]),u=currentHtml.node,D--):d[w]===-1?(e[w]=this.checkCreateAllNodes(r,e[w],u),u=e[w].node):(currentHtml=t[d[w]],e[w]=this.updateAllNodes(r,currentHtml,e[w]),r.insertBefore(currentHtml.node,u),u=currentHtml.node)}}};function Sot(r,t){let e=[],n=[],o=-1,a,i,u=new Int32Array(r.length);for(a=t,i=r.length;a<i;a++){let l=r[a];if(l<0)continue;let s=Oot(e,l);s!==-1&&(u[a]=n[s]),s===o?(o++,e[o]=l,n[o]=a):l<e[s+1]&&(e[s+1]=l,n[s+1]=a)}for(a=n[o];o>=0;a=u[a],o--)e[o]=a;return e}function Oot(r,t){let e=-1,n=r.length;if(n>0&&r[n-1]<=t)return n-1;for(;n-e>1;){let o=Math.floor((e+n)/2);r[o]>t?n=o:e=o}return e}hr.prototype.updateNonKeyedChildrenNodes=function(r,t,e){let n=t.length,o=e.length,a=Math.min(n,o);for(let i=0;i<a;++i)e[i]=this.updateAllNodes(r,t[i],e[i]);if(n<o)for(let i=a;i<o;++i)e[i]=this.checkCreateAllNodes(r,e[i]);else if(n>o)for(let i=a;i<n;++i)r.removeChild(t[i].node)};hr.prototype.updateNodeData=function(r,t,e,n){Eot(r,t.styles,e.nodeData.styles),Mot(r,t.attributes,e.nodeData.attributes),Fot(r,t.classes,e.nodeData.classes,n),Aot(r,t.properties,e.nodeData.properties),this.updateEvents(r,t.events,e)};function Eot(r,t,e){if(t===void 0)e!==void 0&&lP(r,e);else if(e===void 0)t!==void 0&&r.removeAttribute("style");else{let n=0;for(let i in t){let u=t[i],l=e[i],s=e[i]!==void 0;s&&n++,u!==l&&(s?r.style.setProperty(i,l):r.style.removeProperty(i))}let o=Object.keys(e),a=o.length;for(let i=0;n<a&&i<a;++i){let u=o[i];if(t[u]===void 0){let l=e[u];++n,r.style.setProperty(u,l)}}}}function Fot(r,t,e,n){let o=e!==void 0&&e.length>0;t!==void 0&&t.length>0&&!o?pT(r,[],n):o&&pT(r,e,n)}function Mot(r,t,e){if(t===void 0)e!==void 0&&sP(r,e);else if(e===void 0){if(t!==void 0)for(let n in t)r.removeAttribute(n)}else{let n=0;for(let i in t){let u=t[i],l=e[i],s=l!==void 0;s&&n++,u!==l&&(s?r.setAttribute(i,l):r.removeAttribute(i))}let o=Object.keys(e),a=o.length;for(let i=0;n<a&&i<a;++i){let u=o[i];if(t[u]===void 0){let l=e[u];++n,r.setAttribute(u,l)}}}}function Aot(r,t,e){let n=t===void 0,o=e===void 0;if(n){if(!o)for(let a in e)r[a]=e[a]}else if(o){if(!n)for(let a in t)r.removeAttribute(a)}else{let a=0;for(let l in t){let s=t[l],c=e[l],f=c!==void 0;f&&a++,s!==c&&(f?r[l]=c:r.removeAttribute(l))}let i=Object.keys(e),u=i.length;for(let l=0;a<u&&l<u;++l){let s=i[l];if(t[s]===void 0){let c=e[s];++a,r[s]=c}}}}hr.prototype.updateEvents=function(r,t,e){let n=e.nodeData.events;if(t===void 0)n!==void 0&&this.createAllEvents(r,e);else if(n===void 0){if(t!==void 0)for(let o in t)this.removeEvent(r,o)}else{let o=0;for(let u in t){let l=t[u],s=n[u],c=!1;if(s===void 0)this.removeEvent(r,u);else{let f=l.length,d=s.length;if(f!=d)c=!0;else for(let p=0;p<f;++p)if(l[p]!=s[p]){c=!0;break}}c&&(o++,this.removeEvent(r,u),this.createEvent(r,u,e))}let a=Object.keys(n),i=a.length;for(let u=0;o<i&&u<i;++u){let l=a[u];t[l]===void 0&&(++o,this.createEvent(r,l,e))}}};hr.prototype.removeEvent=function(r,t){let e=mT+t;if(oP.includes(t)){let n=r[e];r.removeEventListener(t,n,!1)}else--this.applicationEvents.get(t).count===0&&(this.root.removeEventListener(t,this.applicationEvents.get(t).handler,!1),this.applicationEvents.delete(t));r[e+vT]=void 0,r[e]=void 0};function gT(r,t){if(t.messageMapper=r,t.children!==void 0&&t.children.length>0)for(let e=0;e<t.children.length;++e)gT(r,t.children[e])}var Iot=$(Cn),dP=Mi(uP),pP=function(r){return function(t){return t instanceof M?r(t.value0):Iot(void 0)}},hP=function(r){return function(t){return oh(aP)(M.create)(r)(pP(t))}},mP=function(r){return function(t){return oh(iP)(M.create)(r)(pP(t))}};var vP=new Set;function gP(r){if(vP.has(r))throw`Error mounting application: id ${r} already registered!`;vP.add(r)}var _P=function(){function r(){}return r.value=new r,r}(),yP=function(){function r(){}return r.value=new r,r}(),_T=function(){function r(){}return r.value=new r,r}();function Ai(r){return typeof r}function Du(r){return Object.prototype.toString.call(r).slice(8,-1)}function gl(r){return r===null}function _l(r){return r===void 0}var Th=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};var a1=U(Qr),Bot=U(Pr),Wot=$(Ap);var on=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Hr=function(){function r(t,e){this.value0=t,this.value1=e}return r.create=function(t){return function(e){return new r(t,e)}},r}(),wu=function(){function r(t,e){this.value0=t,this.value1=e}return r.create=function(t){return function(e){return new r(t,e)}},r}(),qn=function(){function r(t,e){this.value0=t,this.value1=e}return r.create=function(t){return function(e){return new r(t,e)}},r}();var Ws=j,Rh={show:function(r){if(r instanceof on)return"(ForeignError "+(a1(r.value0)+")");if(r instanceof wu)return"(ErrorAtIndex "+(Bot(r.value0)+(" "+(U(Rh)(r.value1)+")")));if(r instanceof qn)return"(ErrorAtProperty "+(a1(r.value0)+(" "+(U(Rh)(r.value1)+")")));if(r instanceof Hr)return"(TypeMismatch "+(a1(r.value0)+(" "+(a1(r.value1)+")")));throw new Error("Failed pattern match at Foreign (line 69, column 1 - line 73, column 89): "+[r.constructor.name])}};var Po=function(r){var t=Jo(Mw(r));return function(e){return t(yf(e))}},u1=function(r){var t=$(pn(r)),e=Po(r);return function(n){if(Th(n))return t(Ws(n));if(Re)return e(new Hr("array",Du(n)));throw new Error("Failed pattern match at Foreign (line 164, column 1 - line 164, column 99): "+[n.constructor.name])}},l1=function(r){var t=$(pn(r)),e=Po(r);return function(n){return function(o){if(Du(o)===n)return t(Ws(o));if(Re)return e(new Hr(n,Du(o)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[n.constructor.name,o.constructor.name])}}};var DP=function(r){return l1(r)("Number")},s1=function(r){var t=O(r.Bind1().Apply0().Functor0()),e=DP(r);return function(n){var o=new G(yf(new Hr("Int",Du(n)))),a=function(){var i=Ir(o)(Wot);return function(u){return i(fl(u))}}();return zp(t(uu(Xt(o))(a)))(e(n))}},wP=function(r){return l1(r)("String")};var i1={eq:function(r){return function(t){return r instanceof on&&t instanceof on?r.value0===t.value0:r instanceof Hr&&t instanceof Hr?r.value0===t.value0&&r.value1===t.value1:r instanceof wu&&t instanceof wu?r.value0===t.value0&&Rt(i1)(r.value1)(t.value1):r instanceof qn&&t instanceof qn?r.value0===t.value0&&Rt(i1)(r.value1)(t.value1):!1}}};var xP=function(r){return function(t){if(t.value0 instanceof _P)return o8(t.value1.value0)(function(e){return r(t.value1.value1.value0(e))});if(t.value0 instanceof yP)return a8(t.value1.value0)(function(e){return r(t.value1.value1.value0(e))});if(t.value0 instanceof _T)return gx(t.value1.value0)(function(e){return r(t.value1.value1.value0(e))});throw new Error("Failed pattern match at Flame.Subscription.Internal.Listener (line 31, column 83 - line 34, column 75): "+[t.value0.constructor.name])}},Got=Fi(gP),TP=function(r){return function(t){return function(){return Got(r)(),gx(r)(function(n){return t(Ws(n))})()}}};var qot=Ti(Cn),Qot=h_(Cn)(ur),Hot=$(Cn),Vot=Rs(Cn)(ur),jot=O(Fe),Zot=function(r){var t=U(r);return function(e){return t(e)}},Yot=function(r){return function(t){return function(e){return function(n){return function(){var a=_s(n.init.value0)(),i=_s(21)(),u=function(f){return function(){var p=nl(i)();return dP(p)(n.view(f))(),su(f)(a)()}},l=function(f){return function(){var p=nl(a)(),h=n.update(p)(f);return qot(eP(p)(h.value0))(u(h.value0))(),s(h.value1)()}},s=function(f){return Qot(f)(uA(function(d){return d instanceof G?Jp(Jc(d.value0)):d instanceof Q&&d.value0 instanceof M?l(d.value0.value0):Hot(void 0)}))},c=function(){return t?mP(r)(l)(n.view(n.init.value0))():hP(r)(l)(n.view(n.init.value0))()}();return su(c)(i)(),s(n.init.value1)(),function(){if(e instanceof P)return void 0;if(e instanceof M)return TP(e.value0)(l)();throw new Error("Failed pattern match at Flame.Application.EffectList (line 142, column 7 - line 144, column 62): "+[e.constructor.name])}(),Vot(xP(l))(n.subscribe)()}}}}};var Xot=function(r){var t=Zot(r);return function(e){return function(n){return function(o){return function(){var i=vx(e)();if(i instanceof M)return Yot(i.value0)(!1)(jot(t)(n))(o)();if(i instanceof P)return Sw("Error mounting application")();throw new Error("Failed pattern match at Flame.Application.EffectList (line 101, column 7 - line 103, column 62): "+[i.constructor.name])}}}}};var RP=function(r){var t=Xot(r);return function(e){return function(n){return t(e)(new M(n))}}};var Ch=function(r){return r.chooseInt};var wT=function(r){var t=O(r);return{map:function(e){return function(n){return function(o){return t(function(a){return new tt(e(a.value0),a.value1)})(n(o))}}}}};var d1=function(r){return{Applicative0:function(){return TT(r)},Bind1:function(){return xT(r)}}},xT=function(r){var t=lt(r.Bind1());return{bind:function(e){return function(n){return function(o){return t(e(o))(function(a){var i=n(a.value0);return i(a.value1)})}}},Apply0:function(){return p1(r)}}},p1=function(r){var t=wT(r.Bind1().Apply0().Functor0());return{apply:ro(d1(r)),Functor0:function(){return t}}},TT=function(r){var t=$(r.Applicative0());return{pure:function(e){return function(n){return t(new tt(e,n))}},Apply0:function(){return p1(r)}}};var RT=function(r){var t=$(r.Applicative0()),e=d1(r);return{state:function(n){return function(o){return t(n(o))}},Monad0:function(){return e}}};var pat=Mo();var CT=function(r){return function(t){return pat(r(t))}};var MP=function(r){return function(t){var e=r(t);return e.value0}};var gat=tl(el),_at=rn();var PP=function(r){return r};var yat=1,m1=2147483647,bat=function(){return m1-1|0}(),IP=function(r){var t=function(e){return function(n){return function(o){var a=n-e|0,i=gat(o)(a),u=i<e;return u?i+n|0:i}}};return t(yat)(bat)(r)};var Dat=0,wat=48271,NP=function(r){return function(t){return _at(fl(rh(pr(wat)*pr(t)+pr(r))(pr(m1))))}},kP=NP(Dat);var Rat=RT(Yt),OT=Xo(Rat),Cat=O(bs),Sat=xT(Yt);var Oat=wT(Oo);var UP=Co(Sp),Eat=hw(ps),Fat=Ep(ps),BP=Rn(Sp);var WP=function(r){return r},GP=function(r){return CT(WP(r))},Mat=function(r){return OT(function(t){return GP(r(t))(t)})},ST=function(r){return Mat(function(t){return r(t.size)})};var Aat=function(r){return function(t){return OT(function(e){return Cat(function(n){return{newSeed:n.newSeed,size:e.size}})(GP(t)({newSeed:e.newSeed,size:r}))})}};var Pat=d1(Yt);var zP=function(){var r=function(t){return new tt(PP(t.newSeed),function(){var e={};for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.newSeed=kP(t.newSeed),e}())};return OT(r)}();var Cf=Oat,Gs=O(Cf),ET=Gs(function(r){return pr(r)/pr(m1)})(zP);var qP=function(r){return MP(WP(r))};var Iat=function(r){return function(t){var e=function(i){return i*2},n=function(i){return i*.5},o=n(Eat(r)(t)),a=n(Fat(r)(t));return Gs(function(){var i=BP(o),u=UP(a-o);return function(l){return e(i(u(l)))}}())(ET)}},zs=Sat;var QP=p1(Yt),Nat=pe(QP),LP=function(r){return function(t){var e=pr(t),n=pr(r),o=function(u){return n+rh(u)(e-n+1)},a=Gs(pr)(zP),i=Nat(Gs(BP)(a))(Gs(UP(2))(a));return Gs(function(u){return uf(o(u))})(i)}},FT=function(r){return function(t){var e=r<=t;return e?LP(r)(t):LP(t)(r)}};var v1={chooseInt:FT,chooseFloat:Iat,chooseBool:Gs(function(r){return r<.5})(ET),resize:function(r){return function(t){return ST(function(e){return Aat(r(e))(t)})}},sized:ST,Monad0:function(){return Pat}};var xu=TT(Yt);var qs=function(r){return r.arbitrary};function kat(r,t){return r==="big"?BigInt(t):t}var HP=r=>JSON.parse(r,kat);var Gat=Mo(),Oh=Ow(Oo),ui=function(r){return Gat(Ew(r))};function ZP(r,t,e,n){return n==null?r:t(n[e])}function YP(r,t){return Object.prototype.hasOwnProperty.call(t,r)}function XP(r,t){return r in t}var Yat=function(r){var t=Po(r),e=$(pn(r));return function(n){return function(o){return ZP(t(new Hr("object",Ai(o))),e,n,o)}}},MT=function(r){return Yat(r)};var JP=function(r){return r.ix},Xat=function(r){return r.index};var KP=function(r){return{ix:function(t){return Xat(t)}}},Jat=function(r){return function(t){return gl(t)||_l(t)?!1:Ai(t)==="object"||Ai(t)==="function"?XP(r,t):!1}};var Kat=function(r){return function(t){return gl(t)||_l(t)?!1:Ai(t)==="object"||Ai(t)==="function"?YP(r,t):!1}};var t5=function(r){return{index:_e(MT(r)),hasProperty:Jat,hasOwnProperty:Kat,errorAt:qn.create}};function n5(r){var t={};for(var e in r)({}).hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t}function o5(r){return function(t){return function(e){return e[r]=t,e}}}var a5=ss;var i5=function(){return function(){return function(r){var t=Me(r);return function(e){return function(n){return function(o){return o5(t(e))(n)(o)}}}}}};var u5=Qt,l5=function(r){return function(t){return r(n5(t))}};var vit=qt(u5),git=Po(Yt),_it=wP(Yt);var s5=xa(Yt);var yit=$(N7),_1=Fw(Jg),bit=s1(Yt),Dit=pn(Yt),PT=$(Dit);var wit=cs(a5),xit=i5()();var IT=bt(J_),Tit=ll(Oo),c5=O(Tit);var NT=O(ml),Rit=Tn(s5);var f5=xs(pu),Cit=V_(Ca),kT=Hc(s5);var Sit=MT(Yt);var Oit=Fs(Ms),Eit=u1(Yt);var Eh={readImpl:_it};var $T={readImpl:bit},d5={readImpl:PT},Sf={getFields:function(r){return function(t){return PT(vit)}}};var Fit=function(r){var t=bt(r.Semigroup0()),e=ie(r);return function(n){var o=ir(n);return function(a){var i=$(a),u=function(s){return function(c){var f=ui(c);if(s instanceof G&&f instanceof G)return new G(IT(s.value0)(f.value0));if(s instanceof G&&f instanceof Q)return new G(s.value0);if(s instanceof Q&&f instanceof Q)return new Q(t(s.value0)(i(f.value0)));if(s instanceof Q&&f instanceof G)return new G(f.value0);throw new Error("Failed pattern match at Yoga.JSON (line 653, column 5 - line 657, column 37): "+[s.constructor.name,f.constructor.name])}},l=o(u)(new Q(e));return function(s){return _1(l(s))}}}},Mit=Fit(jo)(ur)(Tp);var Ru=function(r){return r.readImpl};var p5=function(r){var t=Ru(r);return{readImpl:function(){var e=function(a){return function(i){return _1(f5(NT(qn.create(a)))(ui(t(i))))}},n=function(a){if(Du(a)==="Object")return PT(Ws(a));if(Re)return git(new Hr("Object",Du(a)));throw new Error("Failed pattern match at Yoga.JSON (line 285, column 5 - line 285, column 47): "+[a.constructor.name])},o=function(){var a=function(u){return function(l){var s=ui(l.value1);if(u instanceof G&&s instanceof G)return new G(IT(u.value0)(s.value0));if(u instanceof G&&s instanceof Q)return new G(u.value0);if(u instanceof Q&&s instanceof Q)return new Q(fh(l.value0)(s.value0)(u.value0));if(u instanceof Q&&s instanceof G)return new G(s.value0);throw new Error("Failed pattern match at Yoga.JSON (line 276, column 9 - line 280, column 41): "+[u.constructor.name,s.constructor.name])}},i=F8(a)(new Q(Ps));return function(u){return _1(i(Cit(u)))}}();return kT(function(){var a=K8(e);return function(i){return o(a(i))}}())(n)}()}};var Ait=function(r){var t=Ru(r);return function(e){return function(n){return Oh(NT(wu.create(e)))(t(n))}}},h5=function(r){return{readImpl:kT(function(){var t=Oit(Ait(r));return function(e){return Mit(t(e))}}())(Eit)}};var Pi=function(r){return Ru(r)};var Pit=function(){var r=f5(function(e){return yit(on.create(Jc(e)))}),t=Fi(HP);return function(e){return tf(So(r(D_(Y3(t(e))))))}}();var m5=function(r){return kT(Ru(r))(Pit)},v5=function(r){return r.getFields},Qs=function(r){var t=Me(r),e=xit(r);return function(n){var o=Ru(n);return function(a){var i=v5(a);return function(){return function(){return{getFields:function(u){return function(l){var s=i(Zt.value)(l),c=t(Zt.value),f=Oh(NT(qn.create(c))),d=f(Rit(o)(Sit(c)(l))),p=c5(e(Zt.value))(d);return _1(function(){var h=ui(s),m=ui(p);if(m instanceof Q&&h instanceof Q)return new Q(wit(m.value0)(h.value0));if(m instanceof G&&h instanceof G)return new G(IT(m.value0)(h.value0));if(m instanceof Q&&h instanceof G)return new G(h.value0);if(m instanceof G&&h instanceof Q)return new G(m.value0);throw new Error("Failed pattern match at Yoga.JSON (line 360, column 5 - line 364, column 33): "+[m.constructor.name,h.constructor.name])}())}}}}}}}};var y1=function(){return function(r){var t=v5(r);return{readImpl:function(e){return c5(_e(l5)({}))(t(Zt.value)(e))}}}};var zT={reflectSymbol:function(){return"x"}},qT={reflectSymbol:function(){return"y"}},x5=xa(Yt),LT=lt(x5),Nit=u1(Yt),g5=s1(Yt),_5=va(ga)(x5),T5=pn(Yt),y5=Ti(T5),UT=Po(Yt),BT=U(Pr),kit=$(T5),$it=O(ll(Oo)),Lit=Pi(y1()(Qs(zT)($T)(Qs(qT)($T)(Sf)()())()()));var b5=lt(zs),D5=Ch(v1),Uit=$(xu);var Bit=function(r){return r},Wit=function(r){return r},Git=function(r){return r};var Io=ZA,O1=Qr,na=Bn()()(je(zT)(Ce(qT)(Pr))(Pr)),Fh=Qr;var E1=function(r){var t=ti(r.Nat0());return function(e){var n=ti(e.Nat0());return{readImpl:function(o){var a=function(i){return LT(Nit(i))(function(u){return u.length===2?LT(g5(u[0]))(function(l){return LT(g5(u[1]))(function(s){return _5(y5(l>=n(ta))(UT(new on("X coordinate too large: "+BT(l)))))(function(){return _5(y5(s>=t(ta))(UT(new on("Y coordinate too large: "+BT(s)))))(function(){return kit({x:l,y:s})})})})}):UT(new on("Step tuple has a length different from 2: "+BT(En(u))))})};return $it(Git)(function(){var i=Th(o);return i?a(o):Lit(o)}())}}}};var yl=ba,R5=rl;var C5=function(r){var t=Me(r);return{makeId:function(e){return t(e)}}};var QT=YA,S5=To,si=ya()(qe(qe(_a)()(qT)(Xa))()(zT)(Xa)),F1=To;var Mh=function(r){var t=ti(r.Nat0());return function(e){return{arbitrary:b5(D5(0)(ti(e.Nat0())(ta)-1|0))(function(n){return b5(D5(0)(t(ta)-1|0))(function(o){return Uit({x:n,y:o})})})}}};var Hs=Bit,O5=function(r){return r},E5=function(r){return r===""?new G("Cannot create empty ID"):new Q(r)};var F5=Wit;var M5=function(r){return r.makeId},Ah=function(r){return r};var zit=O(Fe);var M1=function(r){return function(t){return function(e){return function(n){return{executeScript:e.executeScript,logDebug:e.logDebug,logError:e.logError,updateAnimation:new M(n)}}}}},A5=function(r){return function(t){return function(e){return function(n){return{executeScript:e.executeScript,logDebug:e.logDebug,updateAnimation:e.updateAnimation,logError:new M(n)}}}}},P5=function(r){return function(t){return function(e){return function(n){return{executeScript:e.executeScript,logError:e.logError,updateAnimation:e.updateAnimation,logDebug:new M(n)}}}}},I5=function(r){return function(t){return function(e){return function(n){return{logDebug:e.logDebug,logError:e.logError,updateAnimation:e.updateAnimation,executeScript:new M(n)}}}}},qit=function(r){var t=r.Monad0(),e=t.Bind1(),n=lt(e),o=O(e.Apply0().Functor0()),a=Rr(r),i=$(t.Applicative0());return function(u){var l=Up(u);return function(s){return function(c){return zit(function(f){return n(o(Hs)(a(vu)))(function(d){return n(l(s(f)))(function(p){return n(o(Hs)(a(vu)))(function(h){return i(c({commandExecutionResult:p,commandParameters:f,finishTime:h,startTime:d}))})})})})}}}},N5=function(r){var t=qit(r);return function(e){var n=t(e);return function(o){return function(a){return function(i){return function(u){return function(l){return G_([n(i.executeScript)(u.executeScript)(l.executeScript),n(i.logDebug)(u.logDebug)(l.logDebug),n(i.logError)(u.logError)(l.logError),n(i.updateAnimation)(u.updateAnimation)(l.updateAnimation)])}}}}}}},Qn=function(r){return function(t){return{executeScript:P.value,logDebug:P.value,logError:P.value,updateAnimation:P.value}}};var Dl=function(r){return new Q(new tt(r.newModel,r.commands))},wl=function(){return G.create}();var k5={"genericEq'":function(r){return function(t){return!0}}},Fn=function(r){var t=Rt(r);return{"genericEq'":function(e){return function(n){return t(e)(n)}}}},P1=function(r){return r["genericEq'"]},vn=function(r){var t=P1(r);return{"genericEq'":function(e){return function(n){return t(e)(n)}}}};var uo=function(r){var t=P1(r);return function(e){var n=P1(e);return{"genericEq'":function(o){return function(a){return o instanceof It&&a instanceof It?t(o.value0)(a.value0):o instanceof B&&a instanceof B?n(o.value0)(a.value0):!1}}}}},Cu=function(r){var t=ms(r);return function(e){var n=P1(e);return function(o){return function(a){return n(t(o))(t(a))}}}};var $5=function(r){return function(t){return t.join(r)}};var Hit=bt(xo),L5={genericShowArgs:function(r){return[]}},wr=function(r){var t=U(r);return{genericShowArgs:function(e){return[t(e)]}}},Vit=function(r){return r.genericShowArgs};var mr=function(r){var t=Vit(r);return function(e){var n=Me(e);return{"genericShow'":function(o){var a=n(Zt.value),i=t(o);return i.length===0?a:"("+($5(" ")(Hit([a])(i))+")")}}}},HT=function(r){return r["genericShow'"]};var Sr=function(r){var t=HT(r);return function(e){var n=HT(e);return{"genericShow'":function(o){if(o instanceof It)return t(o.value0);if(o instanceof B)return n(o.value0);throw new Error("Failed pattern match at Data.Show.Generic (line 26, column 1 - line 28, column 40): "+[o.constructor.name])}}}},ci=function(r){var t=ms(r);return function(e){var n=HT(e);return function(o){return n(t(o))}}};var Vs=function(r){return r},N1={show:function(){var r=U(Pr);return function(t){return r(Vs(t))}}()},Of=function(r){return r>=0?r:0};var k1={eq:function(r){return function(t){return Vs(r)===Vs(t)}}};var U5=function(r){return function(t){return function(e){return Of(r(Vs(t))(Vs(e)))}}};var $1={one:Of(1),mul:U5(Co(Yu)),zero:Of(0),add:U5(Rn(Yu))};var Zit=ff();var nt=function(){function r(){}return r.value=new r,r}(),q=function(){function r(){}return r.value=new r,r}(),W1=function(){function r(){}return r.value=new r,r}();var l6=function(){function r(){}return r.value=new r,r}();var tR=function(){function r(){}return r.value=new r,r}();var eR=function(){function r(){}return r.value=new r,r}();var s6=function(){function r(){}return r.value=new r,r}();var Yit=1332;var c6=8192;var Xit=function(){return{category:c6,unicodeCat:eR.value,possible:1,updist:0,lowdist:26,titledist:0}}(),Jit=function(){return{category:c6,unicodeCat:eR.value,possible:1,updist:-26,lowdist:0,titledist:-26}}();var f6=16777216;var Kit=function(){return{category:f6,unicodeCat:tR.value,possible:1,updist:0,lowdist:16,titledist:0}}(),tut=function(){return{category:f6,unicodeCat:tR.value,possible:1,updist:-16,lowdist:0,titledist:-16}}();var eut=2097152;var rut=function(){return{category:eut,unicodeCat:l6.value,possible:1,updist:84,lowdist:0,titledist:84}}();var ot=512,nut=function(){return{category:ot,unicodeCat:s6.value,possible:0,updist:0,lowdist:0,titledist:0}}(),W5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:8,titledist:0}}();var out=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-60,titledist:0}}(),G5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-7,titledist:0}}(),aut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:80,titledist:0}}(),iut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:15,titledist:0}}(),z5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:48,titledist:0}}(),VT=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:7264,titledist:0}}(),uut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:38864,titledist:0}}(),q5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-3008,titledist:0}}(),lut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-7615,titledist:0}}(),oa=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-8,titledist:0}}(),sut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-74,titledist:0}}(),cut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-86,titledist:0}}(),fut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-100,titledist:0}}(),dut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-112,titledist:0}}(),put=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-128,titledist:0}}(),hut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-126,titledist:0}}(),mut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-7517,titledist:0}}(),vut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-8383,titledist:0}}(),gut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-8262,titledist:0}}(),_ut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:28,titledist:0}}(),yut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-10743,titledist:0}}(),but=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-3814,titledist:0}}(),Dut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-10727,titledist:0}}(),wut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-10780,titledist:0}}(),xut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-10749,titledist:0}}(),Tut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-10783,titledist:0}}(),Rut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-10782,titledist:0}}(),Cut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-10815,titledist:0}}(),Sut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-35332,titledist:0}}(),Out=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42280,titledist:0}}(),Q5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42308,titledist:0}}(),Eut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42319,titledist:0}}(),Fut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42315,titledist:0}}(),Mut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42305,titledist:0}}(),Aut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42258,titledist:0}}(),Put=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42282,titledist:0}}(),Iut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42261,titledist:0}}(),Nut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:928,titledist:0}}(),kut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-48,titledist:0}}(),$ut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-42307,titledist:0}}(),Lut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-35384,titledist:0}}(),H5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:40,titledist:0}}(),Uut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:34,titledist:0}}(),v=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:1,titledist:0}}(),But=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-199,titledist:0}}(),Wut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-121,titledist:0}}(),Gut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:210,titledist:0}}(),zut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:206,titledist:0}}(),V5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:205,titledist:0}}(),qut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:79,titledist:0}}(),Qut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:202,titledist:0}}(),Hut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:203,titledist:0}}(),Vut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:207,titledist:0}}(),j5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:211,titledist:0}}(),jut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:209,titledist:0}}(),Zut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:213,titledist:0}}(),Yut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:214,titledist:0}}(),jT=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:218,titledist:0}}(),Xut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:217,titledist:0}}(),Jut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:219,titledist:0}}(),L1=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:2,titledist:1}}(),Kut=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-97,titledist:0}}(),tlt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-56,titledist:0}}(),Z5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-130,titledist:0}}(),elt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:10795,titledist:0}}(),rlt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-163,titledist:0}}(),nlt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:10792,titledist:0}}(),olt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:-195,titledist:0}}(),alt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:69,titledist:0}}(),ilt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:71,titledist:0}}(),Su=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:32,titledist:0}}(),ult=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:116,titledist:0}}(),llt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:38,titledist:0}}(),slt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:37,titledist:0}}(),Y5=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:64,titledist:0}}(),clt=function(){return{category:ot,unicodeCat:nt.value,possible:1,updist:0,lowdist:63,titledist:0}}(),rR=524288,ZT=function(){return{category:rR,unicodeCat:W1.value,possible:1,updist:0,lowdist:-8,titledist:0}}(),YT=function(){return{category:rR,unicodeCat:W1.value,possible:1,updist:0,lowdist:-9,titledist:0}}(),U1=function(){return{category:rR,unicodeCat:W1.value,possible:1,updist:-1,lowdist:1,titledist:0}}();var H=4096,flt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-37,lowdist:0,titledist:-37}}(),dlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-31,lowdist:0,titledist:-31}}(),X5=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-64,lowdist:0,titledist:-64}}(),plt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-63,lowdist:0,titledist:-63}}(),hlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-62,lowdist:0,titledist:-62}}(),mlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-57,lowdist:0,titledist:-57}}(),vlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-47,lowdist:0,titledist:-47}}(),glt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-54,lowdist:0,titledist:-54}}(),J5=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-8,lowdist:0,titledist:-8}}(),_lt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-86,lowdist:0,titledist:-86}}(),K5=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-80,lowdist:0,titledist:-80}}(),t6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:7,lowdist:0,titledist:7}}(),ylt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-116,lowdist:0,titledist:-116}}(),blt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-96,lowdist:0,titledist:-96}}(),Ou=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-32,lowdist:0,titledist:-32}}(),Dlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-15,lowdist:0,titledist:-15}}(),e6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-48,lowdist:0,titledist:-48}}(),r6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:3008,lowdist:0,titledist:0}}(),wlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-6254,lowdist:0,titledist:-6254}}(),xlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-6253,lowdist:0,titledist:-6253}}(),Tlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-6244,lowdist:0,titledist:-6244}}(),Rlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-6242,lowdist:0,titledist:-6242}}(),Clt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-6243,lowdist:0,titledist:-6243}}(),Slt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-6236,lowdist:0,titledist:-6236}}(),Olt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-6181,lowdist:0,titledist:-6181}}(),Elt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:35266,lowdist:0,titledist:35266}}(),Flt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:35332,lowdist:0,titledist:35332}}(),Mlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:3814,lowdist:0,titledist:3814}}(),Alt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:35384,lowdist:0,titledist:35384}}(),Plt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-59,lowdist:0,titledist:-59}}(),Hn=function(){return{category:H,unicodeCat:q.value,possible:1,updist:8,lowdist:0,titledist:8}}(),Ilt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:74,lowdist:0,titledist:74}}(),Nlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:86,lowdist:0,titledist:86}}(),klt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:100,lowdist:0,titledist:100}}(),$lt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:128,lowdist:0,titledist:128}}(),Llt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:112,lowdist:0,titledist:112}}(),Ult=function(){return{category:H,unicodeCat:q.value,possible:1,updist:126,lowdist:0,titledist:126}}(),XT=function(){return{category:H,unicodeCat:q.value,possible:1,updist:9,lowdist:0,titledist:9}}(),Blt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-7205,lowdist:0,titledist:-7205}}(),Wlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-28,lowdist:0,titledist:-28}}(),Glt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-10795,lowdist:0,titledist:-10795}}(),zlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-10792,lowdist:0,titledist:-10792}}(),qlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:743,lowdist:0,titledist:743}}(),JT=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-7264,lowdist:0,titledist:-7264}}(),Qlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:48,lowdist:0,titledist:48}}(),Hlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-928,lowdist:0,titledist:-928}}(),Vlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-38864,lowdist:0,titledist:-38864}}();var n6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-40,lowdist:0,titledist:-40}}(),jlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-34,lowdist:0,titledist:-34}}(),Zlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:121,lowdist:0,titledist:121}}(),g=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-1,lowdist:0,titledist:-1}}(),Ylt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-232,lowdist:0,titledist:-232}}(),Xlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-300,lowdist:0,titledist:-300}}(),Jlt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:195,lowdist:0,titledist:195}}(),Klt=function(){return{category:H,unicodeCat:q.value,possible:1,updist:97,lowdist:0,titledist:97}}(),tst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:163,lowdist:0,titledist:163}}(),o6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:130,lowdist:0,titledist:130}}(),est=function(){return{category:H,unicodeCat:q.value,possible:1,updist:56,lowdist:0,titledist:56}}(),B1=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-2,lowdist:0,titledist:-1}}(),rst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-79,lowdist:0,titledist:-79}}(),nst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:10815,lowdist:0,titledist:10815}}(),ost=function(){return{category:H,unicodeCat:q.value,possible:1,updist:10783,lowdist:0,titledist:10783}}(),ast=function(){return{category:H,unicodeCat:q.value,possible:1,updist:10780,lowdist:0,titledist:10780}}(),ist=function(){return{category:H,unicodeCat:q.value,possible:1,updist:10782,lowdist:0,titledist:10782}}(),ust=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-210,lowdist:0,titledist:-210}}(),lst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-206,lowdist:0,titledist:-206}}(),a6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-205,lowdist:0,titledist:-205}}(),sst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-202,lowdist:0,titledist:-202}}(),cst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-203,lowdist:0,titledist:-203}}(),fst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42319,lowdist:0,titledist:42319}}(),dst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42315,lowdist:0,titledist:42315}}(),pst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-207,lowdist:0,titledist:-207}}(),hst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42280,lowdist:0,titledist:42280}}(),i6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42308,lowdist:0,titledist:42308}}(),mst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-209,lowdist:0,titledist:-209}}(),u6=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-211,lowdist:0,titledist:-211}}(),vst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:10743,lowdist:0,titledist:10743}}(),gst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42305,lowdist:0,titledist:42305}}(),_st=function(){return{category:H,unicodeCat:q.value,possible:1,updist:10749,lowdist:0,titledist:10749}}(),yst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-213,lowdist:0,titledist:-213}}(),bst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-214,lowdist:0,titledist:-214}}(),Dst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:10727,lowdist:0,titledist:10727}}(),KT=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-218,lowdist:0,titledist:-218}}(),wst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42307,lowdist:0,titledist:42307}}(),xst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42282,lowdist:0,titledist:42282}}(),Tst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-69,lowdist:0,titledist:-69}}(),Rst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-217,lowdist:0,titledist:-217}}(),Cst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-71,lowdist:0,titledist:-71}}(),Sst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-219,lowdist:0,titledist:-219}}(),Ost=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42261,lowdist:0,titledist:42261}}(),Est=function(){return{category:H,unicodeCat:q.value,possible:1,updist:42258,lowdist:0,titledist:42258}}(),Fst=function(){return{category:H,unicodeCat:q.value,possible:1,updist:-38,lowdist:0,titledist:-38}}();var Mst=[{start:65,length:26,convRule:Su},{start:97,length:26,convRule:Ou},{start:181,length:1,convRule:qlt},{start:192,length:23,convRule:Su},{start:216,length:7,convRule:Su},{start:224,length:23,convRule:Ou},{start:248,length:7,convRule:Ou},{start:255,length:1,convRule:Zlt},{start:256,length:1,convRule:v},{start:257,length:1,convRule:g},{start:258,length:1,convRule:v},{start:259,length:1,convRule:g},{start:260,length:1,convRule:v},{start:261,length:1,convRule:g},{start:262,length:1,convRule:v},{start:263,length:1,convRule:g},{start:264,length:1,convRule:v},{start:265,length:1,convRule:g},{start:266,length:1,convRule:v},{start:267,length:1,convRule:g},{start:268,length:1,convRule:v},{start:269,length:1,convRule:g},{start:270,length:1,convRule:v},{start:271,length:1,convRule:g},{start:272,length:1,convRule:v},{start:273,length:1,convRule:g},{start:274,length:1,convRule:v},{start:275,length:1,convRule:g},{start:276,length:1,convRule:v},{start:277,length:1,convRule:g},{start:278,length:1,convRule:v},{start:279,length:1,convRule:g},{start:280,length:1,convRule:v},{start:281,length:1,convRule:g},{start:282,length:1,convRule:v},{start:283,length:1,convRule:g},{start:284,length:1,convRule:v},{start:285,length:1,convRule:g},{start:286,length:1,convRule:v},{start:287,length:1,convRule:g},{start:288,length:1,convRule:v},{start:289,length:1,convRule:g},{start:290,length:1,convRule:v},{start:291,length:1,convRule:g},{start:292,length:1,convRule:v},{start:293,length:1,convRule:g},{start:294,length:1,convRule:v},{start:295,length:1,convRule:g},{start:296,length:1,convRule:v},{start:297,length:1,convRule:g},{start:298,length:1,convRule:v},{start:299,length:1,convRule:g},{start:300,length:1,convRule:v},{start:301,length:1,convRule:g},{start:302,length:1,convRule:v},{start:303,length:1,convRule:g},{start:304,length:1,convRule:But},{start:305,length:1,convRule:Ylt},{start:306,length:1,convRule:v},{start:307,length:1,convRule:g},{start:308,length:1,convRule:v},{start:309,length:1,convRule:g},{start:310,length:1,convRule:v},{start:311,length:1,convRule:g},{start:313,length:1,convRule:v},{start:314,length:1,convRule:g},{start:315,length:1,convRule:v},{start:316,length:1,convRule:g},{start:317,length:1,convRule:v},{start:318,length:1,convRule:g},{start:319,length:1,convRule:v},{start:320,length:1,convRule:g},{start:321,length:1,convRule:v},{start:322,length:1,convRule:g},{start:323,length:1,convRule:v},{start:324,length:1,convRule:g},{start:325,length:1,convRule:v},{start:326,length:1,convRule:g},{start:327,length:1,convRule:v},{start:328,length:1,convRule:g},{start:330,length:1,convRule:v},{start:331,length:1,convRule:g},{start:332,length:1,convRule:v},{start:333,length:1,convRule:g},{start:334,length:1,convRule:v},{start:335,length:1,convRule:g},{start:336,length:1,convRule:v},{start:337,length:1,convRule:g},{start:338,length:1,convRule:v},{start:339,length:1,convRule:g},{start:340,length:1,convRule:v},{start:341,length:1,convRule:g},{start:342,length:1,convRule:v},{start:343,length:1,convRule:g},{start:344,length:1,convRule:v},{start:345,length:1,convRule:g},{start:346,length:1,convRule:v},{start:347,length:1,convRule:g},{start:348,length:1,convRule:v},{start:349,length:1,convRule:g},{start:350,length:1,convRule:v},{start:351,length:1,convRule:g},{start:352,length:1,convRule:v},{start:353,length:1,convRule:g},{start:354,length:1,convRule:v},{start:355,length:1,convRule:g},{start:356,length:1,convRule:v},{start:357,length:1,convRule:g},{start:358,length:1,convRule:v},{start:359,length:1,convRule:g},{start:360,length:1,convRule:v},{start:361,length:1,convRule:g},{start:362,length:1,convRule:v},{start:363,length:1,convRule:g},{start:364,length:1,convRule:v},{start:365,length:1,convRule:g},{start:366,length:1,convRule:v},{start:367,length:1,convRule:g},{start:368,length:1,convRule:v},{start:369,length:1,convRule:g},{start:370,length:1,convRule:v},{start:371,length:1,convRule:g},{start:372,length:1,convRule:v},{start:373,length:1,convRule:g},{start:374,length:1,convRule:v},{start:375,length:1,convRule:g},{start:376,length:1,convRule:Wut},{start:377,length:1,convRule:v},{start:378,length:1,convRule:g},{start:379,length:1,convRule:v},{start:380,length:1,convRule:g},{start:381,length:1,convRule:v},{start:382,length:1,convRule:g},{start:383,length:1,convRule:Xlt},{start:384,length:1,convRule:Jlt},{start:385,length:1,convRule:Gut},{start:386,length:1,convRule:v},{start:387,length:1,convRule:g},{start:388,length:1,convRule:v},{start:389,length:1,convRule:g},{start:390,length:1,convRule:zut},{start:391,length:1,convRule:v},{start:392,length:1,convRule:g},{start:393,length:2,convRule:V5},{start:395,length:1,convRule:v},{start:396,length:1,convRule:g},{start:398,length:1,convRule:qut},{start:399,length:1,convRule:Qut},{start:400,length:1,convRule:Hut},{start:401,length:1,convRule:v},{start:402,length:1,convRule:g},{start:403,length:1,convRule:V5},{start:404,length:1,convRule:Vut},{start:405,length:1,convRule:Klt},{start:406,length:1,convRule:j5},{start:407,length:1,convRule:jut},{start:408,length:1,convRule:v},{start:409,length:1,convRule:g},{start:410,length:1,convRule:tst},{start:412,length:1,convRule:j5},{start:413,length:1,convRule:Zut},{start:414,length:1,convRule:o6},{start:415,length:1,convRule:Yut},{start:416,length:1,convRule:v},{start:417,length:1,convRule:g},{start:418,length:1,convRule:v},{start:419,length:1,convRule:g},{start:420,length:1,convRule:v},{start:421,length:1,convRule:g},{start:422,length:1,convRule:jT},{start:423,length:1,convRule:v},{start:424,length:1,convRule:g},{start:425,length:1,convRule:jT},{start:428,length:1,convRule:v},{start:429,length:1,convRule:g},{start:430,length:1,convRule:jT},{start:431,length:1,convRule:v},{start:432,length:1,convRule:g},{start:433,length:2,convRule:Xut},{start:435,length:1,convRule:v},{start:436,length:1,convRule:g},{start:437,length:1,convRule:v},{start:438,length:1,convRule:g},{start:439,length:1,convRule:Jut},{start:440,length:1,convRule:v},{start:441,length:1,convRule:g},{start:444,length:1,convRule:v},{start:445,length:1,convRule:g},{start:447,length:1,convRule:est},{start:452,length:1,convRule:L1},{start:453,length:1,convRule:U1},{start:454,length:1,convRule:B1},{start:455,length:1,convRule:L1},{start:456,length:1,convRule:U1},{start:457,length:1,convRule:B1},{start:458,length:1,convRule:L1},{start:459,length:1,convRule:U1},{start:460,length:1,convRule:B1},{start:461,length:1,convRule:v},{start:462,length:1,convRule:g},{start:463,length:1,convRule:v},{start:464,length:1,convRule:g},{start:465,length:1,convRule:v},{start:466,length:1,convRule:g},{start:467,length:1,convRule:v},{start:468,length:1,convRule:g},{start:469,length:1,convRule:v},{start:470,length:1,convRule:g},{start:471,length:1,convRule:v},{start:472,length:1,convRule:g},{start:473,length:1,convRule:v},{start:474,length:1,convRule:g},{start:475,length:1,convRule:v},{start:476,length:1,convRule:g},{start:477,length:1,convRule:rst},{start:478,length:1,convRule:v},{start:479,length:1,convRule:g},{start:480,length:1,convRule:v},{start:481,length:1,convRule:g},{start:482,length:1,convRule:v},{start:483,length:1,convRule:g},{start:484,length:1,convRule:v},{start:485,length:1,convRule:g},{start:486,length:1,convRule:v},{start:487,length:1,convRule:g},{start:488,length:1,convRule:v},{start:489,length:1,convRule:g},{start:490,length:1,convRule:v},{start:491,length:1,convRule:g},{start:492,length:1,convRule:v},{start:493,length:1,convRule:g},{start:494,length:1,convRule:v},{start:495,length:1,convRule:g},{start:497,length:1,convRule:L1},{start:498,length:1,convRule:U1},{start:499,length:1,convRule:B1},{start:500,length:1,convRule:v},{start:501,length:1,convRule:g},{start:502,length:1,convRule:Kut},{start:503,length:1,convRule:tlt},{start:504,length:1,convRule:v},{start:505,length:1,convRule:g},{start:506,length:1,convRule:v},{start:507,length:1,convRule:g},{start:508,length:1,convRule:v},{start:509,length:1,convRule:g},{start:510,length:1,convRule:v},{start:511,length:1,convRule:g},{start:512,length:1,convRule:v},{start:513,length:1,convRule:g},{start:514,length:1,convRule:v},{start:515,length:1,convRule:g},{start:516,length:1,convRule:v},{start:517,length:1,convRule:g},{start:518,length:1,convRule:v},{start:519,length:1,convRule:g},{start:520,length:1,convRule:v},{start:521,length:1,convRule:g},{start:522,length:1,convRule:v},{start:523,length:1,convRule:g},{start:524,length:1,convRule:v},{start:525,length:1,convRule:g},{start:526,length:1,convRule:v},{start:527,length:1,convRule:g},{start:528,length:1,convRule:v},{start:529,length:1,convRule:g},{start:530,length:1,convRule:v},{start:531,length:1,convRule:g},{start:532,length:1,convRule:v},{start:533,length:1,convRule:g},{start:534,length:1,convRule:v},{start:535,length:1,convRule:g},{start:536,length:1,convRule:v},{start:537,length:1,convRule:g},{start:538,length:1,convRule:v},{start:539,length:1,convRule:g},{start:540,length:1,convRule:v},{start:541,length:1,convRule:g},{start:542,length:1,convRule:v},{start:543,length:1,convRule:g},{start:544,length:1,convRule:Z5},{start:546,length:1,convRule:v},{start:547,length:1,convRule:g},{start:548,length:1,convRule:v},{start:549,length:1,convRule:g},{start:550,length:1,convRule:v},{start:551,length:1,convRule:g},{start:552,length:1,convRule:v},{start:553,length:1,convRule:g},{start:554,length:1,convRule:v},{start:555,length:1,convRule:g},{start:556,length:1,convRule:v},{start:557,length:1,convRule:g},{start:558,length:1,convRule:v},{start:559,length:1,convRule:g},{start:560,length:1,convRule:v},{start:561,length:1,convRule:g},{start:562,length:1,convRule:v},{start:563,length:1,convRule:g},{start:570,length:1,convRule:elt},{start:571,length:1,convRule:v},{start:572,length:1,convRule:g},{start:573,length:1,convRule:rlt},{start:574,length:1,convRule:nlt},{start:575,length:2,convRule:nst},{start:577,length:1,convRule:v},{start:578,length:1,convRule:g},{start:579,length:1,convRule:olt},{start:580,length:1,convRule:alt},{start:581,length:1,convRule:ilt},{start:582,length:1,convRule:v},{start:583,length:1,convRule:g},{start:584,length:1,convRule:v},{start:585,length:1,convRule:g},{start:586,length:1,convRule:v},{start:587,length:1,convRule:g},{start:588,length:1,convRule:v},{start:589,length:1,convRule:g},{start:590,length:1,convRule:v},{start:591,length:1,convRule:g},{start:592,length:1,convRule:ost},{start:593,length:1,convRule:ast},{start:594,length:1,convRule:ist},{start:595,length:1,convRule:ust},{start:596,length:1,convRule:lst},{start:598,length:2,convRule:a6},{start:601,length:1,convRule:sst},{start:603,length:1,convRule:cst},{start:604,length:1,convRule:fst},{start:608,length:1,convRule:a6},{start:609,length:1,convRule:dst},{start:611,length:1,convRule:pst},{start:613,length:1,convRule:hst},{start:614,length:1,convRule:i6},{start:616,length:1,convRule:mst},{start:617,length:1,convRule:u6},{start:618,length:1,convRule:i6},{start:619,length:1,convRule:vst},{start:620,length:1,convRule:gst},{start:623,length:1,convRule:u6},{start:625,length:1,convRule:_st},{start:626,length:1,convRule:yst},{start:629,length:1,convRule:bst},{start:637,length:1,convRule:Dst},{start:640,length:1,convRule:KT},{start:642,length:1,convRule:wst},{start:643,length:1,convRule:KT},{start:647,length:1,convRule:xst},{start:648,length:1,convRule:KT},{start:649,length:1,convRule:Tst},{start:650,length:2,convRule:Rst},{start:652,length:1,convRule:Cst},{start:658,length:1,convRule:Sst},{start:669,length:1,convRule:Ost},{start:670,length:1,convRule:Est},{start:837,length:1,convRule:rut},{start:880,length:1,convRule:v},{start:881,length:1,convRule:g},{start:882,length:1,convRule:v},{start:883,length:1,convRule:g},{start:886,length:1,convRule:v},{start:887,length:1,convRule:g},{start:891,length:3,convRule:o6},{start:895,length:1,convRule:ult},{start:902,length:1,convRule:llt},{start:904,length:3,convRule:slt},{start:908,length:1,convRule:Y5},{start:910,length:2,convRule:clt},{start:913,length:17,convRule:Su},{start:931,length:9,convRule:Su},{start:940,length:1,convRule:Fst},{start:941,length:3,convRule:flt},{start:945,length:17,convRule:Ou},{start:962,length:1,convRule:dlt},{start:963,length:9,convRule:Ou},{start:972,length:1,convRule:X5},{start:973,length:2,convRule:plt},{start:975,length:1,convRule:W5},{start:976,length:1,convRule:hlt},{start:977,length:1,convRule:mlt},{start:981,length:1,convRule:vlt},{start:982,length:1,convRule:glt},{start:983,length:1,convRule:J5},{start:984,length:1,convRule:v},{start:985,length:1,convRule:g},{start:986,length:1,convRule:v},{start:987,length:1,convRule:g},{start:988,length:1,convRule:v},{start:989,length:1,convRule:g},{start:990,length:1,convRule:v},{start:991,length:1,convRule:g},{start:992,length:1,convRule:v},{start:993,length:1,convRule:g},{start:994,length:1,convRule:v},{start:995,length:1,convRule:g},{start:996,length:1,convRule:v},{start:997,length:1,convRule:g},{start:998,length:1,convRule:v},{start:999,length:1,convRule:g},{start:1e3,length:1,convRule:v},{start:1001,length:1,convRule:g},{start:1002,length:1,convRule:v},{start:1003,length:1,convRule:g},{start:1004,length:1,convRule:v},{start:1005,length:1,convRule:g},{start:1006,length:1,convRule:v},{start:1007,length:1,convRule:g},{start:1008,length:1,convRule:_lt},{start:1009,length:1,convRule:K5},{start:1010,length:1,convRule:t6},{start:1011,length:1,convRule:ylt},{start:1012,length:1,convRule:out},{start:1013,length:1,convRule:blt},{start:1015,length:1,convRule:v},{start:1016,length:1,convRule:g},{start:1017,length:1,convRule:G5},{start:1018,length:1,convRule:v},{start:1019,length:1,convRule:g},{start:1021,length:3,convRule:Z5},{start:1024,length:16,convRule:aut},{start:1040,length:32,convRule:Su},{start:1072,length:32,convRule:Ou},{start:1104,length:16,convRule:K5},{start:1120,length:1,convRule:v},{start:1121,length:1,convRule:g},{start:1122,length:1,convRule:v},{start:1123,length:1,convRule:g},{start:1124,length:1,convRule:v},{start:1125,length:1,convRule:g},{start:1126,length:1,convRule:v},{start:1127,length:1,convRule:g},{start:1128,length:1,convRule:v},{start:1129,length:1,convRule:g},{start:1130,length:1,convRule:v},{start:1131,length:1,convRule:g},{start:1132,length:1,convRule:v},{start:1133,length:1,convRule:g},{start:1134,length:1,convRule:v},{start:1135,length:1,convRule:g},{start:1136,length:1,convRule:v},{start:1137,length:1,convRule:g},{start:1138,length:1,convRule:v},{start:1139,length:1,convRule:g},{start:1140,length:1,convRule:v},{start:1141,length:1,convRule:g},{start:1142,length:1,convRule:v},{start:1143,length:1,convRule:g},{start:1144,length:1,convRule:v},{start:1145,length:1,convRule:g},{start:1146,length:1,convRule:v},{start:1147,length:1,convRule:g},{start:1148,length:1,convRule:v},{start:1149,length:1,convRule:g},{start:1150,length:1,convRule:v},{start:1151,length:1,convRule:g},{start:1152,length:1,convRule:v},{start:1153,length:1,convRule:g},{start:1162,length:1,convRule:v},{start:1163,length:1,convRule:g},{start:1164,length:1,convRule:v},{start:1165,length:1,convRule:g},{start:1166,length:1,convRule:v},{start:1167,length:1,convRule:g},{start:1168,length:1,convRule:v},{start:1169,length:1,convRule:g},{start:1170,length:1,convRule:v},{start:1171,length:1,convRule:g},{start:1172,length:1,convRule:v},{start:1173,length:1,convRule:g},{start:1174,length:1,convRule:v},{start:1175,length:1,convRule:g},{start:1176,length:1,convRule:v},{start:1177,length:1,convRule:g},{start:1178,length:1,convRule:v},{start:1179,length:1,convRule:g},{start:1180,length:1,convRule:v},{start:1181,length:1,convRule:g},{start:1182,length:1,convRule:v},{start:1183,length:1,convRule:g},{start:1184,length:1,convRule:v},{start:1185,length:1,convRule:g},{start:1186,length:1,convRule:v},{start:1187,length:1,convRule:g},{start:1188,length:1,convRule:v},{start:1189,length:1,convRule:g},{start:1190,length:1,convRule:v},{start:1191,length:1,convRule:g},{start:1192,length:1,convRule:v},{start:1193,length:1,convRule:g},{start:1194,length:1,convRule:v},{start:1195,length:1,convRule:g},{start:1196,length:1,convRule:v},{start:1197,length:1,convRule:g},{start:1198,length:1,convRule:v},{start:1199,length:1,convRule:g},{start:1200,length:1,convRule:v},{start:1201,length:1,convRule:g},{start:1202,length:1,convRule:v},{start:1203,length:1,convRule:g},{start:1204,length:1,convRule:v},{start:1205,length:1,convRule:g},{start:1206,length:1,convRule:v},{start:1207,length:1,convRule:g},{start:1208,length:1,convRule:v},{start:1209,length:1,convRule:g},{start:1210,length:1,convRule:v},{start:1211,length:1,convRule:g},{start:1212,length:1,convRule:v},{start:1213,length:1,convRule:g},{start:1214,length:1,convRule:v},{start:1215,length:1,convRule:g},{start:1216,length:1,convRule:iut},{start:1217,length:1,convRule:v},{start:1218,length:1,convRule:g},{start:1219,length:1,convRule:v},{start:1220,length:1,convRule:g},{start:1221,length:1,convRule:v},{start:1222,length:1,convRule:g},{start:1223,length:1,convRule:v},{start:1224,length:1,convRule:g},{start:1225,length:1,convRule:v},{start:1226,length:1,convRule:g},{start:1227,length:1,convRule:v},{start:1228,length:1,convRule:g},{start:1229,length:1,convRule:v},{start:1230,length:1,convRule:g},{start:1231,length:1,convRule:Dlt},{start:1232,length:1,convRule:v},{start:1233,length:1,convRule:g},{start:1234,length:1,convRule:v},{start:1235,length:1,convRule:g},{start:1236,length:1,convRule:v},{start:1237,length:1,convRule:g},{start:1238,length:1,convRule:v},{start:1239,length:1,convRule:g},{start:1240,length:1,convRule:v},{start:1241,length:1,convRule:g},{start:1242,length:1,convRule:v},{start:1243,length:1,convRule:g},{start:1244,length:1,convRule:v},{start:1245,length:1,convRule:g},{start:1246,length:1,convRule:v},{start:1247,length:1,convRule:g},{start:1248,length:1,convRule:v},{start:1249,length:1,convRule:g},{start:1250,length:1,convRule:v},{start:1251,length:1,convRule:g},{start:1252,length:1,convRule:v},{start:1253,length:1,convRule:g},{start:1254,length:1,convRule:v},{start:1255,length:1,convRule:g},{start:1256,length:1,convRule:v},{start:1257,length:1,convRule:g},{start:1258,length:1,convRule:v},{start:1259,length:1,convRule:g},{start:1260,length:1,convRule:v},{start:1261,length:1,convRule:g},{start:1262,length:1,convRule:v},{start:1263,length:1,convRule:g},{start:1264,length:1,convRule:v},{start:1265,length:1,convRule:g},{start:1266,length:1,convRule:v},{start:1267,length:1,convRule:g},{start:1268,length:1,convRule:v},{start:1269,length:1,convRule:g},{start:1270,length:1,convRule:v},{start:1271,length:1,convRule:g},{start:1272,length:1,convRule:v},{start:1273,length:1,convRule:g},{start:1274,length:1,convRule:v},{start:1275,length:1,convRule:g},{start:1276,length:1,convRule:v},{start:1277,length:1,convRule:g},{start:1278,length:1,convRule:v},{start:1279,length:1,convRule:g},{start:1280,length:1,convRule:v},{start:1281,length:1,convRule:g},{start:1282,length:1,convRule:v},{start:1283,length:1,convRule:g},{start:1284,length:1,convRule:v},{start:1285,length:1,convRule:g},{start:1286,length:1,convRule:v},{start:1287,length:1,convRule:g},{start:1288,length:1,convRule:v},{start:1289,length:1,convRule:g},{start:1290,length:1,convRule:v},{start:1291,length:1,convRule:g},{start:1292,length:1,convRule:v},{start:1293,length:1,convRule:g},{start:1294,length:1,convRule:v},{start:1295,length:1,convRule:g},{start:1296,length:1,convRule:v},{start:1297,length:1,convRule:g},{start:1298,length:1,convRule:v},{start:1299,length:1,convRule:g},{start:1300,length:1,convRule:v},{start:1301,length:1,convRule:g},{start:1302,length:1,convRule:v},{start:1303,length:1,convRule:g},{start:1304,length:1,convRule:v},{start:1305,length:1,convRule:g},{start:1306,length:1,convRule:v},{start:1307,length:1,convRule:g},{start:1308,length:1,convRule:v},{start:1309,length:1,convRule:g},{start:1310,length:1,convRule:v},{start:1311,length:1,convRule:g},{start:1312,length:1,convRule:v},{start:1313,length:1,convRule:g},{start:1314,length:1,convRule:v},{start:1315,length:1,convRule:g},{start:1316,length:1,convRule:v},{start:1317,length:1,convRule:g},{start:1318,length:1,convRule:v},{start:1319,length:1,convRule:g},{start:1320,length:1,convRule:v},{start:1321,length:1,convRule:g},{start:1322,length:1,convRule:v},{start:1323,length:1,convRule:g},{start:1324,length:1,convRule:v},{start:1325,length:1,convRule:g},{start:1326,length:1,convRule:v},{start:1327,length:1,convRule:g},{start:1329,length:38,convRule:z5},{start:1377,length:38,convRule:e6},{start:4256,length:38,convRule:VT},{start:4295,length:1,convRule:VT},{start:4301,length:1,convRule:VT},{start:4304,length:43,convRule:r6},{start:4349,length:3,convRule:r6},{start:5024,length:80,convRule:uut},{start:5104,length:6,convRule:W5},{start:5112,length:6,convRule:J5},{start:7296,length:1,convRule:wlt},{start:7297,length:1,convRule:xlt},{start:7298,length:1,convRule:Tlt},{start:7299,length:2,convRule:Rlt},{start:7301,length:1,convRule:Clt},{start:7302,length:1,convRule:Slt},{start:7303,length:1,convRule:Olt},{start:7304,length:1,convRule:Elt},{start:7312,length:43,convRule:q5},{start:7357,length:3,convRule:q5},{start:7545,length:1,convRule:Flt},{start:7549,length:1,convRule:Mlt},{start:7566,length:1,convRule:Alt},{start:7680,length:1,convRule:v},{start:7681,length:1,convRule:g},{start:7682,length:1,convRule:v},{start:7683,length:1,convRule:g},{start:7684,length:1,convRule:v},{start:7685,length:1,convRule:g},{start:7686,length:1,convRule:v},{start:7687,length:1,convRule:g},{start:7688,length:1,convRule:v},{start:7689,length:1,convRule:g},{start:7690,length:1,convRule:v},{start:7691,length:1,convRule:g},{start:7692,length:1,convRule:v},{start:7693,length:1,convRule:g},{start:7694,length:1,convRule:v},{start:7695,length:1,convRule:g},{start:7696,length:1,convRule:v},{start:7697,length:1,convRule:g},{start:7698,length:1,convRule:v},{start:7699,length:1,convRule:g},{start:7700,length:1,convRule:v},{start:7701,length:1,convRule:g},{start:7702,length:1,convRule:v},{start:7703,length:1,convRule:g},{start:7704,length:1,convRule:v},{start:7705,length:1,convRule:g},{start:7706,length:1,convRule:v},{start:7707,length:1,convRule:g},{start:7708,length:1,convRule:v},{start:7709,length:1,convRule:g},{start:7710,length:1,convRule:v},{start:7711,length:1,convRule:g},{start:7712,length:1,convRule:v},{start:7713,length:1,convRule:g},{start:7714,length:1,convRule:v},{start:7715,length:1,convRule:g},{start:7716,length:1,convRule:v},{start:7717,length:1,convRule:g},{start:7718,length:1,convRule:v},{start:7719,length:1,convRule:g},{start:7720,length:1,convRule:v},{start:7721,length:1,convRule:g},{start:7722,length:1,convRule:v},{start:7723,length:1,convRule:g},{start:7724,length:1,convRule:v},{start:7725,length:1,convRule:g},{start:7726,length:1,convRule:v},{start:7727,length:1,convRule:g},{start:7728,length:1,convRule:v},{start:7729,length:1,convRule:g},{start:7730,length:1,convRule:v},{start:7731,length:1,convRule:g},{start:7732,length:1,convRule:v},{start:7733,length:1,convRule:g},{start:7734,length:1,convRule:v},{start:7735,length:1,convRule:g},{start:7736,length:1,convRule:v},{start:7737,length:1,convRule:g},{start:7738,length:1,convRule:v},{start:7739,length:1,convRule:g},{start:7740,length:1,convRule:v},{start:7741,length:1,convRule:g},{start:7742,length:1,convRule:v},{start:7743,length:1,convRule:g},{start:7744,length:1,convRule:v},{start:7745,length:1,convRule:g},{start:7746,length:1,convRule:v},{start:7747,length:1,convRule:g},{start:7748,length:1,convRule:v},{start:7749,length:1,convRule:g},{start:7750,length:1,convRule:v},{start:7751,length:1,convRule:g},{start:7752,length:1,convRule:v},{start:7753,length:1,convRule:g},{start:7754,length:1,convRule:v},{start:7755,length:1,convRule:g},{start:7756,length:1,convRule:v},{start:7757,length:1,convRule:g},{start:7758,length:1,convRule:v},{start:7759,length:1,convRule:g},{start:7760,length:1,convRule:v},{start:7761,length:1,convRule:g},{start:7762,length:1,convRule:v},{start:7763,length:1,convRule:g},{start:7764,length:1,convRule:v},{start:7765,length:1,convRule:g},{start:7766,length:1,convRule:v},{start:7767,length:1,convRule:g},{start:7768,length:1,convRule:v},{start:7769,length:1,convRule:g},{start:7770,length:1,convRule:v},{start:7771,length:1,convRule:g},{start:7772,length:1,convRule:v},{start:7773,length:1,convRule:g},{start:7774,length:1,convRule:v},{start:7775,length:1,convRule:g},{start:7776,length:1,convRule:v},{start:7777,length:1,convRule:g},{start:7778,length:1,convRule:v},{start:7779,length:1,convRule:g},{start:7780,length:1,convRule:v},{start:7781,length:1,convRule:g},{start:7782,length:1,convRule:v},{start:7783,length:1,convRule:g},{start:7784,length:1,convRule:v},{start:7785,length:1,convRule:g},{start:7786,length:1,convRule:v},{start:7787,length:1,convRule:g},{start:7788,length:1,convRule:v},{start:7789,length:1,convRule:g},{start:7790,length:1,convRule:v},{start:7791,length:1,convRule:g},{start:7792,length:1,convRule:v},{start:7793,length:1,convRule:g},{start:7794,length:1,convRule:v},{start:7795,length:1,convRule:g},{start:7796,length:1,convRule:v},{start:7797,length:1,convRule:g},{start:7798,length:1,convRule:v},{start:7799,length:1,convRule:g},{start:7800,length:1,convRule:v},{start:7801,length:1,convRule:g},{start:7802,length:1,convRule:v},{start:7803,length:1,convRule:g},{start:7804,length:1,convRule:v},{start:7805,length:1,convRule:g},{start:7806,length:1,convRule:v},{start:7807,length:1,convRule:g},{start:7808,length:1,convRule:v},{start:7809,length:1,convRule:g},{start:7810,length:1,convRule:v},{start:7811,length:1,convRule:g},{start:7812,length:1,convRule:v},{start:7813,length:1,convRule:g},{start:7814,length:1,convRule:v},{start:7815,length:1,convRule:g},{start:7816,length:1,convRule:v},{start:7817,length:1,convRule:g},{start:7818,length:1,convRule:v},{start:7819,length:1,convRule:g},{start:7820,length:1,convRule:v},{start:7821,length:1,convRule:g},{start:7822,length:1,convRule:v},{start:7823,length:1,convRule:g},{start:7824,length:1,convRule:v},{start:7825,length:1,convRule:g},{start:7826,length:1,convRule:v},{start:7827,length:1,convRule:g},{start:7828,length:1,convRule:v},{start:7829,length:1,convRule:g},{start:7835,length:1,convRule:Plt},{start:7838,length:1,convRule:lut},{start:7840,length:1,convRule:v},{start:7841,length:1,convRule:g},{start:7842,length:1,convRule:v},{start:7843,length:1,convRule:g},{start:7844,length:1,convRule:v},{start:7845,length:1,convRule:g},{start:7846,length:1,convRule:v},{start:7847,length:1,convRule:g},{start:7848,length:1,convRule:v},{start:7849,length:1,convRule:g},{start:7850,length:1,convRule:v},{start:7851,length:1,convRule:g},{start:7852,length:1,convRule:v},{start:7853,length:1,convRule:g},{start:7854,length:1,convRule:v},{start:7855,length:1,convRule:g},{start:7856,length:1,convRule:v},{start:7857,length:1,convRule:g},{start:7858,length:1,convRule:v},{start:7859,length:1,convRule:g},{start:7860,length:1,convRule:v},{start:7861,length:1,convRule:g},{start:7862,length:1,convRule:v},{start:7863,length:1,convRule:g},{start:7864,length:1,convRule:v},{start:7865,length:1,convRule:g},{start:7866,length:1,convRule:v},{start:7867,length:1,convRule:g},{start:7868,length:1,convRule:v},{start:7869,length:1,convRule:g},{start:7870,length:1,convRule:v},{start:7871,length:1,convRule:g},{start:7872,length:1,convRule:v},{start:7873,length:1,convRule:g},{start:7874,length:1,convRule:v},{start:7875,length:1,convRule:g},{start:7876,length:1,convRule:v},{start:7877,length:1,convRule:g},{start:7878,length:1,convRule:v},{start:7879,length:1,convRule:g},{start:7880,length:1,convRule:v},{start:7881,length:1,convRule:g},{start:7882,length:1,convRule:v},{start:7883,length:1,convRule:g},{start:7884,length:1,convRule:v},{start:7885,length:1,convRule:g},{start:7886,length:1,convRule:v},{start:7887,length:1,convRule:g},{start:7888,length:1,convRule:v},{start:7889,length:1,convRule:g},{start:7890,length:1,convRule:v},{start:7891,length:1,convRule:g},{start:7892,length:1,convRule:v},{start:7893,length:1,convRule:g},{start:7894,length:1,convRule:v},{start:7895,length:1,convRule:g},{start:7896,length:1,convRule:v},{start:7897,length:1,convRule:g},{start:7898,length:1,convRule:v},{start:7899,length:1,convRule:g},{start:7900,length:1,convRule:v},{start:7901,length:1,convRule:g},{start:7902,length:1,convRule:v},{start:7903,length:1,convRule:g},{start:7904,length:1,convRule:v},{start:7905,length:1,convRule:g},{start:7906,length:1,convRule:v},{start:7907,length:1,convRule:g},{start:7908,length:1,convRule:v},{start:7909,length:1,convRule:g},{start:7910,length:1,convRule:v},{start:7911,length:1,convRule:g},{start:7912,length:1,convRule:v},{start:7913,length:1,convRule:g},{start:7914,length:1,convRule:v},{start:7915,length:1,convRule:g},{start:7916,length:1,convRule:v},{start:7917,length:1,convRule:g},{start:7918,length:1,convRule:v},{start:7919,length:1,convRule:g},{start:7920,length:1,convRule:v},{start:7921,length:1,convRule:g},{start:7922,length:1,convRule:v},{start:7923,length:1,convRule:g},{start:7924,length:1,convRule:v},{start:7925,length:1,convRule:g},{start:7926,length:1,convRule:v},{start:7927,length:1,convRule:g},{start:7928,length:1,convRule:v},{start:7929,length:1,convRule:g},{start:7930,length:1,convRule:v},{start:7931,length:1,convRule:g},{start:7932,length:1,convRule:v},{start:7933,length:1,convRule:g},{start:7934,length:1,convRule:v},{start:7935,length:1,convRule:g},{start:7936,length:8,convRule:Hn},{start:7944,length:8,convRule:oa},{start:7952,length:6,convRule:Hn},{start:7960,length:6,convRule:oa},{start:7968,length:8,convRule:Hn},{start:7976,length:8,convRule:oa},{start:7984,length:8,convRule:Hn},{start:7992,length:8,convRule:oa},{start:8e3,length:6,convRule:Hn},{start:8008,length:6,convRule:oa},{start:8017,length:1,convRule:Hn},{start:8019,length:1,convRule:Hn},{start:8021,length:1,convRule:Hn},{start:8023,length:1,convRule:Hn},{start:8025,length:1,convRule:oa},{start:8027,length:1,convRule:oa},{start:8029,length:1,convRule:oa},{start:8031,length:1,convRule:oa},{start:8032,length:8,convRule:Hn},{start:8040,length:8,convRule:oa},{start:8048,length:2,convRule:Ilt},{start:8050,length:4,convRule:Nlt},{start:8054,length:2,convRule:klt},{start:8056,length:2,convRule:$lt},{start:8058,length:2,convRule:Llt},{start:8060,length:2,convRule:Ult},{start:8064,length:8,convRule:Hn},{start:8072,length:8,convRule:ZT},{start:8080,length:8,convRule:Hn},{start:8088,length:8,convRule:ZT},{start:8096,length:8,convRule:Hn},{start:8104,length:8,convRule:ZT},{start:8112,length:2,convRule:Hn},{start:8115,length:1,convRule:XT},{start:8120,length:2,convRule:oa},{start:8122,length:2,convRule:sut},{start:8124,length:1,convRule:YT},{start:8126,length:1,convRule:Blt},{start:8131,length:1,convRule:XT},{start:8136,length:4,convRule:cut},{start:8140,length:1,convRule:YT},{start:8144,length:2,convRule:Hn},{start:8152,length:2,convRule:oa},{start:8154,length:2,convRule:fut},{start:8160,length:2,convRule:Hn},{start:8165,length:1,convRule:t6},{start:8168,length:2,convRule:oa},{start:8170,length:2,convRule:dut},{start:8172,length:1,convRule:G5},{start:8179,length:1,convRule:XT},{start:8184,length:2,convRule:put},{start:8186,length:2,convRule:hut},{start:8188,length:1,convRule:YT},{start:8486,length:1,convRule:mut},{start:8490,length:1,convRule:vut},{start:8491,length:1,convRule:gut},{start:8498,length:1,convRule:_ut},{start:8526,length:1,convRule:Wlt},{start:8544,length:16,convRule:Kit},{start:8560,length:16,convRule:tut},{start:8579,length:1,convRule:v},{start:8580,length:1,convRule:g},{start:9398,length:26,convRule:Xit},{start:9424,length:26,convRule:Jit},{start:11264,length:47,convRule:z5},{start:11312,length:47,convRule:e6},{start:11360,length:1,convRule:v},{start:11361,length:1,convRule:g},{start:11362,length:1,convRule:yut},{start:11363,length:1,convRule:but},{start:11364,length:1,convRule:Dut},{start:11365,length:1,convRule:Glt},{start:11366,length:1,convRule:zlt},{start:11367,length:1,convRule:v},{start:11368,length:1,convRule:g},{start:11369,length:1,convRule:v},{start:11370,length:1,convRule:g},{start:11371,length:1,convRule:v},{start:11372,length:1,convRule:g},{start:11373,length:1,convRule:wut},{start:11374,length:1,convRule:xut},{start:11375,length:1,convRule:Tut},{start:11376,length:1,convRule:Rut},{start:11378,length:1,convRule:v},{start:11379,length:1,convRule:g},{start:11381,length:1,convRule:v},{start:11382,length:1,convRule:g},{start:11390,length:2,convRule:Cut},{start:11392,length:1,convRule:v},{start:11393,length:1,convRule:g},{start:11394,length:1,convRule:v},{start:11395,length:1,convRule:g},{start:11396,length:1,convRule:v},{start:11397,length:1,convRule:g},{start:11398,length:1,convRule:v},{start:11399,length:1,convRule:g},{start:11400,length:1,convRule:v},{start:11401,length:1,convRule:g},{start:11402,length:1,convRule:v},{start:11403,length:1,convRule:g},{start:11404,length:1,convRule:v},{start:11405,length:1,convRule:g},{start:11406,length:1,convRule:v},{start:11407,length:1,convRule:g},{start:11408,length:1,convRule:v},{start:11409,length:1,convRule:g},{start:11410,length:1,convRule:v},{start:11411,length:1,convRule:g},{start:11412,length:1,convRule:v},{start:11413,length:1,convRule:g},{start:11414,length:1,convRule:v},{start:11415,length:1,convRule:g},{start:11416,length:1,convRule:v},{start:11417,length:1,convRule:g},{start:11418,length:1,convRule:v},{start:11419,length:1,convRule:g},{start:11420,length:1,convRule:v},{start:11421,length:1,convRule:g},{start:11422,length:1,convRule:v},{start:11423,length:1,convRule:g},{start:11424,length:1,convRule:v},{start:11425,length:1,convRule:g},{start:11426,length:1,convRule:v},{start:11427,length:1,convRule:g},{start:11428,length:1,convRule:v},{start:11429,length:1,convRule:g},{start:11430,length:1,convRule:v},{start:11431,length:1,convRule:g},{start:11432,length:1,convRule:v},{start:11433,length:1,convRule:g},{start:11434,length:1,convRule:v},{start:11435,length:1,convRule:g},{start:11436,length:1,convRule:v},{start:11437,length:1,convRule:g},{start:11438,length:1,convRule:v},{start:11439,length:1,convRule:g},{start:11440,length:1,convRule:v},{start:11441,length:1,convRule:g},{start:11442,length:1,convRule:v},{start:11443,length:1,convRule:g},{start:11444,length:1,convRule:v},{start:11445,length:1,convRule:g},{start:11446,length:1,convRule:v},{start:11447,length:1,convRule:g},{start:11448,length:1,convRule:v},{start:11449,length:1,convRule:g},{start:11450,length:1,convRule:v},{start:11451,length:1,convRule:g},{start:11452,length:1,convRule:v},{start:11453,length:1,convRule:g},{start:11454,length:1,convRule:v},{start:11455,length:1,convRule:g},{start:11456,length:1,convRule:v},{start:11457,length:1,convRule:g},{start:11458,length:1,convRule:v},{start:11459,length:1,convRule:g},{start:11460,length:1,convRule:v},{start:11461,length:1,convRule:g},{start:11462,length:1,convRule:v},{start:11463,length:1,convRule:g},{start:11464,length:1,convRule:v},{start:11465,length:1,convRule:g},{start:11466,length:1,convRule:v},{start:11467,length:1,convRule:g},{start:11468,length:1,convRule:v},{start:11469,length:1,convRule:g},{start:11470,length:1,convRule:v},{start:11471,length:1,convRule:g},{start:11472,length:1,convRule:v},{start:11473,length:1,convRule:g},{start:11474,length:1,convRule:v},{start:11475,length:1,convRule:g},{start:11476,length:1,convRule:v},{start:11477,length:1,convRule:g},{start:11478,length:1,convRule:v},{start:11479,length:1,convRule:g},{start:11480,length:1,convRule:v},{start:11481,length:1,convRule:g},{start:11482,length:1,convRule:v},{start:11483,length:1,convRule:g},{start:11484,length:1,convRule:v},{start:11485,length:1,convRule:g},{start:11486,length:1,convRule:v},{start:11487,length:1,convRule:g},{start:11488,length:1,convRule:v},{start:11489,length:1,convRule:g},{start:11490,length:1,convRule:v},{start:11491,length:1,convRule:g},{start:11499,length:1,convRule:v},{start:11500,length:1,convRule:g},{start:11501,length:1,convRule:v},{start:11502,length:1,convRule:g},{start:11506,length:1,convRule:v},{start:11507,length:1,convRule:g},{start:11520,length:38,convRule:JT},{start:11559,length:1,convRule:JT},{start:11565,length:1,convRule:JT},{start:42560,length:1,convRule:v},{start:42561,length:1,convRule:g},{start:42562,length:1,convRule:v},{start:42563,length:1,convRule:g},{start:42564,length:1,convRule:v},{start:42565,length:1,convRule:g},{start:42566,length:1,convRule:v},{start:42567,length:1,convRule:g},{start:42568,length:1,convRule:v},{start:42569,length:1,convRule:g},{start:42570,length:1,convRule:v},{start:42571,length:1,convRule:g},{start:42572,length:1,convRule:v},{start:42573,length:1,convRule:g},{start:42574,length:1,convRule:v},{start:42575,length:1,convRule:g},{start:42576,length:1,convRule:v},{start:42577,length:1,convRule:g},{start:42578,length:1,convRule:v},{start:42579,length:1,convRule:g},{start:42580,length:1,convRule:v},{start:42581,length:1,convRule:g},{start:42582,length:1,convRule:v},{start:42583,length:1,convRule:g},{start:42584,length:1,convRule:v},{start:42585,length:1,convRule:g},{start:42586,length:1,convRule:v},{start:42587,length:1,convRule:g},{start:42588,length:1,convRule:v},{start:42589,length:1,convRule:g},{start:42590,length:1,convRule:v},{start:42591,length:1,convRule:g},{start:42592,length:1,convRule:v},{start:42593,length:1,convRule:g},{start:42594,length:1,convRule:v},{start:42595,length:1,convRule:g},{start:42596,length:1,convRule:v},{start:42597,length:1,convRule:g},{start:42598,length:1,convRule:v},{start:42599,length:1,convRule:g},{start:42600,length:1,convRule:v},{start:42601,length:1,convRule:g},{start:42602,length:1,convRule:v},{start:42603,length:1,convRule:g},{start:42604,length:1,convRule:v},{start:42605,length:1,convRule:g},{start:42624,length:1,convRule:v},{start:42625,length:1,convRule:g},{start:42626,length:1,convRule:v},{start:42627,length:1,convRule:g},{start:42628,length:1,convRule:v},{start:42629,length:1,convRule:g},{start:42630,length:1,convRule:v},{start:42631,length:1,convRule:g},{start:42632,length:1,convRule:v},{start:42633,length:1,convRule:g},{start:42634,length:1,convRule:v},{start:42635,length:1,convRule:g},{start:42636,length:1,convRule:v},{start:42637,length:1,convRule:g},{start:42638,length:1,convRule:v},{start:42639,length:1,convRule:g},{start:42640,length:1,convRule:v},{start:42641,length:1,convRule:g},{start:42642,length:1,convRule:v},{start:42643,length:1,convRule:g},{start:42644,length:1,convRule:v},{start:42645,length:1,convRule:g},{start:42646,length:1,convRule:v},{start:42647,length:1,convRule:g},{start:42648,length:1,convRule:v},{start:42649,length:1,convRule:g},{start:42650,length:1,convRule:v},{start:42651,length:1,convRule:g},{start:42786,length:1,convRule:v},{start:42787,length:1,convRule:g},{start:42788,length:1,convRule:v},{start:42789,length:1,convRule:g},{start:42790,length:1,convRule:v},{start:42791,length:1,convRule:g},{start:42792,length:1,convRule:v},{start:42793,length:1,convRule:g},{start:42794,length:1,convRule:v},{start:42795,length:1,convRule:g},{start:42796,length:1,convRule:v},{start:42797,length:1,convRule:g},{start:42798,length:1,convRule:v},{start:42799,length:1,convRule:g},{start:42802,length:1,convRule:v},{start:42803,length:1,convRule:g},{start:42804,length:1,convRule:v},{start:42805,length:1,convRule:g},{start:42806,length:1,convRule:v},{start:42807,length:1,convRule:g},{start:42808,length:1,convRule:v},{start:42809,length:1,convRule:g},{start:42810,length:1,convRule:v},{start:42811,length:1,convRule:g},{start:42812,length:1,convRule:v},{start:42813,length:1,convRule:g},{start:42814,length:1,convRule:v},{start:42815,length:1,convRule:g},{start:42816,length:1,convRule:v},{start:42817,length:1,convRule:g},{start:42818,length:1,convRule:v},{start:42819,length:1,convRule:g},{start:42820,length:1,convRule:v},{start:42821,length:1,convRule:g},{start:42822,length:1,convRule:v},{start:42823,length:1,convRule:g},{start:42824,length:1,convRule:v},{start:42825,length:1,convRule:g},{start:42826,length:1,convRule:v},{start:42827,length:1,convRule:g},{start:42828,length:1,convRule:v},{start:42829,length:1,convRule:g},{start:42830,length:1,convRule:v},{start:42831,length:1,convRule:g},{start:42832,length:1,convRule:v},{start:42833,length:1,convRule:g},{start:42834,length:1,convRule:v},{start:42835,length:1,convRule:g},{start:42836,length:1,convRule:v},{start:42837,length:1,convRule:g},{start:42838,length:1,convRule:v},{start:42839,length:1,convRule:g},{start:42840,length:1,convRule:v},{start:42841,length:1,convRule:g},{start:42842,length:1,convRule:v},{start:42843,length:1,convRule:g},{start:42844,length:1,convRule:v},{start:42845,length:1,convRule:g},{start:42846,length:1,convRule:v},{start:42847,length:1,convRule:g},{start:42848,length:1,convRule:v},{start:42849,length:1,convRule:g},{start:42850,length:1,convRule:v},{start:42851,length:1,convRule:g},{start:42852,length:1,convRule:v},{start:42853,length:1,convRule:g},{start:42854,length:1,convRule:v},{start:42855,length:1,convRule:g},{start:42856,length:1,convRule:v},{start:42857,length:1,convRule:g},{start:42858,length:1,convRule:v},{start:42859,length:1,convRule:g},{start:42860,length:1,convRule:v},{start:42861,length:1,convRule:g},{start:42862,length:1,convRule:v},{start:42863,length:1,convRule:g},{start:42873,length:1,convRule:v},{start:42874,length:1,convRule:g},{start:42875,length:1,convRule:v},{start:42876,length:1,convRule:g},{start:42877,length:1,convRule:Sut},{start:42878,length:1,convRule:v},{start:42879,length:1,convRule:g},{start:42880,length:1,convRule:v},{start:42881,length:1,convRule:g},{start:42882,length:1,convRule:v},{start:42883,length:1,convRule:g},{start:42884,length:1,convRule:v},{start:42885,length:1,convRule:g},{start:42886,length:1,convRule:v},{start:42887,length:1,convRule:g},{start:42891,length:1,convRule:v},{start:42892,length:1,convRule:g},{start:42893,length:1,convRule:Out},{start:42896,length:1,convRule:v},{start:42897,length:1,convRule:g},{start:42898,length:1,convRule:v},{start:42899,length:1,convRule:g},{start:42900,length:1,convRule:Qlt},{start:42902,length:1,convRule:v},{start:42903,length:1,convRule:g},{start:42904,length:1,convRule:v},{start:42905,length:1,convRule:g},{start:42906,length:1,convRule:v},{start:42907,length:1,convRule:g},{start:42908,length:1,convRule:v},{start:42909,length:1,convRule:g},{start:42910,length:1,convRule:v},{start:42911,length:1,convRule:g},{start:42912,length:1,convRule:v},{start:42913,length:1,convRule:g},{start:42914,length:1,convRule:v},{start:42915,length:1,convRule:g},{start:42916,length:1,convRule:v},{start:42917,length:1,convRule:g},{start:42918,length:1,convRule:v},{start:42919,length:1,convRule:g},{start:42920,length:1,convRule:v},{start:42921,length:1,convRule:g},{start:42922,length:1,convRule:Q5},{start:42923,length:1,convRule:Eut},{start:42924,length:1,convRule:Fut},{start:42925,length:1,convRule:Mut},{start:42926,length:1,convRule:Q5},{start:42928,length:1,convRule:Aut},{start:42929,length:1,convRule:Put},{start:42930,length:1,convRule:Iut},{start:42931,length:1,convRule:Nut},{start:42932,length:1,convRule:v},{start:42933,length:1,convRule:g},{start:42934,length:1,convRule:v},{start:42935,length:1,convRule:g},{start:42936,length:1,convRule:v},{start:42937,length:1,convRule:g},{start:42938,length:1,convRule:v},{start:42939,length:1,convRule:g},{start:42940,length:1,convRule:v},{start:42941,length:1,convRule:g},{start:42942,length:1,convRule:v},{start:42943,length:1,convRule:g},{start:42946,length:1,convRule:v},{start:42947,length:1,convRule:g},{start:42948,length:1,convRule:kut},{start:42949,length:1,convRule:$ut},{start:42950,length:1,convRule:Lut},{start:42951,length:1,convRule:v},{start:42952,length:1,convRule:g},{start:42953,length:1,convRule:v},{start:42954,length:1,convRule:g},{start:42997,length:1,convRule:v},{start:42998,length:1,convRule:g},{start:43859,length:1,convRule:Hlt},{start:43888,length:80,convRule:Vlt},{start:65313,length:26,convRule:Su},{start:65345,length:26,convRule:Ou},{start:66560,length:40,convRule:H5},{start:66600,length:40,convRule:n6},{start:66736,length:36,convRule:H5},{start:66776,length:36,convRule:n6},{start:68736,length:51,convRule:Y5},{start:68800,length:51,convRule:X5},{start:71840,length:32,convRule:Su},{start:71872,length:32,convRule:Ou},{start:93760,length:32,convRule:Su},{start:93792,length:32,convRule:Ou},{start:125184,length:34,convRule:Uut},{start:125218,length:34,convRule:jlt}],nR=function(r){return function(t){return function(e){return function(n){var o=function(a){return function(i){var u=a,l=!1,s;function c(f,d){if(f>d||f>=En(t))return l=!0,P.value;if(Re){var p=uf(pr(f+d|0)/2),h=Zit(t)(p),m=n(r)(h);if(m instanceof te)return l=!0,new M(h);if(m instanceof Lt){u=p+1|0,i=d;return}u=f,i=p-1|0;return}throw new Error("Failed pattern match at Data.CodePoint.Unicode.Internal (line 5622, column 3 - line 5632, column 30): "+[f.constructor.name,d.constructor.name])}for(;!l;)s=c(u,i);return s}};return o(0)(e)}}}},Ast=function(r){return function(t){if(r.start>=t.start&&r.start<(t.start+t.length|0))return te.value;if(r.start>t.start)return Lt.value;if(Re)return Wt.value;throw new Error("Failed pattern match at Data.CodePoint.Unicode.Internal (line 5598, column 1 - line 5598, column 45): "+[r.constructor.name,t.constructor.name])}},Pst=function(r){return function(t){return function(e){var n={start:t,length:1,convRule:nut},o=nR(n)(r)(e)(Ast);if(o instanceof P)return P.value;if(o instanceof M)return new M(o.value0.convRule);throw new Error("Failed pattern match at Data.CodePoint.Unicode.Internal (line 5612, column 5 - line 5614, column 60): "+[o.constructor.name])}}},Ist=function(r){return function(t){var e=Pst(Mst)(t)(Yit);if(e instanceof P)return t;if(e instanceof M)return t+r(e.value0)|0;throw new Error("Failed pattern match at Data.CodePoint.Unicode.Internal (line 5727, column 5 - line 5729, column 53): "+[e.constructor.name])}},oR=Ist(function(r){return r.lowdist});var $st=Pt(Ar),p6=function(r){return{code:r,lower:[],title:[],upper:[],fold:0,foldFull:[]}},h6=[{code:65,lower:[],title:[],upper:[],fold:97,foldFull:[97]},{code:66,lower:[],title:[],upper:[],fold:98,foldFull:[98]},{code:67,lower:[],title:[],upper:[],fold:99,foldFull:[99]},{code:68,lower:[],title:[],upper:[],fold:100,foldFull:[100]},{code:69,lower:[],title:[],upper:[],fold:101,foldFull:[101]},{code:70,lower:[],title:[],upper:[],fold:102,foldFull:[102]},{code:71,lower:[],title:[],upper:[],fold:103,foldFull:[103]},{code:72,lower:[],title:[],upper:[],fold:104,foldFull:[104]},{code:73,lower:[],title:[],upper:[],fold:105,foldFull:[105]},{code:74,lower:[],title:[],upper:[],fold:106,foldFull:[106]},{code:75,lower:[],title:[],upper:[],fold:107,foldFull:[107]},{code:76,lower:[],title:[],upper:[],fold:108,foldFull:[108]},{code:77,lower:[],title:[],upper:[],fold:109,foldFull:[109]},{code:78,lower:[],title:[],upper:[],fold:110,foldFull:[110]},{code:79,lower:[],title:[],upper:[],fold:111,foldFull:[111]},{code:80,lower:[],title:[],upper:[],fold:112,foldFull:[112]},{code:81,lower:[],title:[],upper:[],fold:113,foldFull:[113]},{code:82,lower:[],title:[],upper:[],fold:114,foldFull:[114]},{code:83,lower:[],title:[],upper:[],fold:115,foldFull:[115]},{code:84,lower:[],title:[],upper:[],fold:116,foldFull:[116]},{code:85,lower:[],title:[],upper:[],fold:117,foldFull:[117]},{code:86,lower:[],title:[],upper:[],fold:118,foldFull:[118]},{code:87,lower:[],title:[],upper:[],fold:119,foldFull:[119]},{code:88,lower:[],title:[],upper:[],fold:120,foldFull:[120]},{code:89,lower:[],title:[],upper:[],fold:121,foldFull:[121]},{code:90,lower:[],title:[],upper:[],fold:122,foldFull:[122]},{code:181,lower:[],title:[],upper:[],fold:956,foldFull:[956]},{code:192,lower:[],title:[],upper:[],fold:224,foldFull:[224]},{code:193,lower:[],title:[],upper:[],fold:225,foldFull:[225]},{code:194,lower:[],title:[],upper:[],fold:226,foldFull:[226]},{code:195,lower:[],title:[],upper:[],fold:227,foldFull:[227]},{code:196,lower:[],title:[],upper:[],fold:228,foldFull:[228]},{code:197,lower:[],title:[],upper:[],fold:229,foldFull:[229]},{code:198,lower:[],title:[],upper:[],fold:230,foldFull:[230]},{code:199,lower:[],title:[],upper:[],fold:231,foldFull:[231]},{code:200,lower:[],title:[],upper:[],fold:232,foldFull:[232]},{code:201,lower:[],title:[],upper:[],fold:233,foldFull:[233]},{code:202,lower:[],title:[],upper:[],fold:234,foldFull:[234]},{code:203,lower:[],title:[],upper:[],fold:235,foldFull:[235]},{code:204,lower:[],title:[],upper:[],fold:236,foldFull:[236]},{code:205,lower:[],title:[],upper:[],fold:237,foldFull:[237]},{code:206,lower:[],title:[],upper:[],fold:238,foldFull:[238]},{code:207,lower:[],title:[],upper:[],fold:239,foldFull:[239]},{code:208,lower:[],title:[],upper:[],fold:240,foldFull:[240]},{code:209,lower:[],title:[],upper:[],fold:241,foldFull:[241]},{code:210,lower:[],title:[],upper:[],fold:242,foldFull:[242]},{code:211,lower:[],title:[],upper:[],fold:243,foldFull:[243]},{code:212,lower:[],title:[],upper:[],fold:244,foldFull:[244]},{code:213,lower:[],title:[],upper:[],fold:245,foldFull:[245]},{code:214,lower:[],title:[],upper:[],fold:246,foldFull:[246]},{code:216,lower:[],title:[],upper:[],fold:248,foldFull:[248]},{code:217,lower:[],title:[],upper:[],fold:249,foldFull:[249]},{code:218,lower:[],title:[],upper:[],fold:250,foldFull:[250]},{code:219,lower:[],title:[],upper:[],fold:251,foldFull:[251]},{code:220,lower:[],title:[],upper:[],fold:252,foldFull:[252]},{code:221,lower:[],title:[],upper:[],fold:253,foldFull:[253]},{code:222,lower:[],title:[],upper:[],fold:254,foldFull:[254]},{code:223,lower:[223],title:[83,115],upper:[83,83],fold:0,foldFull:[115,115]},{code:223,lower:[223],title:[83,115],upper:[83,83],fold:0,foldFull:[115,115]},{code:256,lower:[],title:[],upper:[],fold:257,foldFull:[257]},{code:258,lower:[],title:[],upper:[],fold:259,foldFull:[259]},{code:260,lower:[],title:[],upper:[],fold:261,foldFull:[261]},{code:262,lower:[],title:[],upper:[],fold:263,foldFull:[263]},{code:264,lower:[],title:[],upper:[],fold:265,foldFull:[265]},{code:266,lower:[],title:[],upper:[],fold:267,foldFull:[267]},{code:268,lower:[],title:[],upper:[],fold:269,foldFull:[269]},{code:270,lower:[],title:[],upper:[],fold:271,foldFull:[271]},{code:272,lower:[],title:[],upper:[],fold:273,foldFull:[273]},{code:274,lower:[],title:[],upper:[],fold:275,foldFull:[275]},{code:276,lower:[],title:[],upper:[],fold:277,foldFull:[277]},{code:278,lower:[],title:[],upper:[],fold:279,foldFull:[279]},{code:280,lower:[],title:[],upper:[],fold:281,foldFull:[281]},{code:282,lower:[],title:[],upper:[],fold:283,foldFull:[283]},{code:284,lower:[],title:[],upper:[],fold:285,foldFull:[285]},{code:286,lower:[],title:[],upper:[],fold:287,foldFull:[287]},{code:288,lower:[],title:[],upper:[],fold:289,foldFull:[289]},{code:290,lower:[],title:[],upper:[],fold:291,foldFull:[291]},{code:292,lower:[],title:[],upper:[],fold:293,foldFull:[293]},{code:294,lower:[],title:[],upper:[],fold:295,foldFull:[295]},{code:296,lower:[],title:[],upper:[],fold:297,foldFull:[297]},{code:298,lower:[],title:[],upper:[],fold:299,foldFull:[299]},{code:300,lower:[],title:[],upper:[],fold:301,foldFull:[301]},{code:302,lower:[],title:[],upper:[],fold:303,foldFull:[303]},{code:304,lower:[105,775],title:[304],upper:[304],fold:0,foldFull:[105,775]},{code:304,lower:[105,775],title:[304],upper:[304],fold:0,foldFull:[105,775]},{code:306,lower:[],title:[],upper:[],fold:307,foldFull:[307]},{code:308,lower:[],title:[],upper:[],fold:309,foldFull:[309]},{code:310,lower:[],title:[],upper:[],fold:311,foldFull:[311]},{code:313,lower:[],title:[],upper:[],fold:314,foldFull:[314]},{code:315,lower:[],title:[],upper:[],fold:316,foldFull:[316]},{code:317,lower:[],title:[],upper:[],fold:318,foldFull:[318]},{code:319,lower:[],title:[],upper:[],fold:320,foldFull:[320]},{code:321,lower:[],title:[],upper:[],fold:322,foldFull:[322]},{code:323,lower:[],title:[],upper:[],fold:324,foldFull:[324]},{code:325,lower:[],title:[],upper:[],fold:326,foldFull:[326]},{code:327,lower:[],title:[],upper:[],fold:328,foldFull:[328]},{code:329,lower:[329],title:[700,78],upper:[700,78],fold:0,foldFull:[700,110]},{code:329,lower:[329],title:[700,78],upper:[700,78],fold:0,foldFull:[700,110]},{code:330,lower:[],title:[],upper:[],fold:331,foldFull:[331]},{code:332,lower:[],title:[],upper:[],fold:333,foldFull:[333]},{code:334,lower:[],title:[],upper:[],fold:335,foldFull:[335]},{code:336,lower:[],title:[],upper:[],fold:337,foldFull:[337]},{code:338,lower:[],title:[],upper:[],fold:339,foldFull:[339]},{code:340,lower:[],title:[],upper:[],fold:341,foldFull:[341]},{code:342,lower:[],title:[],upper:[],fold:343,foldFull:[343]},{code:344,lower:[],title:[],upper:[],fold:345,foldFull:[345]},{code:346,lower:[],title:[],upper:[],fold:347,foldFull:[347]},{code:348,lower:[],title:[],upper:[],fold:349,foldFull:[349]},{code:350,lower:[],title:[],upper:[],fold:351,foldFull:[351]},{code:352,lower:[],title:[],upper:[],fold:353,foldFull:[353]},{code:354,lower:[],title:[],upper:[],fold:355,foldFull:[355]},{code:356,lower:[],title:[],upper:[],fold:357,foldFull:[357]},{code:358,lower:[],title:[],upper:[],fold:359,foldFull:[359]},{code:360,lower:[],title:[],upper:[],fold:361,foldFull:[361]},{code:362,lower:[],title:[],upper:[],fold:363,foldFull:[363]},{code:364,lower:[],title:[],upper:[],fold:365,foldFull:[365]},{code:366,lower:[],title:[],upper:[],fold:367,foldFull:[367]},{code:368,lower:[],title:[],upper:[],fold:369,foldFull:[369]},{code:370,lower:[],title:[],upper:[],fold:371,foldFull:[371]},{code:372,lower:[],title:[],upper:[],fold:373,foldFull:[373]},{code:374,lower:[],title:[],upper:[],fold:375,foldFull:[375]},{code:376,lower:[],title:[],upper:[],fold:255,foldFull:[255]},{code:377,lower:[],title:[],upper:[],fold:378,foldFull:[378]},{code:379,lower:[],title:[],upper:[],fold:380,foldFull:[380]},{code:381,lower:[],title:[],upper:[],fold:382,foldFull:[382]},{code:383,lower:[],title:[],upper:[],fold:115,foldFull:[115]},{code:385,lower:[],title:[],upper:[],fold:595,foldFull:[595]},{code:386,lower:[],title:[],upper:[],fold:387,foldFull:[387]},{code:388,lower:[],title:[],upper:[],fold:389,foldFull:[389]},{code:390,lower:[],title:[],upper:[],fold:596,foldFull:[596]},{code:391,lower:[],title:[],upper:[],fold:392,foldFull:[392]},{code:393,lower:[],title:[],upper:[],fold:598,foldFull:[598]},{code:394,lower:[],title:[],upper:[],fold:599,foldFull:[599]},{code:395,lower:[],title:[],upper:[],fold:396,foldFull:[396]},{code:398,lower:[],title:[],upper:[],fold:477,foldFull:[477]},{code:399,lower:[],title:[],upper:[],fold:601,foldFull:[601]},{code:400,lower:[],title:[],upper:[],fold:603,foldFull:[603]},{code:401,lower:[],title:[],upper:[],fold:402,foldFull:[402]},{code:403,lower:[],title:[],upper:[],fold:608,foldFull:[608]},{code:404,lower:[],title:[],upper:[],fold:611,foldFull:[611]},{code:406,lower:[],title:[],upper:[],fold:617,foldFull:[617]},{code:407,lower:[],title:[],upper:[],fold:616,foldFull:[616]},{code:408,lower:[],title:[],upper:[],fold:409,foldFull:[409]},{code:412,lower:[],title:[],upper:[],fold:623,foldFull:[623]},{code:413,lower:[],title:[],upper:[],fold:626,foldFull:[626]},{code:415,lower:[],title:[],upper:[],fold:629,foldFull:[629]},{code:416,lower:[],title:[],upper:[],fold:417,foldFull:[417]},{code:418,lower:[],title:[],upper:[],fold:419,foldFull:[419]},{code:420,lower:[],title:[],upper:[],fold:421,foldFull:[421]},{code:422,lower:[],title:[],upper:[],fold:640,foldFull:[640]},{code:423,lower:[],title:[],upper:[],fold:424,foldFull:[424]},{code:425,lower:[],title:[],upper:[],fold:643,foldFull:[643]},{code:428,lower:[],title:[],upper:[],fold:429,foldFull:[429]},{code:430,lower:[],title:[],upper:[],fold:648,foldFull:[648]},{code:431,lower:[],title:[],upper:[],fold:432,foldFull:[432]},{code:433,lower:[],title:[],upper:[],fold:650,foldFull:[650]},{code:434,lower:[],title:[],upper:[],fold:651,foldFull:[651]},{code:435,lower:[],title:[],upper:[],fold:436,foldFull:[436]},{code:437,lower:[],title:[],upper:[],fold:438,foldFull:[438]},{code:439,lower:[],title:[],upper:[],fold:658,foldFull:[658]},{code:440,lower:[],title:[],upper:[],fold:441,foldFull:[441]},{code:444,lower:[],title:[],upper:[],fold:445,foldFull:[445]},{code:452,lower:[],title:[],upper:[],fold:454,foldFull:[454]},{code:453,lower:[],title:[],upper:[],fold:454,foldFull:[454]},{code:455,lower:[],title:[],upper:[],fold:457,foldFull:[457]},{code:456,lower:[],title:[],upper:[],fold:457,foldFull:[457]},{code:458,lower:[],title:[],upper:[],fold:460,foldFull:[460]},{code:459,lower:[],title:[],upper:[],fold:460,foldFull:[460]},{code:461,lower:[],title:[],upper:[],fold:462,foldFull:[462]},{code:463,lower:[],title:[],upper:[],fold:464,foldFull:[464]},{code:465,lower:[],title:[],upper:[],fold:466,foldFull:[466]},{code:467,lower:[],title:[],upper:[],fold:468,foldFull:[468]},{code:469,lower:[],title:[],upper:[],fold:470,foldFull:[470]},{code:471,lower:[],title:[],upper:[],fold:472,foldFull:[472]},{code:473,lower:[],title:[],upper:[],fold:474,foldFull:[474]},{code:475,lower:[],title:[],upper:[],fold:476,foldFull:[476]},{code:478,lower:[],title:[],upper:[],fold:479,foldFull:[479]},{code:480,lower:[],title:[],upper:[],fold:481,foldFull:[481]},{code:482,lower:[],title:[],upper:[],fold:483,foldFull:[483]},{code:484,lower:[],title:[],upper:[],fold:485,foldFull:[485]},{code:486,lower:[],title:[],upper:[],fold:487,foldFull:[487]},{code:488,lower:[],title:[],upper:[],fold:489,foldFull:[489]},{code:490,lower:[],title:[],upper:[],fold:491,foldFull:[491]},{code:492,lower:[],title:[],upper:[],fold:493,foldFull:[493]},{code:494,lower:[],title:[],upper:[],fold:495,foldFull:[495]},{code:496,lower:[496],title:[74,780],upper:[74,780],fold:0,foldFull:[106,780]},{code:496,lower:[496],title:[74,780],upper:[74,780],fold:0,foldFull:[106,780]},{code:497,lower:[],title:[],upper:[],fold:499,foldFull:[499]},{code:498,lower:[],title:[],upper:[],fold:499,foldFull:[499]},{code:500,lower:[],title:[],upper:[],fold:501,foldFull:[501]},{code:502,lower:[],title:[],upper:[],fold:405,foldFull:[405]},{code:503,lower:[],title:[],upper:[],fold:447,foldFull:[447]},{code:504,lower:[],title:[],upper:[],fold:505,foldFull:[505]},{code:506,lower:[],title:[],upper:[],fold:507,foldFull:[507]},{code:508,lower:[],title:[],upper:[],fold:509,foldFull:[509]},{code:510,lower:[],title:[],upper:[],fold:511,foldFull:[511]},{code:512,lower:[],title:[],upper:[],fold:513,foldFull:[513]},{code:514,lower:[],title:[],upper:[],fold:515,foldFull:[515]},{code:516,lower:[],title:[],upper:[],fold:517,foldFull:[517]},{code:518,lower:[],title:[],upper:[],fold:519,foldFull:[519]},{code:520,lower:[],title:[],upper:[],fold:521,foldFull:[521]},{code:522,lower:[],title:[],upper:[],fold:523,foldFull:[523]},{code:524,lower:[],title:[],upper:[],fold:525,foldFull:[525]},{code:526,lower:[],title:[],upper:[],fold:527,foldFull:[527]},{code:528,lower:[],title:[],upper:[],fold:529,foldFull:[529]},{code:530,lower:[],title:[],upper:[],fold:531,foldFull:[531]},{code:532,lower:[],title:[],upper:[],fold:533,foldFull:[533]},{code:534,lower:[],title:[],upper:[],fold:535,foldFull:[535]},{code:536,lower:[],title:[],upper:[],fold:537,foldFull:[537]},{code:538,lower:[],title:[],upper:[],fold:539,foldFull:[539]},{code:540,lower:[],title:[],upper:[],fold:541,foldFull:[541]},{code:542,lower:[],title:[],upper:[],fold:543,foldFull:[543]},{code:544,lower:[],title:[],upper:[],fold:414,foldFull:[414]},{code:546,lower:[],title:[],upper:[],fold:547,foldFull:[547]},{code:548,lower:[],title:[],upper:[],fold:549,foldFull:[549]},{code:550,lower:[],title:[],upper:[],fold:551,foldFull:[551]},{code:552,lower:[],title:[],upper:[],fold:553,foldFull:[553]},{code:554,lower:[],title:[],upper:[],fold:555,foldFull:[555]},{code:556,lower:[],title:[],upper:[],fold:557,foldFull:[557]},{code:558,lower:[],title:[],upper:[],fold:559,foldFull:[559]},{code:560,lower:[],title:[],upper:[],fold:561,foldFull:[561]},{code:562,lower:[],title:[],upper:[],fold:563,foldFull:[563]},{code:570,lower:[],title:[],upper:[],fold:11365,foldFull:[11365]},{code:571,lower:[],title:[],upper:[],fold:572,foldFull:[572]},{code:573,lower:[],title:[],upper:[],fold:410,foldFull:[410]},{code:574,lower:[],title:[],upper:[],fold:11366,foldFull:[11366]},{code:577,lower:[],title:[],upper:[],fold:578,foldFull:[578]},{code:579,lower:[],title:[],upper:[],fold:384,foldFull:[384]},{code:580,lower:[],title:[],upper:[],fold:649,foldFull:[649]},{code:581,lower:[],title:[],upper:[],fold:652,foldFull:[652]},{code:582,lower:[],title:[],upper:[],fold:583,foldFull:[583]},{code:584,lower:[],title:[],upper:[],fold:585,foldFull:[585]},{code:586,lower:[],title:[],upper:[],fold:587,foldFull:[587]},{code:588,lower:[],title:[],upper:[],fold:589,foldFull:[589]},{code:590,lower:[],title:[],upper:[],fold:591,foldFull:[591]},{code:837,lower:[],title:[],upper:[],fold:953,foldFull:[953]},{code:880,lower:[],title:[],upper:[],fold:881,foldFull:[881]},{code:882,lower:[],title:[],upper:[],fold:883,foldFull:[883]},{code:886,lower:[],title:[],upper:[],fold:887,foldFull:[887]},{code:895,lower:[],title:[],upper:[],fold:1011,foldFull:[1011]},{code:902,lower:[],title:[],upper:[],fold:940,foldFull:[940]},{code:904,lower:[],title:[],upper:[],fold:941,foldFull:[941]},{code:905,lower:[],title:[],upper:[],fold:942,foldFull:[942]},{code:906,lower:[],title:[],upper:[],fold:943,foldFull:[943]},{code:908,lower:[],title:[],upper:[],fold:972,foldFull:[972]},{code:910,lower:[],title:[],upper:[],fold:973,foldFull:[973]},{code:911,lower:[],title:[],upper:[],fold:974,foldFull:[974]},{code:912,lower:[912],title:[921,776,769],upper:[921,776,769],fold:0,foldFull:[953,776,769]},{code:912,lower:[912],title:[921,776,769],upper:[921,776,769],fold:0,foldFull:[953,776,769]},{code:913,lower:[],title:[],upper:[],fold:945,foldFull:[945]},{code:914,lower:[],title:[],upper:[],fold:946,foldFull:[946]},{code:915,lower:[],title:[],upper:[],fold:947,foldFull:[947]},{code:916,lower:[],title:[],upper:[],fold:948,foldFull:[948]},{code:917,lower:[],title:[],upper:[],fold:949,foldFull:[949]},{code:918,lower:[],title:[],upper:[],fold:950,foldFull:[950]},{code:919,lower:[],title:[],upper:[],fold:951,foldFull:[951]},{code:920,lower:[],title:[],upper:[],fold:952,foldFull:[952]},{code:921,lower:[],title:[],upper:[],fold:953,foldFull:[953]},{code:922,lower:[],title:[],upper:[],fold:954,foldFull:[954]},{code:923,lower:[],title:[],upper:[],fold:955,foldFull:[955]},{code:924,lower:[],title:[],upper:[],fold:956,foldFull:[956]},{code:925,lower:[],title:[],upper:[],fold:957,foldFull:[957]},{code:926,lower:[],title:[],upper:[],fold:958,foldFull:[958]},{code:927,lower:[],title:[],upper:[],fold:959,foldFull:[959]},{code:928,lower:[],title:[],upper:[],fold:960,foldFull:[960]},{code:929,lower:[],title:[],upper:[],fold:961,foldFull:[961]},{code:931,lower:[],title:[],upper:[],fold:963,foldFull:[963]},{code:932,lower:[],title:[],upper:[],fold:964,foldFull:[964]},{code:933,lower:[],title:[],upper:[],fold:965,foldFull:[965]},{code:934,lower:[],title:[],upper:[],fold:966,foldFull:[966]},{code:935,lower:[],title:[],upper:[],fold:967,foldFull:[967]},{code:936,lower:[],title:[],upper:[],fold:968,foldFull:[968]},{code:937,lower:[],title:[],upper:[],fold:969,foldFull:[969]},{code:938,lower:[],title:[],upper:[],fold:970,foldFull:[970]},{code:939,lower:[],title:[],upper:[],fold:971,foldFull:[971]},{code:944,lower:[944],title:[933,776,769],upper:[933,776,769],fold:0,foldFull:[965,776,769]},{code:944,lower:[944],title:[933,776,769],upper:[933,776,769],fold:0,foldFull:[965,776,769]},{code:962,lower:[],title:[],upper:[],fold:963,foldFull:[963]},{code:975,lower:[],title:[],upper:[],fold:983,foldFull:[983]},{code:976,lower:[],title:[],upper:[],fold:946,foldFull:[946]},{code:977,lower:[],title:[],upper:[],fold:952,foldFull:[952]},{code:981,lower:[],title:[],upper:[],fold:966,foldFull:[966]},{code:982,lower:[],title:[],upper:[],fold:960,foldFull:[960]},{code:984,lower:[],title:[],upper:[],fold:985,foldFull:[985]},{code:986,lower:[],title:[],upper:[],fold:987,foldFull:[987]},{code:988,lower:[],title:[],upper:[],fold:989,foldFull:[989]},{code:990,lower:[],title:[],upper:[],fold:991,foldFull:[991]},{code:992,lower:[],title:[],upper:[],fold:993,foldFull:[993]},{code:994,lower:[],title:[],upper:[],fold:995,foldFull:[995]},{code:996,lower:[],title:[],upper:[],fold:997,foldFull:[997]},{code:998,lower:[],title:[],upper:[],fold:999,foldFull:[999]},{code:1e3,lower:[],title:[],upper:[],fold:1001,foldFull:[1001]},{code:1002,lower:[],title:[],upper:[],fold:1003,foldFull:[1003]},{code:1004,lower:[],title:[],upper:[],fold:1005,foldFull:[1005]},{code:1006,lower:[],title:[],upper:[],fold:1007,foldFull:[1007]},{code:1008,lower:[],title:[],upper:[],fold:954,foldFull:[954]},{code:1009,lower:[],title:[],upper:[],fold:961,foldFull:[961]},{code:1012,lower:[],title:[],upper:[],fold:952,foldFull:[952]},{code:1013,lower:[],title:[],upper:[],fold:949,foldFull:[949]},{code:1015,lower:[],title:[],upper:[],fold:1016,foldFull:[1016]},{code:1017,lower:[],title:[],upper:[],fold:1010,foldFull:[1010]},{code:1018,lower:[],title:[],upper:[],fold:1019,foldFull:[1019]},{code:1021,lower:[],title:[],upper:[],fold:891,foldFull:[891]},{code:1022,lower:[],title:[],upper:[],fold:892,foldFull:[892]},{code:1023,lower:[],title:[],upper:[],fold:893,foldFull:[893]},{code:1024,lower:[],title:[],upper:[],fold:1104,foldFull:[1104]},{code:1025,lower:[],title:[],upper:[],fold:1105,foldFull:[1105]},{code:1026,lower:[],title:[],upper:[],fold:1106,foldFull:[1106]},{code:1027,lower:[],title:[],upper:[],fold:1107,foldFull:[1107]},{code:1028,lower:[],title:[],upper:[],fold:1108,foldFull:[1108]},{code:1029,lower:[],title:[],upper:[],fold:1109,foldFull:[1109]},{code:1030,lower:[],title:[],upper:[],fold:1110,foldFull:[1110]},{code:1031,lower:[],title:[],upper:[],fold:1111,foldFull:[1111]},{code:1032,lower:[],title:[],upper:[],fold:1112,foldFull:[1112]},{code:1033,lower:[],title:[],upper:[],fold:1113,foldFull:[1113]},{code:1034,lower:[],title:[],upper:[],fold:1114,foldFull:[1114]},{code:1035,lower:[],title:[],upper:[],fold:1115,foldFull:[1115]},{code:1036,lower:[],title:[],upper:[],fold:1116,foldFull:[1116]},{code:1037,lower:[],title:[],upper:[],fold:1117,foldFull:[1117]},{code:1038,lower:[],title:[],upper:[],fold:1118,foldFull:[1118]},{code:1039,lower:[],title:[],upper:[],fold:1119,foldFull:[1119]},{code:1040,lower:[],title:[],upper:[],fold:1072,foldFull:[1072]},{code:1041,lower:[],title:[],upper:[],fold:1073,foldFull:[1073]},{code:1042,lower:[],title:[],upper:[],fold:1074,foldFull:[1074]},{code:1043,lower:[],title:[],upper:[],fold:1075,foldFull:[1075]},{code:1044,lower:[],title:[],upper:[],fold:1076,foldFull:[1076]},{code:1045,lower:[],title:[],upper:[],fold:1077,foldFull:[1077]},{code:1046,lower:[],title:[],upper:[],fold:1078,foldFull:[1078]},{code:1047,lower:[],title:[],upper:[],fold:1079,foldFull:[1079]},{code:1048,lower:[],title:[],upper:[],fold:1080,foldFull:[1080]},{code:1049,lower:[],title:[],upper:[],fold:1081,foldFull:[1081]},{code:1050,lower:[],title:[],upper:[],fold:1082,foldFull:[1082]},{code:1051,lower:[],title:[],upper:[],fold:1083,foldFull:[1083]},{code:1052,lower:[],title:[],upper:[],fold:1084,foldFull:[1084]},{code:1053,lower:[],title:[],upper:[],fold:1085,foldFull:[1085]},{code:1054,lower:[],title:[],upper:[],fold:1086,foldFull:[1086]},{code:1055,lower:[],title:[],upper:[],fold:1087,foldFull:[1087]},{code:1056,lower:[],title:[],upper:[],fold:1088,foldFull:[1088]},{code:1057,lower:[],title:[],upper:[],fold:1089,foldFull:[1089]},{code:1058,lower:[],title:[],upper:[],fold:1090,foldFull:[1090]},{code:1059,lower:[],title:[],upper:[],fold:1091,foldFull:[1091]},{code:1060,lower:[],title:[],upper:[],fold:1092,foldFull:[1092]},{code:1061,lower:[],title:[],upper:[],fold:1093,foldFull:[1093]},{code:1062,lower:[],title:[],upper:[],fold:1094,foldFull:[1094]},{code:1063,lower:[],title:[],upper:[],fold:1095,foldFull:[1095]},{code:1064,lower:[],title:[],upper:[],fold:1096,foldFull:[1096]},{code:1065,lower:[],title:[],upper:[],fold:1097,foldFull:[1097]},{code:1066,lower:[],title:[],upper:[],fold:1098,foldFull:[1098]},{code:1067,lower:[],title:[],upper:[],fold:1099,foldFull:[1099]},{code:1068,lower:[],title:[],upper:[],fold:1100,foldFull:[1100]},{code:1069,lower:[],title:[],upper:[],fold:1101,foldFull:[1101]},{code:1070,lower:[],title:[],upper:[],fold:1102,foldFull:[1102]},{code:1071,lower:[],title:[],upper:[],fold:1103,foldFull:[1103]},{code:1120,lower:[],title:[],upper:[],fold:1121,foldFull:[1121]},{code:1122,lower:[],title:[],upper:[],fold:1123,foldFull:[1123]},{code:1124,lower:[],title:[],upper:[],fold:1125,foldFull:[1125]},{code:1126,lower:[],title:[],upper:[],fold:1127,foldFull:[1127]},{code:1128,lower:[],title:[],upper:[],fold:1129,foldFull:[1129]},{code:1130,lower:[],title:[],upper:[],fold:1131,foldFull:[1131]},{code:1132,lower:[],title:[],upper:[],fold:1133,foldFull:[1133]},{code:1134,lower:[],title:[],upper:[],fold:1135,foldFull:[1135]},{code:1136,lower:[],title:[],upper:[],fold:1137,foldFull:[1137]},{code:1138,lower:[],title:[],upper:[],fold:1139,foldFull:[1139]},{code:1140,lower:[],title:[],upper:[],fold:1141,foldFull:[1141]},{code:1142,lower:[],title:[],upper:[],fold:1143,foldFull:[1143]},{code:1144,lower:[],title:[],upper:[],fold:1145,foldFull:[1145]},{code:1146,lower:[],title:[],upper:[],fold:1147,foldFull:[1147]},{code:1148,lower:[],title:[],upper:[],fold:1149,foldFull:[1149]},{code:1150,lower:[],title:[],upper:[],fold:1151,foldFull:[1151]},{code:1152,lower:[],title:[],upper:[],fold:1153,foldFull:[1153]},{code:1162,lower:[],title:[],upper:[],fold:1163,foldFull:[1163]},{code:1164,lower:[],title:[],upper:[],fold:1165,foldFull:[1165]},{code:1166,lower:[],title:[],upper:[],fold:1167,foldFull:[1167]},{code:1168,lower:[],title:[],upper:[],fold:1169,foldFull:[1169]},{code:1170,lower:[],title:[],upper:[],fold:1171,foldFull:[1171]},{code:1172,lower:[],title:[],upper:[],fold:1173,foldFull:[1173]},{code:1174,lower:[],title:[],upper:[],fold:1175,foldFull:[1175]},{code:1176,lower:[],title:[],upper:[],fold:1177,foldFull:[1177]},{code:1178,lower:[],title:[],upper:[],fold:1179,foldFull:[1179]},{code:1180,lower:[],title:[],upper:[],fold:1181,foldFull:[1181]},{code:1182,lower:[],title:[],upper:[],fold:1183,foldFull:[1183]},{code:1184,lower:[],title:[],upper:[],fold:1185,foldFull:[1185]},{code:1186,lower:[],title:[],upper:[],fold:1187,foldFull:[1187]},{code:1188,lower:[],title:[],upper:[],fold:1189,foldFull:[1189]},{code:1190,lower:[],title:[],upper:[],fold:1191,foldFull:[1191]},{code:1192,lower:[],title:[],upper:[],fold:1193,foldFull:[1193]},{code:1194,lower:[],title:[],upper:[],fold:1195,foldFull:[1195]},{code:1196,lower:[],title:[],upper:[],fold:1197,foldFull:[1197]},{code:1198,lower:[],title:[],upper:[],fold:1199,foldFull:[1199]},{code:1200,lower:[],title:[],upper:[],fold:1201,foldFull:[1201]},{code:1202,lower:[],title:[],upper:[],fold:1203,foldFull:[1203]},{code:1204,lower:[],title:[],upper:[],fold:1205,foldFull:[1205]},{code:1206,lower:[],title:[],upper:[],fold:1207,foldFull:[1207]},{code:1208,lower:[],title:[],upper:[],fold:1209,foldFull:[1209]},{code:1210,lower:[],title:[],upper:[],fold:1211,foldFull:[1211]},{code:1212,lower:[],title:[],upper:[],fold:1213,foldFull:[1213]},{code:1214,lower:[],title:[],upper:[],fold:1215,foldFull:[1215]},{code:1216,lower:[],title:[],upper:[],fold:1231,foldFull:[1231]},{code:1217,lower:[],title:[],upper:[],fold:1218,foldFull:[1218]},{code:1219,lower:[],title:[],upper:[],fold:1220,foldFull:[1220]},{code:1221,lower:[],title:[],upper:[],fold:1222,foldFull:[1222]},{code:1223,lower:[],title:[],upper:[],fold:1224,foldFull:[1224]},{code:1225,lower:[],title:[],upper:[],fold:1226,foldFull:[1226]},{code:1227,lower:[],title:[],upper:[],fold:1228,foldFull:[1228]},{code:1229,lower:[],title:[],upper:[],fold:1230,foldFull:[1230]},{code:1232,lower:[],title:[],upper:[],fold:1233,foldFull:[1233]},{code:1234,lower:[],title:[],upper:[],fold:1235,foldFull:[1235]},{code:1236,lower:[],title:[],upper:[],fold:1237,foldFull:[1237]},{code:1238,lower:[],title:[],upper:[],fold:1239,foldFull:[1239]},{code:1240,lower:[],title:[],upper:[],fold:1241,foldFull:[1241]},{code:1242,lower:[],title:[],upper:[],fold:1243,foldFull:[1243]},{code:1244,lower:[],title:[],upper:[],fold:1245,foldFull:[1245]},{code:1246,lower:[],title:[],upper:[],fold:1247,foldFull:[1247]},{code:1248,lower:[],title:[],upper:[],fold:1249,foldFull:[1249]},{code:1250,lower:[],title:[],upper:[],fold:1251,foldFull:[1251]},{code:1252,lower:[],title:[],upper:[],fold:1253,foldFull:[1253]},{code:1254,lower:[],title:[],upper:[],fold:1255,foldFull:[1255]},{code:1256,lower:[],title:[],upper:[],fold:1257,foldFull:[1257]},{code:1258,lower:[],title:[],upper:[],fold:1259,foldFull:[1259]},{code:1260,lower:[],title:[],upper:[],fold:1261,foldFull:[1261]},{code:1262,lower:[],title:[],upper:[],fold:1263,foldFull:[1263]},{code:1264,lower:[],title:[],upper:[],fold:1265,foldFull:[1265]},{code:1266,lower:[],title:[],upper:[],fold:1267,foldFull:[1267]},{code:1268,lower:[],title:[],upper:[],fold:1269,foldFull:[1269]},{code:1270,lower:[],title:[],upper:[],fold:1271,foldFull:[1271]},{code:1272,lower:[],title:[],upper:[],fold:1273,foldFull:[1273]},{code:1274,lower:[],title:[],upper:[],fold:1275,foldFull:[1275]},{code:1276,lower:[],title:[],upper:[],fold:1277,foldFull:[1277]},{code:1278,lower:[],title:[],upper:[],fold:1279,foldFull:[1279]},{code:1280,lower:[],title:[],upper:[],fold:1281,foldFull:[1281]},{code:1282,lower:[],title:[],upper:[],fold:1283,foldFull:[1283]},{code:1284,lower:[],title:[],upper:[],fold:1285,foldFull:[1285]},{code:1286,lower:[],title:[],upper:[],fold:1287,foldFull:[1287]},{code:1288,lower:[],title:[],upper:[],fold:1289,foldFull:[1289]},{code:1290,lower:[],title:[],upper:[],fold:1291,foldFull:[1291]},{code:1292,lower:[],title:[],upper:[],fold:1293,foldFull:[1293]},{code:1294,lower:[],title:[],upper:[],fold:1295,foldFull:[1295]},{code:1296,lower:[],title:[],upper:[],fold:1297,foldFull:[1297]},{code:1298,lower:[],title:[],upper:[],fold:1299,foldFull:[1299]},{code:1300,lower:[],title:[],upper:[],fold:1301,foldFull:[1301]},{code:1302,lower:[],title:[],upper:[],fold:1303,foldFull:[1303]},{code:1304,lower:[],title:[],upper:[],fold:1305,foldFull:[1305]},{code:1306,lower:[],title:[],upper:[],fold:1307,foldFull:[1307]},{code:1308,lower:[],title:[],upper:[],fold:1309,foldFull:[1309]},{code:1310,lower:[],title:[],upper:[],fold:1311,foldFull:[1311]},{code:1312,lower:[],title:[],upper:[],fold:1313,foldFull:[1313]},{code:1314,lower:[],title:[],upper:[],fold:1315,foldFull:[1315]},{code:1316,lower:[],title:[],upper:[],fold:1317,foldFull:[1317]},{code:1318,lower:[],title:[],upper:[],fold:1319,foldFull:[1319]},{code:1320,lower:[],title:[],upper:[],fold:1321,foldFull:[1321]},{code:1322,lower:[],title:[],upper:[],fold:1323,foldFull:[1323]},{code:1324,lower:[],title:[],upper:[],fold:1325,foldFull:[1325]},{code:1326,lower:[],title:[],upper:[],fold:1327,foldFull:[1327]},{code:1329,lower:[],title:[],upper:[],fold:1377,foldFull:[1377]},{code:1330,lower:[],title:[],upper:[],fold:1378,foldFull:[1378]},{code:1331,lower:[],title:[],upper:[],fold:1379,foldFull:[1379]},{code:1332,lower:[],title:[],upper:[],fold:1380,foldFull:[1380]},{code:1333,lower:[],title:[],upper:[],fold:1381,foldFull:[1381]},{code:1334,lower:[],title:[],upper:[],fold:1382,foldFull:[1382]},{code:1335,lower:[],title:[],upper:[],fold:1383,foldFull:[1383]},{code:1336,lower:[],title:[],upper:[],fold:1384,foldFull:[1384]},{code:1337,lower:[],title:[],upper:[],fold:1385,foldFull:[1385]},{code:1338,lower:[],title:[],upper:[],fold:1386,foldFull:[1386]},{code:1339,lower:[],title:[],upper:[],fold:1387,foldFull:[1387]},{code:1340,lower:[],title:[],upper:[],fold:1388,foldFull:[1388]},{code:1341,lower:[],title:[],upper:[],fold:1389,foldFull:[1389]},{code:1342,lower:[],title:[],upper:[],fold:1390,foldFull:[1390]},{code:1343,lower:[],title:[],upper:[],fold:1391,foldFull:[1391]},{code:1344,lower:[],title:[],upper:[],fold:1392,foldFull:[1392]},{code:1345,lower:[],title:[],upper:[],fold:1393,foldFull:[1393]},{code:1346,lower:[],title:[],upper:[],fold:1394,foldFull:[1394]},{code:1347,lower:[],title:[],upper:[],fold:1395,foldFull:[1395]},{code:1348,lower:[],title:[],upper:[],fold:1396,foldFull:[1396]},{code:1349,lower:[],title:[],upper:[],fold:1397,foldFull:[1397]},{code:1350,lower:[],title:[],upper:[],fold:1398,foldFull:[1398]},{code:1351,lower:[],title:[],upper:[],fold:1399,foldFull:[1399]},{code:1352,lower:[],title:[],upper:[],fold:1400,foldFull:[1400]},{code:1353,lower:[],title:[],upper:[],fold:1401,foldFull:[1401]},{code:1354,lower:[],title:[],upper:[],fold:1402,foldFull:[1402]},{code:1355,lower:[],title:[],upper:[],fold:1403,foldFull:[1403]},{code:1356,lower:[],title:[],upper:[],fold:1404,foldFull:[1404]},{code:1357,lower:[],title:[],upper:[],fold:1405,foldFull:[1405]},{code:1358,lower:[],title:[],upper:[],fold:1406,foldFull:[1406]},{code:1359,lower:[],title:[],upper:[],fold:1407,foldFull:[1407]},{code:1360,lower:[],title:[],upper:[],fold:1408,foldFull:[1408]},{code:1361,lower:[],title:[],upper:[],fold:1409,foldFull:[1409]},{code:1362,lower:[],title:[],upper:[],fold:1410,foldFull:[1410]},{code:1363,lower:[],title:[],upper:[],fold:1411,foldFull:[1411]},{code:1364,lower:[],title:[],upper:[],fold:1412,foldFull:[1412]},{code:1365,lower:[],title:[],upper:[],fold:1413,foldFull:[1413]},{code:1366,lower:[],title:[],upper:[],fold:1414,foldFull:[1414]},{code:1415,lower:[1415],title:[1333,1410],upper:[1333,1362],fold:0,foldFull:[1381,1410]},{code:1415,lower:[1415],title:[1333,1410],upper:[1333,1362],fold:0,foldFull:[1381,1410]},{code:4256,lower:[],title:[],upper:[],fold:11520,foldFull:[11520]},{code:4257,lower:[],title:[],upper:[],fold:11521,foldFull:[11521]},{code:4258,lower:[],title:[],upper:[],fold:11522,foldFull:[11522]},{code:4259,lower:[],title:[],upper:[],fold:11523,foldFull:[11523]},{code:4260,lower:[],title:[],upper:[],fold:11524,foldFull:[11524]},{code:4261,lower:[],title:[],upper:[],fold:11525,foldFull:[11525]},{code:4262,lower:[],title:[],upper:[],fold:11526,foldFull:[11526]},{code:4263,lower:[],title:[],upper:[],fold:11527,foldFull:[11527]},{code:4264,lower:[],title:[],upper:[],fold:11528,foldFull:[11528]},{code:4265,lower:[],title:[],upper:[],fold:11529,foldFull:[11529]},{code:4266,lower:[],title:[],upper:[],fold:11530,foldFull:[11530]},{code:4267,lower:[],title:[],upper:[],fold:11531,foldFull:[11531]},{code:4268,lower:[],title:[],upper:[],fold:11532,foldFull:[11532]},{code:4269,lower:[],title:[],upper:[],fold:11533,foldFull:[11533]},{code:4270,lower:[],title:[],upper:[],fold:11534,foldFull:[11534]},{code:4271,lower:[],title:[],upper:[],fold:11535,foldFull:[11535]},{code:4272,lower:[],title:[],upper:[],fold:11536,foldFull:[11536]},{code:4273,lower:[],title:[],upper:[],fold:11537,foldFull:[11537]},{code:4274,lower:[],title:[],upper:[],fold:11538,foldFull:[11538]},{code:4275,lower:[],title:[],upper:[],fold:11539,foldFull:[11539]},{code:4276,lower:[],title:[],upper:[],fold:11540,foldFull:[11540]},{code:4277,lower:[],title:[],upper:[],fold:11541,foldFull:[11541]},{code:4278,lower:[],title:[],upper:[],fold:11542,foldFull:[11542]},{code:4279,lower:[],title:[],upper:[],fold:11543,foldFull:[11543]},{code:4280,lower:[],title:[],upper:[],fold:11544,foldFull:[11544]},{code:4281,lower:[],title:[],upper:[],fold:11545,foldFull:[11545]},{code:4282,lower:[],title:[],upper:[],fold:11546,foldFull:[11546]},{code:4283,lower:[],title:[],upper:[],fold:11547,foldFull:[11547]},{code:4284,lower:[],title:[],upper:[],fold:11548,foldFull:[11548]},{code:4285,lower:[],title:[],upper:[],fold:11549,foldFull:[11549]},{code:4286,lower:[],title:[],upper:[],fold:11550,foldFull:[11550]},{code:4287,lower:[],title:[],upper:[],fold:11551,foldFull:[11551]},{code:4288,lower:[],title:[],upper:[],fold:11552,foldFull:[11552]},{code:4289,lower:[],title:[],upper:[],fold:11553,foldFull:[11553]},{code:4290,lower:[],title:[],upper:[],fold:11554,foldFull:[11554]},{code:4291,lower:[],title:[],upper:[],fold:11555,foldFull:[11555]},{code:4292,lower:[],title:[],upper:[],fold:11556,foldFull:[11556]},{code:4293,lower:[],title:[],upper:[],fold:11557,foldFull:[11557]},{code:4295,lower:[],title:[],upper:[],fold:11559,foldFull:[11559]},{code:4301,lower:[],title:[],upper:[],fold:11565,foldFull:[11565]},{code:5112,lower:[],title:[],upper:[],fold:5104,foldFull:[5104]},{code:5113,lower:[],title:[],upper:[],fold:5105,foldFull:[5105]},{code:5114,lower:[],title:[],upper:[],fold:5106,foldFull:[5106]},{code:5115,lower:[],title:[],upper:[],fold:5107,foldFull:[5107]},{code:5116,lower:[],title:[],upper:[],fold:5108,foldFull:[5108]},{code:5117,lower:[],title:[],upper:[],fold:5109,foldFull:[5109]},{code:7296,lower:[],title:[],upper:[],fold:1074,foldFull:[1074]},{code:7297,lower:[],title:[],upper:[],fold:1076,foldFull:[1076]},{code:7298,lower:[],title:[],upper:[],fold:1086,foldFull:[1086]},{code:7299,lower:[],title:[],upper:[],fold:1089,foldFull:[1089]},{code:7300,lower:[],title:[],upper:[],fold:1090,foldFull:[1090]},{code:7301,lower:[],title:[],upper:[],fold:1090,foldFull:[1090]},{code:7302,lower:[],title:[],upper:[],fold:1098,foldFull:[1098]},{code:7303,lower:[],title:[],upper:[],fold:1123,foldFull:[1123]},{code:7304,lower:[],title:[],upper:[],fold:42571,foldFull:[42571]},{code:7312,lower:[],title:[],upper:[],fold:4304,foldFull:[4304]},{code:7313,lower:[],title:[],upper:[],fold:4305,foldFull:[4305]},{code:7314,lower:[],title:[],upper:[],fold:4306,foldFull:[4306]},{code:7315,lower:[],title:[],upper:[],fold:4307,foldFull:[4307]},{code:7316,lower:[],title:[],upper:[],fold:4308,foldFull:[4308]},{code:7317,lower:[],title:[],upper:[],fold:4309,foldFull:[4309]},{code:7318,lower:[],title:[],upper:[],fold:4310,foldFull:[4310]},{code:7319,lower:[],title:[],upper:[],fold:4311,foldFull:[4311]},{code:7320,lower:[],title:[],upper:[],fold:4312,foldFull:[4312]},{code:7321,lower:[],title:[],upper:[],fold:4313,foldFull:[4313]},{code:7322,lower:[],title:[],upper:[],fold:4314,foldFull:[4314]},{code:7323,lower:[],title:[],upper:[],fold:4315,foldFull:[4315]},{code:7324,lower:[],title:[],upper:[],fold:4316,foldFull:[4316]},{code:7325,lower:[],title:[],upper:[],fold:4317,foldFull:[4317]},{code:7326,lower:[],title:[],upper:[],fold:4318,foldFull:[4318]},{code:7327,lower:[],title:[],upper:[],fold:4319,foldFull:[4319]},{code:7328,lower:[],title:[],upper:[],fold:4320,foldFull:[4320]},{code:7329,lower:[],title:[],upper:[],fold:4321,foldFull:[4321]},{code:7330,lower:[],title:[],upper:[],fold:4322,foldFull:[4322]},{code:7331,lower:[],title:[],upper:[],fold:4323,foldFull:[4323]},{code:7332,lower:[],title:[],upper:[],fold:4324,foldFull:[4324]},{code:7333,lower:[],title:[],upper:[],fold:4325,foldFull:[4325]},{code:7334,lower:[],title:[],upper:[],fold:4326,foldFull:[4326]},{code:7335,lower:[],title:[],upper:[],fold:4327,foldFull:[4327]},{code:7336,lower:[],title:[],upper:[],fold:4328,foldFull:[4328]},{code:7337,lower:[],title:[],upper:[],fold:4329,foldFull:[4329]},{code:7338,lower:[],title:[],upper:[],fold:4330,foldFull:[4330]},{code:7339,lower:[],title:[],upper:[],fold:4331,foldFull:[4331]},{code:7340,lower:[],title:[],upper:[],fold:4332,foldFull:[4332]},{code:7341,lower:[],title:[],upper:[],fold:4333,foldFull:[4333]},{code:7342,lower:[],title:[],upper:[],fold:4334,foldFull:[4334]},{code:7343,lower:[],title:[],upper:[],fold:4335,foldFull:[4335]},{code:7344,lower:[],title:[],upper:[],fold:4336,foldFull:[4336]},{code:7345,lower:[],title:[],upper:[],fold:4337,foldFull:[4337]},{code:7346,lower:[],title:[],upper:[],fold:4338,foldFull:[4338]},{code:7347,lower:[],title:[],upper:[],fold:4339,foldFull:[4339]},{code:7348,lower:[],title:[],upper:[],fold:4340,foldFull:[4340]},{code:7349,lower:[],title:[],upper:[],fold:4341,foldFull:[4341]},{code:7350,lower:[],title:[],upper:[],fold:4342,foldFull:[4342]},{code:7351,lower:[],title:[],upper:[],fold:4343,foldFull:[4343]},{code:7352,lower:[],title:[],upper:[],fold:4344,foldFull:[4344]},{code:7353,lower:[],title:[],upper:[],fold:4345,foldFull:[4345]},{code:7354,lower:[],title:[],upper:[],fold:4346,foldFull:[4346]},{code:7357,lower:[],title:[],upper:[],fold:4349,foldFull:[4349]},{code:7358,lower:[],title:[],upper:[],fold:4350,foldFull:[4350]},{code:7359,lower:[],title:[],upper:[],fold:4351,foldFull:[4351]},{code:7680,lower:[],title:[],upper:[],fold:7681,foldFull:[7681]},{code:7682,lower:[],title:[],upper:[],fold:7683,foldFull:[7683]},{code:7684,lower:[],title:[],upper:[],fold:7685,foldFull:[7685]},{code:7686,lower:[],title:[],upper:[],fold:7687,foldFull:[7687]},{code:7688,lower:[],title:[],upper:[],fold:7689,foldFull:[7689]},{code:7690,lower:[],title:[],upper:[],fold:7691,foldFull:[7691]},{code:7692,lower:[],title:[],upper:[],fold:7693,foldFull:[7693]},{code:7694,lower:[],title:[],upper:[],fold:7695,foldFull:[7695]},{code:7696,lower:[],title:[],upper:[],fold:7697,foldFull:[7697]},{code:7698,lower:[],title:[],upper:[],fold:7699,foldFull:[7699]},{code:7700,lower:[],title:[],upper:[],fold:7701,foldFull:[7701]},{code:7702,lower:[],title:[],upper:[],fold:7703,foldFull:[7703]},{code:7704,lower:[],title:[],upper:[],fold:7705,foldFull:[7705]},{code:7706,lower:[],title:[],upper:[],fold:7707,foldFull:[7707]},{code:7708,lower:[],title:[],upper:[],fold:7709,foldFull:[7709]},{code:7710,lower:[],title:[],upper:[],fold:7711,foldFull:[7711]},{code:7712,lower:[],title:[],upper:[],fold:7713,foldFull:[7713]},{code:7714,lower:[],title:[],upper:[],fold:7715,foldFull:[7715]},{code:7716,lower:[],title:[],upper:[],fold:7717,foldFull:[7717]},{code:7718,lower:[],title:[],upper:[],fold:7719,foldFull:[7719]},{code:7720,lower:[],title:[],upper:[],fold:7721,foldFull:[7721]},{code:7722,lower:[],title:[],upper:[],fold:7723,foldFull:[7723]},{code:7724,lower:[],title:[],upper:[],fold:7725,foldFull:[7725]},{code:7726,lower:[],title:[],upper:[],fold:7727,foldFull:[7727]},{code:7728,lower:[],title:[],upper:[],fold:7729,foldFull:[7729]},{code:7730,lower:[],title:[],upper:[],fold:7731,foldFull:[7731]},{code:7732,lower:[],title:[],upper:[],fold:7733,foldFull:[7733]},{code:7734,lower:[],title:[],upper:[],fold:7735,foldFull:[7735]},{code:7736,lower:[],title:[],upper:[],fold:7737,foldFull:[7737]},{code:7738,lower:[],title:[],upper:[],fold:7739,foldFull:[7739]},{code:7740,lower:[],title:[],upper:[],fold:7741,foldFull:[7741]},{code:7742,lower:[],title:[],upper:[],fold:7743,foldFull:[7743]},{code:7744,lower:[],title:[],upper:[],fold:7745,foldFull:[7745]},{code:7746,lower:[],title:[],upper:[],fold:7747,foldFull:[7747]},{code:7748,lower:[],title:[],upper:[],fold:7749,foldFull:[7749]},{code:7750,lower:[],title:[],upper:[],fold:7751,foldFull:[7751]},{code:7752,lower:[],title:[],upper:[],fold:7753,foldFull:[7753]},{code:7754,lower:[],title:[],upper:[],fold:7755,foldFull:[7755]},{code:7756,lower:[],title:[],upper:[],fold:7757,foldFull:[7757]},{code:7758,lower:[],title:[],upper:[],fold:7759,foldFull:[7759]},{code:7760,lower:[],title:[],upper:[],fold:7761,foldFull:[7761]},{code:7762,lower:[],title:[],upper:[],fold:7763,foldFull:[7763]},{code:7764,lower:[],title:[],upper:[],fold:7765,foldFull:[7765]},{code:7766,lower:[],title:[],upper:[],fold:7767,foldFull:[7767]},{code:7768,lower:[],title:[],upper:[],fold:7769,foldFull:[7769]},{code:7770,lower:[],title:[],upper:[],fold:7771,foldFull:[7771]},{code:7772,lower:[],title:[],upper:[],fold:7773,foldFull:[7773]},{code:7774,lower:[],title:[],upper:[],fold:7775,foldFull:[7775]},{code:7776,lower:[],title:[],upper:[],fold:7777,foldFull:[7777]},{code:7778,lower:[],title:[],upper:[],fold:7779,foldFull:[7779]},{code:7780,lower:[],title:[],upper:[],fold:7781,foldFull:[7781]},{code:7782,lower:[],title:[],upper:[],fold:7783,foldFull:[7783]},{code:7784,lower:[],title:[],upper:[],fold:7785,foldFull:[7785]},{code:7786,lower:[],title:[],upper:[],fold:7787,foldFull:[7787]},{code:7788,lower:[],title:[],upper:[],fold:7789,foldFull:[7789]},{code:7790,lower:[],title:[],upper:[],fold:7791,foldFull:[7791]},{code:7792,lower:[],title:[],upper:[],fold:7793,foldFull:[7793]},{code:7794,lower:[],title:[],upper:[],fold:7795,foldFull:[7795]},{code:7796,lower:[],title:[],upper:[],fold:7797,foldFull:[7797]},{code:7798,lower:[],title:[],upper:[],fold:7799,foldFull:[7799]},{code:7800,lower:[],title:[],upper:[],fold:7801,foldFull:[7801]},{code:7802,lower:[],title:[],upper:[],fold:7803,foldFull:[7803]},{code:7804,lower:[],title:[],upper:[],fold:7805,foldFull:[7805]},{code:7806,lower:[],title:[],upper:[],fold:7807,foldFull:[7807]},{code:7808,lower:[],title:[],upper:[],fold:7809,foldFull:[7809]},{code:7810,lower:[],title:[],upper:[],fold:7811,foldFull:[7811]},{code:7812,lower:[],title:[],upper:[],fold:7813,foldFull:[7813]},{code:7814,lower:[],title:[],upper:[],fold:7815,foldFull:[7815]},{code:7816,lower:[],title:[],upper:[],fold:7817,foldFull:[7817]},{code:7818,lower:[],title:[],upper:[],fold:7819,foldFull:[7819]},{code:7820,lower:[],title:[],upper:[],fold:7821,foldFull:[7821]},{code:7822,lower:[],title:[],upper:[],fold:7823,foldFull:[7823]},{code:7824,lower:[],title:[],upper:[],fold:7825,foldFull:[7825]},{code:7826,lower:[],title:[],upper:[],fold:7827,foldFull:[7827]},{code:7828,lower:[],title:[],upper:[],fold:7829,foldFull:[7829]},{code:7830,lower:[7830],title:[72,817],upper:[72,817],fold:0,foldFull:[104,817]},{code:7830,lower:[7830],title:[72,817],upper:[72,817],fold:0,foldFull:[104,817]},{code:7831,lower:[7831],title:[84,776],upper:[84,776],fold:0,foldFull:[116,776]},{code:7831,lower:[7831],title:[84,776],upper:[84,776],fold:0,foldFull:[116,776]},{code:7832,lower:[7832],title:[87,778],upper:[87,778],fold:0,foldFull:[119,778]},{code:7832,lower:[7832],title:[87,778],upper:[87,778],fold:0,foldFull:[119,778]},{code:7833,lower:[7833],title:[89,778],upper:[89,778],fold:0,foldFull:[121,778]},{code:7833,lower:[7833],title:[89,778],upper:[89,778],fold:0,foldFull:[121,778]},{code:7834,lower:[7834],title:[65,702],upper:[65,702],fold:0,foldFull:[97,702]},{code:7834,lower:[7834],title:[65,702],upper:[65,702],fold:0,foldFull:[97,702]},{code:7835,lower:[],title:[],upper:[],fold:7777,foldFull:[7777]},{code:7838,lower:[],title:[],upper:[],fold:223,foldFull:[115,115]},{code:7840,lower:[],title:[],upper:[],fold:7841,foldFull:[7841]},{code:7842,lower:[],title:[],upper:[],fold:7843,foldFull:[7843]},{code:7844,lower:[],title:[],upper:[],fold:7845,foldFull:[7845]},{code:7846,lower:[],title:[],upper:[],fold:7847,foldFull:[7847]},{code:7848,lower:[],title:[],upper:[],fold:7849,foldFull:[7849]},{code:7850,lower:[],title:[],upper:[],fold:7851,foldFull:[7851]},{code:7852,lower:[],title:[],upper:[],fold:7853,foldFull:[7853]},{code:7854,lower:[],title:[],upper:[],fold:7855,foldFull:[7855]},{code:7856,lower:[],title:[],upper:[],fold:7857,foldFull:[7857]},{code:7858,lower:[],title:[],upper:[],fold:7859,foldFull:[7859]},{code:7860,lower:[],title:[],upper:[],fold:7861,foldFull:[7861]},{code:7862,lower:[],title:[],upper:[],fold:7863,foldFull:[7863]},{code:7864,lower:[],title:[],upper:[],fold:7865,foldFull:[7865]},{code:7866,lower:[],title:[],upper:[],fold:7867,foldFull:[7867]},{code:7868,lower:[],title:[],upper:[],fold:7869,foldFull:[7869]},{code:7870,lower:[],title:[],upper:[],fold:7871,foldFull:[7871]},{code:7872,lower:[],title:[],upper:[],fold:7873,foldFull:[7873]},{code:7874,lower:[],title:[],upper:[],fold:7875,foldFull:[7875]},{code:7876,lower:[],title:[],upper:[],fold:7877,foldFull:[7877]},{code:7878,lower:[],title:[],upper:[],fold:7879,foldFull:[7879]},{code:7880,lower:[],title:[],upper:[],fold:7881,foldFull:[7881]},{code:7882,lower:[],title:[],upper:[],fold:7883,foldFull:[7883]},{code:7884,lower:[],title:[],upper:[],fold:7885,foldFull:[7885]},{code:7886,lower:[],title:[],upper:[],fold:7887,foldFull:[7887]},{code:7888,lower:[],title:[],upper:[],fold:7889,foldFull:[7889]},{code:7890,lower:[],title:[],upper:[],fold:7891,foldFull:[7891]},{code:7892,lower:[],title:[],upper:[],fold:7893,foldFull:[7893]},{code:7894,lower:[],title:[],upper:[],fold:7895,foldFull:[7895]},{code:7896,lower:[],title:[],upper:[],fold:7897,foldFull:[7897]},{code:7898,lower:[],title:[],upper:[],fold:7899,foldFull:[7899]},{code:7900,lower:[],title:[],upper:[],fold:7901,foldFull:[7901]},{code:7902,lower:[],title:[],upper:[],fold:7903,foldFull:[7903]},{code:7904,lower:[],title:[],upper:[],fold:7905,foldFull:[7905]},{code:7906,lower:[],title:[],upper:[],fold:7907,foldFull:[7907]},{code:7908,lower:[],title:[],upper:[],fold:7909,foldFull:[7909]},{code:7910,lower:[],title:[],upper:[],fold:7911,foldFull:[7911]},{code:7912,lower:[],title:[],upper:[],fold:7913,foldFull:[7913]},{code:7914,lower:[],title:[],upper:[],fold:7915,foldFull:[7915]},{code:7916,lower:[],title:[],upper:[],fold:7917,foldFull:[7917]},{code:7918,lower:[],title:[],upper:[],fold:7919,foldFull:[7919]},{code:7920,lower:[],title:[],upper:[],fold:7921,foldFull:[7921]},{code:7922,lower:[],title:[],upper:[],fold:7923,foldFull:[7923]},{code:7924,lower:[],title:[],upper:[],fold:7925,foldFull:[7925]},{code:7926,lower:[],title:[],upper:[],fold:7927,foldFull:[7927]},{code:7928,lower:[],title:[],upper:[],fold:7929,foldFull:[7929]},{code:7930,lower:[],title:[],upper:[],fold:7931,foldFull:[7931]},{code:7932,lower:[],title:[],upper:[],fold:7933,foldFull:[7933]},{code:7934,lower:[],title:[],upper:[],fold:7935,foldFull:[7935]},{code:7944,lower:[],title:[],upper:[],fold:7936,foldFull:[7936]},{code:7945,lower:[],title:[],upper:[],fold:7937,foldFull:[7937]},{code:7946,lower:[],title:[],upper:[],fold:7938,foldFull:[7938]},{code:7947,lower:[],title:[],upper:[],fold:7939,foldFull:[7939]},{code:7948,lower:[],title:[],upper:[],fold:7940,foldFull:[7940]},{code:7949,lower:[],title:[],upper:[],fold:7941,foldFull:[7941]},{code:7950,lower:[],title:[],upper:[],fold:7942,foldFull:[7942]},{code:7951,lower:[],title:[],upper:[],fold:7943,foldFull:[7943]},{code:7960,lower:[],title:[],upper:[],fold:7952,foldFull:[7952]},{code:7961,lower:[],title:[],upper:[],fold:7953,foldFull:[7953]},{code:7962,lower:[],title:[],upper:[],fold:7954,foldFull:[7954]},{code:7963,lower:[],title:[],upper:[],fold:7955,foldFull:[7955]},{code:7964,lower:[],title:[],upper:[],fold:7956,foldFull:[7956]},{code:7965,lower:[],title:[],upper:[],fold:7957,foldFull:[7957]},{code:7976,lower:[],title:[],upper:[],fold:7968,foldFull:[7968]},{code:7977,lower:[],title:[],upper:[],fold:7969,foldFull:[7969]},{code:7978,lower:[],title:[],upper:[],fold:7970,foldFull:[7970]},{code:7979,lower:[],title:[],upper:[],fold:7971,foldFull:[7971]},{code:7980,lower:[],title:[],upper:[],fold:7972,foldFull:[7972]},{code:7981,lower:[],title:[],upper:[],fold:7973,foldFull:[7973]},{code:7982,lower:[],title:[],upper:[],fold:7974,foldFull:[7974]},{code:7983,lower:[],title:[],upper:[],fold:7975,foldFull:[7975]},{code:7992,lower:[],title:[],upper:[],fold:7984,foldFull:[7984]},{code:7993,lower:[],title:[],upper:[],fold:7985,foldFull:[7985]},{code:7994,lower:[],title:[],upper:[],fold:7986,foldFull:[7986]},{code:7995,lower:[],title:[],upper:[],fold:7987,foldFull:[7987]},{code:7996,lower:[],title:[],upper:[],fold:7988,foldFull:[7988]},{code:7997,lower:[],title:[],upper:[],fold:7989,foldFull:[7989]},{code:7998,lower:[],title:[],upper:[],fold:7990,foldFull:[7990]},{code:7999,lower:[],title:[],upper:[],fold:7991,foldFull:[7991]},{code:8008,lower:[],title:[],upper:[],fold:8e3,foldFull:[8e3]},{code:8009,lower:[],title:[],upper:[],fold:8001,foldFull:[8001]},{code:8010,lower:[],title:[],upper:[],fold:8002,foldFull:[8002]},{code:8011,lower:[],title:[],upper:[],fold:8003,foldFull:[8003]},{code:8012,lower:[],title:[],upper:[],fold:8004,foldFull:[8004]},{code:8013,lower:[],title:[],upper:[],fold:8005,foldFull:[8005]},{code:8016,lower:[8016],title:[933,787],upper:[933,787],fold:0,foldFull:[965,787]},{code:8016,lower:[8016],title:[933,787],upper:[933,787],fold:0,foldFull:[965,787]},{code:8018,lower:[8018],title:[933,787,768],upper:[933,787,768],fold:0,foldFull:[965,787,768]},{code:8018,lower:[8018],title:[933,787,768],upper:[933,787,768],fold:0,foldFull:[965,787,768]},{code:8020,lower:[8020],title:[933,787,769],upper:[933,787,769],fold:0,foldFull:[965,787,769]},{code:8020,lower:[8020],title:[933,787,769],upper:[933,787,769],fold:0,foldFull:[965,787,769]},{code:8022,lower:[8022],title:[933,787,834],upper:[933,787,834],fold:0,foldFull:[965,787,834]},{code:8022,lower:[8022],title:[933,787,834],upper:[933,787,834],fold:0,foldFull:[965,787,834]},{code:8025,lower:[],title:[],upper:[],fold:8017,foldFull:[8017]},{code:8027,lower:[],title:[],upper:[],fold:8019,foldFull:[8019]},{code:8029,lower:[],title:[],upper:[],fold:8021,foldFull:[8021]},{code:8031,lower:[],title:[],upper:[],fold:8023,foldFull:[8023]},{code:8040,lower:[],title:[],upper:[],fold:8032,foldFull:[8032]},{code:8041,lower:[],title:[],upper:[],fold:8033,foldFull:[8033]},{code:8042,lower:[],title:[],upper:[],fold:8034,foldFull:[8034]},{code:8043,lower:[],title:[],upper:[],fold:8035,foldFull:[8035]},{code:8044,lower:[],title:[],upper:[],fold:8036,foldFull:[8036]},{code:8045,lower:[],title:[],upper:[],fold:8037,foldFull:[8037]},{code:8046,lower:[],title:[],upper:[],fold:8038,foldFull:[8038]},{code:8047,lower:[],title:[],upper:[],fold:8039,foldFull:[8039]},{code:8064,lower:[8064],title:[8072],upper:[7944,921],fold:0,foldFull:[7936,953]},{code:8064,lower:[8064],title:[8072],upper:[7944,921],fold:0,foldFull:[7936,953]},{code:8065,lower:[8065],title:[8073],upper:[7945,921],fold:0,foldFull:[7937,953]},{code:8065,lower:[8065],title:[8073],upper:[7945,921],fold:0,foldFull:[7937,953]},{code:8066,lower:[8066],title:[8074],upper:[7946,921],fold:0,foldFull:[7938,953]},{code:8066,lower:[8066],title:[8074],upper:[7946,921],fold:0,foldFull:[7938,953]},{code:8067,lower:[8067],title:[8075],upper:[7947,921],fold:0,foldFull:[7939,953]},{code:8067,lower:[8067],title:[8075],upper:[7947,921],fold:0,foldFull:[7939,953]},{code:8068,lower:[8068],title:[8076],upper:[7948,921],fold:0,foldFull:[7940,953]},{code:8068,lower:[8068],title:[8076],upper:[7948,921],fold:0,foldFull:[7940,953]},{code:8069,lower:[8069],title:[8077],upper:[7949,921],fold:0,foldFull:[7941,953]},{code:8069,lower:[8069],title:[8077],upper:[7949,921],fold:0,foldFull:[7941,953]},{code:8070,lower:[8070],title:[8078],upper:[7950,921],fold:0,foldFull:[7942,953]},{code:8070,lower:[8070],title:[8078],upper:[7950,921],fold:0,foldFull:[7942,953]},{code:8071,lower:[8071],title:[8079],upper:[7951,921],fold:0,foldFull:[7943,953]},{code:8071,lower:[8071],title:[8079],upper:[7951,921],fold:0,foldFull:[7943,953]},{code:8072,lower:[8064],title:[8072],upper:[7944,921],fold:8064,foldFull:[7936,953]},{code:8072,lower:[8064],title:[8072],upper:[7944,921],fold:8064,foldFull:[7936,953]},{code:8073,lower:[8065],title:[8073],upper:[7945,921],fold:8065,foldFull:[7937,953]},{code:8073,lower:[8065],title:[8073],upper:[7945,921],fold:8065,foldFull:[7937,953]},{code:8074,lower:[8066],title:[8074],upper:[7946,921],fold:8066,foldFull:[7938,953]},{code:8074,lower:[8066],title:[8074],upper:[7946,921],fold:8066,foldFull:[7938,953]},{code:8075,lower:[8067],title:[8075],upper:[7947,921],fold:8067,foldFull:[7939,953]},{code:8075,lower:[8067],title:[8075],upper:[7947,921],fold:8067,foldFull:[7939,953]},{code:8076,lower:[8068],title:[8076],upper:[7948,921],fold:8068,foldFull:[7940,953]},{code:8076,lower:[8068],title:[8076],upper:[7948,921],fold:8068,foldFull:[7940,953]},{code:8077,lower:[8069],title:[8077],upper:[7949,921],fold:8069,foldFull:[7941,953]},{code:8077,lower:[8069],title:[8077],upper:[7949,921],fold:8069,foldFull:[7941,953]},{code:8078,lower:[8070],title:[8078],upper:[7950,921],fold:8070,foldFull:[7942,953]},{code:8078,lower:[8070],title:[8078],upper:[7950,921],fold:8070,foldFull:[7942,953]},{code:8079,lower:[8071],title:[8079],upper:[7951,921],fold:8071,foldFull:[7943,953]},{code:8079,lower:[8071],title:[8079],upper:[7951,921],fold:8071,foldFull:[7943,953]},{code:8080,lower:[8080],title:[8088],upper:[7976,921],fold:0,foldFull:[7968,953]},{code:8080,lower:[8080],title:[8088],upper:[7976,921],fold:0,foldFull:[7968,953]},{code:8081,lower:[8081],title:[8089],upper:[7977,921],fold:0,foldFull:[7969,953]},{code:8081,lower:[8081],title:[8089],upper:[7977,921],fold:0,foldFull:[7969,953]},{code:8082,lower:[8082],title:[8090],upper:[7978,921],fold:0,foldFull:[7970,953]},{code:8082,lower:[8082],title:[8090],upper:[7978,921],fold:0,foldFull:[7970,953]},{code:8083,lower:[8083],title:[8091],upper:[7979,921],fold:0,foldFull:[7971,953]},{code:8083,lower:[8083],title:[8091],upper:[7979,921],fold:0,foldFull:[7971,953]},{code:8084,lower:[8084],title:[8092],upper:[7980,921],fold:0,foldFull:[7972,953]},{code:8084,lower:[8084],title:[8092],upper:[7980,921],fold:0,foldFull:[7972,953]},{code:8085,lower:[8085],title:[8093],upper:[7981,921],fold:0,foldFull:[7973,953]},{code:8085,lower:[8085],title:[8093],upper:[7981,921],fold:0,foldFull:[7973,953]},{code:8086,lower:[8086],title:[8094],upper:[7982,921],fold:0,foldFull:[7974,953]},{code:8086,lower:[8086],title:[8094],upper:[7982,921],fold:0,foldFull:[7974,953]},{code:8087,lower:[8087],title:[8095],upper:[7983,921],fold:0,foldFull:[7975,953]},{code:8087,lower:[8087],title:[8095],upper:[7983,921],fold:0,foldFull:[7975,953]},{code:8088,lower:[8080],title:[8088],upper:[7976,921],fold:8080,foldFull:[7968,953]},{code:8088,lower:[8080],title:[8088],upper:[7976,921],fold:8080,foldFull:[7968,953]},{code:8089,lower:[8081],title:[8089],upper:[7977,921],fold:8081,foldFull:[7969,953]},{code:8089,lower:[8081],title:[8089],upper:[7977,921],fold:8081,foldFull:[7969,953]},{code:8090,lower:[8082],title:[8090],upper:[7978,921],fold:8082,foldFull:[7970,953]},{code:8090,lower:[8082],title:[8090],upper:[7978,921],fold:8082,foldFull:[7970,953]},{code:8091,lower:[8083],title:[8091],upper:[7979,921],fold:8083,foldFull:[7971,953]},{code:8091,lower:[8083],title:[8091],upper:[7979,921],fold:8083,foldFull:[7971,953]},{code:8092,lower:[8084],title:[8092],upper:[7980,921],fold:8084,foldFull:[7972,953]},{code:8092,lower:[8084],title:[8092],upper:[7980,921],fold:8084,foldFull:[7972,953]},{code:8093,lower:[8085],title:[8093],upper:[7981,921],fold:8085,foldFull:[7973,953]},{code:8093,lower:[8085],title:[8093],upper:[7981,921],fold:8085,foldFull:[7973,953]},{code:8094,lower:[8086],title:[8094],upper:[7982,921],fold:8086,foldFull:[7974,953]},{code:8094,lower:[8086],title:[8094],upper:[7982,921],fold:8086,foldFull:[7974,953]},{code:8095,lower:[8087],title:[8095],upper:[7983,921],fold:8087,foldFull:[7975,953]},{code:8095,lower:[8087],title:[8095],upper:[7983,921],fold:8087,foldFull:[7975,953]},{code:8096,lower:[8096],title:[8104],upper:[8040,921],fold:0,foldFull:[8032,953]},{code:8096,lower:[8096],title:[8104],upper:[8040,921],fold:0,foldFull:[8032,953]},{code:8097,lower:[8097],title:[8105],upper:[8041,921],fold:0,foldFull:[8033,953]},{code:8097,lower:[8097],title:[8105],upper:[8041,921],fold:0,foldFull:[8033,953]},{code:8098,lower:[8098],title:[8106],upper:[8042,921],fold:0,foldFull:[8034,953]},{code:8098,lower:[8098],title:[8106],upper:[8042,921],fold:0,foldFull:[8034,953]},{code:8099,lower:[8099],title:[8107],upper:[8043,921],fold:0,foldFull:[8035,953]},{code:8099,lower:[8099],title:[8107],upper:[8043,921],fold:0,foldFull:[8035,953]},{code:8100,lower:[8100],title:[8108],upper:[8044,921],fold:0,foldFull:[8036,953]},{code:8100,lower:[8100],title:[8108],upper:[8044,921],fold:0,foldFull:[8036,953]},{code:8101,lower:[8101],title:[8109],upper:[8045,921],fold:0,foldFull:[8037,953]},{code:8101,lower:[8101],title:[8109],upper:[8045,921],fold:0,foldFull:[8037,953]},{code:8102,lower:[8102],title:[8110],upper:[8046,921],fold:0,foldFull:[8038,953]},{code:8102,lower:[8102],title:[8110],upper:[8046,921],fold:0,foldFull:[8038,953]},{code:8103,lower:[8103],title:[8111],upper:[8047,921],fold:0,foldFull:[8039,953]},{code:8103,lower:[8103],title:[8111],upper:[8047,921],fold:0,foldFull:[8039,953]},{code:8104,lower:[8096],title:[8104],upper:[8040,921],fold:8096,foldFull:[8032,953]},{code:8104,lower:[8096],title:[8104],upper:[8040,921],fold:8096,foldFull:[8032,953]},{code:8105,lower:[8097],title:[8105],upper:[8041,921],fold:8097,foldFull:[8033,953]},{code:8105,lower:[8097],title:[8105],upper:[8041,921],fold:8097,foldFull:[8033,953]},{code:8106,lower:[8098],title:[8106],upper:[8042,921],fold:8098,foldFull:[8034,953]},{code:8106,lower:[8098],title:[8106],upper:[8042,921],fold:8098,foldFull:[8034,953]},{code:8107,lower:[8099],title:[8107],upper:[8043,921],fold:8099,foldFull:[8035,953]},{code:8107,lower:[8099],title:[8107],upper:[8043,921],fold:8099,foldFull:[8035,953]},{code:8108,lower:[8100],title:[8108],upper:[8044,921],fold:8100,foldFull:[8036,953]},{code:8108,lower:[8100],title:[8108],upper:[8044,921],fold:8100,foldFull:[8036,953]},{code:8109,lower:[8101],title:[8109],upper:[8045,921],fold:8101,foldFull:[8037,953]},{code:8109,lower:[8101],title:[8109],upper:[8045,921],fold:8101,foldFull:[8037,953]},{code:8110,lower:[8102],title:[8110],upper:[8046,921],fold:8102,foldFull:[8038,953]},{code:8110,lower:[8102],title:[8110],upper:[8046,921],fold:8102,foldFull:[8038,953]},{code:8111,lower:[8103],title:[8111],upper:[8047,921],fold:8103,foldFull:[8039,953]},{code:8111,lower:[8103],title:[8111],upper:[8047,921],fold:8103,foldFull:[8039,953]},{code:8114,lower:[8114],title:[8122,837],upper:[8122,921],fold:0,foldFull:[8048,953]},{code:8114,lower:[8114],title:[8122,837],upper:[8122,921],fold:0,foldFull:[8048,953]},{code:8115,lower:[8115],title:[8124],upper:[913,921],fold:0,foldFull:[945,953]},{code:8115,lower:[8115],title:[8124],upper:[913,921],fold:0,foldFull:[945,953]},{code:8116,lower:[8116],title:[902,837],upper:[902,921],fold:0,foldFull:[940,953]},{code:8116,lower:[8116],title:[902,837],upper:[902,921],fold:0,foldFull:[940,953]},{code:8118,lower:[8118],title:[913,834],upper:[913,834],fold:0,foldFull:[945,834]},{code:8118,lower:[8118],title:[913,834],upper:[913,834],fold:0,foldFull:[945,834]},{code:8119,lower:[8119],title:[913,834,837],upper:[913,834,921],fold:0,foldFull:[945,834,953]},{code:8119,lower:[8119],title:[913,834,837],upper:[913,834,921],fold:0,foldFull:[945,834,953]},{code:8120,lower:[],title:[],upper:[],fold:8112,foldFull:[8112]},{code:8121,lower:[],title:[],upper:[],fold:8113,foldFull:[8113]},{code:8122,lower:[],title:[],upper:[],fold:8048,foldFull:[8048]},{code:8123,lower:[],title:[],upper:[],fold:8049,foldFull:[8049]},{code:8124,lower:[8115],title:[8124],upper:[913,921],fold:8115,foldFull:[945,953]},{code:8124,lower:[8115],title:[8124],upper:[913,921],fold:8115,foldFull:[945,953]},{code:8126,lower:[],title:[],upper:[],fold:953,foldFull:[953]},{code:8130,lower:[8130],title:[8138,837],upper:[8138,921],fold:0,foldFull:[8052,953]},{code:8130,lower:[8130],title:[8138,837],upper:[8138,921],fold:0,foldFull:[8052,953]},{code:8131,lower:[8131],title:[8140],upper:[919,921],fold:0,foldFull:[951,953]},{code:8131,lower:[8131],title:[8140],upper:[919,921],fold:0,foldFull:[951,953]},{code:8132,lower:[8132],title:[905,837],upper:[905,921],fold:0,foldFull:[942,953]},{code:8132,lower:[8132],title:[905,837],upper:[905,921],fold:0,foldFull:[942,953]},{code:8134,lower:[8134],title:[919,834],upper:[919,834],fold:0,foldFull:[951,834]},{code:8134,lower:[8134],title:[919,834],upper:[919,834],fold:0,foldFull:[951,834]},{code:8135,lower:[8135],title:[919,834,837],upper:[919,834,921],fold:0,foldFull:[951,834,953]},{code:8135,lower:[8135],title:[919,834,837],upper:[919,834,921],fold:0,foldFull:[951,834,953]},{code:8136,lower:[],title:[],upper:[],fold:8050,foldFull:[8050]},{code:8137,lower:[],title:[],upper:[],fold:8051,foldFull:[8051]},{code:8138,lower:[],title:[],upper:[],fold:8052,foldFull:[8052]},{code:8139,lower:[],title:[],upper:[],fold:8053,foldFull:[8053]},{code:8140,lower:[8131],title:[8140],upper:[919,921],fold:8131,foldFull:[951,953]},{code:8140,lower:[8131],title:[8140],upper:[919,921],fold:8131,foldFull:[951,953]},{code:8146,lower:[8146],title:[921,776,768],upper:[921,776,768],fold:0,foldFull:[953,776,768]},{code:8146,lower:[8146],title:[921,776,768],upper:[921,776,768],fold:0,foldFull:[953,776,768]},{code:8147,lower:[8147],title:[921,776,769],upper:[921,776,769],fold:0,foldFull:[953,776,769]},{code:8147,lower:[8147],title:[921,776,769],upper:[921,776,769],fold:0,foldFull:[953,776,769]},{code:8150,lower:[8150],title:[921,834],upper:[921,834],fold:0,foldFull:[953,834]},{code:8150,lower:[8150],title:[921,834],upper:[921,834],fold:0,foldFull:[953,834]},{code:8151,lower:[8151],title:[921,776,834],upper:[921,776,834],fold:0,foldFull:[953,776,834]},{code:8151,lower:[8151],title:[921,776,834],upper:[921,776,834],fold:0,foldFull:[953,776,834]},{code:8152,lower:[],title:[],upper:[],fold:8144,foldFull:[8144]},{code:8153,lower:[],title:[],upper:[],fold:8145,foldFull:[8145]},{code:8154,lower:[],title:[],upper:[],fold:8054,foldFull:[8054]},{code:8155,lower:[],title:[],upper:[],fold:8055,foldFull:[8055]},{code:8162,lower:[8162],title:[933,776,768],upper:[933,776,768],fold:0,foldFull:[965,776,768]},{code:8162,lower:[8162],title:[933,776,768],upper:[933,776,768],fold:0,foldFull:[965,776,768]},{code:8163,lower:[8163],title:[933,776,769],upper:[933,776,769],fold:0,foldFull:[965,776,769]},{code:8163,lower:[8163],title:[933,776,769],upper:[933,776,769],fold:0,foldFull:[965,776,769]},{code:8164,lower:[8164],title:[929,787],upper:[929,787],fold:0,foldFull:[961,787]},{code:8164,lower:[8164],title:[929,787],upper:[929,787],fold:0,foldFull:[961,787]},{code:8166,lower:[8166],title:[933,834],upper:[933,834],fold:0,foldFull:[965,834]},{code:8166,lower:[8166],title:[933,834],upper:[933,834],fold:0,foldFull:[965,834]},{code:8167,lower:[8167],title:[933,776,834],upper:[933,776,834],fold:0,foldFull:[965,776,834]},{code:8167,lower:[8167],title:[933,776,834],upper:[933,776,834],fold:0,foldFull:[965,776,834]},{code:8168,lower:[],title:[],upper:[],fold:8160,foldFull:[8160]},{code:8169,lower:[],title:[],upper:[],fold:8161,foldFull:[8161]},{code:8170,lower:[],title:[],upper:[],fold:8058,foldFull:[8058]},{code:8171,lower:[],title:[],upper:[],fold:8059,foldFull:[8059]},{code:8172,lower:[],title:[],upper:[],fold:8165,foldFull:[8165]},{code:8178,lower:[8178],title:[8186,837],upper:[8186,921],fold:0,foldFull:[8060,953]},{code:8178,lower:[8178],title:[8186,837],upper:[8186,921],fold:0,foldFull:[8060,953]},{code:8179,lower:[8179],title:[8188],upper:[937,921],fold:0,foldFull:[969,953]},{code:8179,lower:[8179],title:[8188],upper:[937,921],fold:0,foldFull:[969,953]},{code:8180,lower:[8180],title:[911,837],upper:[911,921],fold:0,foldFull:[974,953]},{code:8180,lower:[8180],title:[911,837],upper:[911,921],fold:0,foldFull:[974,953]},{code:8182,lower:[8182],title:[937,834],upper:[937,834],fold:0,foldFull:[969,834]},{code:8182,lower:[8182],title:[937,834],upper:[937,834],fold:0,foldFull:[969,834]},{code:8183,lower:[8183],title:[937,834,837],upper:[937,834,921],fold:0,foldFull:[969,834,953]},{code:8183,lower:[8183],title:[937,834,837],upper:[937,834,921],fold:0,foldFull:[969,834,953]},{code:8184,lower:[],title:[],upper:[],fold:8056,foldFull:[8056]},{code:8185,lower:[],title:[],upper:[],fold:8057,foldFull:[8057]},{code:8186,lower:[],title:[],upper:[],fold:8060,foldFull:[8060]},{code:8187,lower:[],title:[],upper:[],fold:8061,foldFull:[8061]},{code:8188,lower:[8179],title:[8188],upper:[937,921],fold:8179,foldFull:[969,953]},{code:8188,lower:[8179],title:[8188],upper:[937,921],fold:8179,foldFull:[969,953]},{code:8486,lower:[],title:[],upper:[],fold:969,foldFull:[969]},{code:8490,lower:[],title:[],upper:[],fold:107,foldFull:[107]},{code:8491,lower:[],title:[],upper:[],fold:229,foldFull:[229]},{code:8498,lower:[],title:[],upper:[],fold:8526,foldFull:[8526]},{code:8544,lower:[],title:[],upper:[],fold:8560,foldFull:[8560]},{code:8545,lower:[],title:[],upper:[],fold:8561,foldFull:[8561]},{code:8546,lower:[],title:[],upper:[],fold:8562,foldFull:[8562]},{code:8547,lower:[],title:[],upper:[],fold:8563,foldFull:[8563]},{code:8548,lower:[],title:[],upper:[],fold:8564,foldFull:[8564]},{code:8549,lower:[],title:[],upper:[],fold:8565,foldFull:[8565]},{code:8550,lower:[],title:[],upper:[],fold:8566,foldFull:[8566]},{code:8551,lower:[],title:[],upper:[],fold:8567,foldFull:[8567]},{code:8552,lower:[],title:[],upper:[],fold:8568,foldFull:[8568]},{code:8553,lower:[],title:[],upper:[],fold:8569,foldFull:[8569]},{code:8554,lower:[],title:[],upper:[],fold:8570,foldFull:[8570]},{code:8555,lower:[],title:[],upper:[],fold:8571,foldFull:[8571]},{code:8556,lower:[],title:[],upper:[],fold:8572,foldFull:[8572]},{code:8557,lower:[],title:[],upper:[],fold:8573,foldFull:[8573]},{code:8558,lower:[],title:[],upper:[],fold:8574,foldFull:[8574]},{code:8559,lower:[],title:[],upper:[],fold:8575,foldFull:[8575]},{code:8579,lower:[],title:[],upper:[],fold:8580,foldFull:[8580]},{code:9398,lower:[],title:[],upper:[],fold:9424,foldFull:[9424]},{code:9399,lower:[],title:[],upper:[],fold:9425,foldFull:[9425]},{code:9400,lower:[],title:[],upper:[],fold:9426,foldFull:[9426]},{code:9401,lower:[],title:[],upper:[],fold:9427,foldFull:[9427]},{code:9402,lower:[],title:[],upper:[],fold:9428,foldFull:[9428]},{code:9403,lower:[],title:[],upper:[],fold:9429,foldFull:[9429]},{code:9404,lower:[],title:[],upper:[],fold:9430,foldFull:[9430]},{code:9405,lower:[],title:[],upper:[],fold:9431,foldFull:[9431]},{code:9406,lower:[],title:[],upper:[],fold:9432,foldFull:[9432]},{code:9407,lower:[],title:[],upper:[],fold:9433,foldFull:[9433]},{code:9408,lower:[],title:[],upper:[],fold:9434,foldFull:[9434]},{code:9409,lower:[],title:[],upper:[],fold:9435,foldFull:[9435]},{code:9410,lower:[],title:[],upper:[],fold:9436,foldFull:[9436]},{code:9411,lower:[],title:[],upper:[],fold:9437,foldFull:[9437]},{code:9412,lower:[],title:[],upper:[],fold:9438,foldFull:[9438]},{code:9413,lower:[],title:[],upper:[],fold:9439,foldFull:[9439]},{code:9414,lower:[],title:[],upper:[],fold:9440,foldFull:[9440]},{code:9415,lower:[],title:[],upper:[],fold:9441,foldFull:[9441]},{code:9416,lower:[],title:[],upper:[],fold:9442,foldFull:[9442]},{code:9417,lower:[],title:[],upper:[],fold:9443,foldFull:[9443]},{code:9418,lower:[],title:[],upper:[],fold:9444,foldFull:[9444]},{code:9419,lower:[],title:[],upper:[],fold:9445,foldFull:[9445]},{code:9420,lower:[],title:[],upper:[],fold:9446,foldFull:[9446]},{code:9421,lower:[],title:[],upper:[],fold:9447,foldFull:[9447]},{code:9422,lower:[],title:[],upper:[],fold:9448,foldFull:[9448]},{code:9423,lower:[],title:[],upper:[],fold:9449,foldFull:[9449]},{code:11264,lower:[],title:[],upper:[],fold:11312,foldFull:[11312]},{code:11265,lower:[],title:[],upper:[],fold:11313,foldFull:[11313]},{code:11266,lower:[],title:[],upper:[],fold:11314,foldFull:[11314]},{code:11267,lower:[],title:[],upper:[],fold:11315,foldFull:[11315]},{code:11268,lower:[],title:[],upper:[],fold:11316,foldFull:[11316]},{code:11269,lower:[],title:[],upper:[],fold:11317,foldFull:[11317]},{code:11270,lower:[],title:[],upper:[],fold:11318,foldFull:[11318]},{code:11271,lower:[],title:[],upper:[],fold:11319,foldFull:[11319]},{code:11272,lower:[],title:[],upper:[],fold:11320,foldFull:[11320]},{code:11273,lower:[],title:[],upper:[],fold:11321,foldFull:[11321]},{code:11274,lower:[],title:[],upper:[],fold:11322,foldFull:[11322]},{code:11275,lower:[],title:[],upper:[],fold:11323,foldFull:[11323]},{code:11276,lower:[],title:[],upper:[],fold:11324,foldFull:[11324]},{code:11277,lower:[],title:[],upper:[],fold:11325,foldFull:[11325]},{code:11278,lower:[],title:[],upper:[],fold:11326,foldFull:[11326]},{code:11279,lower:[],title:[],upper:[],fold:11327,foldFull:[11327]},{code:11280,lower:[],title:[],upper:[],fold:11328,foldFull:[11328]},{code:11281,lower:[],title:[],upper:[],fold:11329,foldFull:[11329]},{code:11282,lower:[],title:[],upper:[],fold:11330,foldFull:[11330]},{code:11283,lower:[],title:[],upper:[],fold:11331,foldFull:[11331]},{code:11284,lower:[],title:[],upper:[],fold:11332,foldFull:[11332]},{code:11285,lower:[],title:[],upper:[],fold:11333,foldFull:[11333]},{code:11286,lower:[],title:[],upper:[],fold:11334,foldFull:[11334]},{code:11287,lower:[],title:[],upper:[],fold:11335,foldFull:[11335]},{code:11288,lower:[],title:[],upper:[],fold:11336,foldFull:[11336]},{code:11289,lower:[],title:[],upper:[],fold:11337,foldFull:[11337]},{code:11290,lower:[],title:[],upper:[],fold:11338,foldFull:[11338]},{code:11291,lower:[],title:[],upper:[],fold:11339,foldFull:[11339]},{code:11292,lower:[],title:[],upper:[],fold:11340,foldFull:[11340]},{code:11293,lower:[],title:[],upper:[],fold:11341,foldFull:[11341]},{code:11294,lower:[],title:[],upper:[],fold:11342,foldFull:[11342]},{code:11295,lower:[],title:[],upper:[],fold:11343,foldFull:[11343]},{code:11296,lower:[],title:[],upper:[],fold:11344,foldFull:[11344]},{code:11297,lower:[],title:[],upper:[],fold:11345,foldFull:[11345]},{code:11298,lower:[],title:[],upper:[],fold:11346,foldFull:[11346]},{code:11299,lower:[],title:[],upper:[],fold:11347,foldFull:[11347]},{code:11300,lower:[],title:[],upper:[],fold:11348,foldFull:[11348]},{code:11301,lower:[],title:[],upper:[],fold:11349,foldFull:[11349]},{code:11302,lower:[],title:[],upper:[],fold:11350,foldFull:[11350]},{code:11303,lower:[],title:[],upper:[],fold:11351,foldFull:[11351]},{code:11304,lower:[],title:[],upper:[],fold:11352,foldFull:[11352]},{code:11305,lower:[],title:[],upper:[],fold:11353,foldFull:[11353]},{code:11306,lower:[],title:[],upper:[],fold:11354,foldFull:[11354]},{code:11307,lower:[],title:[],upper:[],fold:11355,foldFull:[11355]},{code:11308,lower:[],title:[],upper:[],fold:11356,foldFull:[11356]},{code:11309,lower:[],title:[],upper:[],fold:11357,foldFull:[11357]},{code:11310,lower:[],title:[],upper:[],fold:11358,foldFull:[11358]},{code:11360,lower:[],title:[],upper:[],fold:11361,foldFull:[11361]},{code:11362,lower:[],title:[],upper:[],fold:619,foldFull:[619]},{code:11363,lower:[],title:[],upper:[],fold:7549,foldFull:[7549]},{code:11364,lower:[],title:[],upper:[],fold:637,foldFull:[637]},{code:11367,lower:[],title:[],upper:[],fold:11368,foldFull:[11368]},{code:11369,lower:[],title:[],upper:[],fold:11370,foldFull:[11370]},{code:11371,lower:[],title:[],upper:[],fold:11372,foldFull:[11372]},{code:11373,lower:[],title:[],upper:[],fold:593,foldFull:[593]},{code:11374,lower:[],title:[],upper:[],fold:625,foldFull:[625]},{code:11375,lower:[],title:[],upper:[],fold:592,foldFull:[592]},{code:11376,lower:[],title:[],upper:[],fold:594,foldFull:[594]},{code:11378,lower:[],title:[],upper:[],fold:11379,foldFull:[11379]},{code:11381,lower:[],title:[],upper:[],fold:11382,foldFull:[11382]},{code:11390,lower:[],title:[],upper:[],fold:575,foldFull:[575]},{code:11391,lower:[],title:[],upper:[],fold:576,foldFull:[576]},{code:11392,lower:[],title:[],upper:[],fold:11393,foldFull:[11393]},{code:11394,lower:[],title:[],upper:[],fold:11395,foldFull:[11395]},{code:11396,lower:[],title:[],upper:[],fold:11397,foldFull:[11397]},{code:11398,lower:[],title:[],upper:[],fold:11399,foldFull:[11399]},{code:11400,lower:[],title:[],upper:[],fold:11401,foldFull:[11401]},{code:11402,lower:[],title:[],upper:[],fold:11403,foldFull:[11403]},{code:11404,lower:[],title:[],upper:[],fold:11405,foldFull:[11405]},{code:11406,lower:[],title:[],upper:[],fold:11407,foldFull:[11407]},{code:11408,lower:[],title:[],upper:[],fold:11409,foldFull:[11409]},{code:11410,lower:[],title:[],upper:[],fold:11411,foldFull:[11411]},{code:11412,lower:[],title:[],upper:[],fold:11413,foldFull:[11413]},{code:11414,lower:[],title:[],upper:[],fold:11415,foldFull:[11415]},{code:11416,lower:[],title:[],upper:[],fold:11417,foldFull:[11417]},{code:11418,lower:[],title:[],upper:[],fold:11419,foldFull:[11419]},{code:11420,lower:[],title:[],upper:[],fold:11421,foldFull:[11421]},{code:11422,lower:[],title:[],upper:[],fold:11423,foldFull:[11423]},{code:11424,lower:[],title:[],upper:[],fold:11425,foldFull:[11425]},{code:11426,lower:[],title:[],upper:[],fold:11427,foldFull:[11427]},{code:11428,lower:[],title:[],upper:[],fold:11429,foldFull:[11429]},{code:11430,lower:[],title:[],upper:[],fold:11431,foldFull:[11431]},{code:11432,lower:[],title:[],upper:[],fold:11433,foldFull:[11433]},{code:11434,lower:[],title:[],upper:[],fold:11435,foldFull:[11435]},{code:11436,lower:[],title:[],upper:[],fold:11437,foldFull:[11437]},{code:11438,lower:[],title:[],upper:[],fold:11439,foldFull:[11439]},{code:11440,lower:[],title:[],upper:[],fold:11441,foldFull:[11441]},{code:11442,lower:[],title:[],upper:[],fold:11443,foldFull:[11443]},{code:11444,lower:[],title:[],upper:[],fold:11445,foldFull:[11445]},{code:11446,lower:[],title:[],upper:[],fold:11447,foldFull:[11447]},{code:11448,lower:[],title:[],upper:[],fold:11449,foldFull:[11449]},{code:11450,lower:[],title:[],upper:[],fold:11451,foldFull:[11451]},{code:11452,lower:[],title:[],upper:[],fold:11453,foldFull:[11453]},{code:11454,lower:[],title:[],upper:[],fold:11455,foldFull:[11455]},{code:11456,lower:[],title:[],upper:[],fold:11457,foldFull:[11457]},{code:11458,lower:[],title:[],upper:[],fold:11459,foldFull:[11459]},{code:11460,lower:[],title:[],upper:[],fold:11461,foldFull:[11461]},{code:11462,lower:[],title:[],upper:[],fold:11463,foldFull:[11463]},{code:11464,lower:[],title:[],upper:[],fold:11465,foldFull:[11465]},{code:11466,lower:[],title:[],upper:[],fold:11467,foldFull:[11467]},{code:11468,lower:[],title:[],upper:[],fold:11469,foldFull:[11469]},{code:11470,lower:[],title:[],upper:[],fold:11471,foldFull:[11471]},{code:11472,lower:[],title:[],upper:[],fold:11473,foldFull:[11473]},{code:11474,lower:[],title:[],upper:[],fold:11475,foldFull:[11475]},{code:11476,lower:[],title:[],upper:[],fold:11477,foldFull:[11477]},{code:11478,lower:[],title:[],upper:[],fold:11479,foldFull:[11479]},{code:11480,lower:[],title:[],upper:[],fold:11481,foldFull:[11481]},{code:11482,lower:[],title:[],upper:[],fold:11483,foldFull:[11483]},{code:11484,lower:[],title:[],upper:[],fold:11485,foldFull:[11485]},{code:11486,lower:[],title:[],upper:[],fold:11487,foldFull:[11487]},{code:11488,lower:[],title:[],upper:[],fold:11489,foldFull:[11489]},{code:11490,lower:[],title:[],upper:[],fold:11491,foldFull:[11491]},{code:11499,lower:[],title:[],upper:[],fold:11500,foldFull:[11500]},{code:11501,lower:[],title:[],upper:[],fold:11502,foldFull:[11502]},{code:11506,lower:[],title:[],upper:[],fold:11507,foldFull:[11507]},{code:42560,lower:[],title:[],upper:[],fold:42561,foldFull:[42561]},{code:42562,lower:[],title:[],upper:[],fold:42563,foldFull:[42563]},{code:42564,lower:[],title:[],upper:[],fold:42565,foldFull:[42565]},{code:42566,lower:[],title:[],upper:[],fold:42567,foldFull:[42567]},{code:42568,lower:[],title:[],upper:[],fold:42569,foldFull:[42569]},{code:42570,lower:[],title:[],upper:[],fold:42571,foldFull:[42571]},{code:42572,lower:[],title:[],upper:[],fold:42573,foldFull:[42573]},{code:42574,lower:[],title:[],upper:[],fold:42575,foldFull:[42575]},{code:42576,lower:[],title:[],upper:[],fold:42577,foldFull:[42577]},{code:42578,lower:[],title:[],upper:[],fold:42579,foldFull:[42579]},{code:42580,lower:[],title:[],upper:[],fold:42581,foldFull:[42581]},{code:42582,lower:[],title:[],upper:[],fold:42583,foldFull:[42583]},{code:42584,lower:[],title:[],upper:[],fold:42585,foldFull:[42585]},{code:42586,lower:[],title:[],upper:[],fold:42587,foldFull:[42587]},{code:42588,lower:[],title:[],upper:[],fold:42589,foldFull:[42589]},{code:42590,lower:[],title:[],upper:[],fold:42591,foldFull:[42591]},{code:42592,lower:[],title:[],upper:[],fold:42593,foldFull:[42593]},{code:42594,lower:[],title:[],upper:[],fold:42595,foldFull:[42595]},{code:42596,lower:[],title:[],upper:[],fold:42597,foldFull:[42597]},{code:42598,lower:[],title:[],upper:[],fold:42599,foldFull:[42599]},{code:42600,lower:[],title:[],upper:[],fold:42601,foldFull:[42601]},{code:42602,lower:[],title:[],upper:[],fold:42603,foldFull:[42603]},{code:42604,lower:[],title:[],upper:[],fold:42605,foldFull:[42605]},{code:42624,lower:[],title:[],upper:[],fold:42625,foldFull:[42625]},{code:42626,lower:[],title:[],upper:[],fold:42627,foldFull:[42627]},{code:42628,lower:[],title:[],upper:[],fold:42629,foldFull:[42629]},{code:42630,lower:[],title:[],upper:[],fold:42631,foldFull:[42631]},{code:42632,lower:[],title:[],upper:[],fold:42633,foldFull:[42633]},{code:42634,lower:[],title:[],upper:[],fold:42635,foldFull:[42635]},{code:42636,lower:[],title:[],upper:[],fold:42637,foldFull:[42637]},{code:42638,lower:[],title:[],upper:[],fold:42639,foldFull:[42639]},{code:42640,lower:[],title:[],upper:[],fold:42641,foldFull:[42641]},{code:42642,lower:[],title:[],upper:[],fold:42643,foldFull:[42643]},{code:42644,lower:[],title:[],upper:[],fold:42645,foldFull:[42645]},{code:42646,lower:[],title:[],upper:[],fold:42647,foldFull:[42647]},{code:42648,lower:[],title:[],upper:[],fold:42649,foldFull:[42649]},{code:42650,lower:[],title:[],upper:[],fold:42651,foldFull:[42651]},{code:42786,lower:[],title:[],upper:[],fold:42787,foldFull:[42787]},{code:42788,lower:[],title:[],upper:[],fold:42789,foldFull:[42789]},{code:42790,lower:[],title:[],upper:[],fold:42791,foldFull:[42791]},{code:42792,lower:[],title:[],upper:[],fold:42793,foldFull:[42793]},{code:42794,lower:[],title:[],upper:[],fold:42795,foldFull:[42795]},{code:42796,lower:[],title:[],upper:[],fold:42797,foldFull:[42797]},{code:42798,lower:[],title:[],upper:[],fold:42799,foldFull:[42799]},{code:42802,lower:[],title:[],upper:[],fold:42803,foldFull:[42803]},{code:42804,lower:[],title:[],upper:[],fold:42805,foldFull:[42805]},{code:42806,lower:[],title:[],upper:[],fold:42807,foldFull:[42807]},{code:42808,lower:[],title:[],upper:[],fold:42809,foldFull:[42809]},{code:42810,lower:[],title:[],upper:[],fold:42811,foldFull:[42811]},{code:42812,lower:[],title:[],upper:[],fold:42813,foldFull:[42813]},{code:42814,lower:[],title:[],upper:[],fold:42815,foldFull:[42815]},{code:42816,lower:[],title:[],upper:[],fold:42817,foldFull:[42817]},{code:42818,lower:[],title:[],upper:[],fold:42819,foldFull:[42819]},{code:42820,lower:[],title:[],upper:[],fold:42821,foldFull:[42821]},{code:42822,lower:[],title:[],upper:[],fold:42823,foldFull:[42823]},{code:42824,lower:[],title:[],upper:[],fold:42825,foldFull:[42825]},{code:42826,lower:[],title:[],upper:[],fold:42827,foldFull:[42827]},{code:42828,lower:[],title:[],upper:[],fold:42829,foldFull:[42829]},{code:42830,lower:[],title:[],upper:[],fold:42831,foldFull:[42831]},{code:42832,lower:[],title:[],upper:[],fold:42833,foldFull:[42833]},{code:42834,lower:[],title:[],upper:[],fold:42835,foldFull:[42835]},{code:42836,lower:[],title:[],upper:[],fold:42837,foldFull:[42837]},{code:42838,lower:[],title:[],upper:[],fold:42839,foldFull:[42839]},{code:42840,lower:[],title:[],upper:[],fold:42841,foldFull:[42841]},{code:42842,lower:[],title:[],upper:[],fold:42843,foldFull:[42843]},{code:42844,lower:[],title:[],upper:[],fold:42845,foldFull:[42845]},{code:42846,lower:[],title:[],upper:[],fold:42847,foldFull:[42847]},{code:42848,lower:[],title:[],upper:[],fold:42849,foldFull:[42849]},{code:42850,lower:[],title:[],upper:[],fold:42851,foldFull:[42851]},{code:42852,lower:[],title:[],upper:[],fold:42853,foldFull:[42853]},{code:42854,lower:[],title:[],upper:[],fold:42855,foldFull:[42855]},{code:42856,lower:[],title:[],upper:[],fold:42857,foldFull:[42857]},{code:42858,lower:[],title:[],upper:[],fold:42859,foldFull:[42859]},{code:42860,lower:[],title:[],upper:[],fold:42861,foldFull:[42861]},{code:42862,lower:[],title:[],upper:[],fold:42863,foldFull:[42863]},{code:42873,lower:[],title:[],upper:[],fold:42874,foldFull:[42874]},{code:42875,lower:[],title:[],upper:[],fold:42876,foldFull:[42876]},{code:42877,lower:[],title:[],upper:[],fold:7545,foldFull:[7545]},{code:42878,lower:[],title:[],upper:[],fold:42879,foldFull:[42879]},{code:42880,lower:[],title:[],upper:[],fold:42881,foldFull:[42881]},{code:42882,lower:[],title:[],upper:[],fold:42883,foldFull:[42883]},{code:42884,lower:[],title:[],upper:[],fold:42885,foldFull:[42885]},{code:42886,lower:[],title:[],upper:[],fold:42887,foldFull:[42887]},{code:42891,lower:[],title:[],upper:[],fold:42892,foldFull:[42892]},{code:42893,lower:[],title:[],upper:[],fold:613,foldFull:[613]},{code:42896,lower:[],title:[],upper:[],fold:42897,foldFull:[42897]},{code:42898,lower:[],title:[],upper:[],fold:42899,foldFull:[42899]},{code:42902,lower:[],title:[],upper:[],fold:42903,foldFull:[42903]},{code:42904,lower:[],title:[],upper:[],fold:42905,foldFull:[42905]},{code:42906,lower:[],title:[],upper:[],fold:42907,foldFull:[42907]},{code:42908,lower:[],title:[],upper:[],fold:42909,foldFull:[42909]},{code:42910,lower:[],title:[],upper:[],fold:42911,foldFull:[42911]},{code:42912,lower:[],title:[],upper:[],fold:42913,foldFull:[42913]},{code:42914,lower:[],title:[],upper:[],fold:42915,foldFull:[42915]},{code:42916,lower:[],title:[],upper:[],fold:42917,foldFull:[42917]},{code:42918,lower:[],title:[],upper:[],fold:42919,foldFull:[42919]},{code:42920,lower:[],title:[],upper:[],fold:42921,foldFull:[42921]},{code:42922,lower:[],title:[],upper:[],fold:614,foldFull:[614]},{code:42923,lower:[],title:[],upper:[],fold:604,foldFull:[604]},{code:42924,lower:[],title:[],upper:[],fold:609,foldFull:[609]},{code:42925,lower:[],title:[],upper:[],fold:620,foldFull:[620]},{code:42926,lower:[],title:[],upper:[],fold:618,foldFull:[618]},{code:42928,lower:[],title:[],upper:[],fold:670,foldFull:[670]},{code:42929,lower:[],title:[],upper:[],fold:647,foldFull:[647]},{code:42930,lower:[],title:[],upper:[],fold:669,foldFull:[669]},{code:42931,lower:[],title:[],upper:[],fold:43859,foldFull:[43859]},{code:42932,lower:[],title:[],upper:[],fold:42933,foldFull:[42933]},{code:42934,lower:[],title:[],upper:[],fold:42935,foldFull:[42935]},{code:42936,lower:[],title:[],upper:[],fold:42937,foldFull:[42937]},{code:42938,lower:[],title:[],upper:[],fold:42939,foldFull:[42939]},{code:42940,lower:[],title:[],upper:[],fold:42941,foldFull:[42941]},{code:42942,lower:[],title:[],upper:[],fold:42943,foldFull:[42943]},{code:42946,lower:[],title:[],upper:[],fold:42947,foldFull:[42947]},{code:42948,lower:[],title:[],upper:[],fold:42900,foldFull:[42900]},{code:42949,lower:[],title:[],upper:[],fold:642,foldFull:[642]},{code:42950,lower:[],title:[],upper:[],fold:7566,foldFull:[7566]},{code:42951,lower:[],title:[],upper:[],fold:42952,foldFull:[42952]},{code:42953,lower:[],title:[],upper:[],fold:42954,foldFull:[42954]},{code:42997,lower:[],title:[],upper:[],fold:42998,foldFull:[42998]},{code:43888,lower:[],title:[],upper:[],fold:5024,foldFull:[5024]},{code:43889,lower:[],title:[],upper:[],fold:5025,foldFull:[5025]},{code:43890,lower:[],title:[],upper:[],fold:5026,foldFull:[5026]},{code:43891,lower:[],title:[],upper:[],fold:5027,foldFull:[5027]},{code:43892,lower:[],title:[],upper:[],fold:5028,foldFull:[5028]},{code:43893,lower:[],title:[],upper:[],fold:5029,foldFull:[5029]},{code:43894,lower:[],title:[],upper:[],fold:5030,foldFull:[5030]},{code:43895,lower:[],title:[],upper:[],fold:5031,foldFull:[5031]},{code:43896,lower:[],title:[],upper:[],fold:5032,foldFull:[5032]},{code:43897,lower:[],title:[],upper:[],fold:5033,foldFull:[5033]},{code:43898,lower:[],title:[],upper:[],fold:5034,foldFull:[5034]},{code:43899,lower:[],title:[],upper:[],fold:5035,foldFull:[5035]},{code:43900,lower:[],title:[],upper:[],fold:5036,foldFull:[5036]},{code:43901,lower:[],title:[],upper:[],fold:5037,foldFull:[5037]},{code:43902,lower:[],title:[],upper:[],fold:5038,foldFull:[5038]},{code:43903,lower:[],title:[],upper:[],fold:5039,foldFull:[5039]},{code:43904,lower:[],title:[],upper:[],fold:5040,foldFull:[5040]},{code:43905,lower:[],title:[],upper:[],fold:5041,foldFull:[5041]},{code:43906,lower:[],title:[],upper:[],fold:5042,foldFull:[5042]},{code:43907,lower:[],title:[],upper:[],fold:5043,foldFull:[5043]},{code:43908,lower:[],title:[],upper:[],fold:5044,foldFull:[5044]},{code:43909,lower:[],title:[],upper:[],fold:5045,foldFull:[5045]},{code:43910,lower:[],title:[],upper:[],fold:5046,foldFull:[5046]},{code:43911,lower:[],title:[],upper:[],fold:5047,foldFull:[5047]},{code:43912,lower:[],title:[],upper:[],fold:5048,foldFull:[5048]},{code:43913,lower:[],title:[],upper:[],fold:5049,foldFull:[5049]},{code:43914,lower:[],title:[],upper:[],fold:5050,foldFull:[5050]},{code:43915,lower:[],title:[],upper:[],fold:5051,foldFull:[5051]},{code:43916,lower:[],title:[],upper:[],fold:5052,foldFull:[5052]},{code:43917,lower:[],title:[],upper:[],fold:5053,foldFull:[5053]},{code:43918,lower:[],title:[],upper:[],fold:5054,foldFull:[5054]},{code:43919,lower:[],title:[],upper:[],fold:5055,foldFull:[5055]},{code:43920,lower:[],title:[],upper:[],fold:5056,foldFull:[5056]},{code:43921,lower:[],title:[],upper:[],fold:5057,foldFull:[5057]},{code:43922,lower:[],title:[],upper:[],fold:5058,foldFull:[5058]},{code:43923,lower:[],title:[],upper:[],fold:5059,foldFull:[5059]},{code:43924,lower:[],title:[],upper:[],fold:5060,foldFull:[5060]},{code:43925,lower:[],title:[],upper:[],fold:5061,foldFull:[5061]},{code:43926,lower:[],title:[],upper:[],fold:5062,foldFull:[5062]},{code:43927,lower:[],title:[],upper:[],fold:5063,foldFull:[5063]},{code:43928,lower:[],title:[],upper:[],fold:5064,foldFull:[5064]},{code:43929,lower:[],title:[],upper:[],fold:5065,foldFull:[5065]},{code:43930,lower:[],title:[],upper:[],fold:5066,foldFull:[5066]},{code:43931,lower:[],title:[],upper:[],fold:5067,foldFull:[5067]},{code:43932,lower:[],title:[],upper:[],fold:5068,foldFull:[5068]},{code:43933,lower:[],title:[],upper:[],fold:5069,foldFull:[5069]},{code:43934,lower:[],title:[],upper:[],fold:5070,foldFull:[5070]},{code:43935,lower:[],title:[],upper:[],fold:5071,foldFull:[5071]},{code:43936,lower:[],title:[],upper:[],fold:5072,foldFull:[5072]},{code:43937,lower:[],title:[],upper:[],fold:5073,foldFull:[5073]},{code:43938,lower:[],title:[],upper:[],fold:5074,foldFull:[5074]},{code:43939,lower:[],title:[],upper:[],fold:5075,foldFull:[5075]},{code:43940,lower:[],title:[],upper:[],fold:5076,foldFull:[5076]},{code:43941,lower:[],title:[],upper:[],fold:5077,foldFull:[5077]},{code:43942,lower:[],title:[],upper:[],fold:5078,foldFull:[5078]},{code:43943,lower:[],title:[],upper:[],fold:5079,foldFull:[5079]},{code:43944,lower:[],title:[],upper:[],fold:5080,foldFull:[5080]},{code:43945,lower:[],title:[],upper:[],fold:5081,foldFull:[5081]},{code:43946,lower:[],title:[],upper:[],fold:5082,foldFull:[5082]},{code:43947,lower:[],title:[],upper:[],fold:5083,foldFull:[5083]},{code:43948,lower:[],title:[],upper:[],fold:5084,foldFull:[5084]},{code:43949,lower:[],title:[],upper:[],fold:5085,foldFull:[5085]},{code:43950,lower:[],title:[],upper:[],fold:5086,foldFull:[5086]},{code:43951,lower:[],title:[],upper:[],fold:5087,foldFull:[5087]},{code:43952,lower:[],title:[],upper:[],fold:5088,foldFull:[5088]},{code:43953,lower:[],title:[],upper:[],fold:5089,foldFull:[5089]},{code:43954,lower:[],title:[],upper:[],fold:5090,foldFull:[5090]},{code:43955,lower:[],title:[],upper:[],fold:5091,foldFull:[5091]},{code:43956,lower:[],title:[],upper:[],fold:5092,foldFull:[5092]},{code:43957,lower:[],title:[],upper:[],fold:5093,foldFull:[5093]},{code:43958,lower:[],title:[],upper:[],fold:5094,foldFull:[5094]},{code:43959,lower:[],title:[],upper:[],fold:5095,foldFull:[5095]},{code:43960,lower:[],title:[],upper:[],fold:5096,foldFull:[5096]},{code:43961,lower:[],title:[],upper:[],fold:5097,foldFull:[5097]},{code:43962,lower:[],title:[],upper:[],fold:5098,foldFull:[5098]},{code:43963,lower:[],title:[],upper:[],fold:5099,foldFull:[5099]},{code:43964,lower:[],title:[],upper:[],fold:5100,foldFull:[5100]},{code:43965,lower:[],title:[],upper:[],fold:5101,foldFull:[5101]},{code:43966,lower:[],title:[],upper:[],fold:5102,foldFull:[5102]},{code:43967,lower:[],title:[],upper:[],fold:5103,foldFull:[5103]},{code:64256,lower:[64256],title:[70,102],upper:[70,70],fold:0,foldFull:[102,102]},{code:64256,lower:[64256],title:[70,102],upper:[70,70],fold:0,foldFull:[102,102]},{code:64257,lower:[64257],title:[70,105],upper:[70,73],fold:0,foldFull:[102,105]},{code:64257,lower:[64257],title:[70,105],upper:[70,73],fold:0,foldFull:[102,105]},{code:64258,lower:[64258],title:[70,108],upper:[70,76],fold:0,foldFull:[102,108]},{code:64258,lower:[64258],title:[70,108],upper:[70,76],fold:0,foldFull:[102,108]},{code:64259,lower:[64259],title:[70,102,105],upper:[70,70,73],fold:0,foldFull:[102,102,105]},{code:64259,lower:[64259],title:[70,102,105],upper:[70,70,73],fold:0,foldFull:[102,102,105]},{code:64260,lower:[64260],title:[70,102,108],upper:[70,70,76],fold:0,foldFull:[102,102,108]},{code:64260,lower:[64260],title:[70,102,108],upper:[70,70,76],fold:0,foldFull:[102,102,108]},{code:64261,lower:[64261],title:[83,116],upper:[83,84],fold:0,foldFull:[115,116]},{code:64261,lower:[64261],title:[83,116],upper:[83,84],fold:0,foldFull:[115,116]},{code:64262,lower:[64262],title:[83,116],upper:[83,84],fold:0,foldFull:[115,116]},{code:64262,lower:[64262],title:[83,116],upper:[83,84],fold:0,foldFull:[115,116]},{code:64275,lower:[64275],title:[1348,1398],upper:[1348,1350],fold:0,foldFull:[1396,1398]},{code:64275,lower:[64275],title:[1348,1398],upper:[1348,1350],fold:0,foldFull:[1396,1398]},{code:64276,lower:[64276],title:[1348,1381],upper:[1348,1333],fold:0,foldFull:[1396,1381]},{code:64276,lower:[64276],title:[1348,1381],upper:[1348,1333],fold:0,foldFull:[1396,1381]},{code:64277,lower:[64277],title:[1348,1387],upper:[1348,1339],fold:0,foldFull:[1396,1387]},{code:64277,lower:[64277],title:[1348,1387],upper:[1348,1339],fold:0,foldFull:[1396,1387]},{code:64278,lower:[64278],title:[1358,1398],upper:[1358,1350],fold:0,foldFull:[1406,1398]},{code:64278,lower:[64278],title:[1358,1398],upper:[1358,1350],fold:0,foldFull:[1406,1398]},{code:64279,lower:[64279],title:[1348,1389],upper:[1348,1341],fold:0,foldFull:[1396,1389]},{code:64279,lower:[64279],title:[1348,1389],upper:[1348,1341],fold:0,foldFull:[1396,1389]},{code:65313,lower:[],title:[],upper:[],fold:65345,foldFull:[65345]},{code:65314,lower:[],title:[],upper:[],fold:65346,foldFull:[65346]},{code:65315,lower:[],title:[],upper:[],fold:65347,foldFull:[65347]},{code:65316,lower:[],title:[],upper:[],fold:65348,foldFull:[65348]},{code:65317,lower:[],title:[],upper:[],fold:65349,foldFull:[65349]},{code:65318,lower:[],title:[],upper:[],fold:65350,foldFull:[65350]},{code:65319,lower:[],title:[],upper:[],fold:65351,foldFull:[65351]},{code:65320,lower:[],title:[],upper:[],fold:65352,foldFull:[65352]},{code:65321,lower:[],title:[],upper:[],fold:65353,foldFull:[65353]},{code:65322,lower:[],title:[],upper:[],fold:65354,foldFull:[65354]},{code:65323,lower:[],title:[],upper:[],fold:65355,foldFull:[65355]},{code:65324,lower:[],title:[],upper:[],fold:65356,foldFull:[65356]},{code:65325,lower:[],title:[],upper:[],fold:65357,foldFull:[65357]},{code:65326,lower:[],title:[],upper:[],fold:65358,foldFull:[65358]},{code:65327,lower:[],title:[],upper:[],fold:65359,foldFull:[65359]},{code:65328,lower:[],title:[],upper:[],fold:65360,foldFull:[65360]},{code:65329,lower:[],title:[],upper:[],fold:65361,foldFull:[65361]},{code:65330,lower:[],title:[],upper:[],fold:65362,foldFull:[65362]},{code:65331,lower:[],title:[],upper:[],fold:65363,foldFull:[65363]},{code:65332,lower:[],title:[],upper:[],fold:65364,foldFull:[65364]},{code:65333,lower:[],title:[],upper:[],fold:65365,foldFull:[65365]},{code:65334,lower:[],title:[],upper:[],fold:65366,foldFull:[65366]},{code:65335,lower:[],title:[],upper:[],fold:65367,foldFull:[65367]},{code:65336,lower:[],title:[],upper:[],fold:65368,foldFull:[65368]},{code:65337,lower:[],title:[],upper:[],fold:65369,foldFull:[65369]},{code:65338,lower:[],title:[],upper:[],fold:65370,foldFull:[65370]},{code:66560,lower:[],title:[],upper:[],fold:66600,foldFull:[66600]},{code:66561,lower:[],title:[],upper:[],fold:66601,foldFull:[66601]},{code:66562,lower:[],title:[],upper:[],fold:66602,foldFull:[66602]},{code:66563,lower:[],title:[],upper:[],fold:66603,foldFull:[66603]},{code:66564,lower:[],title:[],upper:[],fold:66604,foldFull:[66604]},{code:66565,lower:[],title:[],upper:[],fold:66605,foldFull:[66605]},{code:66566,lower:[],title:[],upper:[],fold:66606,foldFull:[66606]},{code:66567,lower:[],title:[],upper:[],fold:66607,foldFull:[66607]},{code:66568,lower:[],title:[],upper:[],fold:66608,foldFull:[66608]},{code:66569,lower:[],title:[],upper:[],fold:66609,foldFull:[66609]},{code:66570,lower:[],title:[],upper:[],fold:66610,foldFull:[66610]},{code:66571,lower:[],title:[],upper:[],fold:66611,foldFull:[66611]},{code:66572,lower:[],title:[],upper:[],fold:66612,foldFull:[66612]},{code:66573,lower:[],title:[],upper:[],fold:66613,foldFull:[66613]},{code:66574,lower:[],title:[],upper:[],fold:66614,foldFull:[66614]},{code:66575,lower:[],title:[],upper:[],fold:66615,foldFull:[66615]},{code:66576,lower:[],title:[],upper:[],fold:66616,foldFull:[66616]},{code:66577,lower:[],title:[],upper:[],fold:66617,foldFull:[66617]},{code:66578,lower:[],title:[],upper:[],fold:66618,foldFull:[66618]},{code:66579,lower:[],title:[],upper:[],fold:66619,foldFull:[66619]},{code:66580,lower:[],title:[],upper:[],fold:66620,foldFull:[66620]},{code:66581,lower:[],title:[],upper:[],fold:66621,foldFull:[66621]},{code:66582,lower:[],title:[],upper:[],fold:66622,foldFull:[66622]},{code:66583,lower:[],title:[],upper:[],fold:66623,foldFull:[66623]},{code:66584,lower:[],title:[],upper:[],fold:66624,foldFull:[66624]},{code:66585,lower:[],title:[],upper:[],fold:66625,foldFull:[66625]},{code:66586,lower:[],title:[],upper:[],fold:66626,foldFull:[66626]},{code:66587,lower:[],title:[],upper:[],fold:66627,foldFull:[66627]},{code:66588,lower:[],title:[],upper:[],fold:66628,foldFull:[66628]},{code:66589,lower:[],title:[],upper:[],fold:66629,foldFull:[66629]},{code:66590,lower:[],title:[],upper:[],fold:66630,foldFull:[66630]},{code:66591,lower:[],title:[],upper:[],fold:66631,foldFull:[66631]},{code:66592,lower:[],title:[],upper:[],fold:66632,foldFull:[66632]},{code:66593,lower:[],title:[],upper:[],fold:66633,foldFull:[66633]},{code:66594,lower:[],title:[],upper:[],fold:66634,foldFull:[66634]},{code:66595,lower:[],title:[],upper:[],fold:66635,foldFull:[66635]},{code:66596,lower:[],title:[],upper:[],fold:66636,foldFull:[66636]},{code:66597,lower:[],title:[],upper:[],fold:66637,foldFull:[66637]},{code:66598,lower:[],title:[],upper:[],fold:66638,foldFull:[66638]},{code:66599,lower:[],title:[],upper:[],fold:66639,foldFull:[66639]},{code:66736,lower:[],title:[],upper:[],fold:66776,foldFull:[66776]},{code:66737,lower:[],title:[],upper:[],fold:66777,foldFull:[66777]},{code:66738,lower:[],title:[],upper:[],fold:66778,foldFull:[66778]},{code:66739,lower:[],title:[],upper:[],fold:66779,foldFull:[66779]},{code:66740,lower:[],title:[],upper:[],fold:66780,foldFull:[66780]},{code:66741,lower:[],title:[],upper:[],fold:66781,foldFull:[66781]},{code:66742,lower:[],title:[],upper:[],fold:66782,foldFull:[66782]},{code:66743,lower:[],title:[],upper:[],fold:66783,foldFull:[66783]},{code:66744,lower:[],title:[],upper:[],fold:66784,foldFull:[66784]},{code:66745,lower:[],title:[],upper:[],fold:66785,foldFull:[66785]},{code:66746,lower:[],title:[],upper:[],fold:66786,foldFull:[66786]},{code:66747,lower:[],title:[],upper:[],fold:66787,foldFull:[66787]},{code:66748,lower:[],title:[],upper:[],fold:66788,foldFull:[66788]},{code:66749,lower:[],title:[],upper:[],fold:66789,foldFull:[66789]},{code:66750,lower:[],title:[],upper:[],fold:66790,foldFull:[66790]},{code:66751,lower:[],title:[],upper:[],fold:66791,foldFull:[66791]},{code:66752,lower:[],title:[],upper:[],fold:66792,foldFull:[66792]},{code:66753,lower:[],title:[],upper:[],fold:66793,foldFull:[66793]},{code:66754,lower:[],title:[],upper:[],fold:66794,foldFull:[66794]},{code:66755,lower:[],title:[],upper:[],fold:66795,foldFull:[66795]},{code:66756,lower:[],title:[],upper:[],fold:66796,foldFull:[66796]},{code:66757,lower:[],title:[],upper:[],fold:66797,foldFull:[66797]},{code:66758,lower:[],title:[],upper:[],fold:66798,foldFull:[66798]},{code:66759,lower:[],title:[],upper:[],fold:66799,foldFull:[66799]},{code:66760,lower:[],title:[],upper:[],fold:66800,foldFull:[66800]},{code:66761,lower:[],title:[],upper:[],fold:66801,foldFull:[66801]},{code:66762,lower:[],title:[],upper:[],fold:66802,foldFull:[66802]},{code:66763,lower:[],title:[],upper:[],fold:66803,foldFull:[66803]},{code:66764,lower:[],title:[],upper:[],fold:66804,foldFull:[66804]},{code:66765,lower:[],title:[],upper:[],fold:66805,foldFull:[66805]},{code:66766,lower:[],title:[],upper:[],fold:66806,foldFull:[66806]},{code:66767,lower:[],title:[],upper:[],fold:66807,foldFull:[66807]},{code:66768,lower:[],title:[],upper:[],fold:66808,foldFull:[66808]},{code:66769,lower:[],title:[],upper:[],fold:66809,foldFull:[66809]},{code:66770,lower:[],title:[],upper:[],fold:66810,foldFull:[66810]},{code:66771,lower:[],title:[],upper:[],fold:66811,foldFull:[66811]},{code:68736,lower:[],title:[],upper:[],fold:68800,foldFull:[68800]},{code:68737,lower:[],title:[],upper:[],fold:68801,foldFull:[68801]},{code:68738,lower:[],title:[],upper:[],fold:68802,foldFull:[68802]},{code:68739,lower:[],title:[],upper:[],fold:68803,foldFull:[68803]},{code:68740,lower:[],title:[],upper:[],fold:68804,foldFull:[68804]},{code:68741,lower:[],title:[],upper:[],fold:68805,foldFull:[68805]},{code:68742,lower:[],title:[],upper:[],fold:68806,foldFull:[68806]},{code:68743,lower:[],title:[],upper:[],fold:68807,foldFull:[68807]},{code:68744,lower:[],title:[],upper:[],fold:68808,foldFull:[68808]},{code:68745,lower:[],title:[],upper:[],fold:68809,foldFull:[68809]},{code:68746,lower:[],title:[],upper:[],fold:68810,foldFull:[68810]},{code:68747,lower:[],title:[],upper:[],fold:68811,foldFull:[68811]},{code:68748,lower:[],title:[],upper:[],fold:68812,foldFull:[68812]},{code:68749,lower:[],title:[],upper:[],fold:68813,foldFull:[68813]},{code:68750,lower:[],title:[],upper:[],fold:68814,foldFull:[68814]},{code:68751,lower:[],title:[],upper:[],fold:68815,foldFull:[68815]},{code:68752,lower:[],title:[],upper:[],fold:68816,foldFull:[68816]},{code:68753,lower:[],title:[],upper:[],fold:68817,foldFull:[68817]},{code:68754,lower:[],title:[],upper:[],fold:68818,foldFull:[68818]},{code:68755,lower:[],title:[],upper:[],fold:68819,foldFull:[68819]},{code:68756,lower:[],title:[],upper:[],fold:68820,foldFull:[68820]},{code:68757,lower:[],title:[],upper:[],fold:68821,foldFull:[68821]},{code:68758,lower:[],title:[],upper:[],fold:68822,foldFull:[68822]},{code:68759,lower:[],title:[],upper:[],fold:68823,foldFull:[68823]},{code:68760,lower:[],title:[],upper:[],fold:68824,foldFull:[68824]},{code:68761,lower:[],title:[],upper:[],fold:68825,foldFull:[68825]},{code:68762,lower:[],title:[],upper:[],fold:68826,foldFull:[68826]},{code:68763,lower:[],title:[],upper:[],fold:68827,foldFull:[68827]},{code:68764,lower:[],title:[],upper:[],fold:68828,foldFull:[68828]},{code:68765,lower:[],title:[],upper:[],fold:68829,foldFull:[68829]},{code:68766,lower:[],title:[],upper:[],fold:68830,foldFull:[68830]},{code:68767,lower:[],title:[],upper:[],fold:68831,foldFull:[68831]},{code:68768,lower:[],title:[],upper:[],fold:68832,foldFull:[68832]},{code:68769,lower:[],title:[],upper:[],fold:68833,foldFull:[68833]},{code:68770,lower:[],title:[],upper:[],fold:68834,foldFull:[68834]},{code:68771,lower:[],title:[],upper:[],fold:68835,foldFull:[68835]},{code:68772,lower:[],title:[],upper:[],fold:68836,foldFull:[68836]},{code:68773,lower:[],title:[],upper:[],fold:68837,foldFull:[68837]},{code:68774,lower:[],title:[],upper:[],fold:68838,foldFull:[68838]},{code:68775,lower:[],title:[],upper:[],fold:68839,foldFull:[68839]},{code:68776,lower:[],title:[],upper:[],fold:68840,foldFull:[68840]},{code:68777,lower:[],title:[],upper:[],fold:68841,foldFull:[68841]},{code:68778,lower:[],title:[],upper:[],fold:68842,foldFull:[68842]},{code:68779,lower:[],title:[],upper:[],fold:68843,foldFull:[68843]},{code:68780,lower:[],title:[],upper:[],fold:68844,foldFull:[68844]},{code:68781,lower:[],title:[],upper:[],fold:68845,foldFull:[68845]},{code:68782,lower:[],title:[],upper:[],fold:68846,foldFull:[68846]},{code:68783,lower:[],title:[],upper:[],fold:68847,foldFull:[68847]},{code:68784,lower:[],title:[],upper:[],fold:68848,foldFull:[68848]},{code:68785,lower:[],title:[],upper:[],fold:68849,foldFull:[68849]},{code:68786,lower:[],title:[],upper:[],fold:68850,foldFull:[68850]},{code:71840,lower:[],title:[],upper:[],fold:71872,foldFull:[71872]},{code:71841,lower:[],title:[],upper:[],fold:71873,foldFull:[71873]},{code:71842,lower:[],title:[],upper:[],fold:71874,foldFull:[71874]},{code:71843,lower:[],title:[],upper:[],fold:71875,foldFull:[71875]},{code:71844,lower:[],title:[],upper:[],fold:71876,foldFull:[71876]},{code:71845,lower:[],title:[],upper:[],fold:71877,foldFull:[71877]},{code:71846,lower:[],title:[],upper:[],fold:71878,foldFull:[71878]},{code:71847,lower:[],title:[],upper:[],fold:71879,foldFull:[71879]},{code:71848,lower:[],title:[],upper:[],fold:71880,foldFull:[71880]},{code:71849,lower:[],title:[],upper:[],fold:71881,foldFull:[71881]},{code:71850,lower:[],title:[],upper:[],fold:71882,foldFull:[71882]},{code:71851,lower:[],title:[],upper:[],fold:71883,foldFull:[71883]},{code:71852,lower:[],title:[],upper:[],fold:71884,foldFull:[71884]},{code:71853,lower:[],title:[],upper:[],fold:71885,foldFull:[71885]},{code:71854,lower:[],title:[],upper:[],fold:71886,foldFull:[71886]},{code:71855,lower:[],title:[],upper:[],fold:71887,foldFull:[71887]},{code:71856,lower:[],title:[],upper:[],fold:71888,foldFull:[71888]},{code:71857,lower:[],title:[],upper:[],fold:71889,foldFull:[71889]},{code:71858,lower:[],title:[],upper:[],fold:71890,foldFull:[71890]},{code:71859,lower:[],title:[],upper:[],fold:71891,foldFull:[71891]},{code:71860,lower:[],title:[],upper:[],fold:71892,foldFull:[71892]},{code:71861,lower:[],title:[],upper:[],fold:71893,foldFull:[71893]},{code:71862,lower:[],title:[],upper:[],fold:71894,foldFull:[71894]},{code:71863,lower:[],title:[],upper:[],fold:71895,foldFull:[71895]},{code:71864,lower:[],title:[],upper:[],fold:71896,foldFull:[71896]},{code:71865,lower:[],title:[],upper:[],fold:71897,foldFull:[71897]},{code:71866,lower:[],title:[],upper:[],fold:71898,foldFull:[71898]},{code:71867,lower:[],title:[],upper:[],fold:71899,foldFull:[71899]},{code:71868,lower:[],title:[],upper:[],fold:71900,foldFull:[71900]},{code:71869,lower:[],title:[],upper:[],fold:71901,foldFull:[71901]},{code:71870,lower:[],title:[],upper:[],fold:71902,foldFull:[71902]},{code:71871,lower:[],title:[],upper:[],fold:71903,foldFull:[71903]},{code:93760,lower:[],title:[],upper:[],fold:93792,foldFull:[93792]},{code:93761,lower:[],title:[],upper:[],fold:93793,foldFull:[93793]},{code:93762,lower:[],title:[],upper:[],fold:93794,foldFull:[93794]},{code:93763,lower:[],title:[],upper:[],fold:93795,foldFull:[93795]},{code:93764,lower:[],title:[],upper:[],fold:93796,foldFull:[93796]},{code:93765,lower:[],title:[],upper:[],fold:93797,foldFull:[93797]},{code:93766,lower:[],title:[],upper:[],fold:93798,foldFull:[93798]},{code:93767,lower:[],title:[],upper:[],fold:93799,foldFull:[93799]},{code:93768,lower:[],title:[],upper:[],fold:93800,foldFull:[93800]},{code:93769,lower:[],title:[],upper:[],fold:93801,foldFull:[93801]},{code:93770,lower:[],title:[],upper:[],fold:93802,foldFull:[93802]},{code:93771,lower:[],title:[],upper:[],fold:93803,foldFull:[93803]},{code:93772,lower:[],title:[],upper:[],fold:93804,foldFull:[93804]},{code:93773,lower:[],title:[],upper:[],fold:93805,foldFull:[93805]},{code:93774,lower:[],title:[],upper:[],fold:93806,foldFull:[93806]},{code:93775,lower:[],title:[],upper:[],fold:93807,foldFull:[93807]},{code:93776,lower:[],title:[],upper:[],fold:93808,foldFull:[93808]},{code:93777,lower:[],title:[],upper:[],fold:93809,foldFull:[93809]},{code:93778,lower:[],title:[],upper:[],fold:93810,foldFull:[93810]},{code:93779,lower:[],title:[],upper:[],fold:93811,foldFull:[93811]},{code:93780,lower:[],title:[],upper:[],fold:93812,foldFull:[93812]},{code:93781,lower:[],title:[],upper:[],fold:93813,foldFull:[93813]},{code:93782,lower:[],title:[],upper:[],fold:93814,foldFull:[93814]},{code:93783,lower:[],title:[],upper:[],fold:93815,foldFull:[93815]},{code:93784,lower:[],title:[],upper:[],fold:93816,foldFull:[93816]},{code:93785,lower:[],title:[],upper:[],fold:93817,foldFull:[93817]},{code:93786,lower:[],title:[],upper:[],fold:93818,foldFull:[93818]},{code:93787,lower:[],title:[],upper:[],fold:93819,foldFull:[93819]},{code:93788,lower:[],title:[],upper:[],fold:93820,foldFull:[93820]},{code:93789,lower:[],title:[],upper:[],fold:93821,foldFull:[93821]},{code:93790,lower:[],title:[],upper:[],fold:93822,foldFull:[93822]},{code:93791,lower:[],title:[],upper:[],fold:93823,foldFull:[93823]},{code:125184,lower:[],title:[],upper:[],fold:125218,foldFull:[125218]},{code:125185,lower:[],title:[],upper:[],fold:125219,foldFull:[125219]},{code:125186,lower:[],title:[],upper:[],fold:125220,foldFull:[125220]},{code:125187,lower:[],title:[],upper:[],fold:125221,foldFull:[125221]},{code:125188,lower:[],title:[],upper:[],fold:125222,foldFull:[125222]},{code:125189,lower:[],title:[],upper:[],fold:125223,foldFull:[125223]},{code:125190,lower:[],title:[],upper:[],fold:125224,foldFull:[125224]},{code:125191,lower:[],title:[],upper:[],fold:125225,foldFull:[125225]},{code:125192,lower:[],title:[],upper:[],fold:125226,foldFull:[125226]},{code:125193,lower:[],title:[],upper:[],fold:125227,foldFull:[125227]},{code:125194,lower:[],title:[],upper:[],fold:125228,foldFull:[125228]},{code:125195,lower:[],title:[],upper:[],fold:125229,foldFull:[125229]},{code:125196,lower:[],title:[],upper:[],fold:125230,foldFull:[125230]},{code:125197,lower:[],title:[],upper:[],fold:125231,foldFull:[125231]},{code:125198,lower:[],title:[],upper:[],fold:125232,foldFull:[125232]},{code:125199,lower:[],title:[],upper:[],fold:125233,foldFull:[125233]},{code:125200,lower:[],title:[],upper:[],fold:125234,foldFull:[125234]},{code:125201,lower:[],title:[],upper:[],fold:125235,foldFull:[125235]},{code:125202,lower:[],title:[],upper:[],fold:125236,foldFull:[125236]},{code:125203,lower:[],title:[],upper:[],fold:125237,foldFull:[125237]},{code:125204,lower:[],title:[],upper:[],fold:125238,foldFull:[125238]},{code:125205,lower:[],title:[],upper:[],fold:125239,foldFull:[125239]},{code:125206,lower:[],title:[],upper:[],fold:125240,foldFull:[125240]},{code:125207,lower:[],title:[],upper:[],fold:125241,foldFull:[125241]},{code:125208,lower:[],title:[],upper:[],fold:125242,foldFull:[125242]},{code:125209,lower:[],title:[],upper:[],fold:125243,foldFull:[125243]},{code:125210,lower:[],title:[],upper:[],fold:125244,foldFull:[125244]},{code:125211,lower:[],title:[],upper:[],fold:125245,foldFull:[125245]},{code:125212,lower:[],title:[],upper:[],fold:125246,foldFull:[125246]},{code:125213,lower:[],title:[],upper:[],fold:125247,foldFull:[125247]},{code:125214,lower:[],title:[],upper:[],fold:125248,foldFull:[125248]},{code:125215,lower:[],title:[],upper:[],fold:125249,foldFull:[125249]},{code:125216,lower:[],title:[],upper:[],fold:125250,foldFull:[125250]},{code:125217,lower:[],title:[],upper:[],fold:125251,foldFull:[125251]}],Lst=function(r){return function(t){return $st(r.code)(t.code)}},Ust=function(r){var t=nR(p6(r))(h6)(En(h6))(Lst);if(t instanceof P)return p6(r);if(t instanceof M)return t.value0;throw new Error("Failed pattern match at Data.CodePoint.Unicode.Internal.Casing (line 1627, column 17 - line 1629, column 14): "+[t.constructor.name])};var m6=function(r){var t=Ust(r).lower,e=Cx(t);return e?[oR(r)]:t};var Wst=j,v6=Wst(m6);var Gst=Tn(Qc);var zst=function(r){var t=Gst(r);return function(e){return Mx(t(Fx(e)))}},_6=zst(v6);var Qst=Sn(m_);var y6=Qst(jo),Hst=O(ze);var aR=function(r){return wx(r)(uh)},Vst=aR("[^\0-/:-@[-`{-\x7F]+"),jst=aR("[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9]"),Zst=function(){var r="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[\\ufe0e\\ufe0f]?",e="[a-z\\xdf-\\xf6\\xf8-\\xff]",n="[\\u2700-\\u27bf]",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+(o+"]"),i="[^"+("\\ud800-\\udfff"+(o+"\\d\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]")),u="(?:"+(e+("|"+(i+")"))),l="(?:"+(r+("|"+(i+")"))),s="[^\\ud800-\\udfff]",c="(?:['\\u2019](?:d|ll|m|re|s|t|ve))?",f="(?:['\\u2019](?:D|LL|M|RE|S|T|VE))?",d="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff",p="["+(d+"]"),h="(?:"+(p+"|\\ud83c[\\udffb-\\udfff])"),m=h+"?",_="(?:"+("\\u200d"+("(?:"+(s+("|"+("(?:\\ud83c[\\udde6-\\uddff]){2}"+("|"+("[\\ud800-\\udbff][\\udc00-\\udfff]"+(")"+(t+(m+")*")))))))))),y=t+(m+_),D="(?:"+(n+("|"+("(?:\\ud83c[\\udde6-\\uddff]){2}"+("|"+("[\\ud800-\\udbff][\\udc00-\\udfff]"+(")"+y))))));return aR(ra("|")([r+("?"+(e+("+"+(c+("(?="+(a+("|"+(r+"|$)")))))))),l+("+"+(f+("(?="+(a+("|"+(r+(u+"|$)"))))))),r+("?"+(u+("+"+c))),r+("+"+f),"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",D]))}(),Yst=function(){var r=y6(Zx),t=Dx(Zst);return function(e){return r(t(e))}}(),Xst=_x(jst),Jst=function(){var r=y6(Zx),t=Dx(Vst);return function(e){return r(t(e))}}(),Kst=function(r){var t=Xst(r);return t?Yst(r):Jst(r)};var b6=function(){var r=ra("_"),t=Hst(_6);return function(e){return r(t(Kst(e)))}}();var G1=lt(xa(Yt)),nct=Pi(p5(d5)),iR=Po(Yt),D6=$(pn(Yt)),oct=Pi(Eh),act=O(ml),Ih=O(ll(Oo));var ict=qr(Aw(J_)(Yt));var x6=function(r){var t=Ru(r);return{genericReadForeignTaggedSumRep:function(e){return function(n){return Ih(Yg)(t(n))}}}};var z1=function(r){return r.genericReadForeignTaggedSumRep},T6=function(r){var t=z1(r);return function(e){var n=Me(e);return{genericReadForeignTaggedSumRep:function(o){return function(a){var i=o.toConstructorName(n(Zt.value));return G1(nct(a))(function(u){return G1(Ir(iR(new qn(o.typeTag,new on("Missing type tag: "+o.typeTag))))(D6)(mf(o.typeTag)(u)))(function(l){return G1(oct(l))(function(s){return G1(Ir(iR(new qn(o.valueTag,new on("Missing value tag: "+o.valueTag))))(D6)(mf(o.valueTag)(u)))(function(c){var f=s===i;return f?Oh(act(qn.create(i)))(Ih(gw)(t(o)(c))):iR(new on("Wrong constructor name tag "+(s+(" where "+(i+" was expected.")))))})})})})}}}}},R6=function(r){var t=z1(r);return function(e){var n=z1(e);return{genericReadForeignTaggedSumRep:function(o){return function(a){return ict(Ih(It.create)(t(o)(a)))(Ih(B.create)(n(o)(a)))}}}}},C6=function(r){var t=Xg(r);return function(e){var n=z1(e);return function(o){return function(a){return Ih(t)(n(o)(a))}}}};var S6=function(r){var t=C6(r);return function(e){return t(e)({typeTag:"kind",valueTag:"data",toConstructorName:b6})}};var uct={reflectSymbol:function(){return"Uninitialized"}},F6={reflectSymbol:function(){return"gameStep"}},lct={reflectSymbol:function(){return"Updated"}},sct={reflectSymbol:function(){return"Updating"}},cct=Rn($1),fct=Ro($1);var Ef=function(){function r(){}return r.value=new r,r}(),js=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),$h=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}();var mR=N1,O6=mr(wr(Bn()()(Ce(F6)(mR)))),M6={to:function(r){if(r instanceof It)return Ef.value;if(r instanceof B&&r.value0 instanceof It)return new js(r.value0.value0);if(r instanceof B&&r.value0 instanceof B)return new $h(r.value0.value0);throw new Error("Failed pattern match at Scriptzzz.App.Model.AnimationState (line 25, column 1 - line 25, column 41): "+[r.constructor.name])},from:function(r){if(r instanceof Ef)return new It(Ku.value);if(r instanceof js)return new B(new It(r.value0));if(r instanceof $h)return new B(new B(r.value0));throw new Error("Failed pattern match at Scriptzzz.App.Model.AnimationState (line 25, column 1 - line 25, column 41): "+[r.constructor.name])}},A6={show:ci(M6)(Sr(mr(L5)(uct))(Sr(O6(lct))(O6(sct))))};var dct=k1,E6=vn(Fn(ya()(qe(_a)()(F6)(dct)))),P6={eq:Cu(M6)(uo(vn(k5))(uo(E6)(E6)))};var I6=function(r){return cct(r)(fct)},N6=no($1);var xl=function(){function r(t,e,n){this.value0=t,this.value1=e,this.value2=n}return r.create=function(t){return function(e){return function(n){return new r(t,e,n)}}},r}();var pct=function(r){var t=O(r);return{map:function(e){return function(n){return function(o){return function(a){return t(function(i){return new xl(i.value0,e(i.value1),i.value2)})(n(o)(a))}}}}}},vR=function(r){var t=lt(r.Bind1()),e=$(r.Applicative0());return function(n){return function(o){return function(a){return t(n(o)(a))(function(i){return e(new tt(i.value0,i.value2))})}}}};var k6=function(r){var t=lt(r),e=r.Apply0().Functor0(),n=ja(e),o=pct(e);return function(a){var i=bt(a.Semigroup0());return{apply:function(u){return function(l){return function(s){return function(c){return t(u(s)(c))(function(f){return n(l(s)(f.value0))(function(d){return new xl(d.value0,f.value1(d.value1),i(f.value2)(d.value2))})})}}}},Functor0:function(){return o}}}},gR=function(r){var t=lt(r),e=ja(r.Apply0().Functor0()),n=k6(r);return function(o){var a=bt(o.Semigroup0()),i=n(o);return{bind:function(u){return function(l){return function(s){return function(c){return t(u(s)(c))(function(f){var d=l(f.value1);return e(d(s)(f.value0))(function(p){return new xl(p.value0,p.value1,a(f.value2)(p.value2))})})}}}},Apply0:function(){return i}}}};var _R=function(r){var t=$(r.Applicative0()),e=k6(r.Bind1());return function(n){var o=ie(n),a=e(n);return{pure:function(i){return function(u){return function(l){return t(new xl(l,i,o))}}},Apply0:function(){return a}}}},Uh=function(r){var t=_R(r),e=gR(r.Bind1());return function(n){var o=t(n),a=e(n);return{Applicative0:function(){return o},Bind1:function(){return a}}}},$6=function(r){var t=$(r.Applicative0()),e=Uh(r);return function(n){var o=ie(n),a=e(n);return{ask:function(i){return function(u){return t(new xl(u,i,o))}},Monad0:function(){return a}}}};var L6=function(r){var t=$(r.Applicative0()),e=Uh(r);return function(n){var o=ie(n),a=e(n);return{state:function(i){return function(u){return function(l){var s=i(l);return t(new xl(s.value1,s.value0,o))}}},Monad0:function(){return a}}}},U6=function(r){var t=$(r.Applicative0()),e=Uh(r);return function(n){var o=n.Semigroup0(),a=e(n);return{tell:function(i){return function(u){return function(l){return t(new xl(l,void 0,i))}}},Semigroup0:function(){return o},Monad1:function(){return a}}}};var gct=Mo(),_ct=vR(Yt);var B6=function(r){return function(t){return function(e){return gct(_ct(r)(t)(e))}}};var W6=Object.keys||function(r){var t=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.push(e);return t};var G6=function(r){var t=Po(r),e=$(pn(r));return function(n){if(gl(n))return t(new Hr("object","null"));if(_l(n))return t(new Hr("object","undefined"));if(Ai(n)==="object")return e(W6(n));if(Re)return t(new Hr("object",Ai(n)));throw new Error("Failed pattern match at Foreign.Keys (line 17, column 1 - line 17, column 93): "+[n.constructor.name])}};var xct=r1(Fh),Tct=Po(Yt),bR=lt(xa(Yt)),Rct=JP(KP(Yt))(t5(Yt)),Cct=$(pn(Yt)),Sct=wf(yl),Oct=G6(Yt),Ect=m4(ur)(o_(Yt));var Fct=Dh(F1);var Ff=function(r){return xct(r)},z6=function(r){var t=Ru(r);return{readImpl:function(e){var n=function(o){return function(a){var i=E5(a);if(i instanceof G)return Tct(new on("invalid unit command ID: "+i.value0));if(i instanceof Q)return bR(Rct(e)(a))(function(u){return bR(t(u))(function(l){return Cct(Sct(i.value0)(l)(o))})});throw new Error("Failed pattern match at Scriptzzz.Game.Command (line 48, column 42 - line 55, column 54): "+[i.constructor.name])}};return bR(Oct(e))(function(o){return Ect(n)(xf)(o)})}}},q6=bh;var Q6=function(r){return Fct(r)};var FR=bp(YI(),1),Xct=new FR.default.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0});function XI(r){return t=>e=>{let n=new FR.default.Grid(r);return Xct.findPath(t.x,t.y,e.x,e.y,n)}}var eft=O(ze);var MR=function(r){return r};var AR=function(r){var t=k4(r);return function(e){var n=t(Zt.value),o=function(){return n===0?[]:Rx(0)(n-1|0)}();return eft(e)(o)}},PR=function(r){return Zu(r)};var oft=PR(PR(ju));var IR=O(ze);var JI=function(r){return function(t){return oft}};var r0=function(r){return function(t){return function(e){return IR(MR)(MR(e))}}},KI=function(r){return function(t){return{show:function(){var e=function(){var a=ra(""),i=IR(function(u){return u?"[#]":"[ ]"});return function(u){return a(i(u))}}(),n=function(){var a=ra(`
`),i=IR(e),u=r0(t)(r);return function(l){return a(i(u(l)))}}(),o=function(a){var i=W8(a)<21;return i?a:q8(18)(a)+"..."};return function(a){return o(n(a))}}()}}};var kR=function(r){var t=AR(r.Nat0());return function(e){var n=AR(e.Nat0());return t(function(o){return n(function(a){return!1})})}};var ift=lt(xa(Yt)),uft=$(pn(Yt)),lft=K_(ur),t9=O(ze);var r9=yh(na),sft=function(r){var t=E1(r);return function(e){var n=Pi(h5(t(e)));return{readImpl:function(o){return ift(n(o))(function(a){return uft(lft(a))})}}}},n9=Xx(si),LR=function(r){if(r instanceof $e)return P.value;if(r instanceof fe)return new M(new tt(r.value0,r.value1));throw new Error("Failed pattern match at Scriptzzz.PathFinding (line 66, column 31 - line 71, column 47): "+[r.constructor.name])},o9=function(r){return function(t){var e=r0(t)(r),n=Pi(sft(t)(r));return function(o){return function(a){return function(i){var u=function(){var l=t9(t9(function(s){return s?1:0}));return function(s){return l(e(s))}}();return ui(n(XI(u(o))(a)(i)))}}}}};var n0=Bn()(),qh={reflectSymbol:function(){return"position"}},a9=je(qh),u9={reflectSymbol:function(){return"quantity"}},pft={reflectSymbol:function(){return"EnergySource"}},hft={reflectSymbol:function(){return"Trail"}},l9={reflectSymbol:function(){return"task"}},s9={reflectSymbol:function(){return"path"}},c9={reflectSymbol:function(){return"targetPosition"}},mft={reflectSymbol:function(){return"Worker"}};var UR=U(Fh);var o0=ya(),a0=qe(_a)();var i9=lt(gR(yw)(jo)),f9=L6(Yt)(jo),vft=$p(f9),gft=e1(yl),i0=ul(U6(Yt)(jo)),_ft=Vo($6(Yt)(jo)),yft=U(M7(Rh)),bft=lt(wa),Dft=kp(f9),wft=wf(yl),xft=$(_R(Yt)(jo)),Tft=Z8(q6)(Uh(Yt)(jo));var kf=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),$f=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Ii=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}();var u0=Qr,d9={to:function(r){if(r instanceof It)return new kf(r.value0);if(r instanceof B&&r.value0 instanceof It)return new $f(r.value0.value0);if(r instanceof B&&r.value0 instanceof B)return new Ii(r.value0.value0);throw new Error("Failed pattern match at Scriptzzz.Game (line 42, column 1 - line 42, column 39): "+[r.constructor.name])},from:function(r){if(r instanceof kf)return new It(r.value0);if(r instanceof $f)return new B(new It(r.value0));if(r instanceof Ii)return new B(new B(r.value0));throw new Error("Failed pattern match at Scriptzzz.Game (line 42, column 1 - line 42, column 39): "+[r.constructor.name])}};var Rft={show:ci(d9)(Sr(mr(wr(n0(a9(Ce(u9)(Pr))(na))))(pft))(Sr(mr(wr(n0(Ce(qh)(na))))(hft))(mr(wr(n0(a9(Ce(l9)(Ci(n0(je(s9)(Ce(c9)(na))(r9)))))(na))))(mft))))},Qh=r1(Fh)(Rft);var p9=To,Cft={eq:Cu(d9)(uo(vn(Fn(o0(qe(a0(u9)(Xa))()(qh)(si)))))(uo(vn(Fn(o0(a0(qh)(si)))))(vn(Fn(o0(qe(a0(l9)(gs(o0(qe(a0(c9)(si))()(s9)(n9)))))()(qh)(si)))))))},BR=Dh(F1)(Cft);var Sft=function(r){return function(t){var e=o9(t)(r);return function(n){return i9(vft)(function(o){var a=function(i){return function(u){return function(l){var s=gft(i)(o);if(s instanceof M){if(s.value0 instanceof kf)return i0(["cannot move a structure entity: "+UR(i)]);if(s.value0 instanceof $f)return i0(["cannot move a hint entity: "+UR(i)]);if(s.value0 instanceof Ii)return i9(_ft)(function(c){var f=e(c.obstacleMatrix)(s.value0.value0.position)(l.position);if(f instanceof G)return i0(["cannot calculate path: "+yft(f.value0)]);if(f instanceof Q){var d=bft(LR(f.value0))(function(p){return LR(dn(p))});if(d instanceof M)return Dft(wft(i)(new Ii({position:d.value0.value0,task:new M({path:d.value0.value1,targetPosition:l.position})}))(o));if(d instanceof P)return xft(void 0);throw new Error("Failed pattern match at Scriptzzz.Game (line 151, column 17 - line 165, column 30): "+[d.constructor.name])}throw new Error("Failed pattern match at Scriptzzz.Game (line 137, column 13 - line 165, column 30): "+[f.constructor.name])});throw new Error("Failed pattern match at Scriptzzz.Game (line 120, column 9 - line 165, column 30): "+[s.value0.constructor.name])}if(s instanceof P)return i0(["cannot move non-existion entity: "+UR(i)]);throw new Error("Failed pattern match at Scriptzzz.Game (line 118, column 27 - line 173, column 12): "+[s.constructor.name])}}};return Tft(a)(void 0)(n)})}}},h9=function(r){var t=Sft(r);return function(e){var n=t(e);return function(o){return function(a){return function(i){return B6(n(a.workers.moveTo))(o)(i)}}}}},m9=function(r){return function(t){return xf}};var Oft=e1(yl),Eft=ds(si),Hh=bt(xo),WR=Is(bh),v9=iT(yl);var g9=N1,_9=k1;var y9=Of(10);var l0=function(r){return function(t){return function(e){return function(n){var o=function(u){return function(l){return function(s){var c=Oft(u)(n);if(c instanceof M){if(s instanceof kf||s instanceof $f)return l;if(s instanceof Ii){if(c.value0 instanceof Ii){var f=Eft(c.value0.value0.position)(s.value0.position);return f?Hh(l)([{id:u,sourcePosition:s.value0.position,targetPosition:c.value0.value0.position}]):l}return l}throw new Error("Failed pattern match at Scriptzzz.Canvas.Animation (line 86, column 7 - line 106, column 18): "+[s.constructor.name])}if(c instanceof P)return l;throw new Error("Failed pattern match at Scriptzzz.Canvas.Animation (line 84, column 34 - line 108, column 10): "+[c.constructor.name])}}},a=function(u){return function(l){return function(s){return Hh(l)([{id:u}])}}},i=function(u){return function(l){return function(s){if(s instanceof kf)return Hh(l)([{id:u,position:s.value0.position,entityType:"energy-source"}]);if(s instanceof $f)return Hh(l)([{id:u,position:s.value0.position,entityType:"trail"}]);if(s instanceof Ii)return Hh(l)([{id:u,position:s.value0.position,entityType:"worker"}]);throw new Error("Failed pattern match at Scriptzzz.Canvas.Animation (line 64, column 19 - line 70, column 56): "+[s.constructor.name])}}};return{createEntity:WR(i)([])(v9(n)(e)),destroyEntity:WR(a)([])(v9(e)(n)),updateEntity:WR(o)([])(e)}}}}};function b9(r){return JSON.stringify(r)}function GR(r){return r.data}function D9(r){return function(t){return function(){return new Worker(r,t)}}}function w9(r){return function(t){return function(e){return function(){e.postMessage(r,t.length>0?t:void 0)}}}}function zR(r){return function(t){return function(){t.onmessage=function(e){r(e)()}}}}function qR(r){return function(t){return function(){t.onerror=function(e){r(e)()}}}}var x9=function(){function r(){}return r.value=new r,r}(),kft=function(){function r(){}return r.value=new r,r}(),T9=function(){function r(){}return r.value=new r,r}(),$ft=function(){function r(){}return r.value=new r,r}(),Lft=function(){function r(){}return r.value=new r,r}(),Uft={show:function(r){if(r instanceof x9)return"classic";if(r instanceof kft)return"module";throw new Error("Failed pattern match at Web.Worker.Worker (line 85, column 10 - line 87, column 24): "+[r.constructor.name])}},Bft=U(Uft),Wft={show:function(r){if(r instanceof T9)return"omit";if(r instanceof $ft)return"same-origin";if(r instanceof Lft)return"include";throw new Error("Failed pattern match at Web.Worker.Worker (line 90, column 10 - line 93, column 28): "+[r.constructor.name])}},Gft=U(Wft);var R9=function(r){return w9(r)([])},C9=function(r){return function(t){return D9(r)({name:t.name,credentials:Gft(t.credentials),type:Bft(t.type)})}};var S9=function(){return{name:"",credentials:T9.value,type:x9.value}}();var qft=U(Pr),Qft=function(r){var t=function(n){if(n instanceof on||n instanceof Hr)return"";if(n instanceof wu)return"["+(qft(n.value0)+("]"+t(n.value1)));if(n instanceof qn&&n.value1 instanceof Hr&&n.value1.value1==="undefined")return"";if(n instanceof qn)return"."+(n.value0+t(n.value1));throw new Error("Failed pattern match at Yoga.JSON.Error (line 11, column 8 - line 16, column 49): "+[n.constructor.name])},e=t(r);return"$"+e},Hft=function(r){var t=Qft(r),e=function(n){var o=!1,a;function i(u){if(u instanceof on)return o=!0,{path:t,message:u.value0};if(u instanceof Hr&&u.value1==="Undefined")return o=!0,{path:t,message:"Must provide a value of type '"+(u.value0+"'")};if(u instanceof Hr&&u.value1==="undefined")return o=!0,{path:t,message:"Must provide a value of type '"+(u.value0+"'")};if(u instanceof Hr)return o=!0,{path:t,message:"Must provide a value of type '"+(u.value0+("' instead of '"+(u.value1+"'")))};if(u instanceof wu){n=u.value1;return}if(u instanceof qn){n=u.value1;return}throw new Error("Failed pattern match at Yoga.JSON.Error (line 31, column 8 - line 49, column 31): "+[u.constructor.name])}for(;!o;)a=i(n);return a};return e(r)},O9=function(){var r=function(t){return t.message+(" at "+t.path)};return function(t){return r(Hft(t))}}();var jft=pf(F7),Zft=O(ml);var Yft={reflectSymbol:function(){return"ExecutionTimeout"}},A9=mr(wr(Qr)),Xft={reflectSymbol:function(){return"WebWorkerError"}};var E9=T6(x6(Eh)),Jft={reflectSymbol:function(){return"Exception"}},Kft={reflectSymbol:function(){return"Value"}},P9=Bn()(),oC={reflectSymbol:function(){return"errors"}},I9=je(oC),N9={reflectSymbol:function(){return"value"}},tdt={reflectSymbol:function(){return"InternalParsingError"}},edt={reflectSymbol:function(){return"ScriptExecutionError"}},rdt=Sr(A9(edt)),ndt={reflectSymbol:function(){return"ScriptReturnValueNotReceived"}},k9={reflectSymbol:function(){return"valueJson"}},odt={reflectSymbol:function(){return"ScriptReturnValueParsingFailure"}},adt={reflectSymbol:function(){return"Success"}};var $9=vn(Fn(To)),idt=uo($9),L9=ya(),U9=qe(_a)();var ZR=Rr(ei),B9=va(ga),QR=lt(sl),F9=B9(sl),udt=$(nf);var YR=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),XR=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),JR=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),KR=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}();var tC=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),eC=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),rC=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),nC=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Uf=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}();var W9={show:function(r){return ra(", ")(jft(Zft(O9)(r)))}},ldt=Sr(mr(wr(P9(I9(Ce(k9)(Qr))(W9))))(odt)),G9={show:function(r){return b9(r)}},sdt=Sr(mr(wr(P9(I9(Ce(N9)(G9))(W9))))(tdt)),M9=U(G9);var cdt=s_(lu);var aC=kw(j3),HR=Rr(aC),fdt=o4(lu),VR=Vo(fdt);var z9={to:function(r){if(r instanceof It)return new YR(r.value0);if(r instanceof B)return new XR(r.value0);throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 189, column 1 - line 189, column 49): "+[r.constructor.name])},from:function(r){if(r instanceof YR)return new It(r.value0);if(r instanceof XR)return new B(r.value0);throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 189, column 1 - line 189, column 49): "+[r.constructor.name])}},ddt={show:ci(z9)(Sr(mr(wr(g_))(Yft))(A9(Xft)))},pdt=Sr(mr(wr(ddt))(ndt));var hdt={to:function(r){if(r instanceof It)return new JR(r.value0);if(r instanceof B)return new KR(r.value0);throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 141, column 1 - line 141, column 51): "+[r.constructor.name])},from:function(r){if(r instanceof JR)return new It(r.value0);if(r instanceof KR)return new B(r.value0);throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 141, column 1 - line 141, column 51): "+[r.constructor.name])}},mdt={readImpl:S6(hdt)(R6(E9(Jft))(E9(Kft)))};var q9={to:function(r){if(r instanceof It)return new tC(r.value0);if(r instanceof B&&r.value0 instanceof It)return new eC(r.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof It)return new rC(r.value0.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof B&&r.value0.value0.value0 instanceof It)return new nC(r.value0.value0.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof B&&r.value0.value0.value0 instanceof B)return new Uf(r.value0.value0.value0.value0);throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 211, column 1 - line 211, column 46): "+[r.constructor.name])},from:function(r){if(r instanceof tC)return new It(r.value0);if(r instanceof eC)return new B(new It(r.value0));if(r instanceof rC)return new B(new B(new It(r.value0)));if(r instanceof nC)return new B(new B(new B(new It(r.value0))));if(r instanceof Uf)return new B(new B(new B(new B(r.value0))));throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 211, column 1 - line 211, column 46): "+[r.constructor.name])}},vdt=ci(q9);var gdt=Cu(q9);var Bf=function(r){return{show:vdt(sdt(rdt(pdt(ldt(mr(wr(r))(adt))))))}};var _dt={eq:Cu(z9)(uo(vn(Fn(y_)))($9))},ydt=uo(vn(Fn(_dt)));var Q9=P7(i1),bdt=uo(vn(Fn(L9(qe(U9(k9)(To))()(oC)(Q9))))),Ddt={eq:function(r){return function(t){return M9(r)===M9(t)}}},wdt=uo(vn(Fn(L9(qe(U9(N9)(Ddt))()(oC)(Q9))))),H9=function(r){return{eq:gdt(wdt(idt(ydt(bdt(vn(Fn(r)))))))}};var xdt=Nw(Zc),jR=lt(xdt),V9={onWebWorkerError:function(r){return jR(VR)(function(t){return HR(qR(r)(t))})},onWebWorkerMessage:function(r){return jR(VR)(function(t){return HR(zR(r)(t))})},postWebWorkerMessage:function(r){return jR(VR)(function(t){return HR(R9(r)(t))})},Monad0:function(){return cdt}};var j9=function(r){return function(t){return ZR(function(){var n=C9(r)(S9)();return K3(t)(n)()})}},Tdt=function(){var r=Pi(mdt);return function(t){return ui(r(t))}}(),Rdt=function(r){return r.postWebWorkerMessage},Cdt=function(r){return r.onWebWorkerMessage},Sdt=function(r){return r.onWebWorkerError},Odt=function(r){return function(t){var e=B9(t.Monad0().Bind1()),n=Sdt(t),o=Cdt(t),a=Rdt(t);return function(i){return function(u){return e(n(function(l){return su(new G(new XR("after initialization")))(i)}))(function(){return e(o(function(l){return su(new Q(GR(l)))(i)}))(function(){return a(O5(u))})})}}}},Z9=function(r){var t=__(r);return function(e){return function(n){var o=Odt(n)(e);return function(a){var i=m5(a);return function(u){return function(l){return function(s){return QR(ZR(_s(new G(new YR(t(l))))))(function(c){return QR(eA(u(o(c)(s))))(function(f){return F9(rA(t(l)))(function(){return F9(iA(Ds("timed out"))(f))(function(){return QR(ZR(nl(c)))(function(d){return udt(function(){if(d instanceof G)return new rC(d.value0);if(d instanceof Q){var p=Tdt(d.value0);if(p instanceof G)return new tC({errors:p.value0,value:d.value0});if(p instanceof Q){if(p.value0 instanceof JR)return new eC(p.value0.value0);if(p.value0 instanceof KR){var h=ui(i(p.value0.value0));if(h instanceof G)return new nC({errors:h.value0,valueJson:p.value0.value0});if(h instanceof Q)return new Uf(h.value0);throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 294, column 15 - line 302, column 32): "+[h.constructor.name])}throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 289, column 11 - line 302, column 32): "+[p.value0.constructor.name])}throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 281, column 7 - line 302, column 32): "+[p.constructor.name])}throw new Error("Failed pattern match at Scriptzzz.Sandbox (line 276, column 8 - line 302, column 32): "+[d.constructor.name])}())})})})})})}}}}}}};var Sl=Bn()(),Y9={reflectSymbol:function(){return"obstacleMatrix"}},Edt=Ce(Y9),Fdt={reflectSymbol:function(){return"CanvasInitializing"}},X9={reflectSymbol:function(){return"gameSettings"}},J9={reflectSymbol:function(){return"lastScriptExecution"}},K9={reflectSymbol:function(){return"script"}},tN={reflectSymbol:function(){return"finishTime"}},eN={reflectSymbol:function(){return"result"}},rN={reflectSymbol:function(){return"startTime"}},nN={reflectSymbol:function(){return"workers"}},oN={reflectSymbol:function(){return"moveTo"}},aN={reflectSymbol:function(){return"position"}},Mdt=je(X9)(je(J9)(Ce(K9)(O1))(Ci(Sl(je(tN)(je(eN)(Ce(rN)(Io))(Bf(Sl(Ce(nN)(Sl(Ce(oN)(Ff(Sl(Ce(aN)(na))))))))))(Io))))),iN={reflectSymbol:function(){return"environment"}},uN={reflectSymbol:function(){return"initialState"}},lN={reflectSymbol:function(){return"restartOnScriptChange"}},sN={reflectSymbol:function(){return"stopOnError"}},cN={reflectSymbol:function(){return"targetFps"}},Adt=je(iN)(je(uN)(je(lN)(je(sN)(Ce(cN)(g9))(vw))(vw))(Qh)),Pdt={reflectSymbol:function(){return"Editing"}},fN={reflectSymbol:function(){return"animationState"}},Idt=je(fN),dN={reflectSymbol:function(){return"editor"}},pN={reflectSymbol:function(){return"gameLogs"}},hN={reflectSymbol:function(){return"gameState"}},Ndt=je(dN)(je(pN)(Ce(hN)(Qh))(au(u0))),kdt={reflectSymbol:function(){return"Simulating"}};var Ol=ya(),Cl=qe(_a)(),$dt=Cl(Y9),Ldt=qe(qe(Cl(K9)(S5))()(J9)(gs(Ol(qe(qe(Cl(rN)(QT))()(eN)(H9(Ol(Cl(nN)(Ol(Cl(oN)(Q6(Ol(Cl(aN)(si))))))))))()(tN)(QT)))))()(X9),Udt=qe(qe(qe(qe(Cl(cN)(_9))()(sN)(ju))()(lN)(ju))()(uN)(BR))()(iN),Bdt=qe(qe(Cl(hN)(BR))()(pN)(Zu(p9)))()(dN);var Ni=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),gn=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),an=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),mN={to:function(r){if(r instanceof It)return new Ni(r.value0);if(r instanceof B&&r.value0 instanceof It)return new gn(r.value0.value0);if(r instanceof B&&r.value0 instanceof B)return new an(r.value0.value0);throw new Error("Failed pattern match at Scriptzzz.App.Model (line 21, column 1 - line 21, column 38): "+[r.constructor.name])},from:function(r){if(r instanceof Ni)return new It(r.value0);if(r instanceof gn)return new B(new It(r.value0));if(r instanceof an)return new B(new B(r.value0));throw new Error("Failed pattern match at Scriptzzz.App.Model (line 21, column 1 - line 21, column 38): "+[r.constructor.name])}},Wdt=ci(mN);var Gdt=Cu(mN);var vN=function(r){return function(t){var e=Sl(Edt(KI(t)(r))),n=Sl(Mdt(Sl(Adt(e))));return{show:Wdt(Sr(mr(wr(e))(Fdt))(Sr(mr(wr(n))(Pdt))(mr(wr(Sl(Idt(Ndt(n))(A6))))(kdt))))}}};var gN=function(r){var t=JI(r);return function(e){var n=Ol($dt(t(e))),o=Ol(Ldt(Ol(Udt(n))));return{eq:Gdt(uo(vn(Fn(n)))(uo(vn(Fn(o)))(vn(Fn(Ol(qe(Bdt(o))()(fN)(P6)))))))}}};var _N=function(r){var t=I5(r),e=Qn(r);return function(n){var o=t(n),a=e(n);return function(i){return function(u){if(i instanceof an){var l=new an({editor:i.value0.editor,gameLogs:i.value0.gameLogs,gameState:i.value0.gameState,animationState:new js({gameStep:u.gameStep})}),s=o(a)(i.value0.editor.script);return Dl({commands:s,newModel:l})}return wl("Not in simulating mode.")}}}};var qdt=M5(C5({reflectSymbol:function(){return"foo"}})),Qdt=ie(R5),Hdt=function(r){var t=Mh(r);return function(e){var n=qP(qs(t(e)))({newSeed:IP(0),size:1}),o=new Ii({position:n,task:P.value});return Us(qdt(Zt.value))(o)}},yN=function(r){var t=Hdt(r),e=Qn(r);return function(n){var o=t(n),a=e(n);return function(i){return function(u){if(i instanceof Ni){var l=new gn({gameSettings:{environment:i.value0,initialState:o,restartOnScriptChange:!1,stopOnError:!1,targetFps:y9},lastScriptExecution:P.value,script:Qdt});return Dl({commands:a,newModel:l})}return wl("Canvas has already been initialized.")}}}};var bN=function(r){var t=Qn(r);return function(e){var n=t(e);return function(o){return function(a){return o instanceof gn?new Q(new tt(new gn({gameSettings:o.value0.gameSettings,lastScriptExecution:o.value0.lastScriptExecution,script:a}),n)):new G("Not in editing mode.")}}}};var Zdt=bt(xo),DN=function(r){var t=h9(r),e=l0(r),n=M1(r),o=Qn(r);return function(a){var i=t(a),u=e(a),l=n(a),s=o(a);return function(c){return function(f){if(c instanceof an){if(c.value0.animationState instanceof Ef)return new G("Animation has not been initialized yet.");if(c.value0.animationState instanceof $h)return new G("Previous animation has not finished.");if(c.value0.animationState instanceof js){var d=I6(c.value0.animationState.value0.gameStep);if(f.executionResult instanceof Uf){var p=i(c.value0.editor.gameSettings.environment)(f.executionResult.value0)(c.value0.gameState),h=new an({animationState:new $h({gameStep:d}),editor:{gameSettings:c.value0.editor.gameSettings,script:c.value0.editor.script,lastScriptExecution:new M({finishTime:f.executionFinishTime,result:new Uf(f.executionResult.value0),startTime:f.executionStartTime})},gameLogs:Zdt(c.value0.gameLogs)(p.value1),gameState:p.value0}),m=u(c.value0.gameState)(p.value0),_=l(s)({animation:m,gameStep:d});return new Q(new tt(h,_))}return new Q(function(){return c.value0.editor.gameSettings.stopOnError?new tt(new gn({gameSettings:c.value0.editor.gameSettings,script:c.value0.editor.script,lastScriptExecution:new M({finishTime:f.executionFinishTime,result:f.executionResult,startTime:f.executionStartTime})}),s):new tt(new an({gameLogs:c.value0.gameLogs,gameState:c.value0.gameState,animationState:new js({gameStep:d}),editor:{gameSettings:c.value0.editor.gameSettings,script:c.value0.editor.script,lastScriptExecution:new M({finishTime:f.executionFinishTime,result:f.executionResult,startTime:f.executionStartTime})}}),s)}())}throw new Error("Failed pattern match at Scriptzzz.App.Controller.Handler.ScriptExecuted (line 29, column 5 - line 97, column 29): "+[c.value0.animationState.constructor.name])}return new G("Not in simulating mode.")}}}};var Xdt=ie(jo),wN=function(r){var t=M1(r),e=Qn(r),n=l0(r),o=m9(r);return function(a){var i=t(a),u=e(a),l=n(a),s=o(a);return function(c){return function(f){if(c instanceof gn){var d=new an({animationState:Ef.value,editor:c.value0,gameLogs:Xdt,gameState:c.value0.gameSettings.initialState}),p=i(u)({animation:l(s)(c.value0.gameSettings.initialState),gameStep:N6});return Dl({commands:p,newModel:d})}return wl("Not in editing mode.")}}}};var xN=function(r){var t=Qn(r);return function(e){var n=t(e);return function(o){return function(a){if(o instanceof an){var i=new gn(o.value0.editor);return Dl({commands:n,newModel:i})}return wl("Not in simulating mode.")}}}};var TN=function(r){var t=Qn(r);return function(e){var n=t(e);return function(o){return function(a){return new Q(new tt(o,n))}}}};var jh=Bn()(),RN=je({reflectSymbol:function(){return"executionFinishTime"}}),CN={reflectSymbol:function(){return"executionStartTime"}},iC=mr(wr(mw)),ept=O(me),Wf=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Zs=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Ys=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Gf=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Xs=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Js=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),Ks=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),rpt={to:function(r){if(r instanceof It)return new Wf(r.value0);if(r instanceof B&&r.value0 instanceof It)return new Zs(r.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof It)return new Ys(r.value0.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof B&&r.value0.value0.value0 instanceof It)return new Gf(r.value0.value0.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof B&&r.value0.value0.value0 instanceof B&&r.value0.value0.value0.value0 instanceof It)return new Xs(r.value0.value0.value0.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof B&&r.value0.value0.value0 instanceof B&&r.value0.value0.value0.value0 instanceof B&&r.value0.value0.value0.value0.value0 instanceof It)return new Js(r.value0.value0.value0.value0.value0.value0);if(r instanceof B&&r.value0 instanceof B&&r.value0.value0 instanceof B&&r.value0.value0.value0 instanceof B&&r.value0.value0.value0.value0 instanceof B&&r.value0.value0.value0.value0.value0 instanceof B)return new Ks(r.value0.value0.value0.value0.value0.value0);throw new Error("Failed pattern match at Scriptzzz.App.Message (line 41, column 1 - line 41, column 37): "+[r.constructor.name])},from:function(r){if(r instanceof Wf)return new It(r.value0);if(r instanceof Zs)return new B(new It(r.value0));if(r instanceof Ys)return new B(new B(new It(r.value0)));if(r instanceof Gf)return new B(new B(new B(new It(r.value0))));if(r instanceof Xs)return new B(new B(new B(new B(new It(r.value0)))));if(r instanceof Js)return new B(new B(new B(new B(new B(new It(r.value0))))));if(r instanceof Ks)return new B(new B(new B(new B(new B(new B(r.value0))))));throw new Error("Failed pattern match at Scriptzzz.App.Message (line 41, column 1 - line 41, column 37): "+[r.constructor.name])}},uC={show:ci(rpt)(Sr(mr(wr(jh(RN(je(CN)(Ce({reflectSymbol:function(){return"gameStep"}})(mR))(Io))(Io))))({reflectSymbol:function(){return"AnimationUpdated"}}))(Sr(iC({reflectSymbol:function(){return"CanvasInitialized"}}))(Sr(mr(wr(O1))({reflectSymbol:function(){return"EditorUpdated"}}))(Sr(mr(wr(jh(RN(je({reflectSymbol:function(){return"executionResult"}})(Ce(CN)(Io))(Bf(jh(Ce({reflectSymbol:function(){return"workers"}})(jh(Ce({reflectSymbol:function(){return"moveTo"}})(Ff(jh(Ce({reflectSymbol:function(){return"position"}})(na))))))))))(Io))))({reflectSymbol:function(){return"ScriptExecuted"}}))(Sr(iC({reflectSymbol:function(){return"SimulationStartRequested"}}))(Sr(iC({reflectSymbol:function(){return"SimulationStopRequested"}}))(mr(wr(Io))({reflectSymbol:function(){return"TimeUpdated"}}))))))))},SN=function(r){return function(t){return function(e){return{body:e,header:{creationTime:P.value}}}}},Zh=function(r){return function(t){return function(e){return function(){var o=ept(Hs)(vu)();return{body:e,header:{creationTime:new M(o)}}}}}};var npt=lt(wa),opt=$(Mp),apt=U(Qr),ON=Bn()(),EN=Ci(Io),ipt=U(ON(je({reflectSymbol:function(){return"body"}})(Ce({reflectSymbol:function(){return"header"}})(ON(Ce({reflectSymbol:function(){return"creationTime"}})(EN))))(uC))),upt=U(EN),lpt=U(uC),spt=O(Si),cpt=N5(ei)(Kw),lC=function(){function r(t){this.value0=t}return r.create=function(t){return new r(t)},r}(),fpt=function(){function r(){}return r.value=new r,r}(),dpt=function(){function r(){}return r.value=new r,r}(),ppt=function(){function r(){}return r.value=new r,r}(),FN=function(r){return function(t){return function(e){return new tt(new Ni({obstacleMatrix:e}),[])}}},hpt=function(r){return function(t){var e=function(n){return function(o){return npt(n(o))(function(a){return opt({body:a,header:{creationTime:new M(o.finishTime)}})})}};return{executeScript:e(function(n){if(n.commandExecutionResult instanceof G)return P.value;if(n.commandExecutionResult instanceof Q)return new M(new Gf({executionFinishTime:n.finishTime,executionResult:n.commandExecutionResult.value0,executionStartTime:n.startTime}));throw new Error("Failed pattern match at Scriptzzz.App.Controller (line 178, column 9 - line 187, column 16): "+[n.commandExecutionResult.constructor.name])}),logDebug:Xt(P.value),logError:Xt(P.value),updateAnimation:e(function(n){if(n.commandExecutionResult instanceof G)return P.value;if(n.commandExecutionResult instanceof Q)return new M(new Wf({executionFinishTime:n.finishTime,executionStartTime:n.startTime,gameStep:n.commandParameters.gameStep}));throw new Error("Failed pattern match at Scriptzzz.App.Controller (line 196, column 9 - line 205, column 16): "+[n.commandExecutionResult.constructor.name])})}}},MN=function(r){var t=vN(r),e=A5(r),n=Qn(r),o=gN(r),a=P5(r),i=_N(r),u=yN(r),l=bN(r),s=DN(r),c=wN(r),f=xN(r),d=TN(r),p=cpt(r),h=hpt(r);return function(m){var _=U(t(m)),y=e(m),D=n(m),w=Rt(o(m)),T=a(m),R=i(m),C=u(m),S=l(m),A=s(m),E=c(m),N=f(m),et=d(m),X=p(m),Z=h(m);return function(z){return function(Dt){return function(kt){return function(Et){var Ge=function(St){if(St instanceof G){var V=ra(`
`)(["!!!","Previous state:",_(kt),"---","Error Message:",apt(St.value0),"---","Next state:","<NO_CHANGE>","!!!"]);return new tt(kt,y(D)(V))}if(St instanceof Q)return St.value0;throw new Error("Failed pattern match at Scriptzzz.App.Controller (line 147, column 18 - line 168, column 27): "+[St.constructor.name])},st=function(St){if(Dt instanceof lC){var V=ra(`
`)(["===","Previous state:",Dt.value0(kt),"---","Message:",ipt(Et),"---","Next state:",function(){var wt=w(St.value0)(kt);return wt?"<NO_CHANGE>":Dt.value0(St.value0)}(),"==="]);return new tt(St.value0,T(St.value1)(V))}if(Dt instanceof fpt){var Gt=function(){if(Et.body instanceof Wf)return"Animation Updted";if(Et.body instanceof Zs)return"Canvas Initialized";if(Et.body instanceof Ys)return"Editor Updted";if(Et.body instanceof Gf)return"Script Executed";if(Et.body instanceof Xs)return"Simulation Start Requested";if(Et.body instanceof Js)return"Simulation Stop Requested";if(Et.body instanceof Ks)return"Time Updated";throw new Error("Failed pattern match at Scriptzzz.App.Controller (line 101, column 25 - line 121, column 29): "+[Et.body.constructor.name])}(),V="Message: "+Gt;return new tt(St.value0,T(St.value1)(V))}if(Dt instanceof dpt){var ve=upt(Et.header.creationTime),ee=lpt(Et.body),V="Message: "+(ve+(" | "+ee));return new tt(St.value0,T(St.value1)(V))}if(Dt instanceof ppt)return new tt(St.value0,St.value1);throw new Error("Failed pattern match at Scriptzzz.App.Controller (line 76, column 5 - line 142, column 30): "+[Dt.constructor.name])},Tt=function(){if(Et.body instanceof Wf)return R(kt)(Et.body.value0);if(Et.body instanceof Zs)return C(kt)(Et.body.value0);if(Et.body instanceof Ys)return S(kt)(Et.body.value0);if(Et.body instanceof Gf)return A(kt)(Et.body.value0);if(Et.body instanceof Xs)return E(kt)(Et.body.value0);if(Et.body instanceof Js)return N(kt)(Et.body.value0);if(Et.body instanceof Ks)return et(kt)(Et.body.value0);throw new Error("Failed pattern match at Scriptzzz.App.Controller (line 46, column 30 - line 60, column 49): "+[Et.body.constructor.name])}(),$n=Ge(spt(st)(Tt));return new tt($n.value0,X(z)(Z)($n.value1))}}}}}};var mpt=5;function PN(r){return function(t){return[mpt,r,t]}}var gpt=function(r){return function(t){return PN(r)(t)}};var sC=gpt("click");I();var VW={extension:{type:x.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(()=>(HW(),gmt))}};I();var ZW={extension:{type:x.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Promise.resolve().then(()=>(jW(),_mt))}};I();U0();M0();I();rr();zm();var Ny;function nG(r){return Ny!==void 0||(Ny=(()=>{let t={stencil:!0,failIfMajorPerformanceCaveat:r??zl.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ct.get().getWebGLRenderingContext())return!1;let n=Ct.get().createCanvas().getContext("webgl",t),o=!!n?.getContextAttributes()?.stencil;if(n){let a=n.getExtension("WEBGL_lose_context");a&&a.loseContext()}return n=null,o}catch{return!1}})()),Ny}rr();var ky;async function oG(r={}){return ky!==void 0||(ky=await(async()=>{let t=Ct.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),ky}zm();var xQ=["webgl","webgpu","canvas"];async function TQ(r){let t=[];r.preference?(t.push(r.preference),xQ.forEach(a=>{a!==r.preference&&t.push(a)})):t=xQ.slice();let e,n={};for(let a=0;a<t.length;a++){let i=t[a];if(i==="webgpu"&&await oG()){let{WebGPURenderer:u}=await Promise.resolve().then(()=>(Yz(),Zz));e=u,n={...r,...r.webgpu};break}else if(i==="webgl"&&nG(r.failIfMajorPerformanceCaveat??zl.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:u}=await Promise.resolve().then(()=>(wQ(),DQ));e=u,n={...r,...r.webgl};break}else if(i==="canvas")throw n={...r},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!e)throw new Error("No available renderer for the current environment");let o=new e;return await o.init(n),o}di();QS();Vr();var RQ=class PO{constructor(...t){this.stage=new Ae,t[0]!==void 0&&Ut(Ht,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await TQ(t),PO._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Ut(Ht,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){let n=PO._plugins.slice(0);n.reverse(),n.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};RQ._plugins=[];var cb=RQ;dt.handleByList(x.Application,cb._plugins);dt.add(Jm);I();Ml();WC();rr();I();rc();An();Be();_S();xS();var $v=class extends xd{constructor(t,e){super();let{textures:n,data:o}=t;Object.keys(o.pages).forEach(a=>{let i=o.pages[parseInt(a,10)],u=n[i.id];this.pages.push({texture:u})}),Object.keys(o.chars).forEach(a=>{let i=o.chars[a],{frame:u,source:l}=n[i.page],s=new de(i.x+u.x,i.y+u.y,i.width,i.height),c=new Y({source:l,frame:s});this.chars[a]={id:a.codePointAt(0),xOffset:i.xOffset,yOffset:i.yOffset,xAdvance:i.xAdvance,kerning:i.kerning??{},texture:c}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Nm.install(t)}static uninstall(t){Nm.uninstall(t)}};var fb={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){let t=r.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let f in t){let d=t[f].match(/^[a-z]+/gm)[0],p=t[f].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(let m in p){let _=p[m].split("="),y=_[0],D=_[1].replace(/"/gm,""),w=parseFloat(D),T=isNaN(w)?D:w;h[y]=T}e[d].push(h)}let n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=e.info,[a]=e.common,[i]=e.distanceField??[];i&&(n.distanceField={range:parseInt(i.distanceRange,10),type:i.fieldType}),n.fontSize=parseInt(o.size,10),n.fontFamily=o.face,n.lineHeight=parseInt(a.lineHeight,10);let u=e.page;for(let f=0;f<u.length;f++)n.pages.push({id:parseInt(u[f].id,10)||0,file:u[f].file});let l={};n.baseLineOffset=n.lineHeight-parseInt(a.base,10);let s=e.char;for(let f=0;f<s.length;f++){let d=s[f],p=parseInt(d.id,10),h=d.letter??d.char??String.fromCharCode(p);h==="space"&&(h=" "),l[p]=h,n.chars[h]={id:p,page:parseInt(d.page,10)||0,x:parseInt(d.x,10),y:parseInt(d.y,10),width:parseInt(d.width,10),height:parseInt(d.height,10),xOffset:parseInt(d.xoffset,10),yOffset:parseInt(d.yoffset,10),xAdvance:parseInt(d.xadvance,10),kerning:{}}}let c=e.kerning||[];for(let f=0;f<c.length;f++){let d=parseInt(c[f].first,10),p=parseInt(c[f].second,10),h=parseInt(c[f].amount,10);n.chars[l[p]].kerning[l[d]]=h}return n}};rr();var IO={test(r){let t=r;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){let t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=r.getElementsByTagName("info")[0],n=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});let a=r.getElementsByTagName("page"),i=r.getElementsByTagName("char"),u=r.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let s=0;s<a.length;s++)t.pages.push({id:parseInt(a[s].getAttribute("id"),10)||0,file:a[s].getAttribute("file")});let l={};t.baseLineOffset=t.lineHeight-parseInt(n.getAttribute("base"),10);for(let s=0;s<i.length;s++){let c=i[s],f=parseInt(c.getAttribute("id"),10),d=c.getAttribute("letter")??c.getAttribute("char")??String.fromCharCode(f);d==="space"&&(d=" "),l[f]=d,t.chars[d]={id:f,page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xOffset:parseInt(c.getAttribute("xoffset"),10),yOffset:parseInt(c.getAttribute("yoffset"),10),xAdvance:parseInt(c.getAttribute("xadvance"),10),kerning:{}}}for(let s=0;s<u.length;s++){let c=parseInt(u[s].getAttribute("first"),10),f=parseInt(u[s].getAttribute("second"),10),d=parseInt(u[s].getAttribute("amount"),10);t.chars[l[f]].kerning[l[c]]=d}return t}};var NO={test(r){return typeof r=="string"&&r.includes("<font>")?IO.test(Ct.get().parseXML(r)):!1},parse(r){return IO.parse(Ct.get().parseXML(r))}};var Jmt=[".xml",".fnt"],CQ={extension:{type:x.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof $v,getCacheableAssets(r,t){let e={};return r.forEach(n=>{e[n]=t,e[`${n}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},SQ={extension:{type:x.LoadParser,priority:co.Normal},name:"loadBitmapFont",test(r){return Jmt.includes(un.extname(r).toLowerCase())},async testParse(r){return fb.test(r)||NO.test(r)},async parse(r,t,e){let n=fb.test(r)?fb.parse(r):NO.parse(r),{src:o}=t,{pages:a}=n,i=[],u=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let f=0;f<a.length;++f){let d=a[f].file,p=un.join(un.dirname(o),d);p=fm(p,o),i.push({src:p,data:u})}let l=await e.load(i),s=i.map(f=>l[f.src]);return new $v({data:n,textures:s},o)},async load(r,t){return await(await Ct.get().fetch(r)).text()},async unload(r,t,e){await Promise.all(r.pages.map(n=>e.unload(n.texture.source._sourceOrigin))),r.destroy()}};er();var db=class{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<e;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}};Pl();I();Be();var OQ={extension:{type:x.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(t=>t instanceof Y),getCacheableAssets:(r,t)=>{let e={};return r.forEach(n=>{t.forEach((o,a)=>{e[n+(a===0?"":a+1)]=o})}),e}};I();async function pb(r){if("Image"in globalThis)return new Promise(t=>{let e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}var EQ={extension:{type:x.DetectionParser,priority:1},test:async()=>pb("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};I();var FQ=["png","jpg","jpeg"],MQ={extension:{type:x.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...FQ],remove:async r=>r.filter(t=>!FQ.includes(t))};I();var Kmt="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Ld(r){return Kmt?!1:document.createElement("video").canPlayType(r)!==""}var AQ={extension:{type:x.DetectionParser,priority:0},test:async()=>Ld("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")};I();var PQ={extension:{type:x.DetectionParser,priority:0},test:async()=>Ld("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")};I();var IQ={extension:{type:x.DetectionParser,priority:0},test:async()=>Ld("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")};I();var NQ={extension:{type:x.DetectionParser,priority:0},test:async()=>pb("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};er();rc();cm();O0();var hb=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,n)=>(this._parsersValidated=!1,t[e]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){let n={promise:null,parser:null};return n.promise=(async()=>{let o=null,a=null;if(e.loadParser&&(a=this._parserHash[e.loadParser],a||ct(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!a){for(let i=0;i<this.parsers.length;i++){let u=this.parsers[i];if(u.load&&u.test?.(t,e,this)){a=u;break}}if(!a)return ct(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await a.load(t,e,this),n.parser=a;for(let i=0;i<this.parsers.length;i++){let u=this.parsers[i];u.parse&&u.parse&&await u.testParse?.(o,e,this)&&(o=await u.parse(o,e,this)||o,n.parser=u)}return o})(),n}async load(t,e){this._parsersValidated||this._validateParsers();let n=0,o={},a=nc(t),i=fo(t,s=>({alias:[s],src:s,data:{}})),u=i.length,l=i.map(async s=>{let c=un.toAbsolute(s.src);if(!o[s.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,s)),o[s.src]=await this.promiseCache[c].promise,e&&e(++n/u)}catch(f){throw delete this.promiseCache[c],delete o[s.src],new Error(`[Loader.load] Failed to load ${c}.
${f}`)}});return await Promise.all(l),a?o[i[0].src]:o}async unload(t){let n=fo(t,o=>({alias:[o],src:o})).map(async o=>{let a=un.toAbsolute(o.src),i=this.promiseCache[a];if(i){let u=await i.promise;delete this.promiseCache[a],await i.parser?.unload?.(u,o,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&ct(`[Assets] loadParser name conflict "${e.name}"`):ct("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}};rr();I();function Ua(r,t){if(Array.isArray(t)){for(let e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}rc();function Ba(r,t){let e=r.split("?")[0],n=un.extname(e).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}Ml();var tvt=".json",evt="application/json",kQ={extension:{type:x.LoadParser,priority:co.Low},name:"loadJson",test(r){return Ua(r,evt)||Ba(r,tvt)},async load(r){return await(await Ct.get().fetch(r)).json()}};rr();I();Ml();var rvt=".txt",nvt="text/plain",$Q={name:"loadTxt",extension:{type:x.LoadParser,priority:co.Low,name:"loadTxt"},test(r){return Ua(r,nvt)||Ba(r,rvt)},async load(r){return await(await Ct.get().fetch(r)).text()}};rr();I();er();rc();Pl();Ml();var ovt=["normal","bold","100","200","300","400","500","600","700","800","900"],avt=[".ttf",".otf",".woff",".woff2"],ivt=["font/ttf","font/otf","font/woff","font/woff2"],uvt=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function lvt(r){let t=un.extname(r),o=un.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)),a=o.length>0;for(let u of o)if(!u.match(uvt)){a=!1;break}let i=o.join(" ");return a||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}var svt=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function cvt(r){return svt.test(r)?r:encodeURI(r)}var LQ={extension:{type:x.LoadParser,priority:co.Low},name:"loadWebFont",test(r){return Ua(r,ivt)||Ba(r,avt)},async load(r,t){let e=Ct.get().getFontFaceSet();if(e){let n=[],o=t.data?.family??lvt(r),a=t.data?.weights?.filter(u=>ovt.includes(u))??["normal"],i=t.data??{};for(let u=0;u<a.length;u++){let l=a[u],s=new FontFace(o,`url(${cvt(r)})`,{...i,weight:l});await s.load(),e.add(s),n.push(s)}return Pe.set(`${o}-and-url`,{url:r,fontFaces:n}),n.length===1?n[0]:n}return ct("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>{Pe.remove(t.family),Ct.get().getFontFaceSet().delete(t)})}};rr();I();Kf();yy();Yf();function Ud(r,t=1){let e=ua.RETINA_PREFIX?.exec(r);return e?parseFloat(e[1]):t}Ml();Be();er();Pl();function Bd(r,t,e){r.label=e,r._sourceOrigin=e;let n=new Y({source:r,label:e}),o=()=>{delete t.promiseCache[e],Pe.has(e)&&Pe.remove(e)};return n.source.once("destroy",()=>{t.promiseCache[e]&&(ct("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),n.once("destroy",()=>{r.destroyed||(ct("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),n}var fvt=".svg",dvt="image/svg+xml",UQ={extension:{type:x.LoadParser,priority:co.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return Ua(r,dvt)||Ba(r,fvt)},async load(r,t,e){return t.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?hvt(r):pvt(r,t,e,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function pvt(r,t,e,n){let a=await(await Ct.get().fetch(r)).blob(),i=URL.createObjectURL(a),u=new Image;u.src=i,u.crossOrigin=n,await u.decode(),URL.revokeObjectURL(i);let l=document.createElement("canvas"),s=l.getContext("2d"),c=t.data?.resolution||Ud(r),f=t.data?.width??u.width,d=t.data?.height??u.height;l.width=f*c,l.height=d*c,s.drawImage(u,0,0,f*c,d*c);let{parseAsGraphicsContext:p,...h}=t.data,m=new la({resource:l,alphaMode:"premultiply-alpha-on-upload",resolution:c,...h});return Bd(m,e,r)}async function hvt(r){let e=await(await Ct.get().fetch(r)).text(),n=new ho;return n.svg(e),n}rr();I();Kf();var mvt=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,Wd=null,Gd=class{constructor(){Wd||(Wd=URL.createObjectURL(new Blob([mvt],{type:"application/javascript"}))),this.worker=new Worker(Wd)}};Gd.revokeObjectURL=function(){Wd&&(URL.revokeObjectURL(Wd),Wd=null)};var vvt=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,zd=null,Lv=class{constructor(){zd||(zd=URL.createObjectURL(new Blob([vvt],{type:"application/javascript"}))),this.worker=new Worker(zd)}};Lv.revokeObjectURL=function(){zd&&(URL.revokeObjectURL(zd),zd=null)};var BQ=0,kO,$O=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{let{worker:e}=new Gd;e.addEventListener("message",n=>{e.terminate(),Gd.revokeObjectURL(),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){return this._run("loadImageBitmap",[t,e?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){kO===void 0&&(kO=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<kO&&(this._createdWorkers++,t=new Lv().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();let n=new Promise((o,a)=>{this._queue.push({id:t,arguments:e,resolve:o,reject:a})});return this._next(),n}_next(){if(!this._queue.length)return;let t=this._getWorker();if(!t)return;let e=this._queue.pop(),n=e.id;this._resolveHash[BQ]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:BQ++,id:n})}},LO=new $O;Ml();var gvt=[".jpeg",".jpg",".png",".webp",".avif"],_vt=["image/jpeg","image/png","image/webp","image/avif"];async function yvt(r,t){let e=await Ct.get().fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);let n=await e.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}var mb={name:"loadTextures",extension:{type:x.LoadParser,priority:co.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Ua(r,_vt)||Ba(r,gvt)},async load(r,t,e){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await LO.isImageBitmapSupported()?n=await LO.loadImageBitmap(r,t):n=await yvt(r,t):n=await new Promise(a=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=r,n.complete?a(n):n.onload=()=>{a(n)}});let o=new la({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||Ud(r),...t.data});return Bd(o,e,r)},unload(r){r.destroy(!0)}};I();KC();JC();var WQ=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],bvt=WQ.map(r=>`video/${r.substring(1)}`);function Dvt(r,t,e){e===void 0&&!t.startsWith("data:")?r.crossOrigin=xvt(t):e!==!1&&(r.crossOrigin=typeof e=="string"?e:"anonymous")}function wvt(r){return new Promise((t,e)=>{r.addEventListener("canplaythrough",n),r.addEventListener("error",o),r.load();function n(){a(),t()}function o(i){a(),e(i)}function a(){r.removeEventListener("canplaythrough",n),r.removeEventListener("error",o)}})}function xvt(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;let e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}var GQ={name:"loadVideo",extension:{type:x.LoadParser,name:"loadVideo"},test(r){let t=Ua(r,bvt),e=Ba(r,WQ);return t||e},async load(r,t,e){let n={...td.defaultOptions,resolution:t.data?.resolution||Ud(r),alphaMode:t.data?.alphaMode||await $0(),...t.data},o=document.createElement("video"),a={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(a).forEach(l=>{let s=a[l];s!==void 0&&o.setAttribute(l,s)}),n.muted===!0&&(o.muted=!0),Dvt(o,r,n.crossorigin);let i=document.createElement("source"),u;if(r.startsWith("data:"))u=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){let l=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();u=td.MIME_TYPES[l]||`video/${l}`}return i.src=r,u&&(i.type=u),new Promise(l=>{let s=async()=>{let c=new td({...n,resource:o});o.removeEventListener("canplay",s),t.data.preload&&await wvt(o),l(Bd(c,e,r))};o.addEventListener("canplay",s),o.appendChild(i)})},unload(r){r.destroy(!0)}};I();Yf();I();Yf();var vb={extension:{type:x.ResolveParser,name:"resolveTexture"},test:mb.test,parse:r=>({resolution:parseFloat(ua.RETINA_PREFIX.exec(r)?.[1]??"1"),format:r.split(".").pop(),src:r})};var zQ={extension:{type:x.ResolveParser,priority:-2,name:"resolveJson"},test:r=>ua.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:vb.parse};Yf();cm();O0();var gb=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ua,this.loader=new hb,this.cache=Pe,this._backgroundLoader=new db(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){ct("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}let e=t.texturePreference?.resolution??1,n=typeof e=="number"?[e]:e,o=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();let n=nc(t),o=fo(t).map(u=>{if(typeof u!="string"){let l=this.resolver.getAlias(u);return l.some(s=>!this.resolver.hasKey(s))&&this.add(u),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(u)||this.add({alias:u,src:u}),u}),a=this.resolver.resolve(o),i=await this._mapLoadToResolve(a,e);return n?i[o[0]]:i}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);let o=this.resolver.resolveBundle(t),a={},i=Object.keys(o),u=0,l=0,s=()=>{e?.(++u/l)},c=i.map(f=>{let d=o[f];return l+=Object.keys(d).length,this._mapLoadToResolve(d,s).then(p=>{a[f]=p})});return await Promise.all(c),n?a[t[0]]:a}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let e=this.resolver.resolveBundle(t);Object.values(e).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Pe.get(t);let e={};for(let n=0;n<t.length;n++)e[n]=Pe.get(t[n]);return e}async _mapLoadToResolve(t,e){let n=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;let o=await this.loader.load(n,e);this._backgroundLoader.active=!0;let a={};return n.forEach(i=>{let u=o[i.src],l=[i.src];i.alias&&l.push(...i.alias),l.forEach(s=>{a[s]=u}),Pe.set(l,u)}),a}async unload(t){this._initialized||await this.init();let e=fo(t).map(o=>typeof o!="string"?o.src:o),n=this.resolver.resolve(e);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=fo(t);let e=this.resolver.resolveBundle(t),n=Object.keys(e).map(o=>this._unloadFromResolved(e[o]));await Promise.all(n)}async _unloadFromResolved(t){let e=Object.values(t);e.forEach(n=>{Pe.remove(n.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(let n of t.detections)t.skipDetections||await n.test()?e=await n.add(e):t.skipDetections||(e=await n.remove(e));return e=e.filter((n,o)=>e.indexOf(n)===o),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(n=>n in t).forEach(n=>{e.config[n]=t[n]})})}},wc=new gb;dt.handleByList(x.LoadParser,wc.loader.parsers).handleByList(x.ResolveParser,wc.resolver.parsers).handleByList(x.CacheParser,wc.cache.parsers).handleByList(x.DetectionParser,wc.detections);dt.add(OQ,MQ,EQ,NQ,AQ,PQ,IQ,kQ,$Q,LQ,UQ,mb,GQ,SQ,CQ,vb,zQ);var qQ={loader:x.LoadParser,resolver:x.ResolveParser,cache:x.CacheParser,detection:x.DetectionParser};dt.handle(x.Asset,r=>{let t=r.ref;Object.entries(qQ).filter(([e])=>!!t[e]).forEach(([e,n])=>dt.add(Object.assign(t[e],{extension:t[e].extension??n})))},r=>{let t=r.ref;Object.keys(qQ).filter(e=>!!t[e]).forEach(e=>dt.remove(t[e]))});h0();Vr();P0();var _b=class extends Al{constructor(t,e){let{text:n,resolution:o,style:a,anchor:i,width:u,height:l,roundPixels:s,...c}=t;super({...c}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=n??"",this.style=a,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Mn({_onUpdate:()=>{this.onViewUpdate()}}),i&&(this.anchor=i),this.roundPixels=s??!1,u!==void 0&&(this.width=u),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){t=t||{},this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}addBounds(t){let e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){let e=this.bounds.width,n=this.bounds.height,o=-e*this.anchor.x,a=0;return t.x>=o&&t.x<=o+e&&(a=-n*this.anchor.y,t.y>=a&&t.y<=a+n)}onViewUpdate(){this._boundsDirty=!0,this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}};function QQ(r,t){let e=r[0]??{};return(typeof e=="string"||r[1])&&(Ut(Ht,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:r[1]}),e}xy();_c();var Uv=class extends _b{constructor(...t){let e=QQ(t,"Text");super(e,In),this.renderPipeId="text"}_updateBounds(){let t=this._bounds,e=this._anchor,n=La.measureText(this._text,this._style),{width:o,height:a}=n;t.minX=-e._x*o,t.maxX=t.minX+o,t.minY=-e._y*a,t.maxY=t.minY+a}};r2();di();mS();I0();_c();jn();var Tvt=bp(F2(),1);dt.add(VW,ZW);var HQ=3,Ye={application:null,entities:{},grid:{cellSize:{height:null,width:null},height:null,pixelHeight:null,pixelWidth:null,width:null},textures:{entity:null}};function VQ(r){return r*Ye.grid.cellSize.width}function jQ(r){return r*Ye.grid.cellSize.height}function yb(){if(!Ye.application)throw Error("Application uninitialized");if(!Ye.grid.width||!Ye.grid.height)throw Error("Grid uninitialized");let r=Ye.grid.cellSize.width,t=Ye.grid.cellSize.height;if(r<HQ||t<HQ)throw Error(`Grid cell to small: (${r},${t})`)}function Rvt(){yb();let r=new bc;for(let t=0;t<Ye.grid.height;t++)for(let e=0;e<Ye.grid.width;e++){let n=1+e*Ye.grid.cellSize.width,o=1+t*Ye.grid.cellSize.height;r.rect(n,o,Ye.grid.cellSize.width-2,Ye.grid.cellSize.height-2),r.stroke({alpha:.2,color:16777215}),r.fill({alpha:.1,color:16777215})}return r}async function Cvt({gridHeight:r,gridWidth:t,pixelHeight:e,pixelWidth:n}){Ye.grid.width=t,Ye.grid.height=r,Ye.grid.pixelWidth=n,Ye.grid.pixelHeight=e,Ye.grid.cellSize.width=n/t,Ye.grid.cellSize.height=e/r;let o=new cb;Ye.application=o,await o.init({width:n,height:e});let a=await wc.load("entity.png");return Ye.textures.entity=a,o.stage.addChild(Rvt({gridHeight:r,gridWidth:t,pixelHeight:e,pixelWidth:n})),o}function ZQ(r){return t=>e=>n=>o=>()=>{let a=document.createElement("div");return a.id="canvas",Cvt({gridHeight:t,gridWidth:r,pixelHeight:n,pixelWidth:e}).then(i=>{a.appendChild(i.canvas),o()}),a}}function YQ(r){return()=>{yb();let t=Ye.entities[r];if(!t)throw Error(`Entity '${r}' not found.`);Ye.application.stage.removeChild(t)}}function XQ(r){return t=>e=>()=>{if(yb(),Ye.entities[r])throw Error(`Entity '${r}' already exists.`);let n=new Li(Ye.textures.entity);n.x=0,n.y=0;let o=new Uv({style:new In({align:"center",fill:"white",fontSize:10}),text:r});o.x=n.x,o.y=n.y+20;let a=new Ae;a.addChild(n),a.addChild(o),a.x=VQ(e.x),a.y=jQ(e.y),Ye.application.stage.addChild(a),Ye.entities[r]=a}}function JQ(r){return t=>()=>{yb();let e=Ye.entities[r];if(!e)throw Error(`Entity '${r}' not found.`);e.x=VQ(t.x),e.y=jQ(t.y)}}var UO=Rr(ei),KQ=function(r){return function(t){return UO(JQ(Ah(r))(t))}},tH=function(r){return UO(YQ(Ah(r)))},eH=function(r){return function(t){return function(e){return function(n){return function(o){return UO(XQ(Ah(e))(n)(o))}}}}},rH=function(r){var t=ti(r.Nat0());return function(e){var n=ti(e.Nat0());return function(o){var a=t(ta),i=n(ta),u=i*32|0,l=a*32|0;return ZQ(a)(i)(l)(u)}}};var xe=class r{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=Zd(this,t,e);let o=[];return this.decompose(0,t,o,2),n.length&&n.decompose(0,n.length,o,3),this.decompose(e,this.length,o,1),Qd.from(o,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=Zd(this,t,e);let n=[];return this.decompose(t,e,n,0),Qd.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),o=new Rc(this),a=new Rc(t);for(let i=e,u=e;;){if(o.next(i),a.next(i),i=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(u+=o.value.length,o.done||u>=n)return!0}}iter(t=1){return new Rc(this,t)}iterRange(t,e=this.length){return new xb(this,t,e)}iterLines(t,e){let n;if(t==null)n=this.iter();else{e==null&&(e=this.lines+1);let o=this.line(t).from;n=this.iterRange(o,Math.max(o,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new Tb(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?r.empty:t.length<=32?new sa(t):Qd.from(sa.split(t,[]))}},sa=class r extends xe{constructor(t,e=Ovt(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,o){for(let a=0;;a++){let i=this.text[a],u=o+i.length;if((e?n:u)>=t)return new WO(o,u,n,i);o=u+1,n++}}decompose(t,e,n,o){let a=t<=0&&e>=this.length?this:new r(oH(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(o&1){let i=n.pop(),u=wb(a.text,i.text.slice(),0,a.length);if(u.length<=32)n.push(new r(u,i.length+a.length));else{let l=u.length>>1;n.push(new r(u.slice(0,l)),new r(u.slice(l)))}}else n.push(a)}replace(t,e,n){if(!(n instanceof r))return super.replace(t,e,n);[t,e]=Zd(this,t,e);let o=wb(this.text,wb(n.text,oH(this.text,0,t)),e),a=this.length+n.length-(e-t);return o.length<=32?new r(o,a):Qd.from(r.split(o,[]),a)}sliceString(t,e=this.length,n=`
`){[t,e]=Zd(this,t,e);let o="";for(let a=0,i=0;a<=e&&i<this.text.length;i++){let u=this.text[i],l=a+u.length;a>t&&i&&(o+=n),t<l&&e>a&&(o+=u.slice(Math.max(0,t-a),e-a)),a=l+1}return o}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],o=-1;for(let a of t)n.push(a),o+=a.length+1,n.length==32&&(e.push(new r(n,o)),n=[],o=-1);return o>-1&&e.push(new r(n,o)),e}},Qd=class r extends xe{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let n of t)this.lines+=n.lines}lineInner(t,e,n,o){for(let a=0;;a++){let i=this.children[a],u=o+i.length,l=n+i.lines-1;if((e?l:u)>=t)return i.lineInner(t,e,n,o);o=u+1,n=l+1}}decompose(t,e,n,o){for(let a=0,i=0;i<=e&&a<this.children.length;a++){let u=this.children[a],l=i+u.length;if(t<=l&&e>=i){let s=o&((i<=t?1:0)|(l>=e?2:0));i>=t&&l<=e&&!s?n.push(u):u.decompose(t-i,e-i,n,s)}i=l+1}}replace(t,e,n){if([t,e]=Zd(this,t,e),n.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let i=this.children[o],u=a+i.length;if(t>=a&&e<=u){let l=i.replace(t-a,e-a,n),s=this.lines-i.lines+l.lines;if(l.lines<s>>4&&l.lines>s>>6){let c=this.children.slice();return c[o]=l,new r(c,this.length-(e-t)+n.length)}return super.replace(a,u,l)}a=u+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n=`
`){[t,e]=Zd(this,t,e);let o="";for(let a=0,i=0;a<this.children.length&&i<=e;a++){let u=this.children[a],l=i+u.length;i>t&&a&&(o+=n),t<l&&e>i&&(o+=u.sliceString(t-i,e-i,n)),i=l+1}return o}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof r))return 0;let n=0,[o,a,i,u]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;o+=e,a+=e){if(o==i||a==u)return n;let l=this.children[o],s=t.children[a];if(l!=s)return n+l.scanIdentical(s,e);n+=l.length+1}}static from(t,e=t.reduce((n,o)=>n+o.length+1,-1)){let n=0;for(let p of t)n+=p.lines;if(n<32){let p=[];for(let h of t)h.flatten(p);return new sa(p,e)}let o=Math.max(32,n>>5),a=o<<1,i=o>>1,u=[],l=0,s=-1,c=[];function f(p){let h;if(p.lines>a&&p instanceof r)for(let m of p.children)f(m);else p.lines>i&&(l>i||!l)?(d(),u.push(p)):p instanceof sa&&l&&(h=c[c.length-1])instanceof sa&&p.lines+h.lines<=32?(l+=p.lines,s+=p.length+1,c[c.length-1]=new sa(h.text.concat(p.text),h.length+1+p.length)):(l+p.lines>o&&d(),l+=p.lines,s+=p.length+1,c.push(p))}function d(){l!=0&&(u.push(c.length==1?c[0]:r.from(c,s)),s=-1,l=c.length=0)}for(let p of t)f(p);return d(),u.length==1?u[0]:new r(u,e)}};xe.empty=new sa([""],0);function Ovt(r){let t=-1;for(let e of r)t+=e.length+1;return t}function wb(r,t,e=0,n=1e9){for(let o=0,a=0,i=!0;a<r.length&&o<=n;a++){let u=r[a],l=o+u.length;l>=e&&(l>n&&(u=u.slice(0,n-o)),o<e&&(u=u.slice(e-o)),i?(t[t.length-1]+=u,i=!1):t.push(u)),o=l+1}return t}function oH(r,t,e){return wb(r,[""],t,e)}var Rc=class{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof sa?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,o=this.nodes[n],a=this.offsets[n],i=a>>1,u=o instanceof sa?o.text.length:o.children.length;if(i==(e>0?u:0)){if(n==0)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(e>0?0:1)){if(this.offsets[n]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(o instanceof sa){let l=o.text[i+(e<0?-1:0)];if(this.offsets[n]+=e,l.length>Math.max(0,t))return this.value=t==0?l:e>0?l.slice(t):l.slice(0,l.length-t),this;t-=l.length}else{let l=o.children[i+(e<0?-1:0)];t>l.length?(t-=l.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(e>0?1:(l instanceof sa?l.text.length:l.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}},xb=class{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new Rc(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:o}=this.cursor.next(t);return this.pos+=(o.length+t)*e,this.value=o.length<=n?o:e<0?o.slice(o.length-n):o.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Tb=class{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:o}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(xe.prototype[Symbol.iterator]=function(){return this.iter()},Rc.prototype[Symbol.iterator]=xb.prototype[Symbol.iterator]=Tb.prototype[Symbol.iterator]=function(){return this});var WO=class{constructor(t,e,n,o){this.from=t,this.to=e,this.number=n,this.text=o}get length(){return this.to-this.from}};function Zd(r,t,e){return t=Math.max(0,Math.min(r.length,t)),[t,Math.max(t,Math.min(r.length,e))]}var Hd="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Hd.length;r++)Hd[r]+=Hd[r-1];function Evt(r){for(let t=1;t<Hd.length;t+=2)if(Hd[t]>r)return Hd[t-1]<=r;return!1}function aH(r){return r>=127462&&r<=127487}var iH=8205;function Xr(r,t,e=!0,n=!0){return(e?dH:Fvt)(r,t,n)}function dH(r,t,e){if(t==r.length)return t;t&&pH(r.charCodeAt(t))&&hH(r.charCodeAt(t-1))&&t--;let n=Zr(r,t);for(t+=vo(n);t<r.length;){let o=Zr(r,t);if(n==iH||o==iH||e&&Evt(o))t+=vo(o),n=o;else if(aH(o)){let a=0,i=t-2;for(;i>=0&&aH(Zr(r,i));)a++,i-=2;if(a%2==0)break;t+=2}else break}return t}function Fvt(r,t,e){for(;t>0;){let n=dH(r,t-2,e);if(n<t)return n;t--}return 0}function pH(r){return r>=56320&&r<57344}function hH(r){return r>=55296&&r<56320}function Zr(r,t){let e=r.charCodeAt(t);if(!hH(e)||t+1==r.length)return e;let n=r.charCodeAt(t+1);return pH(n)?(e-55296<<10)+(n-56320)+65536:e}function Qv(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function vo(r){return r<65536?1:2}var GO=/\r\n?|\n/,ln=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(ln||(ln={})),Gu=class r{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,o=0;e<this.sections.length;){let a=this.sections[e++],i=this.sections[e++];i<0?(t(n,o,a),o+=a):o+=i,n+=a}}iterChangedRanges(t,e=!1){zO(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],o=this.sections[e++];o<0?t.push(n,o):t.push(o,n)}return new r(t)}composeDesc(t){return this.empty?t:t.empty?this:mH(this,t)}mapDesc(t,e=!1){return t.empty?this:qO(this,t,e)}mapPos(t,e=-1,n=ln.Simple){let o=0,a=0;for(let i=0;i<this.sections.length;){let u=this.sections[i++],l=this.sections[i++],s=o+u;if(l<0){if(s>t)return a+(t-o);a+=u}else{if(n!=ln.Simple&&s>=t&&(n==ln.TrackDel&&o<t&&s>t||n==ln.TrackBefore&&o<t||n==ln.TrackAfter&&s>t))return null;if(s>t||s==t&&e<0&&!u)return t==o||e<0?a:a+l;a+=l}o=s}if(t>o)throw new RangeError(`Position ${t} is out of range for changeset of length ${o}`);return a}touchesRange(t,e=t){for(let n=0,o=0;n<this.sections.length&&o<=e;){let a=this.sections[n++],i=this.sections[n++],u=o+a;if(i>=0&&o<=e&&u>=t)return o<t&&u>e?"cover":!0;o=u}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],o=this.sections[e++];t+=(t?" ":"")+n+(o>=0?":"+o:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new r(t)}static create(t){return new r(t)}},go=class r extends Gu{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return zO(this,(e,n,o,a,i)=>t=t.replace(o,o+(n-e),i),!1),t}mapDesc(t,e=!1){return qO(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let o=0,a=0;o<e.length;o+=2){let i=e[o],u=e[o+1];if(u>=0){e[o]=u,e[o+1]=i;let l=o>>1;for(;n.length<l;)n.push(xe.empty);n.push(i?t.slice(a,a+i):xe.empty)}a+=i}return new r(e,n)}compose(t){return this.empty?t:t.empty?this:mH(this,t,!0)}map(t,e=!1){return t.empty?this:qO(this,t,e,!0)}iterChanges(t,e=!1){zO(this,t,e)}get desc(){return Gu.create(this.sections)}filter(t){let e=[],n=[],o=[],a=new Cc(this);t:for(let i=0,u=0;;){let l=i==t.length?1e9:t[i++];for(;u<l||u==l&&a.len==0;){if(a.done)break t;let c=Math.min(a.len,l-u);Xn(o,c,-1);let f=a.ins==-1?-1:a.off==0?a.ins:0;Xn(e,c,f),f>0&&Hl(n,e,a.text),a.forward(c),u+=c}let s=t[i++];for(;u<s;){if(a.done)break t;let c=Math.min(a.len,s-u);Xn(e,c,-1),Xn(o,c,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(c),u+=c}}return{changes:new r(e,n),filtered:Gu.create(o)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],o=this.sections[e+1];o<0?t.push(n):o==0?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let o=[],a=[],i=0,u=null;function l(c=!1){if(!c&&!o.length)return;i<e&&Xn(o,e-i,-1);let f=new r(o,a);u=u?u.compose(f.map(u)):f,o=[],a=[],i=0}function s(c){if(Array.isArray(c))for(let f of c)s(f);else if(c instanceof r){if(c.length!=e)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${e})`);l(),u=u?u.compose(c.map(u)):c}else{let{from:f,to:d=f,insert:p}=c;if(f>d||f<0||d>e)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${e})`);let h=p?typeof p=="string"?xe.of(p.split(n||GO)):p:xe.empty,m=h.length;if(f==d&&m==0)return;f<i&&l(),f>i&&Xn(o,f-i,-1),Xn(o,d-f,m),Hl(a,o,h),i=d}}return s(t),l(!u),u}static empty(t){return new r(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")e.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((i,u)=>u&&typeof i!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)e.push(a[0],0);else{for(;n.length<o;)n.push(xe.empty);n[o]=xe.of(a.slice(1)),e.push(a[0],n[o].length)}}}return new r(e,n)}static createSet(t,e){return new r(t,e)}};function Xn(r,t,e,n=!1){if(t==0&&e<=0)return;let o=r.length-2;o>=0&&e<=0&&e==r[o+1]?r[o]+=t:t==0&&r[o]==0?r[o+1]+=e:n?(r[o]+=t,r[o+1]+=e):r.push(t,e)}function Hl(r,t,e){if(e.length==0)return;let n=t.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(e);else{for(;r.length<n;)r.push(xe.empty);r.push(e)}}function zO(r,t,e){let n=r.inserted;for(let o=0,a=0,i=0;i<r.sections.length;){let u=r.sections[i++],l=r.sections[i++];if(l<0)o+=u,a+=u;else{let s=o,c=a,f=xe.empty;for(;s+=u,c+=l,l&&n&&(f=f.append(n[i-2>>1])),!(e||i==r.sections.length||r.sections[i+1]<0);)u=r.sections[i++],l=r.sections[i++];t(o,s,a,c,f),o=s,a=c}}}function qO(r,t,e,n=!1){let o=[],a=n?[]:null,i=new Cc(r),u=new Cc(t);for(let l=-1;;)if(i.ins==-1&&u.ins==-1){let s=Math.min(i.len,u.len);Xn(o,s,-1),i.forward(s),u.forward(s)}else if(u.ins>=0&&(i.ins<0||l==i.i||i.off==0&&(u.len<i.len||u.len==i.len&&!e))){let s=u.len;for(Xn(o,u.ins,-1);s;){let c=Math.min(i.len,s);i.ins>=0&&l<i.i&&i.len<=c&&(Xn(o,0,i.ins),a&&Hl(a,o,i.text),l=i.i),i.forward(c),s-=c}u.next()}else if(i.ins>=0){let s=0,c=i.len;for(;c;)if(u.ins==-1){let f=Math.min(c,u.len);s+=f,c-=f,u.forward(f)}else if(u.ins==0&&u.len<c)c-=u.len,u.next();else break;Xn(o,s,l<i.i?i.ins:0),a&&l<i.i&&Hl(a,o,i.text),l=i.i,i.forward(i.len-c)}else{if(i.done&&u.done)return a?go.createSet(o,a):Gu.create(o);throw new Error("Mismatched change set lengths")}}function mH(r,t,e=!1){let n=[],o=e?[]:null,a=new Cc(r),i=new Cc(t);for(let u=!1;;){if(a.done&&i.done)return o?go.createSet(n,o):Gu.create(n);if(a.ins==0)Xn(n,a.len,0,u),a.next();else if(i.len==0&&!i.done)Xn(n,0,i.ins,u),o&&Hl(o,n,i.text),i.next();else{if(a.done||i.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,i.len),s=n.length;if(a.ins==-1){let c=i.ins==-1?-1:i.off?0:i.ins;Xn(n,l,c,u),o&&c&&Hl(o,n,i.text)}else i.ins==-1?(Xn(n,a.off?0:a.len,l,u),o&&Hl(o,n,a.textBit(l))):(Xn(n,a.off?0:a.len,i.off?0:i.ins,u),o&&!i.off&&Hl(o,n,i.text));u=(a.ins>l||i.ins>=0&&i.len>l)&&(u||n.length>s),a.forward2(l),i.forward(l)}}}}var Cc=class{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?xe.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?xe.empty:e[n].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}},qd=class r{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let n,o;return this.empty?n=o=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),o=t.mapPos(this.to,-1)),n==this.from&&o==this.to?this:new r(n,o,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return L.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return L.range(this.anchor,n)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return L.range(t.anchor,t.head)}static create(t,e,n){return new r(t,e,n)}},L=class r{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:r.create(this.ranges.map(n=>n.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new r([this.main],0)}addRange(t,e=!0){return r.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,r.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new r(t.ranges.map(e=>qd.fromJSON(e)),t.main)}static single(t,e=t){return new r([r.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,o=0;o<t.length;o++){let a=t[o];if(a.empty?a.from<=n:a.from<n)return r.normalized(t.slice(),e);n=a.to}return new r(t,e)}static cursor(t,e=0,n,o){return qd.create(t,t,(e==0?0:e<0?8:16)|(n==null?7:Math.min(6,n))|(o??16777215)<<6)}static range(t,e,n,o){let a=(n??16777215)<<6|(o==null?7:Math.min(6,o));return e<t?qd.create(e,t,48|a):qd.create(t,e,(e>t?8:0)|a)}static normalized(t,e=0){let n=t[e];t.sort((o,a)=>o.from-a.from),e=t.indexOf(n);for(let o=1;o<t.length;o++){let a=t[o],i=t[o-1];if(a.empty?a.from<=i.to:a.from<i.to){let u=i.from,l=Math.max(a.to,i.to);o<=e&&e--,t.splice(--o,2,a.anchor>a.head?r.range(l,u):r.range(u,l))}}return new r(t,e)}};function vH(r,t){for(let e of r.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}var tE=0,ut=class r{constructor(t,e,n,o,a){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=o,this.id=tE++,this.default=t([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(t={}){return new r(t.combine||(e=>e),t.compareInput||((e,n)=>e===n),t.compare||(t.combine?(e,n)=>e===n:eE),!!t.static,t.enables)}of(t){return new Vd([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vd(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vd(t,this,2,e)}from(t,e){return e||(e=n=>n),this.compute([t],n=>e(n.field(t)))}};function eE(r,t){return r==t||r.length==t.length&&r.every((e,n)=>e===t[n])}var Vd=class{constructor(t,e,n,o){this.dependencies=t,this.facet=e,this.type=n,this.value=o,this.id=tE++}dynamicSlot(t){var e;let n=this.value,o=this.facet.compareInput,a=this.id,i=t[a]>>1,u=this.type==2,l=!1,s=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?s=!0:((e=t[f.id])!==null&&e!==void 0?e:1)&1||c.push(t[f.id]);return{create(f){return f.values[i]=n(f),1},update(f,d){if(l&&d.docChanged||s&&(d.docChanged||d.selection)||QO(f,c)){let p=n(f);if(u?!uH(p,f.values[i],o):!o(p,f.values[i]))return f.values[i]=p,1}return 0},reconfigure:(f,d)=>{let p,h=d.config.address[a];if(h!=null){let m=Sb(d,h);if(this.dependencies.every(_=>_ instanceof ut?d.facet(_)===f.facet(_):_ instanceof gr?d.field(_,!1)==f.field(_,!1):!0)||(u?uH(p=n(f),m,o):o(p=n(f),m)))return f.values[i]=m,0}else p=n(f);return f.values[i]=p,1}}}};function uH(r,t,e){if(r.length!=t.length)return!1;for(let n=0;n<r.length;n++)if(!e(r[n],t[n]))return!1;return!0}function QO(r,t){let e=!1;for(let n of t)Wv(r,n)&1&&(e=!0);return e}function Mvt(r,t,e){let n=e.map(l=>r[l.id]),o=e.map(l=>l.type),a=n.filter(l=>!(l&1)),i=r[t.id]>>1;function u(l){let s=[];for(let c=0;c<n.length;c++){let f=Sb(l,n[c]);if(o[c]==2)for(let d of f)s.push(d);else s.push(f)}return t.combine(s)}return{create(l){for(let s of n)Wv(l,s);return l.values[i]=u(l),1},update(l,s){if(!QO(l,a))return 0;let c=u(l);return t.compare(c,l.values[i])?0:(l.values[i]=c,1)},reconfigure(l,s){let c=QO(l,n),f=s.config.facets[t.id],d=s.facet(t);if(f&&!c&&eE(e,f))return l.values[i]=d,0;let p=u(l);return t.compare(p,d)?(l.values[i]=d,0):(l.values[i]=p,1)}}}var lH=ut.define({static:!0}),gr=class r{constructor(t,e,n,o,a){this.id=t,this.createF=e,this.updateF=n,this.compareF=o,this.spec=a,this.provides=void 0}static define(t){let e=new r(tE++,t.create,t.update,t.compare||((n,o)=>n===o),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(lH).find(n=>n.field==this);return(e?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:n=>(n.values[e]=this.create(n),1),update:(n,o)=>{let a=n.values[e],i=this.updateF(a,o);return this.compareF(a,i)?0:(n.values[e]=i,1)},reconfigure:(n,o)=>o.config.address[this.id]!=null?(n.values[e]=o.field(this),0):(n.values[e]=this.create(n),1)}}init(t){return[this,lH.of({field:this,create:t})]}get extension(){return this}},xc={lowest:4,low:3,default:2,high:1,highest:0};function Bv(r){return t=>new Rb(t,r)}var Wa={highest:Bv(xc.highest),high:Bv(xc.high),default:Bv(xc.default),low:Bv(xc.low),lowest:Bv(xc.lowest)},Rb=class{constructor(t,e){this.inner=t,this.prec=e}},Sc=class r{of(t){return new Gv(this,t)}reconfigure(t){return r.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}},Gv=class{constructor(t,e){this.compartment=t,this.inner=e}},Cb=class r{constructor(t,e,n,o,a,i){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=o,this.staticValues=a,this.facets=i,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let o=[],a=Object.create(null),i=new Map;for(let d of Avt(t,e,i))d instanceof gr?o.push(d):(a[d.facet.id]||(a[d.facet.id]=[])).push(d);let u=Object.create(null),l=[],s=[];for(let d of o)u[d.id]=s.length<<1,s.push(p=>d.slot(p));let c=n?.config.facets;for(let d in a){let p=a[d],h=p[0].facet,m=c&&c[d]||[];if(p.every(_=>_.type==0))if(u[h.id]=l.length<<1|1,eE(m,p))l.push(n.facet(h));else{let _=h.combine(p.map(y=>y.value));l.push(n&&h.compare(_,n.facet(h))?n.facet(h):_)}else{for(let _ of p)_.type==0?(u[_.id]=l.length<<1|1,l.push(_.value)):(u[_.id]=s.length<<1,s.push(y=>_.dynamicSlot(y)));u[h.id]=s.length<<1,s.push(_=>Mvt(_,h,p))}}let f=s.map(d=>d(u));return new r(t,i,f,u,l,a)}};function Avt(r,t,e){let n=[[],[],[],[],[]],o=new Map;function a(i,u){let l=o.get(i);if(l!=null){if(l<=u)return;let s=n[l].indexOf(i);s>-1&&n[l].splice(s,1),i instanceof Gv&&e.delete(i.compartment)}if(o.set(i,u),Array.isArray(i))for(let s of i)a(s,u);else if(i instanceof Gv){if(e.has(i.compartment))throw new RangeError("Duplicate use of compartment in extensions");let s=t.get(i.compartment)||i.inner;e.set(i.compartment,s),a(s,u)}else if(i instanceof Rb)a(i.inner,i.prec);else if(i instanceof gr)n[u].push(i),i.provides&&a(i.provides,u);else if(i instanceof Vd)n[u].push(i),i.facet.extensions&&a(i.facet.extensions,xc.default);else{let s=i.extension;if(!s)throw new Error(`Unrecognized extension value in extension set (${i}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(s,u)}}return a(r,xc.default),n.reduce((i,u)=>i.concat(u))}function Wv(r,t){if(t&1)return 2;let e=t>>1,n=r.status[e];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[e]=4;let o=r.computeSlot(r,r.config.dynamicSlots[e]);return r.status[e]=2|o}function Sb(r,t){return t&1?r.config.staticValues[t>>1]:r.values[t>>1]}var gH=ut.define(),HO=ut.define({combine:r=>r.some(t=>t),static:!0}),_H=ut.define({combine:r=>r.length?r[0]:void 0,static:!0}),yH=ut.define(),bH=ut.define(),DH=ut.define(),wH=ut.define({combine:r=>r.length?r[0]:!1}),zo=class{constructor(t,e){this.type=t,this.value=e}static define(){return new VO}},VO=class{of(t){return new zo(this,t)}},jO=class{constructor(t){this.map=t}of(t){return new zt(this,t)}},zt=class r{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new r(this.type,e)}is(t){return this.type==t}static define(t={}){return new jO(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let o of t){let a=o.map(e);a&&n.push(a)}return n}};zt.reconfigure=zt.define();zt.appendConfig=zt.define();var Yr=class r{constructor(t,e,n,o,a,i){this.startState=t,this.changes=e,this.selection=n,this.effects=o,this.annotations=a,this.scrollIntoView=i,this._doc=null,this._state=null,n&&vH(n,e.newLength),a.some(u=>u.type==r.time)||(this.annotations=a.concat(r.time.of(Date.now())))}static create(t,e,n,o,a,i){return new r(t,e,n,o,a,i)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(r.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}};Yr.time=zo.define();Yr.userEvent=zo.define();Yr.addToHistory=zo.define();Yr.remote=zo.define();function Pvt(r,t){let e=[];for(let n=0,o=0;;){let a,i;if(n<r.length&&(o==t.length||t[o]>=r[n]))a=r[n++],i=r[n++];else if(o<t.length)a=t[o++],i=t[o++];else return e;!e.length||e[e.length-1]<a?e.push(a,i):e[e.length-1]<i&&(e[e.length-1]=i)}}function xH(r,t,e){var n;let o,a,i;return e?(o=t.changes,a=go.empty(t.changes.length),i=r.changes.compose(t.changes)):(o=t.changes.map(r.changes),a=r.changes.mapDesc(t.changes,!0),i=r.changes.compose(o)),{changes:i,selection:t.selection?t.selection.map(a):(n=r.selection)===null||n===void 0?void 0:n.map(o),effects:zt.mapEffects(r.effects,o).concat(zt.mapEffects(t.effects,a)),annotations:r.annotations.length?r.annotations.concat(t.annotations):t.annotations,scrollIntoView:r.scrollIntoView||t.scrollIntoView}}function ZO(r,t,e){let n=t.selection,o=jd(t.annotations);return t.userEvent&&(o=o.concat(Yr.userEvent.of(t.userEvent))),{changes:t.changes instanceof go?t.changes:go.of(t.changes||[],e,r.facet(_H)),selection:n&&(n instanceof L?n:L.single(n.anchor,n.head)),effects:jd(t.effects),annotations:o,scrollIntoView:!!t.scrollIntoView}}function TH(r,t,e){let n=ZO(r,t.length?t[0]:{},r.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let a=1;a<t.length;a++){t[a].filter===!1&&(e=!1);let i=!!t[a].sequential;n=xH(n,ZO(r,t[a],i?n.changes.newLength:r.doc.length),i)}let o=Yr.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Nvt(e?Ivt(o):o)}function Ivt(r){let t=r.startState,e=!0;for(let o of t.facet(yH)){let a=o(r);if(a===!1){e=!1;break}Array.isArray(a)&&(e=e===!0?a:Pvt(e,a))}if(e!==!0){let o,a;if(e===!1)a=r.changes.invertedDesc,o=go.empty(t.doc.length);else{let i=r.changes.filter(e);o=i.changes,a=i.filtered.mapDesc(i.changes).invertedDesc}r=Yr.create(t,o,r.selection&&r.selection.map(a),zt.mapEffects(r.effects,a),r.annotations,r.scrollIntoView)}let n=t.facet(bH);for(let o=n.length-1;o>=0;o--){let a=n[o](r);a instanceof Yr?r=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Yr?r=a[0]:r=TH(t,jd(a),!1)}return r}function Nvt(r){let t=r.startState,e=t.facet(DH),n=r;for(let o=e.length-1;o>=0;o--){let a=e[o](r);a&&Object.keys(a).length&&(n=xH(n,ZO(t,a,r.changes.newLength),!0))}return n==r?r:Yr.create(t,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}var kvt=[];function jd(r){return r==null?kvt:Array.isArray(r)?r:[r]}var Xe=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Xe||(Xe={})),$vt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,YO;try{YO=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Lvt(r){if(YO)return YO.test(r);for(let t=0;t<r.length;t++){let e=r[t];if(/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||$vt.test(e)))return!0}return!1}function Uvt(r){return t=>{if(!/\S/.test(t))return Xe.Space;if(Lvt(t))return Xe.Word;for(let e=0;e<r.length;e++)if(t.indexOf(r[e])>-1)return Xe.Word;return Xe.Other}}var He=class r{constructor(t,e,n,o,a,i){this.config=t,this.doc=e,this.selection=n,this.values=o,this.status=t.statusTemplate.slice(),this.computeSlot=a,i&&(i._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)Wv(this,u<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(n==null){if(e)throw new RangeError("Field is not present in this state");return}return Wv(this,n),Sb(this,n)}update(...t){return TH(this,t,!0)}applyTransaction(t){let e=this.config,{base:n,compartments:o}=e;for(let u of t.effects)u.is(Sc.reconfigure)?(e&&(o=new Map,e.compartments.forEach((l,s)=>o.set(s,l)),e=null),o.set(u.value.compartment,u.value.extension)):u.is(zt.reconfigure)?(e=null,n=u.value):u.is(zt.appendConfig)&&(e=null,n=jd(n).concat(u.value));let a;e?a=t.startState.values.slice():(e=Cb.resolve(n,o,this),a=new r(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(l,s)=>s.reconfigure(l,this),null).values);let i=t.startState.facet(HO)?t.newSelection:t.newSelection.asSingle();new r(e,t.newDoc,i,a,(u,l)=>l.update(u,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:L.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),o=this.changes(n.changes),a=[n.range],i=jd(n.effects);for(let u=1;u<e.ranges.length;u++){let l=t(e.ranges[u]),s=this.changes(l.changes),c=s.map(o);for(let d=0;d<u;d++)a[d]=a[d].map(c);let f=o.mapDesc(s,!0);a.push(l.range.map(f)),o=o.compose(c),i=zt.mapEffects(i,c).concat(zt.mapEffects(jd(l.effects),f))}return{changes:o,selection:L.create(a,e.mainIndex),effects:i}}changes(t=[]){return t instanceof go?t:go.of(t,this.doc.length,this.facet(r.lineSeparator))}toText(t){return xe.of(t.split(this.facet(r.lineSeparator)||GO))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(Wv(this,e),Sb(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let o=t[n];o instanceof gr&&this.config.address[o.id]!=null&&(e[n]=o.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(t,a)){let i=n[a],u=t[a];o.push(i.init(l=>i.spec.fromJSON(u,l)))}}return r.create({doc:t.doc,selection:L.fromJSON(t.selection),extensions:e.extensions?o.concat([e.extensions]):o})}static create(t={}){let e=Cb.resolve(t.extensions||[],new Map),n=t.doc instanceof xe?t.doc:xe.of((t.doc||"").split(e.staticFacet(r.lineSeparator)||GO)),o=t.selection?t.selection instanceof L?t.selection:L.single(t.selection.anchor,t.selection.head):L.single(0);return vH(o,n.length),e.staticFacet(HO)||(o=o.asSingle()),new r(e,n,o,e.dynamicSlots.map(()=>null),(a,i)=>i.create(a),null)}get tabSize(){return this.facet(r.tabSize)}get lineBreak(){return this.facet(r.lineSeparator)||`
`}get readOnly(){return this.facet(wH)}phrase(t,...e){for(let n of this.facet(r.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(n,o)=>{if(o=="$")return"$";let a=+(o||1);return!a||a>e.length?n:e[a-1]})),t}languageDataAt(t,e,n=-1){let o=[];for(let a of this.facet(gH))for(let i of a(this,e,n))Object.prototype.hasOwnProperty.call(i,t)&&o.push(i[t]);return o}charCategorizer(t){return Uvt(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:n,length:o}=this.doc.lineAt(t),a=this.charCategorizer(t),i=t-n,u=t-n;for(;i>0;){let l=Xr(e,i,!1);if(a(e.slice(l,i))!=Xe.Word)break;i=l}for(;u<o;){let l=Xr(e,u);if(a(e.slice(u,l))!=Xe.Word)break;u=l}return i==u?null:L.range(i+n,u+n)}};He.allowMultipleSelections=HO;He.tabSize=ut.define({combine:r=>r.length?r[0]:4});He.lineSeparator=_H;He.readOnly=wH;He.phrases=ut.define({compare(r,t){let e=Object.keys(r),n=Object.keys(t);return e.length==n.length&&e.every(o=>r[o]==t[o])}});He.languageData=gH;He.changeFilter=yH;He.transactionFilter=bH;He.transactionExtender=DH;Sc.reconfigure=zt.define();function Jn(r,t,e={}){let n={};for(let o of r)for(let a of Object.keys(o)){let i=o[a],u=n[a];if(u===void 0)n[a]=i;else if(!(u===i||i===void 0))if(Object.hasOwnProperty.call(e,a))n[a]=e[a](u,i);else throw new Error("Config merge conflict for field "+a)}for(let o in t)n[o]===void 0&&(n[o]=t[o]);return n}var gi=class{eq(t){return this==t}range(t,e=t){return zv.create(t,e,this)}};gi.prototype.startSide=gi.prototype.endSide=0;gi.prototype.point=!1;gi.prototype.mapMode=ln.TrackDel;var zv=class r{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new r(t,e,n)}};function XO(r,t){return r.from-t.from||r.value.startSide-t.value.startSide}var JO=class r{constructor(t,e,n,o){this.from=t,this.to=e,this.value=n,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,o=0){let a=n?this.to:this.from;for(let i=o,u=a.length;;){if(i==u)return i;let l=i+u>>1,s=a[l]-t||(n?this.value[l].endSide:this.value[l].startSide)-e;if(l==i)return s>=0?i:u;s>=0?u=l:i=l+1}}between(t,e,n,o){for(let a=this.findIndex(e,-1e9,!0),i=this.findIndex(n,1e9,!1,a);a<i;a++)if(o(this.from[a]+t,this.to[a]+t,this.value[a])===!1)return!1}map(t,e){let n=[],o=[],a=[],i=-1,u=-1;for(let l=0;l<this.value.length;l++){let s=this.value[l],c=this.from[l]+t,f=this.to[l]+t,d,p;if(c==f){let h=e.mapPos(c,s.startSide,s.mapMode);if(h==null||(d=p=h,s.startSide!=s.endSide&&(p=e.mapPos(c,s.endSide),p<d)))continue}else if(d=e.mapPos(c,s.startSide),p=e.mapPos(f,s.endSide),d>p||d==p&&s.startSide>0&&s.endSide<=0)continue;(p-d||s.endSide-s.startSide)<0||(i<0&&(i=d),s.point&&(u=Math.max(u,p-d)),n.push(s),o.push(d-i),a.push(p-i))}return{mapped:n.length?new r(o,a,n,u):null,pos:i}}},We=class r{constructor(t,e,n,o){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=o}static create(t,e,n,o){return new r(t,e,n,o)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:o=0,filterTo:a=this.length}=t,i=t.filter;if(e.length==0&&!i)return this;if(n&&(e=e.slice().sort(XO)),this.isEmpty)return e.length?r.of(e):this;let u=new Ob(this,null,-1).goto(0),l=0,s=[],c=new _i;for(;u.value||l<e.length;)if(l<e.length&&(u.from-e[l].from||u.startSide-e[l].value.startSide)>=0){let f=e[l++];c.addInner(f.from,f.to,f.value)||s.push(f)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(l==e.length||this.chunkEnd(u.chunkIndex)<e[l].from)&&(!i||o>this.chunkEnd(u.chunkIndex)||a<this.chunkPos[u.chunkIndex])&&c.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!i||o>u.to||a<u.from||i(u.from,u.to,u.value))&&(c.addInner(u.from,u.to,u.value)||s.push(zv.create(u.from,u.to,u.value))),u.next());return c.finishInner(this.nextLayer.isEmpty&&!s.length?r.empty:this.nextLayer.update({add:s,filter:i,filterFrom:o,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],o=-1;for(let i=0;i<this.chunk.length;i++){let u=this.chunkPos[i],l=this.chunk[i],s=t.touchesRange(u,u+l.length);if(s===!1)o=Math.max(o,l.maxPoint),e.push(l),n.push(t.mapPos(u));else if(s===!0){let{mapped:c,pos:f}=l.map(u,t);c&&(o=Math.max(o,c.maxPoint),e.push(c),n.push(f))}}let a=this.nextLayer.map(t);return e.length==0?a:new r(n,e,a||r.empty,o)}between(t,e,n){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],i=this.chunk[o];if(e>=a&&t<=a+i.length&&i.between(a,t-a,e-a,n)===!1)return}this.nextLayer.between(t,e,n)}}iter(t=0){return qv.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return qv.from(t).goto(e)}static compare(t,e,n,o,a=-1){let i=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),u=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),l=sH(i,u,n),s=new Tc(i,l,a),c=new Tc(u,l,a);n.iterGaps((f,d,p)=>cH(s,f,c,d,p,o)),n.empty&&n.length==0&&cH(s,0,c,0,0,o)}static eq(t,e,n=0,o){o==null&&(o=999999999);let a=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0),i=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0);if(a.length!=i.length)return!1;if(!a.length)return!0;let u=sH(a,i),l=new Tc(a,u,0).goto(n),s=new Tc(i,u,0).goto(n);for(;;){if(l.to!=s.to||!KO(l.active,s.active)||l.point&&(!s.point||!l.point.eq(s.point)))return!1;if(l.to>o)return!0;l.next(),s.next()}}static spans(t,e,n,o,a=-1){let i=new Tc(t,null,a).goto(e),u=e,l=i.openStart;for(;;){let s=Math.min(i.to,n);if(i.point){let c=i.activeForPoint(i.to),f=i.pointFrom<e?c.length+1:i.point.startSide<0?c.length:Math.min(c.length,l);o.point(u,s,i.point,c,f,i.pointRank),l=Math.min(i.openEnd(s),c.length)}else s>u&&(o.span(u,s,i.active,l),l=i.openEnd(s));if(i.to>n)return l+(i.point&&i.to>n?1:0);u=i.to,i.next()}}static of(t,e=!1){let n=new _i;for(let o of t instanceof zv?[t]:e?Bvt(t):t)n.add(o.from,o.to,o.value);return n.finish()}static join(t){if(!t.length)return r.empty;let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let o=t[n];o!=r.empty;o=o.nextLayer)e=new r(o.chunkPos,o.chunk,e,Math.max(o.maxPoint,e.maxPoint));return e}};We.empty=new We([],[],null,-1);function Bvt(r){if(r.length>1)for(let t=r[0],e=1;e<r.length;e++){let n=r[e];if(XO(t,n)>0)return r.slice().sort(XO);t=n}return r}We.empty.nextLayer=We.empty;var _i=class r{finishChunk(t){this.chunks.push(new JO(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new r)).add(t,e,n)}addInner(t,e,n){let o=t-this.lastTo||n.startSide-this.last.endSide;if(o<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(We.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=We.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}};function sH(r,t,e){let n=new Map;for(let a of r)for(let i=0;i<a.chunk.length;i++)a.chunk[i].maxPoint<=0&&n.set(a.chunk[i],a.chunkPos[i]);let o=new Set;for(let a of t)for(let i=0;i<a.chunk.length;i++){let u=n.get(a.chunk[i]);u!=null&&(e?e.mapPos(u):u)==a.chunkPos[i]&&!e?.touchesRange(u,u+a.chunk[i].length)&&o.add(a.chunk[i])}return o}var Ob=class{constructor(t,e,n,o=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<t||o.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}},qv=class r{constructor(t){this.heap=t}static from(t,e=null,n=-1){let o=[];for(let a=0;a<t.length;a++)for(let i=t[a];!i.isEmpty;i=i.nextLayer)i.maxPoint>=n&&o.push(new Ob(i,e,n,a));return o.length==1?o[0]:new r(o)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let n=this.heap.length>>1;n>=0;n--)BO(this.heap,n);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let n=this.heap.length>>1;n>=0;n--)BO(this.heap,n);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),BO(this.heap,0)}}};function BO(r,t){for(let e=r[t];;){let n=(t<<1)+1;if(n>=r.length)break;let o=r[n];if(n+1<r.length&&o.compare(r[n+1])>=0&&(o=r[n+1],n++),e.compare(o)<0)break;r[n]=e,r[t]=o,t=n}}var Tc=class{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=qv.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){bb(this.active,t),bb(this.activeTo,t),bb(this.activeRank,t),this.minActive=fH(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:o,rank:a}=this.cursor;for(;e<this.activeRank.length&&(a-this.activeRank[e]||o-this.activeTo[e])>0;)e++;Db(this.active,e,n),Db(this.activeTo,e,o),Db(this.activeRank,e,a),t&&Db(t,e,this.cursor.from),this.minActive=fH(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&bb(n,o)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let o=n.length-1;o>=0&&n[o]<t;o--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}};function cH(r,t,e,n,o,a){r.goto(t),e.goto(n);let i=n+o,u=n,l=n-t;for(;;){let s=r.to+l-e.to||r.endSide-e.endSide,c=s<0?r.to+l:e.to,f=Math.min(c,i);if(r.point||e.point?r.point&&e.point&&(r.point==e.point||r.point.eq(e.point))&&KO(r.activeForPoint(r.to),e.activeForPoint(e.to))||a.comparePoint(u,f,r.point,e.point):f>u&&!KO(r.active,e.active)&&a.compareRange(u,f,r.active,e.active),c>i)break;u=c,s<=0&&r.next(),s>=0&&e.next()}}function KO(r,t){if(r.length!=t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!=t[e]&&!r[e].eq(t[e]))return!1;return!0}function bb(r,t){for(let e=t,n=r.length-1;e<n;e++)r[e]=r[e+1];r.pop()}function Db(r,t,e){for(let n=r.length-1;n>=t;n--)r[n+1]=r[n];r[t]=e}function fH(r,t){let e=-1,n=1e9;for(let o=0;o<t.length;o++)(t[o]-n||r[o].endSide-r[e].endSide)<0&&(e=o,n=t[o]);return e}function zu(r,t,e=r.length){let n=0;for(let o=0;o<e;)r.charCodeAt(o)==9?(n+=t-n%t,o++):(n++,o=Xr(r,o));return n}function Eb(r,t,e,n){for(let o=0,a=0;;){if(a>=t)return o;if(o==r.length)break;a+=r.charCodeAt(o)==9?e-a%e:1,o=Xr(r,o)}return n===!0?-1:r.length}var rE="\u037C",RH=typeof Symbol>"u"?"__"+rE:Symbol.for(rE),nE=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),CH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},Ga=class{constructor(t,e){this.rules=[];let{finish:n}=e||{};function o(i){return/^@/.test(i)?[i]:i.split(/,\s*/)}function a(i,u,l,s){let c=[],f=/^@(\w+)\b/.exec(i[0]),d=f&&f[1]=="keyframes";if(f&&u==null)return l.push(i[0]+";");for(let p in u){let h=u[p];if(/&/.test(p))a(p.split(/,\s*/).map(m=>i.map(_=>m.replace(/&/,_))).reduce((m,_)=>m.concat(_)),h,l);else if(h&&typeof h=="object"){if(!f)throw new RangeError("The value of a property ("+p+") should be a primitive value.");a(o(p),h,c,d)}else h!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+h+";")}(c.length||d)&&l.push((n&&!f&&!s?i.map(n):i).join(", ")+" {"+c.join(" ")+"}")}for(let i in t)a(o(i),t[i],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=CH[RH]||1;return CH[RH]=t+1,rE+t.toString(36)}static mount(t,e,n){let o=t[nE],a=n&&n.nonce;o?a&&o.setNonce(a):o=new oE(t,a),o.mount(Array.isArray(e)?e:[e],t)}},SH=new Map,oE=class{constructor(t,e){let n=t.ownerDocument||t,o=n.defaultView;if(!t.head&&t.adoptedStyleSheets&&o.CSSStyleSheet){let a=SH.get(n);if(a)return t[nE]=a;this.sheet=new o.CSSStyleSheet,SH.set(n,this)}else this.styleTag=n.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[nE]=this}mount(t,e){let n=this.sheet,o=0,a=0;for(let i=0;i<t.length;i++){let u=t[i],l=this.modules.indexOf(u);if(l<a&&l>-1&&(this.modules.splice(l,1),a--,l=-1),l==-1){if(this.modules.splice(a++,0,u),n)for(let s=0;s<u.rules.length;s++)n.insertRule(u.rules[s],o++)}else{for(;a<l;)o+=this.modules[a++].rules.length;o+=u.rules.length,a++}}if(n)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let i="";for(let l=0;l<this.modules.length;l++)i+=this.modules[l].getRules()+`
`;this.styleTag.textContent=i;let u=e.head||e;this.styleTag.parentNode!=u&&u.insertBefore(this.styleTag,u.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}};var qu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Wvt=typeof navigator<"u"&&/Mac/.test(navigator.platform),Gvt=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Jr=0;Jr<10;Jr++)qu[48+Jr]=qu[96+Jr]=String(Jr);var Jr;for(Jr=1;Jr<=24;Jr++)qu[Jr+111]="F"+Jr;var Jr;for(Jr=65;Jr<=90;Jr++)qu[Jr]=String.fromCharCode(Jr+32),Yd[Jr]=String.fromCharCode(Jr);var Jr;for(Fb in qu)Yd.hasOwnProperty(Fb)||(Yd[Fb]=qu[Fb]);var Fb;function OH(r){var t=Wvt&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||Gvt&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",e=!t&&r.key||(r.shiftKey?Yd:qu)[r.keyCode]||r.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function ag(r){let t;return r.nodeType==11?t=r.getSelection?r:r.ownerDocument:t=r,t.getSelection()}function dE(r,t){return t?r==t||r.contains(t.nodeType!=1?t.parentNode:t):!1}function Bb(r,t){if(!t.anchorNode)return!1;try{return dE(r,t.anchorNode)}catch{return!1}}function ig(r){return r.nodeType==3?Fc(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Jv(r,t,e,n){return e?EH(r,t,e,n,-1)||EH(r,t,e,n,1):!1}function Ec(r){for(var t=0;;t++)if(r=r.previousSibling,!r)return t}function Hb(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function EH(r,t,e,n,o){for(;;){if(r==e&&t==n)return!0;if(t==(o<0?0:Ji(r))){if(r.nodeName=="DIV")return!1;let a=r.parentNode;if(!a||a.nodeType!=1)return!1;t=Ec(r)+(o<0?0:1),r=a}else if(r.nodeType==1){if(r=r.childNodes[t+(o<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;t=o<0?Ji(r):0}else return!1}}function Ji(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function uD(r,t){let e=t?r.left:r.right;return{left:e,right:e,top:r.top,bottom:r.bottom}}function zvt(r){let t=r.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function vV(r,t){let e=t.width/r.offsetWidth,n=t.height/r.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-r.offsetWidth)<1)&&(e=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.height-r.offsetHeight)<1)&&(n=1),{scaleX:e,scaleY:n}}function qvt(r,t,e,n,o,a,i,u){let l=r.ownerDocument,s=l.defaultView||window;for(let c=r,f=!1;c&&!f;)if(c.nodeType==1){let d,p=c==l.body,h=1,m=1;if(p)d=zvt(s);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let D=c.getBoundingClientRect();({scaleX:h,scaleY:m}=vV(c,D)),d={left:D.left,right:D.left+c.clientWidth*h,top:D.top,bottom:D.top+c.clientHeight*m}}let _=0,y=0;if(o=="nearest")t.top<d.top?(y=-(d.top-t.top+i),e>0&&t.bottom>d.bottom+y&&(y=t.bottom-d.bottom+y+i)):t.bottom>d.bottom&&(y=t.bottom-d.bottom+i,e<0&&t.top-y<d.top&&(y=-(d.top+y-t.top+i)));else{let D=t.bottom-t.top,w=d.bottom-d.top;y=(o=="center"&&D<=w?t.top+D/2-w/2:o=="start"||o=="center"&&e<0?t.top-i:t.bottom-w+i)-d.top}if(n=="nearest"?t.left<d.left?(_=-(d.left-t.left+a),e>0&&t.right>d.right+_&&(_=t.right-d.right+_+a)):t.right>d.right&&(_=t.right-d.right+a,e<0&&t.left<d.left+_&&(_=-(d.left+_-t.left+a))):_=(n=="center"?t.left+(t.right-t.left)/2-(d.right-d.left)/2:n=="start"==u?t.left-a:t.right-(d.right-d.left)+a)-d.left,_||y)if(p)s.scrollBy(_,y);else{let D=0,w=0;if(y){let T=c.scrollTop;c.scrollTop+=y/m,w=(c.scrollTop-T)*m}if(_){let T=c.scrollLeft;c.scrollLeft+=_/h,D=(c.scrollLeft-T)*h}t={left:t.left-D,top:t.top-w,right:t.right-D,bottom:t.bottom-w},D&&Math.abs(D-_)<1&&(n="nearest"),w&&Math.abs(w-y)<1&&(o="nearest")}if(p)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Qvt(r){let t=r.ownerDocument,e,n;for(let o=r.parentNode;o&&!(o==t.body||e&&n);)if(o.nodeType==1)!n&&o.scrollHeight>o.clientHeight&&(n=o),!e&&o.scrollWidth>o.clientWidth&&(e=o),o=o.assignedSlot||o.parentNode;else if(o.nodeType==11)o=o.host;else break;return{x:e,y:n}}var pE=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?Ji(e):0),n,Math.min(t.focusOffset,n?Ji(n):0))}set(t,e,n,o){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=o}},Xd=null;function gV(r){if(r.setActive)return r.setActive();if(Xd)return r.focus(Xd);let t=[];for(let e=r;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(r.focus(Xd==null?{get preventScroll(){return Xd={preventScroll:!0},!0}}:void 0),!Xd){Xd=!1;for(let e=0;e<t.length;){let n=t[e++],o=t[e++],a=t[e++];n.scrollTop!=o&&(n.scrollTop=o),n.scrollLeft!=a&&(n.scrollLeft=a)}}}var FH;function Fc(r,t,e=t){let n=FH||(FH=document.createRange());return n.setEnd(r,e),n.setStart(r,t),n}function ep(r,t,e,n){let o={key:t,code:t,keyCode:e,which:e,cancelable:!0};n&&({altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,metaKey:o.metaKey}=n);let a=new KeyboardEvent("keydown",o);a.synthetic=!0,r.dispatchEvent(a);let i=new KeyboardEvent("keyup",o);return i.synthetic=!0,r.dispatchEvent(i),a.defaultPrevented||i.defaultPrevented}function Hvt(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function _V(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function Vvt(r,t){let e=t.focusNode,n=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=n)return!1;for(n=Math.min(n,Ji(e));;)if(n){if(e.nodeType!=1)return!1;let o=e.childNodes[n-1];o.contentEditable=="false"?n--:(e=o,n=Ji(e))}else{if(e==r)return!0;n=Ec(e),e=e.parentNode}}function yV(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function bV(r,t){for(let e=r,n=t;;){if(e.nodeType==3&&n>0)return{node:e,offset:n};if(e.nodeType==1&&n>0){if(e.contentEditable=="false")return null;e=e.childNodes[n-1],n=Ji(e)}else if(e.parentNode&&!Hb(e))n=Ec(e),e=e.parentNode;else return null}}function DV(r,t){for(let e=r,n=t;;){if(e.nodeType==3&&n<e.nodeValue.length)return{node:e,offset:n};if(e.nodeType==1&&n<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[n],n=0}else if(e.parentNode&&!Hb(e))n=Ec(e)+1,e=e.parentNode;else return null}}var _o=class r{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new r(t.parentNode,Ec(t),e)}static after(t,e){return new r(t.parentNode,Ec(t)+1,e)}},eF=[],sr=class r{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(this.flags&2){let n=this.dom,o=null,a;for(let i of this.children){if(i.flags&7){if(!i.dom&&(a=o?o.nextSibling:n.firstChild)){let u=r.get(a);(!u||!u.parent&&u.canReuseDOM(i))&&i.reuseDOM(a)}i.sync(t,e),i.flags&=-8}if(a=o?o.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&a!=i.dom&&(e.written=!0),i.dom.parentNode==n)for(;a&&a!=i.dom;)a=MH(a);else n.insertBefore(i.dom,a);o=i.dom}for(a=o?o.nextSibling:n.firstChild,a&&e&&e.node==n&&(e.written=!0);a;)a=MH(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let o=Ji(t)==0?0:e==0?-1:1;for(;;){let a=t.parentNode;if(a==this.dom)break;o==0&&a.firstChild!=a.lastChild&&(t==a.firstChild?o=-1:o=1),t=a}o<0?n=t:n=t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!r.get(n);)n=n.nextSibling;if(!n)return this.length;for(let o=0,a=0;;o++){let i=this.children[o];if(i.dom==n)return a;a+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let o=-1,a=-1,i=-1,u=-1;for(let l=0,s=n,c=n;l<this.children.length;l++){let f=this.children[l],d=s+f.length;if(s<t&&d>e)return f.domBoundsAround(t,e,s);if(d>=t&&o==-1&&(o=l,a=s),s>e&&f.dom.parentNode==this.dom){i=l,u=c;break}c=d,s=d+f.breakAfter}return{from:a,to:u<0?n+this.length:u,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:i<this.children.length&&i>=0?this.children[i].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),e.flags&1)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.flags&7&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=eF){this.markDirty();for(let o=t;o<e;o++){let a=this.children[o];a.parent==this&&n.indexOf(a)<0&&a.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let o=0;o<n.length;o++)n[o].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Vb(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,o,a,i){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!((this.flags|t.flags)&8)}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}};sr.prototype.breakAfter=0;function MH(r){let t=r.nextSibling;return r.parentNode.removeChild(r),t}var Vb=class{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}};function wV(r,t,e,n,o,a,i,u,l){let{children:s}=r,c=s.length?s[t]:null,f=a.length?a[a.length-1]:null,d=f?f.breakAfter:i;if(!(t==n&&c&&!i&&!d&&a.length<2&&c.merge(e,o,a.length?f:null,e==0,u,l))){if(n<s.length){let p=s[n];p&&(o<p.length||p.breakAfter&&f?.breakAfter)?(t==n&&(p=p.split(o),o=0),!d&&f&&p.merge(0,o,f,!0,0,l)?a[a.length-1]=p:((o||p.children.length&&!p.children[0].length)&&p.merge(0,o,null,!1,0,l),a.push(p))):p?.breakAfter&&(f?f.breakAfter=1:i=1),n++}for(c&&(c.breakAfter=i,e>0&&(!i&&a.length&&c.merge(e,c.length,a[0],!1,u,0)?c.breakAfter=a.shift().breakAfter:(e<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(e,c.length,null,!1,u,0),t++));t<n&&a.length;)if(s[n-1].become(a[a.length-1]))n--,a.pop(),l=a.length?0:u;else if(s[t].become(a[0]))t++,a.shift(),u=a.length?0:l;else break;!a.length&&t&&n<s.length&&!s[t-1].breakAfter&&s[n].merge(0,0,s[t-1],!1,u,l)&&t--,(t<n||a.length)&&r.replaceChildren(t,n,a)}}function xV(r,t,e,n,o,a){let i=r.childCursor(),{i:u,off:l}=i.findPos(e,1),{i:s,off:c}=i.findPos(t,-1),f=t-e;for(let d of n)f+=d.length;r.length+=f,wV(r,s,c,u,l,n,0,o,a)}var qo=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},hE=typeof document<"u"?document:{documentElement:{style:{}}},mE=/Edge\/(\d+)/.exec(qo.userAgent),TV=/MSIE \d/.test(qo.userAgent),vE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qo.userAgent),lD=!!(TV||vE||mE),AH=!lD&&/gecko\/(\d+)/i.test(qo.userAgent),aE=!lD&&/Chrome\/(\d+)/.exec(qo.userAgent),PH="webkitFontSmoothing"in hE.documentElement.style,RV=!lD&&/Apple Computer/.test(qo.vendor),IH=RV&&(/Mobile\/\w+/.test(qo.userAgent)||qo.maxTouchPoints>2),mt={mac:IH||/Mac/.test(qo.platform),windows:/Win/.test(qo.platform),linux:/Linux|X11/.test(qo.platform),ie:lD,ie_version:TV?hE.documentMode||6:vE?+vE[1]:mE?+mE[1]:0,gecko:AH,gecko_version:AH?+(/Firefox\/(\d+)/.exec(qo.userAgent)||[0,0])[1]:0,chrome:!!aE,chrome_version:aE?+aE[1]:0,ios:IH,android:/Android\b/.test(qo.userAgent),webkit:PH,safari:RV,webkit_version:PH?+(/\bAppleWebKit\/(\d+)/.exec(qo.userAgent)||[0,0])[1]:0,tabSize:hE.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},jvt=256,Ki=class r extends sr{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,e,n){return this.flags&8||n&&(!(n instanceof r)||this.length-(e-t)+n.length>jvt||n.flags&8)?!1:(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new r(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=this.flags&8,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new _o(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return Zvt(this.dom,t,e)}},Yl=class r extends sr{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let o of e)o.setParent(this)}setAttrs(t){if(_V(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!((this.flags|t.flags)&8)}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,o,a,i){return n&&(!(n instanceof r&&n.mark.eq(this.mark))||t&&a<=0||e<this.length&&i<=0)?!1:(xV(this,t,e,n?n.children.slice():[],a-1,i-1),this.markDirty(),!0)}split(t){let e=[],n=0,o=-1,a=0;for(let u of this.children){let l=n+u.length;l>t&&e.push(n<t?u.split(t-n):u),o<0&&n>=t&&(o=a),n=l,a++}let i=this.length-t;return this.length=t,o>-1&&(this.children.length=o,this.markDirty()),new r(this.mark,e,i)}domAtPos(t){return CV(this,t)}coordsAt(t,e){return OV(this,t,e)}};function Zvt(r,t,e){let n=r.nodeValue.length;t>n&&(t=n);let o=t,a=t,i=0;t==0&&e<0||t==n&&e>=0?mt.chrome||mt.gecko||(t?(o--,i=1):a<n&&(a++,i=-1)):e<0?o--:a<n&&a++;let u=Fc(r,o,a).getClientRects();if(!u.length)return null;let l=u[(i?i<0:e>=0)?0:u.length-1];return mt.safari&&!i&&l.width==0&&(l=Array.prototype.find.call(u,s=>s.width)||l),i?uD(l,i<0):l||null}var ug=class r extends sr{static create(t,e,n){return new r(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=r.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,o,a,i){return n&&(!(n instanceof r)||!this.widget.compare(n.widget)||t>0&&a<=0||e<this.length&&i<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-e),!0)}become(t){return t instanceof r&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return xe.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,o=this.posAtStart;return n?n.slice(o,o+this.length):xe.empty}domAtPos(t){return(this.length?t==0:this.side>0)?_o.before(this.dom):_o.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let i=this.side?this.side<0:t>0;for(let u=i?o.length-1:0;a=o[u],!(t>0?u==0:u==o.length-1||a.top<a.bottom);u+=i?-1:1);return uD(a,!i)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},lg=class r extends sr{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof r&&t.side==this.side}split(){return new r(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?_o.before(this.dom):_o.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return xe.empty}get isHidden(){return!0}};Ki.prototype.children=ug.prototype.children=lg.prototype.children=eF;function CV(r,t){let e=r.dom,{children:n}=r,o=0;for(let a=0;o<n.length;o++){let i=n[o],u=a+i.length;if(!(u==a&&i.getSide()<=0)){if(t>a&&t<u&&i.dom.parentNode==e)return i.domAtPos(t-a);if(t<=a)break;a=u}}for(let a=o;a>0;a--){let i=n[a-1];if(i.dom.parentNode==e)return i.domAtPos(i.length)}for(let a=o;a<n.length;a++){let i=n[a];if(i.dom.parentNode==e)return i.domAtPos(0)}return new _o(e,0)}function SV(r,t,e){let n,{children:o}=r;e>0&&t instanceof Yl&&o.length&&(n=o[o.length-1])instanceof Yl&&n.mark.eq(t.mark)?SV(n,t.children[0],e-1):(o.push(t),t.setParent(r)),r.length+=t.length}function OV(r,t,e){let n=null,o=-1,a=null,i=-1;function u(s,c){for(let f=0,d=0;f<s.children.length&&d<=c;f++){let p=s.children[f],h=d+p.length;h>=c&&(p.children.length?u(p,c-d):(!a||a.isHidden&&e>0)&&(h>c||d==h&&p.getSide()>0)?(a=p,i=c-d):(d<c||d==h&&p.getSide()<0&&!p.isHidden)&&(n=p,o=c-d)),d=h}}u(r,t);let l=(e<0?n:a)||n||a;return l?l.coordsAt(Math.max(0,l==n?o:i),e):Yvt(r)}function Yvt(r){let t=r.dom.lastChild;if(!t)return r.dom.getBoundingClientRect();let e=ig(t);return e[e.length-1]||null}function gE(r,t){for(let e in r)e=="class"&&t.class?t.class+=" "+r.class:e=="style"&&t.style?t.style+=";"+r.style:t[e]=r[e];return t}var NH=Object.create(null);function jb(r,t,e){if(r==t)return!0;r||(r=NH),t||(t=NH);let n=Object.keys(r),o=Object.keys(t);if(n.length-(e&&n.indexOf(e)>-1?1:0)!=o.length-(e&&o.indexOf(e)>-1?1:0))return!1;for(let a of n)if(a!=e&&(o.indexOf(a)==-1||r[a]!==t[a]))return!1;return!0}function _E(r,t,e){let n=!1;if(t)for(let o in t)e&&o in e||(n=!0,o=="style"?r.style.cssText="":r.removeAttribute(o));if(e)for(let o in e)t&&t[o]==e[o]||(n=!0,o=="style"?r.style.cssText=e[o]:r.setAttribute(o,e[o]));return n}function Xvt(r){let t=Object.create(null);for(let e=0;e<r.attributes.length;e++){let n=r.attributes[e];t[n.name]=n.value}return t}var Qo=class{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}},yo=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(yo||(yo={})),xt=class extends gi{constructor(t,e,n,o){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=o}get heightRelevant(){return!1}static mark(t){return new sg(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new Xl(t,e,e,n,t.widget||null,!1)}static replace(t){let e=!!t.block,n,o;if(t.isBlockGap)n=-5e8,o=4e8;else{let{start:a,end:i}=EV(t,e);n=(a?e?-3e8:-1:5e8)-1,o=(i?e?2e8:1:-6e8)+1}return new Xl(t,n,o,e,t.widget||null,!0)}static line(t){return new cg(t)}static set(t,e=!1){return We.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};xt.none=We.empty;var sg=class r extends xt{constructor(t){let{start:e,end:n}=EV(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof r&&this.tagName==t.tagName&&(this.class||((e=this.attrs)===null||e===void 0?void 0:e.class))==(t.class||((n=t.attrs)===null||n===void 0?void 0:n.class))&&jb(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}};sg.prototype.point=!1;var cg=class r extends xt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof r&&this.spec.class==t.spec.class&&jb(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}};cg.prototype.mapMode=ln.TrackBefore;cg.prototype.point=!0;var Xl=class r extends xt{constructor(t,e,n,o,a,i){super(e,n,a,t),this.block=o,this.isReplace=i,this.mapMode=o?e<=0?ln.TrackBefore:ln.TrackAfter:ln.TrackDel}get type(){return this.startSide!=this.endSide?yo.WidgetRange:this.startSide<=0?yo.WidgetBefore:yo.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof r&&Jvt(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}};Xl.prototype.point=!0;function EV(r,t=!1){let{inclusiveStart:e,inclusiveEnd:n}=r;return e==null&&(e=r.inclusive),n==null&&(n=r.inclusive),{start:e??t,end:n??t}}function Jvt(r,t){return r==t||!!(r&&t&&r.compare(t))}function yE(r,t,e,n=0){let o=e.length-1;o>=0&&e[o]+n>=r?e[o]=Math.max(e[o],t):e.push(r,t)}var Nn=class r extends sr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,o,a,i){if(n){if(!(n instanceof r))return!1;this.dom||n.transferDOM(this)}return o&&this.setDeco(n?n.attrs:null),xV(this,t,e,n?n.children.slice():[],a,i),!0}split(t){let e=new r;if(e.breakAfter=this.breakAfter,this.length==0)return e;let{i:n,off:o}=this.childPos(t);o&&(e.append(this.children[n].split(o),0),this.children[n].merge(o,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)e.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){jb(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){SV(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=gE(e,this.attrs||{})),n&&(this.attrs=gE({class:n},this.attrs||{}))}domAtPos(t){return CV(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?this.flags&4&&(_V(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(_E(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let o=this.dom.lastChild;for(;o&&sr.get(o)instanceof Yl;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((n=sr.get(o))===null||n===void 0?void 0:n.isEditable)==!1&&(!mt.ios||!this.children.some(a=>a instanceof Ki))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0,e;for(let n of this.children){if(!(n instanceof Ki)||/[^ -~]/.test(n.text))return null;let o=ig(n.dom);if(o.length!=1)return null;t+=o[0].width,e=o[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(t,e){let n=OV(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:o}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-o.lineHeight)<2&&o.textHeight<a){let i=(a-o.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof r&&this.children.length==0&&t.children.length==0&&jb(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,o=0;n<t.children.length;n++){let a=t.children[n],i=o+a.length;if(i>=e){if(a instanceof r)return a;if(i>e)break}o=i+a.breakAfter}return null}},Oc=class r extends sr{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,o,a,i){return n&&(!(n instanceof r)||!this.widget.compare(n.widget)||t>0&&a<=0||e<this.length&&i<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-e),!0)}domAtPos(t){return t==0?_o.before(this.dom):_o.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new r(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return eF}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):xe.empty}domBoundsAround(){return null}become(t){return t instanceof r&&t.widget.constructor==this.widget.constructor?(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);return n||(this.widget instanceof fg?null:uD(this.dom.getBoundingClientRect(),this.length?t==0:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e==n?!1:t<0?e<0:n>0}},fg=class extends Qo{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},Kv=class r{constructor(t,e,n,o){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof Oc&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nn),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Mb(new lg(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(t&&this.content.length&&this.content[this.content.length-1]instanceof Oc)&&this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:i,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=a,this.textOff=0}let o=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(Mb(new Ki(this.text.slice(this.textOff,this.textOff+o)),e),n),this.atCursorPos=!0,this.textOff+=o,t-=o,n=0}}span(t,e,n,o){this.buildText(e-t,n,o),this.pos=e,this.openStart<0&&(this.openStart=o)}point(t,e,n,o,a,i){if(this.disallowBlockEffectsFor[i]&&n instanceof Xl){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=e-t;if(n instanceof Xl)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Oc(n.widget||Jl.block,u,n));else{let l=ug.create(n.widget||Jl.inline,u,u?0:n.startSide),s=this.atCursorPos&&!l.isEditable&&a<=o.length&&(t<e||n.startSide>0),c=!l.isEditable&&(t<e||a>o.length||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!s&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),s&&(f.append(Mb(new lg(1),o),a),a=o.length+Math.max(0,a-o.length)),f.append(Mb(l,o),a),this.atCursorPos=c,this.pendingBuffer=c?t<e||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=a)}static build(t,e,n,o,a){let i=new r(t,e,n,a);return i.openEnd=We.spans(o,e,n,i),i.openStart<0&&(i.openStart=i.openEnd),i.finish(i.openEnd),i}};function Mb(r,t){for(let e of t)r=new Yl(e,[r],r.length);return r}var Jl=class extends Qo{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};Jl.inline=new Jl("span");Jl.block=new Jl("div");var Je=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Je||(Je={})),Mc=Je.LTR,rF=Je.RTL;function FV(r){let t=[];for(let e=0;e<r.length;e++)t.push(1<<+r[e]);return t}var Kvt=FV("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tgt=FV("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),bE=Object.create(null),ji=[];for(let r of["()","[]","{}"]){let t=r.charCodeAt(0),e=r.charCodeAt(1);bE[t]=e,bE[e]=-t}function MV(r){return r<=247?Kvt[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?tgt[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}var egt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,Yi=class{get dir(){return this.level%2?rF:Mc}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,o){let a=-1;for(let i=0;i<t.length;i++){let u=t[i];if(u.from<=e&&u.to>=e){if(u.level==n)return i;(a<0||(o!=0?o<0?u.from<e:u.to>e:t[a].level>u.level))&&(a=i)}}if(a<0)throw new RangeError("Index out of range");return a}};function AV(r,t){if(r.length!=t.length)return!1;for(let e=0;e<r.length;e++){let n=r[e],o=t[e];if(n.from!=o.from||n.to!=o.to||n.direction!=o.direction||!AV(n.inner,o.inner))return!1}return!0}var nr=[];function rgt(r,t,e,n,o){for(let a=0;a<=n.length;a++){let i=a?n[a-1].to:t,u=a<n.length?n[a].from:e,l=a?256:o;for(let s=i,c=l,f=l;s<u;s++){let d=MV(r.charCodeAt(s));d==512?d=c:d==8&&f==4&&(d=16),nr[s]=d==4?2:d,d&7&&(f=d),c=d}for(let s=i,c=l,f=l;s<u;s++){let d=nr[s];if(d==128)s<u-1&&c==nr[s+1]&&c&24?d=nr[s]=c:nr[s]=256;else if(d==64){let p=s+1;for(;p<u&&nr[p]==64;)p++;let h=s&&c==8||p<e&&nr[p]==8?f==1?1:8:256;for(let m=s;m<p;m++)nr[m]=h;s=p-1}else d==8&&f==1&&(nr[s]=1);c=d,d&7&&(f=d)}}}function ngt(r,t,e,n,o){let a=o==1?2:1;for(let i=0,u=0,l=0;i<=n.length;i++){let s=i?n[i-1].to:t,c=i<n.length?n[i].from:e;for(let f=s,d,p,h;f<c;f++)if(p=bE[d=r.charCodeAt(f)])if(p<0){for(let m=u-3;m>=0;m-=3)if(ji[m+1]==-p){let _=ji[m+2],y=_&2?o:_&4?_&1?a:o:0;y&&(nr[f]=nr[ji[m]]=y),u=m;break}}else{if(ji.length==189)break;ji[u++]=f,ji[u++]=d,ji[u++]=l}else if((h=nr[f])==2||h==1){let m=h==o;l=m?0:1;for(let _=u-3;_>=0;_-=3){let y=ji[_+2];if(y&2)break;if(m)ji[_+2]|=2;else{if(y&4)break;ji[_+2]|=4}}}}}function ogt(r,t,e,n){for(let o=0,a=n;o<=e.length;o++){let i=o?e[o-1].to:r,u=o<e.length?e[o].from:t;for(let l=i;l<u;){let s=nr[l];if(s==256){let c=l+1;for(;;)if(c==u){if(o==e.length)break;c=e[o++].to,u=o<e.length?e[o].from:t}else if(nr[c]==256)c++;else break;let f=a==1,d=(c<t?nr[c]:n)==1,p=f==d?f?1:2:n;for(let h=c,m=o,_=m?e[m-1].to:r;h>l;)h==_&&(h=e[--m].from,_=m?e[m-1].to:r),nr[--h]=p;l=c}else a=s,l++}}}function DE(r,t,e,n,o,a,i){let u=n%2?2:1;if(n%2==o%2)for(let l=t,s=0;l<e;){let c=!0,f=!1;if(s==a.length||l<a[s].from){let m=nr[l];m!=u&&(c=!1,f=m==16)}let d=!c&&u==1?[]:null,p=c?n:n+1,h=l;t:for(;;)if(s<a.length&&h==a[s].from){if(f)break t;let m=a[s];if(!c)for(let _=m.to,y=s+1;;){if(_==e)break t;if(y<a.length&&a[y].from==_)_=a[y++].to;else{if(nr[_]==u)break t;break}}if(s++,d)d.push(m);else{m.from>l&&i.push(new Yi(l,m.from,p));let _=m.direction==Mc!=!(p%2);wE(r,_?n+1:n,o,m.inner,m.from,m.to,i),l=m.to}h=m.to}else{if(h==e||(c?nr[h]!=u:nr[h]==u))break;h++}d?DE(r,l,h,n+1,o,d,i):l<h&&i.push(new Yi(l,h,p)),l=h}else for(let l=e,s=a.length;l>t;){let c=!0,f=!1;if(!s||l>a[s-1].to){let m=nr[l-1];m!=u&&(c=!1,f=m==16)}let d=!c&&u==1?[]:null,p=c?n:n+1,h=l;t:for(;;)if(s&&h==a[s-1].to){if(f)break t;let m=a[--s];if(!c)for(let _=m.from,y=s;;){if(_==t)break t;if(y&&a[y-1].to==_)_=a[--y].from;else{if(nr[_-1]==u)break t;break}}if(d)d.push(m);else{m.to<l&&i.push(new Yi(m.to,l,p));let _=m.direction==Mc!=!(p%2);wE(r,_?n+1:n,o,m.inner,m.from,m.to,i),l=m.from}h=m.from}else{if(h==t||(c?nr[h-1]!=u:nr[h-1]==u))break;h--}d?DE(r,h,l,n+1,o,d,i):h<l&&i.push(new Yi(h,l,p)),l=h}}function wE(r,t,e,n,o,a,i){let u=t%2?2:1;rgt(r,o,a,n,u),ngt(r,o,a,n,u),ogt(o,a,n,u),DE(r,o,a,t,e,n,i)}function agt(r,t,e){if(!r)return[new Yi(0,0,t==rF?1:0)];if(t==Mc&&!e.length&&!egt.test(r))return PV(r.length);if(e.length)for(;r.length>nr.length;)nr[nr.length]=256;let n=[],o=t==Mc?0:1;return wE(r,o,o,e,0,r.length,n),n}function PV(r){return[new Yi(0,r,0)]}var IV="";function igt(r,t,e,n,o){var a;let i=n.head-r.from,u=Yi.find(t,i,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),l=t[u],s=l.side(o,e);if(i==s){let d=u+=o?1:-1;if(d<0||d>=t.length)return null;l=t[u=d],i=l.side(!o,e),s=l.side(o,e)}let c=Xr(r.text,i,l.forward(o,e));(c<l.from||c>l.to)&&(c=s),IV=r.text.slice(Math.min(i,c),Math.max(i,c));let f=u==(o?t.length-1:0)?null:t[u+(o?1:-1)];return f&&c==s&&f.level+(o?0:1)<l.level?L.cursor(f.side(!o,e)+r.from,f.forward(o,e)?1:-1,f.level):L.cursor(c+r.from,l.forward(o,e)?-1:1,l.level)}function ugt(r,t,e){for(let n=t;n<e;n++){let o=MV(r.charCodeAt(n));if(o==1)return Mc;if(o==2||o==4)return rF}return Mc}var NV=ut.define(),kV=ut.define(),$V=ut.define(),LV=ut.define(),xE=ut.define(),UV=ut.define(),BV=ut.define(),nF=ut.define(),oF=ut.define(),WV=ut.define({combine:r=>r.some(t=>t)}),GV=ut.define({combine:r=>r.some(t=>t)}),zV=ut.define(),tg=class r{constructor(t,e="nearest",n="nearest",o=5,a=5,i=!1){this.range=t,this.y=e,this.x=n,this.yMargin=o,this.xMargin=a,this.isSnapshot=i}map(t){return t.empty?this:new r(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new r(L.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},Ab=zt.define({map:(r,t)=>r.map(t)}),qV=zt.define();function kn(r,t,e){let n=r.facet(LV);n.length?n[0](t):window.onerror?window.onerror(String(t),e,void 0,void 0,t):e?console.error(e+":",t):console.error(t)}var Vl=ut.define({combine:r=>r.length?r[0]:!0}),lgt=0,Vv=ut.define(),Tr=class r{constructor(t,e,n,o,a){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=o,this.extension=a(this)}static define(t,e){let{eventHandlers:n,eventObservers:o,provide:a,decorations:i}=e||{};return new r(lgt++,t,n,o,u=>{let l=[Vv.of(u)];return i&&l.push(dg.of(s=>{let c=s.plugin(u);return c?i(c):xt.none})),a&&l.push(a(u)),l})}static fromClass(t,e){return r.define(n=>new t(n),e)}},eg=class{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(n){if(kn(e.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){kn(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(n){kn(t.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},QV=ut.define(),aF=ut.define(),dg=ut.define(),HV=ut.define(),iF=ut.define(),VV=ut.define();function kH(r,t){let e=r.state.facet(VV);if(!e.length)return e;let n=e.map(a=>a instanceof Function?a(r):a),o=[];return We.spans(n,t.from,t.to,{point(){},span(a,i,u,l){let s=a-t.from,c=i-t.from,f=o;for(let d=u.length-1;d>=0;d--,l--){let p=u[d].spec.bidiIsolate,h;if(p==null&&(p=ugt(t.text,s,c)),l>0&&f.length&&(h=f[f.length-1]).to==s&&h.direction==p)h.to=c,f=h.inner;else{let m={from:s,to:c,direction:p,inner:[]};f.push(m),f=m.inner}}}}),o}var jV=ut.define();function ZV(r){let t=0,e=0,n=0,o=0;for(let a of r.state.facet(jV)){let i=a(r);i&&(i.left!=null&&(t=Math.max(t,i.left)),i.right!=null&&(e=Math.max(e,i.right)),i.top!=null&&(n=Math.max(n,i.top)),i.bottom!=null&&(o=Math.max(o,i.bottom)))}return{left:t,right:e,top:n,bottom:o}}var jv=ut.define(),Xi=class r{constructor(t,e,n,o){this.fromA=t,this.toA=e,this.fromB=n,this.toB=o}join(t){return new r(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let o=t[e-1];if(!(o.fromA>n.toA)){if(o.toA<n.fromA)break;n=n.join(o),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(e.length==0)return t;let n=[];for(let o=0,a=0,i=0,u=0;;o++){let l=o==t.length?null:t[o],s=i-u,c=l?l.fromB:1e9;for(;a<e.length&&e[a]<c;){let f=e[a],d=e[a+1],p=Math.max(u,f),h=Math.min(c,d);if(p<=h&&new r(p+s,h+s,p,h).addToSet(n),d>c)break;a+=2}if(!l)return n;new r(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),i=l.toA,u=l.toB}}},Zb=class r{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=go.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges((a,i,u,l)=>o.push(new Xi(a,i,u,l))),this.changedRanges=o}static create(t,e,n){return new r(t,e,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},Yb=class extends sr{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=xt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new Nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Xi(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:s,toA:c})=>c<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let o=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?o=this.domChanged.newSel.head:!mgt(t.changes,this.hasComposition)&&!t.selectionSet&&(o=t.state.selection.main.head));let a=o>-1?cgt(this.view,t.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:s,to:c}=this.hasComposition;n=new Xi(s,c,t.changes.mapPos(s,-1),t.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(mt.ie||mt.chrome)&&!a&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,u=this.updateDeco(),l=pgt(i,u,t.changes);return n=Xi.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,t.startState.doc.length,a),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let i=mt.chrome||mt.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,i),this.flags&=-8,i&&(i.written||o.selectionRange.focusNode!=i.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(i=>i.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let i of this.children)i instanceof Oc&&i.widget instanceof fg&&a.push(i.dom);o.updateGaps(a)}updateChildren(t,e,n){let o=n?n.range.addToSet(t.slice()):t,a=this.childCursor(e);for(let i=o.length-1;;i--){let u=i>=0?o[i]:null;if(!u)break;let{fromA:l,toA:s,fromB:c,toB:f}=u,d,p,h,m;if(n&&n.range.fromB<f&&n.range.toB>c){let T=Kv.build(this.view.state.doc,c,n.range.fromB,this.decorations,this.dynamicDecorationMap),R=Kv.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);p=T.breakAtStart,h=T.openStart,m=R.openEnd;let C=this.compositionView(n);R.breakAtStart?C.breakAfter=1:R.content.length&&C.merge(C.length,C.length,R.content[0],!1,R.openStart,0)&&(C.breakAfter=R.content[0].breakAfter,R.content.shift()),T.content.length&&C.merge(0,0,T.content[T.content.length-1],!0,0,T.openEnd)&&T.content.pop(),d=T.content.concat(C).concat(R.content)}else({content:d,breakAtStart:p,openStart:h,openEnd:m}=Kv.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:_,off:y}=a.findPos(s,1),{i:D,off:w}=a.findPos(l,-1);wV(this,D,w,_,y,d,p,h,m)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let n of e.effects)n.is(qV)&&(this.editContextFormatting=n.value)}compositionView(t){let e=new Ki(t.text.nodeValue);e.flags|=8;for(let{deco:o}of t.marks)e=new Yl(o,[e],e.length);let n=new Nn;return n.append(e,0),n}fixCompositionDOM(t){let e=(a,i)=>{i.flags|=8|(i.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(i);let u=sr.get(a);u&&u!=i&&(u.dom=null),i.setDOM(a)},n=this.childPos(t.range.fromB,1),o=this.children[n.i];e(t.line,o);for(let a=t.marks.length-1;a>=-1;a--)n=o.childPos(n.off,1),o=o.children[n.i],e(a>=0?t.marks[a].node:t.text,o)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,o=n==this.dom,a=!o&&Bb(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(o||e||a))return;let i=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(u.anchor)),s=u.empty?l:this.moveToLine(this.domAtPos(u.head));if(mt.gecko&&u.empty&&!this.hasComposition&&sgt(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=s=new _o(f,0),i=!0}let c=this.view.observer.selectionRange;(i||!c.focusNode||(!Jv(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Jv(s.node,s.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,u))&&(this.view.observer.ignore(()=>{mt.android&&mt.chrome&&this.dom.contains(c.focusNode)&&hgt(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=ag(this.view.root);if(f)if(u.empty){if(mt.gecko){let d=fgt(l.node,l.offset);if(d&&d!=3){let p=(d==1?bV:DV)(l.node,l.offset);p&&(l=new _o(p.node,p.offset))}}f.collapse(l.node,l.offset),u.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=u.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(s.node,s.offset)}catch{}}else{let d=document.createRange();u.anchor>u.head&&([l,s]=[s,l]),d.setEnd(s.node,s.offset),d.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(d)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,s)),this.impreciseAnchor=l.precise?null:new _o(c.anchorNode,c.anchorOffset),this.impreciseHead=s.precise?null:new _o(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&Jv(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=ag(t.root),{anchorNode:o,anchorOffset:a}=t.observer.selectionRange;if(!n||!e.empty||!e.assoc||!n.modify)return;let i=Nn.find(this,e.head);if(!i)return;let u=i.posAtStart;if(e.head==u||e.head==u+i.length)return;let l=this.coordsAt(e.head,-1),s=this.coordsAt(e.head,1);if(!l||!s||l.bottom>s.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let f=t.observer.selectionRange;t.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=e.from&&n.collapse(o,a)}moveToLine(t){let e=this.dom,n;if(t.node!=e)return t;for(let o=t.offset;!n&&o<e.childNodes.length;o++){let a=sr.get(e.childNodes[o]);a instanceof Nn&&(n=a.domAtPos(0))}for(let o=t.offset-1;!n&&o>=0;o--){let a=sr.get(e.childNodes[o]);a instanceof Nn&&(n=a.domAtPos(a.length))}return n?new _o(n.node,n.offset,!0):t}nearest(t){for(let e=t;e;){let n=sr.get(e);if(n&&n.rootView==this)return n;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let o=this.children[e];if(n<o.length||o instanceof Nn)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,o=0;for(let a=this.length,i=this.children.length-1;i>=0;i--){let u=this.children[i],l=a-u.breakAfter,s=l-u.length;if(l<t)break;if(s<=t&&(s<t||u.covers(-1))&&(l>t||u.covers(1))&&(!n||u instanceof Nn&&!(n instanceof Nn&&e>=0)))n=u,o=s;else if(n&&s==t&&l==t&&u instanceof Oc&&Math.abs(e)<2){if(u.deco.startSide<0)break;i&&(n=null)}a=s}return n?n.coordsAt(t-o,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),o=this.children[e];if(!(o instanceof Nn))return null;for(;o.children.length;){let{i:u,off:l}=o.childPos(n,1);for(;;u++){if(u==o.children.length)return null;if((o=o.children[u]).length)break}n=l}if(!(o instanceof Ki))return null;let a=Xr(o.text,n);if(a==n)return null;let i=Fc(o.dom,n,a).getClientRects();for(let u=0;u<i.length;u++){let l=i[u];if(u==i.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:o}=t,a=this.view.contentDOM.clientWidth,i=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,l=this.view.textDirection==Je.LTR;for(let s=0,c=0;c<this.children.length;c++){let f=this.children[c],d=s+f.length;if(d>o)break;if(s>=n){let p=f.dom.getBoundingClientRect();if(e.push(p.height),i){let h=f.dom.lastChild,m=h?ig(h):[];if(m.length){let _=m[m.length-1],y=l?_.right-p.left:p.right-_.left;y>u&&(u=y,this.minWidth=a,this.minWidthFrom=s,this.minWidthTo=d)}}}s=d+f.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return getComputedStyle(this.children[e].dom).direction=="rtl"?Je.RTL:Je.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Nn){let i=a.measureTextSize();if(i)return i}let t=document.createElement("div"),e,n,o;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let a=ig(t.firstChild)[0];e=t.getBoundingClientRect().height,n=a?a.width/27:7,o=a?a.height:e,t.remove()}),{lineHeight:e,charWidth:n,textHeight:o}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Vb(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,o=0;;o++){let a=o==e.viewports.length?null:e.viewports[o],i=a?a.from-1:this.length;if(i>n){let u=(e.lineBlockAt(i).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(xt.replace({widget:new fg(u),block:!0,inclusive:!0,isBlockGap:!0}).range(n,i))}if(!a)break;n=a.to+1}return xt.set(t)}updateDeco(){let t=1,e=this.view.state.facet(dg).map(a=>(this.dynamicDecorationMap[t++]=typeof a=="function")?a(this.view):a),n=!1,o=this.view.state.facet(HV).map((a,i)=>{let u=typeof a=="function";return u&&(n=!0),u?a(this.view):a});for(o.length&&(this.dynamicDecorationMap[t++]=n,e.push(We.join(o))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let s=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=s.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let s of this.view.state.facet(zV))try{if(s(this.view,t.range,t))return!0}catch(c){kn(this.view.state,c,"scroll handler")}let{range:e}=t,n=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),o;if(!n)return;!e.empty&&(o=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(n={left:Math.min(n.left,o.left),top:Math.min(n.top,o.top),right:Math.max(n.right,o.right),bottom:Math.max(n.bottom,o.bottom)});let a=ZV(this.view),i={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:u,offsetHeight:l}=this.view.scrollDOM;qvt(this.view.scrollDOM,i,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,u),-u),Math.max(Math.min(t.yMargin,l),-l),this.view.textDirection==Je.LTR)}};function sgt(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function YV(r,t){let e=r.observer.selectionRange;if(!e.focusNode)return null;let n=bV(e.focusNode,e.focusOffset),o=DV(e.focusNode,e.focusOffset),a=n||o;if(o&&n&&o.node!=n.node){let u=sr.get(o.node);if(!u||u instanceof Ki&&u.text!=o.node.nodeValue)a=o;else if(r.docView.lastCompositionAfterCursor){let l=sr.get(n.node);!l||l instanceof Ki&&l.text!=n.node.nodeValue||(a=o)}}if(r.docView.lastCompositionAfterCursor=a!=n,!a)return null;let i=t-a.offset;return{from:i,to:i+a.node.nodeValue.length,node:a.node}}function cgt(r,t,e){let n=YV(r,e);if(!n)return null;let{node:o,from:a,to:i}=n,u=o.nodeValue;if(/[\n\r]/.test(u)||r.state.doc.sliceString(n.from,n.to)!=u)return null;let l=t.invertedDesc,s=new Xi(l.mapPos(a),l.mapPos(i),a,i),c=[];for(let f=o.parentNode;;f=f.parentNode){let d=sr.get(f);if(d instanceof Yl)c.push({node:f,deco:d.mark});else{if(d instanceof Nn||f.nodeName=="DIV"&&f.parentNode==r.contentDOM)return{range:s,text:o,marks:c,line:f};if(f!=r.contentDOM)c.push({node:f,deco:new sg({inclusive:!0,attributes:Xvt(f),tagName:f.tagName.toLowerCase()})});else return null}}}function fgt(r,t){return r.nodeType!=1?0:(t&&r.childNodes[t-1].contentEditable=="false"?1:0)|(t<r.childNodes.length&&r.childNodes[t].contentEditable=="false"?2:0)}var dgt=class{constructor(){this.changes=[]}compareRange(t,e){yE(t,e,this.changes)}comparePoint(t,e){yE(t,e,this.changes)}};function pgt(r,t,e){let n=new dgt;return We.compare(r,t,e,n),n.changes}function hgt(r,t){for(let e=r;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function mgt(r,t){let e=!1;return t&&r.iterChangedRanges((n,o)=>{n<t.to&&o>t.from&&(e=!0)}),e}function vgt(r,t,e=1){let n=r.charCategorizer(t),o=r.doc.lineAt(t),a=t-o.from;if(o.length==0)return L.cursor(t);a==0?e=1:a==o.length&&(e=-1);let i=a,u=a;e<0?i=Xr(o.text,a,!1):u=Xr(o.text,a);let l=n(o.text.slice(i,u));for(;i>0;){let s=Xr(o.text,i,!1);if(n(o.text.slice(s,i))!=l)break;i=s}for(;u<o.length;){let s=Xr(o.text,u);if(n(o.text.slice(u,s))!=l)break;u=s}return L.range(i+o.from,u+o.from)}function ggt(r,t){return t.left>r?t.left-r:Math.max(0,r-t.right)}function _gt(r,t){return t.top>r?t.top-r:Math.max(0,r-t.bottom)}function iE(r,t){return r.top<t.bottom-1&&r.bottom>t.top+1}function $H(r,t){return t<r.top?{top:t,left:r.left,right:r.right,bottom:r.bottom}:r}function LH(r,t){return t>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:t}:r}function TE(r,t,e){let n,o,a,i,u=!1,l,s,c,f;for(let h=r.firstChild;h;h=h.nextSibling){let m=ig(h);for(let _=0;_<m.length;_++){let y=m[_];o&&iE(o,y)&&(y=$H(LH(y,o.bottom),o.top));let D=ggt(t,y),w=_gt(e,y);if(D==0&&w==0)return h.nodeType==3?UH(h,t,e):TE(h,t,e);if(!n||i>w||i==w&&a>D){n=h,o=y,a=D,i=w;let T=w?e<y.top?-1:1:D?t<y.left?-1:1:0;u=!T||(T>0?_<m.length-1:_>0)}D==0?e>y.bottom&&(!c||c.bottom<y.bottom)?(l=h,c=y):e<y.top&&(!f||f.top>y.top)&&(s=h,f=y):c&&iE(c,y)?c=LH(c,y.bottom):f&&iE(f,y)&&(f=$H(f,y.top))}}if(c&&c.bottom>=e?(n=l,o=c):f&&f.top<=e&&(n=s,o=f),!n)return{node:r,offset:0};let d=Math.max(o.left,Math.min(o.right,t));if(n.nodeType==3)return UH(n,d,e);if(u&&n.contentEditable!="false")return TE(n,d,e);let p=Array.prototype.indexOf.call(r.childNodes,n)+(t>=(o.left+o.right)/2?1:0);return{node:r,offset:p}}function UH(r,t,e){let n=r.nodeValue.length,o=-1,a=1e9,i=0;for(let u=0;u<n;u++){let l=Fc(r,u,u+1).getClientRects();for(let s=0;s<l.length;s++){let c=l[s];if(c.top==c.bottom)continue;i||(i=t-c.left);let f=(c.top>e?c.top-e:e-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&f<a){let d=t>=(c.left+c.right)/2,p=d;if((mt.chrome||mt.gecko)&&Fc(r,u).getBoundingClientRect().left==c.right&&(p=!d),f<=0)return{node:r,offset:u+(p?1:0)};o=u+(p?1:0),a=f}}}return{node:r,offset:o>-1?o:i>0?r.nodeValue.length:0}}function XV(r,t,e,n=-1){var o,a;let i=r.contentDOM.getBoundingClientRect(),u=i.top+r.viewState.paddingTop,l,{docHeight:s}=r.viewState,{x:c,y:f}=t,d=f-u;if(d<0)return 0;if(d>s)return r.state.doc.length;for(let T=r.viewState.heightOracle.textHeight/2,R=!1;l=r.elementAtHeight(d),l.type!=yo.Text;)for(;d=n>0?l.bottom+T:l.top-T,!(d>=0&&d<=s);){if(R)return e?null:0;R=!0,n=-n}f=u+d;let p=l.from;if(p<r.viewport.from)return r.viewport.from==0?0:e?null:BH(r,i,l,c,f);if(p>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:e?null:BH(r,i,l,c,f);let h=r.dom.ownerDocument,m=r.root.elementFromPoint?r.root:h,_=m.elementFromPoint(c,f);_&&!r.contentDOM.contains(_)&&(_=null),_||(c=Math.max(i.left+1,Math.min(i.right-1,c)),_=m.elementFromPoint(c,f),_&&!r.contentDOM.contains(_)&&(_=null));let y,D=-1;if(_&&((o=r.docView.nearest(_))===null||o===void 0?void 0:o.isEditable)!=!1){if(h.caretPositionFromPoint){let T=h.caretPositionFromPoint(c,f);T&&({offsetNode:y,offset:D}=T)}else if(h.caretRangeFromPoint){let T=h.caretRangeFromPoint(c,f);T&&({startContainer:y,startOffset:D}=T,(!r.contentDOM.contains(y)||mt.safari&&ygt(y,D,c)||mt.chrome&&bgt(y,D,c))&&(y=void 0))}y&&(D=Math.min(Ji(y),D))}if(!y||!r.docView.dom.contains(y)){let T=Nn.find(r.docView,p);if(!T)return d>l.top+l.height/2?l.to:l.from;({node:y,offset:D}=TE(T.dom,c,f))}let w=r.docView.nearest(y);if(!w)return null;if(w.isWidget&&((a=w.dom)===null||a===void 0?void 0:a.nodeType)==1){let T=w.dom.getBoundingClientRect();return t.y<T.top||t.y<=T.bottom&&t.x<=(T.left+T.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(y,D)+w.posAtStart}function BH(r,t,e,n,o){let a=Math.round((n-t.left)*r.defaultCharacterWidth);if(r.lineWrapping&&e.height>r.defaultLineHeight*1.5){let u=r.viewState.heightOracle.textHeight,l=Math.floor((o-e.top-(r.defaultLineHeight-u)*.5)/u);a+=l*r.viewState.heightOracle.lineLength}let i=r.state.sliceDoc(e.from,e.to);return e.from+Eb(i,a,r.state.tabSize)}function ygt(r,t,e){let n;if(r.nodeType!=3||t!=(n=r.nodeValue.length))return!1;for(let o=r.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return Fc(r,n-1,n).getBoundingClientRect().left>e}function bgt(r,t,e){if(t!=0)return!1;for(let o=r;;){let a=o.parentNode;if(!a||a.nodeType!=1||a.firstChild!=o)return!1;if(a.classList.contains("cm-line"))break;o=a}let n=r.nodeType==1?r.getBoundingClientRect():Fc(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return e-n.left>5}function RE(r,t){let e=r.lineBlockAt(t);if(Array.isArray(e.type)){for(let n of e.type)if(n.to>t||n.to==t&&(n.to==e.to||n.type==yo.Text))return n}return e}function Dgt(r,t,e,n){let o=RE(r,t.head),a=!n||o.type!=yo.Text||!(r.lineWrapping||o.widgetLineBreaks)?null:r.coordsAtPos(t.assoc<0&&t.head>o.from?t.head-1:t.head);if(a){let i=r.dom.getBoundingClientRect(),u=r.textDirectionAt(o.from),l=r.posAtCoords({x:e==(u==Je.LTR)?i.right-1:i.left+1,y:(a.top+a.bottom)/2});if(l!=null)return L.cursor(l,e?-1:1)}return L.cursor(e?o.to:o.from,e?-1:1)}function WH(r,t,e,n){let o=r.state.doc.lineAt(t.head),a=r.bidiSpans(o),i=r.textDirectionAt(o.from);for(let u=t,l=null;;){let s=igt(o,a,i,u,e),c=IV;if(!s){if(o.number==(e?r.state.doc.lines:1))return u;c=`
`,o=r.state.doc.line(o.number+(e?1:-1)),a=r.bidiSpans(o),s=r.visualLineSide(o,!e)}if(l){if(!l(c))return u}else{if(!n)return s;l=n(c)}u=s}}function wgt(r,t,e){let n=r.state.charCategorizer(t),o=n(e);return a=>{let i=n(a);return o==Xe.Space&&(o=i),o==i}}function xgt(r,t,e,n){let o=t.head,a=e?1:-1;if(o==(e?r.state.doc.length:0))return L.cursor(o,t.assoc);let i=t.goalColumn,u,l=r.contentDOM.getBoundingClientRect(),s=r.coordsAtPos(o,t.assoc||-1),c=r.documentTop;if(s)i==null&&(i=s.left-l.left),u=a<0?s.top:s.bottom;else{let p=r.viewState.lineBlockAt(o);i==null&&(i=Math.min(l.right-l.left,r.defaultCharacterWidth*(o-p.from))),u=(a<0?p.top:p.bottom)+c}let f=l.left+i,d=n??r.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let h=u+(d+p)*a,m=XV(r,{x:f,y:h},!1,a);if(h<l.top||h>l.bottom||(a<0?m<o:m>o)){let _=r.docView.coordsForChar(m),y=!_||h<_.top?-1:1;return L.cursor(m,y,void 0,i)}}}function Wb(r,t,e){for(;;){let n=0;for(let o of r)o.between(t-1,t+1,(a,i,u)=>{if(t>a&&t<i){let l=n||e||(t-a<i-t?-1:1);t=l<0?a:i,n=l}});if(!n)return t}}function uE(r,t,e){let n=Wb(r.state.facet(iF).map(o=>o(r)),e.from,t.head>e.from?-1:1);return n==e.from?e:L.cursor(n,n<e.from?1:-1)}var Zv="\uFFFF",CE=class{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(He.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Zv}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let o=t;;){this.findPointBefore(n,o);let a=this.text.length;this.readNode(o);let i=o.nextSibling;if(i==e)break;let u=sr.get(o),l=sr.get(i);(u&&l?u.breakAfter:(u?u.breakAfter:Hb(o))||Hb(i)&&(o.nodeName!="BR"||o.cmIgnore)&&this.text.length>a)&&this.lineBreak(),o=i}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,i=1,u;if(this.lineSeparator?(a=e.indexOf(this.lineSeparator,n),i=this.lineSeparator.length):(u=o.exec(e))&&(a=u.index,i=u[0].length),this.append(e.slice(n,a<0?e.length:a)),a<0)break;if(this.lineBreak(),i>1)for(let l of this.points)l.node==t&&l.pos>this.text.length&&(l.pos-=i-1);n=a+i}}readNode(t){if(t.cmIgnore)return;let e=sr.get(t),n=e&&e.overrideDOMText;if(n!=null){this.findPointInside(t,n.length);for(let o=n.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(t.nodeType==3?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(Tgt(t,n.node,n.offset)?e:0))}};function Tgt(r,t,e){for(;;){if(!t||e<Ji(t))return!1;if(t==r)return!0;e=Ec(t)+1,t=t.parentNode}}var Xb=class{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}},SE=class{constructor(t,e,n,o){this.typeOver=o,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:a,impreciseAnchor:i}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let u=a||i?[]:Sgt(t),l=new CE(u,t.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Ogt(u,this.bounds.from)}else{let u=t.observer.selectionRange,l=a&&a.node==u.focusNode&&a.offset==u.focusOffset||!dE(t.contentDOM,u.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(u.focusNode,u.focusOffset),s=i&&i.node==u.anchorNode&&i.offset==u.anchorOffset||!dE(t.contentDOM,u.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(u.anchorNode,u.anchorOffset),c=t.viewport;if((mt.ios||mt.chrome)&&t.state.selection.main.empty&&l!=s&&(c.from>0||c.to<t.state.doc.length)){let f=Math.min(l,s),d=Math.max(l,s),p=c.from-f,h=c.to-d;(p==0||p==1||f==0)&&(h==0||h==-1||d==t.state.doc.length)&&(l=0,s=t.state.doc.length)}this.newSel=L.single(s,l)}}};function JV(r,t){let e,{newSel:n}=t,o=r.state.selection.main,a=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(t.bounds){let{from:i,to:u}=t.bounds,l=o.from,s=null;(a===8||mt.android&&t.text.length<u-i)&&(l=o.to,s="end");let c=Cgt(r.state.doc.sliceString(i,u,Zv),t.text,l-i,s);c&&(mt.chrome&&a==13&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==Zv+Zv&&c.toB--,e={from:i+c.from,to:i+c.toA,insert:xe.of(t.text.slice(c.from,c.toB).split(Zv))})}else n&&(!r.hasFocus&&r.state.facet(Vl)||n.main.eq(o))&&(n=null);if(!e&&!n)return!1;if(!e&&t.typeOver&&!o.empty&&n&&n.main.empty?e={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,o.to)}:e&&e.from>=o.from&&e.to<=o.to&&(e.from!=o.from||e.to!=o.to)&&o.to-o.from-(e.to-e.from)<=4?e={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,e.from).append(e.insert).append(r.state.doc.slice(e.to,o.to))}:(mt.mac||mt.android)&&e&&e.from==e.to&&e.from==o.head-1&&/^\. ?$/.test(e.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&e.insert.length==2&&(n=L.single(n.main.anchor-1,n.main.head-1)),e={from:o.from,to:o.to,insert:xe.of([" "])}):mt.chrome&&e&&e.from==e.to&&e.from==o.head&&e.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=L.single(n.main.anchor-1,n.main.head-1)),e={from:o.from,to:o.to,insert:xe.of([" "])}),e)return uF(r,e,n,a);if(n&&!n.main.eq(o)){let i=!1,u="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(i=!0),u=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:i,userEvent:u}),!0}else return!1}function uF(r,t,e,n=-1){if(mt.ios&&r.inputState.flushIOSKey(t))return!0;let o=r.state.selection.main;if(mt.android&&(t.to==o.to&&(t.from==o.from||t.from==o.from-1&&r.state.sliceDoc(t.from,o.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&ep(r.contentDOM,"Enter",13)||(t.from==o.from-1&&t.to==o.to&&t.insert.length==0||n==8&&t.insert.length<t.to-t.from&&t.to>o.head)&&ep(r.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&t.insert.length==0&&ep(r.contentDOM,"Delete",46)))return!0;let a=t.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let i,u=()=>i||(i=Rgt(r,t,e));return r.state.facet(UV).some(l=>l(r,t.from,t.to,a,u))||r.dispatch(u()),!0}function Rgt(r,t,e){let n,o=r.state,a=o.selection.main;if(t.from>=a.from&&t.to<=a.to&&t.to-t.from>=(a.to-a.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&r.inputState.composing<0){let u=a.from<t.from?o.sliceDoc(a.from,t.from):"",l=a.to>t.to?o.sliceDoc(t.to,a.to):"";n=o.replaceSelection(r.state.toText(u+t.insert.sliceString(0,void 0,r.state.lineBreak)+l))}else{let u=o.changes(t),l=e&&e.main.to<=u.newLength?e.main:void 0;if(o.selection.ranges.length>1&&r.inputState.composing>=0&&t.to<=a.to&&t.to>=a.to-10){let s=r.state.sliceDoc(t.from,t.to),c,f=e&&YV(r,e.main.head);if(f){let h=t.insert.length-(t.to-t.from);c={from:f.from,to:f.to-h}}else c=r.state.doc.lineAt(a.head);let d=a.to-t.to,p=a.to-a.from;n=o.changeByRange(h=>{if(h.from==a.from&&h.to==a.to)return{changes:u,range:l||h.map(u)};let m=h.to-d,_=m-s.length;if(h.to-h.from!=p||r.state.sliceDoc(_,m)!=s||h.to>=c.from&&h.from<=c.to)return{range:h};let y=o.changes({from:_,to:m,insert:t.insert}),D=h.to-a.to;return{changes:y,range:l?L.range(Math.max(0,l.anchor+D),Math.max(0,l.head+D)):h.map(y)}})}else n={changes:u,selection:l&&o.selection.replaceRange(l)}}let i="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,i+=".compose",r.inputState.compositionFirstChange&&(i+=".start",r.inputState.compositionFirstChange=!1)),o.update(n,{userEvent:i,scrollIntoView:!0})}function Cgt(r,t,e,n){let o=Math.min(r.length,t.length),a=0;for(;a<o&&r.charCodeAt(a)==t.charCodeAt(a);)a++;if(a==o&&r.length==t.length)return null;let i=r.length,u=t.length;for(;i>0&&u>0&&r.charCodeAt(i-1)==t.charCodeAt(u-1);)i--,u--;if(n=="end"){let l=Math.max(0,a-Math.min(i,u));e-=i+l-a}if(i<a&&r.length<t.length){let l=e<=a&&e>=i?a-e:0;a-=l,u=a+(u-i),i=a}else if(u<a){let l=e<=a&&e>=u?a-e:0;a-=l,i=a+(i-u),u=a}return{from:a,toA:i,toB:u}}function Sgt(r){let t=[];if(r.root.activeElement!=r.contentDOM)return t;let{anchorNode:e,anchorOffset:n,focusNode:o,focusOffset:a}=r.observer.selectionRange;return e&&(t.push(new Xb(e,n)),(o!=e||a!=n)&&t.push(new Xb(o,a))),t}function Ogt(r,t){if(r.length==0)return null;let e=r[0].pos,n=r.length==2?r[1].pos:e;return e>-1&&n>-1?L.single(e+t,n+t):null}var OE=class{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,mt.safari&&t.contentDOM.addEventListener("input",()=>null),mt.gecko&&zgt(t.contentDOM.ownerDocument)}handleEvent(t){!Ngt(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||this.runHandlers(t.type,t)}runHandlers(t,e){let n=this.handlers[t];if(n){for(let o of n.observers)o(this.view,e);for(let o of n.handlers){if(e.defaultPrevented)break;if(o(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=Egt(t),n=this.handlers,o=this.view.contentDOM;for(let a in e)if(a!="scroll"){let i=!e[a].handlers.length,u=n[a];u&&i!=!u.handlers.length&&(o.removeEventListener(a,this.handleEvent),u=null),u||o.addEventListener(a,this.handleEvent,{passive:i})}for(let a in n)a!="scroll"&&!e[a]&&o.removeEventListener(a,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&tj.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),mt.android&&mt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return mt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=KV.find(n=>n.keyCode==t.keyCode))&&!t.ctrlKey||Fgt.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,ep(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:mt.safari&&!mt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function GH(r,t){return(e,n)=>{try{return t.call(r,n,e)}catch(o){kn(e.state,o)}}}function Egt(r){let t=Object.create(null);function e(n){return t[n]||(t[n]={observers:[],handlers:[]})}for(let n of r){let o=n.spec;if(o&&o.domEventHandlers)for(let a in o.domEventHandlers){let i=o.domEventHandlers[a];i&&e(a).handlers.push(GH(n.value,i))}if(o&&o.domEventObservers)for(let a in o.domEventObservers){let i=o.domEventObservers[a];i&&e(a).observers.push(GH(n.value,i))}}for(let n in yi)e(n).handlers.push(yi[n]);for(let n in qa)e(n).observers.push(qa[n]);return t}var KV=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Fgt="dthko",tj=[16,17,18,20,91,92,224,225],Pb=6;function Ib(r){return Math.max(0,r)*.7+8}function Mgt(r,t){return Math.max(Math.abs(r.clientX-t.clientX),Math.abs(r.clientY-t.clientY))}var EE=class{constructor(t,e,n,o){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=Qvt(t.contentDOM),this.atoms=t.state.facet(iF).map(i=>i(t));let a=t.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(He.allowMultipleSelections)&&Agt(t,e),this.dragging=Igt(t,e)&&nj(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Mgt(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,n=0,o=0,a=0,i=this.view.win.innerWidth,u=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:i}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:a,bottom:u}=this.scrollParents.y.getBoundingClientRect());let l=ZV(this.view);t.clientX-l.left<=o+Pb?e=-Ib(o-t.clientX):t.clientX+l.right>=i-Pb&&(e=Ib(t.clientX-i)),t.clientY-l.top<=a+Pb?n=-Ib(a-t.clientY):t.clientY+l.bottom>=u-Pb&&(n=Ib(t.clientY-u)),this.setScrollSpeed(e,n)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let o=t.ranges[n],a=null;if(o.empty){let i=Wb(this.atoms,o.from,0);i!=o.from&&(a=L.cursor(i,-1))}else{let i=Wb(this.atoms,o.from,-1),u=Wb(this.atoms,o.to,1);(i!=o.from||u!=o.to)&&(a=L.range(o.from==o.anchor?i:u,o.from==o.head?i:u))}a&&(e||(e=t.ranges.slice()),e[n]=a)}return e?L.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));(this.mustSelect||!n.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}};function Agt(r,t){let e=r.state.facet(NV);return e.length?e[0](t):mt.mac?t.metaKey:t.ctrlKey}function Pgt(r,t){let e=r.state.facet(kV);return e.length?e[0](t):mt.mac?!t.altKey:!t.ctrlKey}function Igt(r,t){let{main:e}=r.state.selection;if(e.empty)return!1;let n=ag(r.root);if(!n||n.rangeCount==0)return!0;let o=n.getRangeAt(0).getClientRects();for(let a=0;a<o.length;a++){let i=o[a];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}function Ngt(r,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,n;e!=r.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(n=sr.get(e))&&n.ignoreEvent(t))return!1;return!0}var yi=Object.create(null),qa=Object.create(null),ej=mt.ie&&mt.ie_version<15||mt.ios&&mt.webkit_version<604;function kgt(r){let t=r.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{r.focus(),e.remove(),rj(r,e.value)},50)}function sD(r,t,e){for(let n of r.facet(t))e=n(e,r);return e}function rj(r,t){t=sD(r.state,nF,t);let{state:e}=r,n,o=1,a=e.toText(t),i=a.lines==e.selection.ranges.length;if(FE!=null&&e.selection.ranges.every(l=>l.empty)&&FE==a.toString()){let l=-1;n=e.changeByRange(s=>{let c=e.doc.lineAt(s.from);if(c.from==l)return{range:s};l=c.from;let f=e.toText((i?a.line(o++).text:t)+e.lineBreak);return{changes:{from:c.from,insert:f},range:L.cursor(s.from+f.length)}})}else i?n=e.changeByRange(l=>{let s=a.line(o++);return{changes:{from:l.from,to:l.to,insert:s.text},range:L.cursor(l.from+s.length)}}):n=e.replaceSelection(a);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}qa.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};yi.keydown=(r,t)=>(r.inputState.setSelectionOrigin("select"),t.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);qa.touchstart=(r,t)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};qa.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};yi.mousedown=(r,t)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let n of r.state.facet($V))if(e=n(r,t),e)break;if(!e&&t.button==0&&(e=Ugt(r,t)),e){let n=!r.hasFocus;r.inputState.startMouseSelection(new EE(r,t,e,n)),n&&r.observer.ignore(()=>{gV(r.contentDOM);let a=r.root.activeElement;a&&!a.contains(r.contentDOM)&&a.blur()});let o=r.inputState.mouseSelection;if(o)return o.start(t),o.dragging===!1}return!1};function zH(r,t,e,n){if(n==1)return L.cursor(t,e);if(n==2)return vgt(r.state,t,e);{let o=Nn.find(r.docView,t),a=r.state.doc.lineAt(o?o.posAtEnd:t),i=o?o.posAtStart:a.from,u=o?o.posAtEnd:a.to;return u<r.state.doc.length&&u==a.to&&u++,L.range(i,u)}}var qH=(r,t,e)=>t>=e.top&&t<=e.bottom&&r>=e.left&&r<=e.right;function $gt(r,t,e,n){let o=Nn.find(r.docView,t);if(!o)return 1;let a=t-o.posAtStart;if(a==0)return 1;if(a==o.length)return-1;let i=o.coordsAt(a,-1);if(i&&qH(e,n,i))return-1;let u=o.coordsAt(a,1);return u&&qH(e,n,u)?1:i&&i.bottom>=n?-1:1}function QH(r,t){let e=r.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:e,bias:$gt(r,e,t.clientX,t.clientY)}}var Lgt=mt.ie&&mt.ie_version<=11,HH=null,VH=0,jH=0;function nj(r){if(!Lgt)return r.detail;let t=HH,e=jH;return HH=r,jH=Date.now(),VH=!t||e>Date.now()-400&&Math.abs(t.clientX-r.clientX)<2&&Math.abs(t.clientY-r.clientY)<2?(VH+1)%3:1}function Ugt(r,t){let e=QH(r,t),n=nj(t),o=r.state.selection;return{update(a){a.docChanged&&(e.pos=a.changes.mapPos(e.pos),o=o.map(a.changes))},get(a,i,u){let l=QH(r,a),s,c=zH(r,l.pos,l.bias,n);if(e.pos!=l.pos&&!i){let f=zH(r,e.pos,e.bias,n),d=Math.min(f.from,c.from),p=Math.max(f.to,c.to);c=d<c.from?L.range(d,p):L.range(p,d)}return i?o.replaceRange(o.main.extend(c.from,c.to)):u&&n==1&&o.ranges.length>1&&(s=Bgt(o,l.pos))?s:u?o.addRange(c):L.create([c])}}}function Bgt(r,t){for(let e=0;e<r.ranges.length;e++){let{from:n,to:o}=r.ranges[e];if(n<=t&&o>=t)return L.create(r.ranges.slice(0,e).concat(r.ranges.slice(e+1)),r.mainIndex==e?0:r.mainIndex-(r.mainIndex>e?1:0))}return null}yi.dragstart=(r,t)=>{let{selection:{main:e}}=r.state;if(t.target.draggable){let o=r.docView.nearest(t.target);if(o&&o.isWidget){let a=o.posAtStart,i=a+o.length;(a>=e.to||i<=e.from)&&(e=L.range(a,i))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",sD(r.state,oF,r.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};yi.dragend=r=>(r.inputState.draggedContent=null,!1);function ZH(r,t,e,n){if(e=sD(r.state,nF,e),!e)return;let o=r.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:a}=r.inputState,i=n&&a&&Pgt(r,t)?{from:a.from,to:a.to}:null,u={from:o,insert:e},l=r.state.changes(i?[i,u]:u);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(o,-1),head:l.mapPos(o,1)},userEvent:i?"move.drop":"input.drop"}),r.inputState.draggedContent=null}yi.drop=(r,t)=>{if(!t.dataTransfer)return!1;if(r.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let n=Array(e.length),o=0,a=()=>{++o==e.length&&ZH(r,t,n.filter(i=>i!=null).join(r.state.lineBreak),!1)};for(let i=0;i<e.length;i++){let u=new FileReader;u.onerror=a,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(n[i]=u.result),a()},u.readAsText(e[i])}return!0}else{let n=t.dataTransfer.getData("Text");if(n)return ZH(r,t,n,!0),!0}return!1};yi.paste=(r,t)=>{if(r.state.readOnly)return!0;r.observer.flush();let e=ej?null:t.clipboardData;return e?(rj(r,e.getData("text/plain")||e.getData("text/uri-list")),!0):(kgt(r),!1)};function Wgt(r,t){let e=r.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function Ggt(r){let t=[],e=[],n=!1;for(let o of r.selection.ranges)o.empty||(t.push(r.sliceDoc(o.from,o.to)),e.push(o));if(!t.length){let o=-1;for(let{from:a}of r.selection.ranges){let i=r.doc.lineAt(a);i.number>o&&(t.push(i.text),e.push({from:i.from,to:Math.min(r.doc.length,i.to+1)})),o=i.number}n=!0}return{text:sD(r,oF,t.join(r.lineBreak)),ranges:e,linewise:n}}var FE=null;yi.copy=yi.cut=(r,t)=>{let{text:e,ranges:n,linewise:o}=Ggt(r.state);if(!e&&!o)return!1;FE=o?e:null,t.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=ej?null:t.clipboardData;return a?(a.clearData(),a.setData("text/plain",e),!0):(Wgt(r,e),!1)};var oj=zo.define();function aj(r,t){let e=[];for(let n of r.facet(BV)){let o=n(r,t);o&&e.push(o)}return e?r.update({effects:e,annotations:oj.of(!0)}):null}function ij(r){setTimeout(()=>{let t=r.hasFocus;if(t!=r.inputState.notifiedFocused){let e=aj(r.state,t);e?r.dispatch(e):r.update([])}},10)}qa.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),ij(r)};qa.blur=r=>{r.observer.clearSelectionRange(),ij(r)};qa.compositionstart=qa.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};qa.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,mt.chrome&&mt.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};qa.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};yi.beforeinput=(r,t)=>{var e,n;if(t.inputType=="insertReplacementText"&&r.observer.editContext){let a=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),i=t.getTargetRanges();if(a&&i.length){let u=i[0],l=r.posAtDOM(u.startContainer,u.startOffset),s=r.posAtDOM(u.endContainer,u.endOffset);return uF(r,{from:l,to:s,insert:r.state.toText(a)},null),!0}}let o;if(mt.chrome&&mt.android&&(o=KV.find(a=>a.inputType==t.inputType))&&(r.observer.delayAndroidKey(o.key,o.keyCode),o.key=="Backspace"||o.key=="Delete")){let a=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var i;(((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0)>a+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return mt.ios&&t.inputType=="deleteContentForward"&&r.observer.flushSoon(),mt.safari&&t.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>qa.compositionend(r,t),20),!1};var YH=new Set;function zgt(r){YH.has(r)||(YH.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}var XH=["pre-wrap","normal","pre-line","break-spaces"],rp=!1;function JH(){rp=!1}var ME=class{constructor(t){this.lineWrapping=t,this.doc=xe.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return XH.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let o=t[n];o<0?n++:this.heightSamples[Math.floor(o*10)]||(e=!0,this.heightSamples[Math.floor(o*10)]=!0)}return e}refresh(t,e,n,o,a,i){let u=XH.indexOf(t)>-1,l=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=e,this.charWidth=n,this.textHeight=o,this.lineLength=a,l){this.heightSamples={};for(let s=0;s<i.length;s++){let c=i[s];c<0?s++:this.heightSamples[Math.floor(c*10)]=!0}}return l}},AE=class{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}},Zi=class r{constructor(t,e,n,o,a){this.from=t,this.length=e,this.top=n,this.height=o,this._content=a}get type(){return typeof this._content=="number"?yo.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Xl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new r(this.from,this.length+t.length,this.top,this.height+t.height,e)}},dr=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(dr||(dr={})),Gb=.001,ca=class r{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Gb&&(rp=!0),this.height=t)}replace(t,e,n){return r.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,o){let a=this,i=n.doc;for(let u=o.length-1;u>=0;u--){let{fromA:l,toA:s,fromB:c,toB:f}=o[u],d=a.lineAt(l,dr.ByPosNoHeight,n.setDoc(e),0,0),p=d.to>=s?d:a.lineAt(s,dr.ByPosNoHeight,n,0,0);for(f+=p.to-s,s=p.to;u>0&&d.from<=o[u-1].toA;)l=o[u-1].fromA,c=o[u-1].fromB,u--,l<d.from&&(d=a.lineAt(l,dr.ByPosNoHeight,n,0,0));c+=d.from-l,l=d.from;let h=IE.build(n.setDoc(i),t,c,f);a=Jb(a,a.replace(l,s,h))}return a.updateHeight(n,0)}static empty(){return new za(0,0)}static of(t){if(t.length==1)return t[0];let e=0,n=t.length,o=0,a=0;for(;;)if(e==n)if(o>a*2){let u=t[e-1];u.break?t.splice(--e,1,u.left,null,u.right):t.splice(--e,1,u.left,u.right),n+=1+u.break,o-=u.size}else if(a>o*2){let u=t[n];u.break?t.splice(n,1,u.left,null,u.right):t.splice(n,1,u.left,u.right),n+=2+u.break,a-=u.size}else break;else if(o<a){let u=t[e++];u&&(o+=u.size)}else{let u=t[--n];u&&(a+=u.size)}let i=0;return t[e-1]==null?(i=1,e--):t[e]==null&&(i=1,n++),new PE(r.of(t.slice(0,e)),i,r.of(t.slice(n)))}};function Jb(r,t){return r==t?r:(r.constructor!=t.constructor&&(rp=!0),t)}ca.prototype.size=1;var Kb=class extends ca{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,o){return new Zi(o,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,o,a){return this.blockAt(0,n,o,a)}forEachLine(t,e,n,o,a,i){t<=a+this.length&&e>=a&&i(this.blockAt(0,n,o,a))}updateHeight(t,e=0,n=!1,o){return o&&o.from<=e&&o.more&&this.setHeight(o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},za=class r extends Kb{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,o){return new Zi(o,this.length,n,this.height,this.breaks)}replace(t,e,n){let o=n[0];return n.length==1&&(o instanceof r||o instanceof Zl&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof Zl?o=new r(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):ca.of(n)}updateHeight(t,e=0,n=!1,o){return o&&o.from<=e&&o.more?this.setHeight(o.heights[o.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Zl=class r extends ca{constructor(t){super(t,0)}heightMetrics(t,e){let n=t.doc.lineAt(e).number,o=t.doc.lineAt(e+this.length).number,a=o-n+1,i,u=0;if(t.lineWrapping){let l=Math.min(this.height,t.lineHeight*a);i=l/a,this.length>a+1&&(u=(this.height-l)/(this.length-a-1))}else i=this.height/a;return{firstLine:n,lastLine:o,perLine:i,perChar:u}}blockAt(t,e,n,o){let{firstLine:a,lastLine:i,perLine:u,perChar:l}=this.heightMetrics(e,o);if(e.lineWrapping){let s=o+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),c=e.doc.lineAt(s),f=u+c.length*l,d=Math.max(n,t-f/2);return new Zi(c.from,c.length,d,f,0)}else{let s=Math.max(0,Math.min(i-a,Math.floor((t-n)/u))),{from:c,length:f}=e.doc.line(a+s);return new Zi(c,f,n+u*s,u,0)}}lineAt(t,e,n,o,a){if(e==dr.ByHeight)return this.blockAt(t,n,o,a);if(e==dr.ByPosNoHeight){let{from:p,to:h}=n.doc.lineAt(t);return new Zi(p,h-p,0,0,0)}let{firstLine:i,perLine:u,perChar:l}=this.heightMetrics(n,a),s=n.doc.lineAt(t),c=u+s.length*l,f=s.number-i,d=o+u*f+l*(s.from-a-f);return new Zi(s.from,s.length,Math.max(o,Math.min(d,o+this.height-c)),c,0)}forEachLine(t,e,n,o,a,i){t=Math.max(t,a),e=Math.min(e,a+this.length);let{firstLine:u,perLine:l,perChar:s}=this.heightMetrics(n,a);for(let c=t,f=o;c<=e;){let d=n.doc.lineAt(c);if(c==t){let h=d.number-u;f+=l*h+s*(t-a-h)}let p=l+s*d.length;i(new Zi(d.from,d.length,f,p,0)),f+=p,c=d.to+1}}replace(t,e,n){let o=this.length-e;if(o>0){let a=n[n.length-1];a instanceof r?n[n.length-1]=new r(a.length+o):n.push(null,new r(o-1))}if(t>0){let a=n[0];a instanceof r?n[0]=new r(t+a.length):n.unshift(new r(t-1),null)}return ca.of(n)}decomposeLeft(t,e){e.push(new r(t-1),null)}decomposeRight(t,e){e.push(null,new r(this.length-t-1))}updateHeight(t,e=0,n=!1,o){let a=e+this.length;if(o&&o.from<=e+this.length&&o.more){let i=[],u=Math.max(e,o.from),l=-1;for(o.from>e&&i.push(new r(o.from-e-1).updateHeight(t,e));u<=a&&o.more;){let c=t.doc.lineAt(u).length;i.length&&i.push(null);let f=o.heights[o.index++];l==-1?l=f:Math.abs(f-l)>=Gb&&(l=-2);let d=new za(c,f);d.outdated=!1,i.push(d),u+=c+1}u<=a&&i.push(null,new r(a-u).updateHeight(t,u));let s=ca.of(i);return(l<0||Math.abs(s.height-this.height)>=Gb||Math.abs(l-this.heightMetrics(t,e).perLine)>=Gb)&&(rp=!0),Jb(this,s)}else(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},PE=class extends ca{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return this.flags&1}blockAt(t,e,n,o){let a=n+this.left.height;return t<a?this.left.blockAt(t,e,n,o):this.right.blockAt(t,e,a,o+this.left.length+this.break)}lineAt(t,e,n,o,a){let i=o+this.left.height,u=a+this.left.length+this.break,l=e==dr.ByHeight?t<i:t<u,s=l?this.left.lineAt(t,e,n,o,a):this.right.lineAt(t,e,n,i,u);if(this.break||(l?s.to<u:s.from>u))return s;let c=e==dr.ByPosNoHeight?dr.ByPosNoHeight:dr.ByPos;return l?s.join(this.right.lineAt(u,c,n,i,u)):this.left.lineAt(u,c,n,o,a).join(s)}forEachLine(t,e,n,o,a,i){let u=o+this.left.height,l=a+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,e,n,o,a,i),e>=l&&this.right.forEachLine(t,e,n,u,l,i);else{let s=this.lineAt(l,dr.ByPos,n,o,a);t<s.from&&this.left.forEachLine(t,s.from-1,n,o,a,i),s.to>=t&&s.from<=e&&i(s),e>s.to&&this.right.forEachLine(s.to+1,e,n,u,l,i)}}replace(t,e,n){let o=this.left.length+this.break;if(e<o)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-o,e-o,n));let a=[];t>0&&this.decomposeLeft(t,a);let i=a.length;for(let u of n)a.push(u);if(t>0&&KH(a,i-1),e<this.length){let u=a.length;this.decomposeRight(e,a),KH(a,u)}return ca.of(a)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,o=n+this.break;if(t>=o)return this.right.decomposeRight(t-o,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<o&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?ca.of(this.break?[t,null,e]:[t,e]):(this.left=Jb(this.left,t),this.right=Jb(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,o){let{left:a,right:i}=this,u=e+a.length+this.break,l=null;return o&&o.from<=e+a.length&&o.more?l=a=a.updateHeight(t,e,n,o):a.updateHeight(t,e,n),o&&o.from<=u+i.length&&o.more?l=i=i.updateHeight(t,u,n,o):i.updateHeight(t,u,n),l?this.balanced(a,i):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function KH(r,t){let e,n;r[t]==null&&(e=r[t-1])instanceof Zl&&(n=r[t+1])instanceof Zl&&r.splice(t-1,3,new Zl(e.length+1+n.length))}var qgt=5,IE=class r{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let n=Math.min(e,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof za?o.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new za(n-this.pos,-1)),this.writtenTo=n,e>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let o=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let i=e-t;n.block?this.addBlock(new Kb(i,o,n)):(i||a||o>=qgt)&&this.addLineDeco(o,a,i)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new za(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new Zl(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof za)return t;let e=new za(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let o=this.ensureLine();o.length+=n,o.collapsed+=n,o.widgetHeight=Math.max(o.widgetHeight,t),o.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof za)&&!this.isCovered?this.nodes.push(new za(0,-1)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=t;for(let o of this.nodes)o instanceof za&&o.updateHeight(this.oracle,n),n+=o?o.length:1;return this.nodes}static build(t,e,n,o){let a=new r(n,t);return We.spans(e,n,o,a,0),a.finish(n)}};function Qgt(r,t,e){let n=new NE;return We.compare(r,t,e,n,0),n.changes}var NE=class{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,o){(t<e||n&&n.heightRelevant||o&&o.heightRelevant)&&yE(t,e,this.changes,5)}};function Hgt(r,t){let e=r.getBoundingClientRect(),n=r.ownerDocument,o=n.defaultView||window,a=Math.max(0,e.left),i=Math.min(o.innerWidth,e.right),u=Math.max(0,e.top),l=Math.min(o.innerHeight,e.bottom);for(let s=r.parentNode;s&&s!=n.body;)if(s.nodeType==1){let c=s,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let d=c.getBoundingClientRect();a=Math.max(a,d.left),i=Math.min(i,d.right),u=Math.max(u,d.top),l=Math.min(s==r.parentNode?o.innerHeight:l,d.bottom)}s=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(s.nodeType==11)s=s.host;else break;return{left:a-e.left,right:Math.max(a,i)-e.left,top:u-(e.top+t),bottom:Math.max(u,l)-(e.top+t)}}function Vgt(r,t){let e=r.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}var rg=class{constructor(t,e,n,o){this.from=t,this.to=e,this.size=n,this.displaySize=o}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],a=e[n];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(t,e){return xt.replace({widget:new kE(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}},kE=class extends Qo{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}},tD=class{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=tV,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Je.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(aF).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new ME(e),this.stateDeco=t.facet(dg).filter(n=>typeof n!="function"),this.heightMap=ca.empty().applyChanges(this.stateDeco,xe.empty,this.heightOracle.setDoc(t.doc),[new Xi(0,0,0,t.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=xt.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let o=n?e.head:e.anchor;if(!t.some(({from:a,to:i})=>o>=a&&o<=i)){let{from:a,to:i}=this.lineBlockAt(o);t.push(new Jd(a,i))}}return this.viewports=t.sort((n,o)=>n.from-o.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?tV:new $E(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(Yv(t,this.scaler))})}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(dg).filter(c=>typeof c!="function");let o=t.changedRanges,a=Xi.extendWithRanges(o,Qgt(n,this.stateDeco,t?t.changes:go.empty(this.state.doc.length))),i=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);JH(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=i||rp)&&(t.flags|=2),u?(this.scrollAnchorPos=t.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=a.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<l.from||e.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,e));let s=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,t.flags|=this.updateForViewport(),(s||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(GV)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),o=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Je.RTL:Je.LTR;let i=this.heightOracle.mustRefreshForWrapping(a),u=e.getBoundingClientRect(),l=i||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let s=0,c=0;if(u.width&&u.height){let{scaleX:T,scaleY:R}=vV(e,u);(T>.005&&Math.abs(this.scaleX-T)>.005||R>.005&&Math.abs(this.scaleY-R)>.005)&&(this.scaleX=T,this.scaleY=R,s|=8,i=l=!0)}let f=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,s|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(o.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,s|=8);let p=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=yV(t.scrollDOM);let h=(this.printing?Vgt:Hgt)(e,this.paddingTop),m=h.top-this.pixelViewport.top,_=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let D=u.width;if((this.contentDOMWidth!=D||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=t.scrollDOM.clientHeight,s|=8),l){let T=t.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(T)&&(i=!0),i||o.lineWrapping&&Math.abs(D-this.contentDOMWidth)>o.charWidth){let{lineHeight:R,charWidth:C,textHeight:S}=t.docView.measureTextSize();i=R>0&&o.refresh(a,R,C,S,D/C,T),i&&(t.docView.minWidth=0,s|=8)}m>0&&_>0?c=Math.max(m,_):m<0&&_<0&&(c=Math.min(m,_)),JH();for(let R of this.viewports){let C=R.from==this.viewport.from?T:t.docView.measureVisibleLineHeights(R);this.heightMap=(i?ca.empty().applyChanges(this.stateDeco,xe.empty,this.heightOracle,[new Xi(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(o,0,i,new AE(R.from,C))}rp&&(s|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(s&2&&(s|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),s|=this.updateForViewport()),(s&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(i?[]:this.lineGaps,t)),s|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),s}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:i,visibleBottom:u}=this,l=new Jd(o.lineAt(i-n*1e3,dr.ByHeight,a,0,0).from,o.lineAt(u+(1-n)*1e3,dr.ByHeight,a,0,0).to);if(e){let{head:s}=e.range;if(s<l.from||s>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=o.lineAt(s,dr.ByPos,a,0,0),d;e.y=="center"?d=(f.top+f.bottom)/2-c/2:e.y=="start"||e.y=="nearest"&&s<l.from?d=f.top:d=f.bottom-c,l=new Jd(o.lineAt(d-1e3/2,dr.ByHeight,a,0,0).from,o.lineAt(d+c+1e3/2,dr.ByHeight,a,0,0).to)}}return l}mapViewport(t,e){let n=e.mapPos(t.from,-1),o=e.mapPos(t.to,1);return new Jd(this.heightMap.lineAt(n,dr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,dr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(t,dr.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(e,dr.ByPos,this.heightOracle,0,0),{visibleTop:i,visibleBottom:u}=this;return(t==0||o<=i-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||a>=u+Math.max(10,Math.min(n,250)))&&o>i-2*1e3&&a<u+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let o of t)e.touchesRange(o.from,o.to)||n.push(new rg(e.mapPos(o.from),e.mapPos(o.to),o.size,o.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,o=n?1e4:2e3,a=o>>1,i=o<<1;if(this.defaultTextDirection!=Je.LTR&&!n)return[];let u=[],l=(c,f,d,p)=>{if(f-c<a)return;let h=this.state.selection.main,m=[h.from];h.empty||m.push(h.to);for(let y of m)if(y>c&&y<f){l(c,y-10,d,p),l(y+10,f,d,p);return}let _=Zgt(t,y=>y.from>=d.from&&y.to<=d.to&&Math.abs(y.from-c)<a&&Math.abs(y.to-f)<a&&!m.some(D=>y.from<D&&y.to>D));if(!_){if(f<d.to&&e&&n&&e.visibleRanges.some(w=>w.from<=f&&w.to>=f)){let w=e.moveToLineBoundary(L.cursor(f),!1,!0).head;w>c&&(f=w)}let y=this.gapSize(d,c,f,p),D=n||y<2e6?y:2e6;_=new rg(c,f,y,D)}u.push(_)},s=c=>{if(c.length<i||c.type!=yo.Text)return;let f=jgt(c.from,c.to,this.stateDeco);if(f.total<i)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,p,h;if(n){let m=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,_,y;if(d!=null){let D=kb(f,d),w=((this.visibleBottom-this.visibleTop)/2+m)/c.height;_=D-w,y=D+w}else _=(this.visibleTop-c.top-m)/c.height,y=(this.visibleBottom-c.top+m)/c.height;p=Nb(f,_),h=Nb(f,y)}else{let m=f.total*this.heightOracle.charWidth,_=o*this.heightOracle.charWidth,y=0;if(m>2e6)for(let C of t)C.from>=c.from&&C.from<c.to&&C.size!=C.displaySize&&C.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=C.size-C.displaySize);let D=this.pixelViewport.left+y,w=this.pixelViewport.right+y,T,R;if(d!=null){let C=kb(f,d),S=((w-D)/2+_)/m;T=C-S,R=C+S}else T=(D-_)/m,R=(w+_)/m;p=Nb(f,T),h=Nb(f,R)}p>c.from&&l(c.from,p,c,f),h<c.to&&l(h,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(s):s(c);return u}gapSize(t,e,n,o){let a=kb(o,n)-kb(o,e);return this.heightOracle.lineWrapping?t.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(t){rg.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=xt.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];We.spans(t,this.viewport.from,this.viewport.to,{span(o,a){e.push({from:o,to:a})},point(){}},20);let n=e.length!=this.visibleRanges.length||this.visibleRanges.some((o,a)=>o.from!=e[a].from||o.to!=e[a].to);return this.visibleRanges=e,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||Yv(this.heightMap.lineAt(t,dr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||Yv(this.heightMap.lineAt(this.scaler.fromDOM(t),dr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Yv(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},Jd=class{constructor(t,e){this.from=t,this.to=e}};function jgt(r,t,e){let n=[],o=r,a=0;return We.spans(e,r,t,{span(){},point(i,u){i>o&&(n.push({from:o,to:i}),a+=i-o),o=u}},20),o<t&&(n.push({from:o,to:t}),a+=t-o),{total:a,ranges:n}}function Nb({total:r,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let n=Math.floor(r*e);for(let o=0;;o++){let{from:a,to:i}=t[o],u=i-a;if(n<=u)return a+n;n-=u}}function kb(r,t){let e=0;for(let{from:n,to:o}of r.ranges){if(t<=o){e+=t-n;break}e+=o-n}return e/r.total}function Zgt(r,t){for(let e of r)if(t(e))return e}var tV={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}},$E=class r{constructor(t,e,n){let o=0,a=0,i=0;this.viewports=n.map(({from:u,to:l})=>{let s=e.lineAt(u,dr.ByPos,t,0,0).top,c=e.lineAt(l,dr.ByPos,t,0,0).bottom;return o+=c-s,{from:u,to:l,top:s,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(e.height-o);for(let u of this.viewports)u.domTop=i+(u.top-a)*this.scale,i=u.domBottom=u.domTop+(u.bottom-u.top),a=u.bottom}toDOM(t){for(let e=0,n=0,o=0;;e++){let a=e<this.viewports.length?this.viewports[e]:null;if(!a||t<a.top)return o+(t-n)*this.scale;if(t<=a.bottom)return a.domTop+(t-a.top);n=a.bottom,o=a.domBottom}}fromDOM(t){for(let e=0,n=0,o=0;;e++){let a=e<this.viewports.length?this.viewports[e]:null;if(!a||t<a.domTop)return n+(t-o)/this.scale;if(t<=a.domBottom)return a.top+(t-a.domTop);n=a.bottom,o=a.domBottom}}eq(t){return t instanceof r?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to):!1}};function Yv(r,t){if(t.scale==1)return r;let e=t.toDOM(r.top),n=t.toDOM(r.bottom);return new Zi(r.from,r.length,e,n-e,Array.isArray(r._content)?r._content.map(o=>Yv(o,t)):r._content)}var $b=ut.define({combine:r=>r.join(" ")}),LE=ut.define({combine:r=>r.indexOf(!0)>-1}),UE=Ga.newName(),uj=Ga.newName(),lj=Ga.newName(),sj={"&light":"."+uj,"&dark":"."+lj};function BE(r,t,e){return new Ga(t,{finish(n){return/&/.test(n)?n.replace(/&\w*/,o=>{if(o=="&")return r;if(!e||!e[o])throw new RangeError(`Unsupported selector: ${o}`);return e[o]}):r+" "+n}})}var Ygt=BE("."+UE,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},sj),Xgt={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},lE=mt.ie&&mt.ie_version<=11,WE=class{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new pE,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let n of e)this.queue.push(n);(mt.ie&&mt.ie_version<=11||mt.ios&&t.composing)&&e.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&t.constructor.EDIT_CONTEXT!==!1&&!(mt.chrome&&mt.chrome_version<126)&&(this.editContext=new GE(t),t.state.facet(Vl)&&(t.contentDOM.editContext=this.editContext.editContext)),lE&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,n)=>e!=t[n]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,o=this.selectionRange;if(n.state.facet(Vl)?n.root.activeElement!=this.dom:!Bb(this.dom,o))return;let a=o.anchorNode&&n.docView.nearest(o.anchorNode);if(a&&a.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(mt.ie&&mt.ie_version<=11||mt.android&&mt.chrome)&&!n.state.selection.main.empty&&o.focusNode&&Jv(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=ag(t.root);if(!e)return!1;let n=mt.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&Jgt(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let o=Bb(this.dom,n);return o&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Vvt(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),o&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(n.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=e)n.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Xgt),lE&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),lE&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let o=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&ep(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,o=!1;for(let a of t){let i=this.readMutation(a);i&&(i.typeOver&&(o=!0),e==-1?{from:e,to:n}=i:(e=Math.min(i.from,e),n=Math.max(i.to,n)))}return{from:e,to:n,typeOver:o}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),o=this.selectionChanged&&Bb(this.dom,this.selectionRange);if(t<0&&!o)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new SE(this.view,t,e,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,o=JV(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),o}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(t.type=="attributes"),t.type=="attributes"&&(e.flags|=4),t.type=="childList"){let n=eV(e,t.previousSibling||t.target.previousSibling,-1),o=eV(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:o?e.posBefore(o):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Vl)!=t.state.facet(Vl)&&(t.view.contentDOM.editContext=t.state.facet(Vl)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function eV(r,t,e){for(;t;){let n=sr.get(t);if(n&&n.parent==r)return n;let o=t.parentNode;t=o!=r.dom?o:e>0?t.nextSibling:t.previousSibling}return null}function rV(r,t){let e=t.startContainer,n=t.startOffset,o=t.endContainer,a=t.endOffset,i=r.docView.domAtPos(r.state.selection.main.anchor);return Jv(i.node,i.offset,o,a)&&([e,n,o,a]=[o,a,e,n]),{anchorNode:e,anchorOffset:n,focusNode:o,focusOffset:a}}function Jgt(r,t){if(t.getComposedRanges){let o=t.getComposedRanges(r.root)[0];if(o)return rV(r,o)}let e=null;function n(o){o.preventDefault(),o.stopImmediatePropagation(),e=o.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",n,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",n,!0),e?rV(r,e):null}var GE=class{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=n=>{let{anchor:o}=t.state.selection.main,a={from:this.toEditorPos(n.updateRangeStart),to:this.toEditorPos(n.updateRangeEnd),insert:xe.of(n.text.split(`
`))};a.from==this.from&&o<this.from?a.from=o:a.to==this.to&&o>this.to&&(a.to=o),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,t.state.readOnly||uF(t,a,L.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd))),this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)))},this.handlers.characterboundsupdate=n=>{let o=[],a=null;for(let i=this.toEditorPos(n.rangeStart),u=this.toEditorPos(n.rangeEnd);i<u;i++){let l=t.coordsForChar(i);a=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||a||new DOMRect,o.push(a)}e.updateCharacterBounds(n.rangeStart,o)},this.handlers.textformatupdate=n=>{let o=[];for(let a of n.getTextFormats()){let i=a.underlineStyle,u=a.underlineThickness;if(i!="None"&&u!="None"){let l=`text-decoration: underline ${i=="Dashed"?"dashed ":i=="Squiggle"?"wavy ":""}${u=="Thin"?1:2}px`;o.push(xt.mark({attributes:{style:l}}).range(this.toEditorPos(a.rangeStart),this.toEditorPos(a.rangeEnd)))}}t.dispatch({effects:qV.of(xt.set(o))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{t.inputState.composing=-1,t.inputState.compositionFirstChange=null};for(let n in this.handlers)e.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let o=ag(n.root);o&&o.rangeCount&&this.editContext.updateSelectionBounds(o.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,o=this.pendingContextChange;return t.changes.iterChanges((a,i,u,l,s)=>{if(n)return;let c=s.length-(i-a);if(o&&i>=o.to)if(o.from==a&&o.to==i&&o.insert.eq(s)){o=this.pendingContextChange=null,e+=c,this.to+=c;return}else o=null,this.revertPending(t.state);if(a+=e,i+=e,i<=this.from)this.from+=c,this.to+=c;else if(a<this.to){if(a<this.from||i>this.to||this.to-this.from+s.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(a),this.toContextPos(i),s.toString()),this.to+=c}e+=c}),o&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange;!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.resetRange(t.state),this.editContext.updateText(0,this.editContext.text.length,t.state.doc.sliceString(this.from,this.to)),this.setSelection(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),o=this.toContextPos(e.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=o)&&this.editContext.updateSelection(n,o)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t){return t+this.from}toContextPos(t){return t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}},at=class r{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(o=>o.forEach(a=>n(a,this)))||(o=>this.update(o)),this.dispatch=this.dispatch.bind(this),this._root=t.root||Hvt(t.parent)||document,this.viewState=new tD(t.state||He.create(t)),t.scrollTo&&t.scrollTo.is(Ab)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Vv).map(o=>new eg(o));for(let o of this.plugins)o.update(this);this.observer=new WE(this),this.inputState=new OE(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Yb(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let e=t.length==1&&t[0]instanceof Yr?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,n=!1,o,a=this.state;for(let d of t){if(d.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=d.state}if(this.destroyed){this.viewState.state=a;return}let i=this.hasFocus,u=0,l=null;t.some(d=>d.annotation(oj))?(this.inputState.notifiedFocused=i,u=1):i!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=i,l=aj(a,i),l||(u=1));let s=this.observer.delayedAndroidKey,c=null;if(s?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(He.phrases)!=this.state.facet(He.phrases))return this.setState(a);o=Zb.create(this,a,t),o.flags|=u;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of t){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:p}=d.state.selection;f=new tg(p.empty?p:L.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of d.effects)p.is(Ab)&&(f=p.value.clip(this.state))}this.viewState.update(o,f),this.bidiCache=eD.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),e=this.docView.update(o),this.state.facet(jv)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet($b)!=o.state.facet($b)&&(this.viewState.mustMeasureContent=!0),(e||n||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!o.empty)for(let d of this.state.facet(xE))try{d(o)}catch(p){kn(this.state,p,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!JV(this,c)&&s.force&&ep(this.contentDOM,s.key,s.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new tD(t),this.plugins=t.facet(Vv).map(n=>new eg(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new Yb(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(Vv),n=t.state.facet(Vv);if(e!=n){let o=[];for(let a of n){let i=e.indexOf(a);if(i<0)o.push(new eg(a));else{let u=this.plugins[i];u.mustUpdate=t,o.push(u)}}for(let a of this.plugins)a.mustUpdate!=t&&a.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=t;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(n){kn(this.state,n,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,o=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:i}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(i=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(i<0)if(yV(n))a=-1,i=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(o);a=p.from,i=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];l&4||([this.measureRequests,s]=[s,this.measureRequests]);let c=s.map(p=>{try{return p.read(this)}catch(h){return kn(this.state,h),nV}}),f=Zb.create(this,this.state,[]),d=!1;f.flags|=l,e?e.flags|=l:e=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f),d&&this.docViewUpdate());for(let p=0;p<s.length;p++)if(c[p]!=nV)try{let h=s[p];h.write&&h.write(c[p],this)}catch(h){kn(this.state,h)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,i=-1;continue}else{let h=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-i;if(h>1||h<-1){o=o+h,n.scrollTop=o/this.scaleY,i=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let u of this.state.facet(xE))u(e)}get themeClasses(){return UE+" "+(this.state.facet(LE)?lj:uj)+" "+this.state.facet($b)}updateAttrs(){let t=oV(this,QV,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Vl)?"true":"false",class:"cm-content",style:`${mt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),oV(this,aF,e);let n=this.observer.ignore(()=>{let o=_E(this.contentDOM,this.contentAttrs,e),a=_E(this.dom,this.editorAttrs,t);return o||a});return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let o of n.effects)if(o.is(r.announce)){e&&(this.announceDOM.textContent=""),e=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(jv);let t=this.state.facet(r.cspNonce);Ga.mount(this.root,this.styleModules.concat(Ygt).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find(n=>n.spec==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return uE(this,t,WH(this,t,e,n))}moveByGroup(t,e){return uE(this,t,WH(this,t,e,n=>wgt(this,t.head,n)))}visualLineSide(t,e){let n=this.bidiSpans(t),o=this.textDirectionAt(t.from),a=n[e?n.length-1:0];return L.cursor(a.side(e,o)+t.from,a.forward(!e,o)?1:-1)}moveToLineBoundary(t,e,n=!0){return Dgt(this,t,e,n)}moveVertically(t,e,n){return uE(this,t,xgt(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),XV(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let o=this.state.doc.lineAt(t),a=this.bidiSpans(o),i=a[Yi.find(a,t-o.from,-1,e)];return uD(n,i.dir==Je.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(WV)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Kgt)return PV(t.length);let e=this.textDirectionAt(t.from),n;for(let a of this.bidiCache)if(a.from==t.from&&a.dir==e&&(a.fresh||AV(a.isolates,n=kH(this,t))))return a.order;n||(n=kH(this,t));let o=agt(t.text,e,n);return this.bidiCache.push(new eD(t.from,t.to,e,n,!0,o)),o}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||mt.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{gV(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Ab.of(new tg(typeof t=="number"?L.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return Ab.of(new tg(L.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return Tr.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return Tr.define(()=>({}),{eventObservers:t})}static theme(t,e){let n=Ga.newName(),o=[$b.of(n),jv.of(BE(`.${n}`,t))];return e&&e.dark&&o.push(LE.of(!0)),o}static baseTheme(t){return Wa.lowest(jv.of(BE("."+UE,t,sj)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),o=n&&sr.get(n)||sr.get(t);return((e=o?.rootView)===null||e===void 0?void 0:e.view)||null}};at.styleModule=jv;at.inputHandler=UV;at.clipboardInputFilter=nF;at.clipboardOutputFilter=oF;at.scrollHandler=zV;at.focusChangeEffect=BV;at.perLineTextDirection=WV;at.exceptionSink=LV;at.updateListener=xE;at.editable=Vl;at.mouseSelectionStyle=$V;at.dragMovesSelection=kV;at.clickAddsSelectionRange=NV;at.decorations=dg;at.outerDecorations=HV;at.atomicRanges=iF;at.bidiIsolatedRanges=VV;at.scrollMargins=jV;at.darkTheme=LE;at.cspNonce=ut.define({combine:r=>r.length?r[0]:""});at.contentAttributes=aF;at.editorAttributes=QV;at.lineWrapping=at.contentAttributes.of({class:"cm-lineWrapping"});at.announce=zt.define();var Kgt=4096,nV={},eD=class r{constructor(t,e,n,o,a,i){this.from=t,this.to=e,this.dir=n,this.isolates=o,this.fresh=a,this.order=i}static update(t,e){if(e.empty&&!t.some(a=>a.fresh))return t;let n=[],o=t.length?t[t.length-1].dir:Je.LTR;for(let a=Math.max(0,t.length-10);a<t.length;a++){let i=t[a];i.dir==o&&!e.touchesRange(i.from,i.to)&&n.push(new r(e.mapPos(i.from,1),e.mapPos(i.to,-1),i.dir,i.isolates,!1,i.order))}return n}};function oV(r,t,e){for(let n=r.state.facet(t),o=n.length-1;o>=0;o--){let a=n[o],i=typeof a=="function"?a(r):a;i&&gE(i,e)}return e}var t_t=mt.mac?"mac":mt.windows?"win":mt.linux?"linux":"key";function e_t(r,t){let e=r.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let o,a,i,u;for(let l=0;l<e.length-1;++l){let s=e[l];if(/^(cmd|meta|m)$/i.test(s))u=!0;else if(/^a(lt)?$/i.test(s))o=!0;else if(/^(c|ctrl|control)$/i.test(s))a=!0;else if(/^s(hift)?$/i.test(s))i=!0;else if(/^mod$/i.test(s))t=="mac"?u=!0:a=!0;else throw new Error("Unrecognized modifier name: "+s)}return o&&(n="Alt-"+n),a&&(n="Ctrl-"+n),u&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function Lb(r,t,e){return t.altKey&&(r="Alt-"+r),t.ctrlKey&&(r="Ctrl-"+r),t.metaKey&&(r="Meta-"+r),e!==!1&&t.shiftKey&&(r="Shift-"+r),r}var r_t=Wa.default(at.domEventHandlers({keydown(r,t){return dj(cj(t.state),r,t,"editor")}})),np=ut.define({enables:r_t}),aV=new WeakMap;function cj(r){let t=r.facet(np),e=aV.get(t);return e||aV.set(t,e=o_t(t.reduce((n,o)=>n.concat(o),[]))),e}function fj(r,t,e){return dj(cj(r.state),t,r,e)}var jl=null,n_t=4e3;function o_t(r,t=t_t){let e=Object.create(null),n=Object.create(null),o=(i,u)=>{let l=n[i];if(l==null)n[i]=u;else if(l!=u)throw new Error("Key binding "+i+" is used both as a regular binding and as a multi-stroke prefix")},a=(i,u,l,s,c)=>{var f,d;let p=e[i]||(e[i]=Object.create(null)),h=u.split(/ (?!$)/).map(y=>e_t(y,t));for(let y=1;y<h.length;y++){let D=h.slice(0,y).join(" ");o(D,!0),p[D]||(p[D]={preventDefault:!0,stopPropagation:!1,run:[w=>{let T=jl={view:w,prefix:D,scope:i};return setTimeout(()=>{jl==T&&(jl=null)},n_t),!0}]})}let m=h.join(" ");o(m,!1);let _=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((d=(f=p._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});l&&_.run.push(l),s&&(_.preventDefault=!0),c&&(_.stopPropagation=!0)};for(let i of r){let u=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let s of u){let c=e[s]||(e[s]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=i;for(let d in c)c[d].run.push(p=>f(p,zE))}let l=i[t]||i.key;if(l)for(let s of u)a(s,l,i.run,i.preventDefault,i.stopPropagation),i.shift&&a(s,"Shift-"+l,i.shift,i.preventDefault,i.stopPropagation)}return e}var zE=null;function dj(r,t,e,n){zE=t;let o=OH(t),a=Zr(o,0),i=vo(a)==o.length&&o!=" ",u="",l=!1,s=!1,c=!1;jl&&jl.view==e&&jl.scope==n&&(u=jl.prefix+" ",tj.indexOf(t.keyCode)<0&&(s=!0,jl=null));let f=new Set,d=_=>{if(_){for(let y of _.run)if(!f.has(y)&&(f.add(y),y(e)))return _.stopPropagation&&(c=!0),!0;_.preventDefault&&(_.stopPropagation&&(c=!0),s=!0)}return!1},p=r[n],h,m;return p&&(d(p[u+Lb(o,t,!i)])?l=!0:i&&(t.altKey||t.metaKey||t.ctrlKey)&&!(mt.windows&&t.ctrlKey&&t.altKey)&&(h=qu[t.keyCode])&&h!=o?(d(p[u+Lb(h,t,!0)])||t.shiftKey&&(m=Yd[t.keyCode])!=o&&m!=h&&d(p[u+Lb(m,t,!1)]))&&(l=!0):i&&t.shiftKey&&d(p[u+Lb(o,t,!0)])&&(l=!0),!l&&d(p._any)&&(l=!0)),s&&(l=!0),l&&c&&t.stopPropagation(),zE=null,l}var pg=class r{constructor(t,e,n,o,a){this.className=t,this.left=e,this.top=n,this.width=o,this.height=a}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,n){if(n.empty){let o=t.coordsAtPos(n.head,n.assoc||1);if(!o)return[];let a=pj(t);return[new r(e,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}else return a_t(t,e,n)}};function pj(r){let t=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Je.LTR?t.left:t.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:t.top-r.scrollDOM.scrollTop*r.scaleY}}function iV(r,t,e,n){let o=r.coordsAtPos(t,e*2);if(!o)return n;let a=r.dom.getBoundingClientRect(),i=(o.top+o.bottom)/2,u=r.posAtCoords({x:a.left+1,y:i}),l=r.posAtCoords({x:a.right-1,y:i});return u==null||l==null?n:{from:Math.max(n.from,Math.min(u,l)),to:Math.min(n.to,Math.max(u,l))}}function a_t(r,t,e){if(e.to<=r.viewport.from||e.from>=r.viewport.to)return[];let n=Math.max(e.from,r.viewport.from),o=Math.min(e.to,r.viewport.to),a=r.textDirection==Je.LTR,i=r.contentDOM,u=i.getBoundingClientRect(),l=pj(r),s=i.querySelector(".cm-line"),c=s&&window.getComputedStyle(s),f=u.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=u.right-(c?parseInt(c.paddingRight):0),p=RE(r,n),h=RE(r,o),m=p.type==yo.Text?p:null,_=h.type==yo.Text?h:null;if(m&&(r.lineWrapping||p.widgetLineBreaks)&&(m=iV(r,n,1,m)),_&&(r.lineWrapping||h.widgetLineBreaks)&&(_=iV(r,o,-1,_)),m&&_&&m.from==_.from&&m.to==_.to)return D(w(e.from,e.to,m));{let R=m?w(e.from,null,m):T(p,!1),C=_?w(null,e.to,_):T(h,!0),S=[];return(m||p).to<(_||h).from-(m&&_?1:0)||p.widgetLineBreaks>1&&R.bottom+r.defaultLineHeight/2<C.top?S.push(y(f,R.bottom,d,C.top)):R.bottom<C.top&&r.elementAtHeight((R.bottom+C.top)/2).type==yo.Text&&(R.bottom=C.top=(R.bottom+C.top)/2),D(R).concat(S).concat(D(C))}function y(R,C,S,A){return new pg(t,R-l.left,C-l.top-.01,S-R,A-C+.01)}function D({top:R,bottom:C,horizontal:S}){let A=[];for(let E=0;E<S.length;E+=2)A.push(y(S[E],R,S[E+1],C));return A}function w(R,C,S){let A=1e9,E=-1e9,N=[];function et(z,Dt,kt,Et,Ge){let st=r.coordsAtPos(z,z==S.to?-2:2),Tt=r.coordsAtPos(kt,kt==S.from?2:-2);!st||!Tt||(A=Math.min(st.top,Tt.top,A),E=Math.max(st.bottom,Tt.bottom,E),Ge==Je.LTR?N.push(a&&Dt?f:st.left,a&&Et?d:Tt.right):N.push(!a&&Et?f:Tt.left,!a&&Dt?d:st.right))}let X=R??S.from,Z=C??S.to;for(let z of r.visibleRanges)if(z.to>X&&z.from<Z)for(let Dt=Math.max(z.from,X),kt=Math.min(z.to,Z);;){let Et=r.state.doc.lineAt(Dt);for(let Ge of r.bidiSpans(Et)){let st=Ge.from+Et.from,Tt=Ge.to+Et.from;if(st>=kt)break;Tt>Dt&&et(Math.max(st,Dt),R==null&&st<=X,Math.min(Tt,kt),C==null&&Tt>=Z,Ge.dir)}if(Dt=Et.to+1,Dt>=kt)break}return N.length==0&&et(X,R==null,Z,C==null,r.textDirection),{top:A,bottom:E,horizontal:N}}function T(R,C){let S=u.top+(C?R.top:R.bottom);return{top:S,bottom:S,horizontal:[]}}}function i_t(r,t){return r.constructor==t.constructor&&r.eq(t)}var qE=class{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(zb)!=t.state.facet(zb)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,n=t.facet(zb);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;(t!=this.scaleX||e!=this.scaleY)&&(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some((e,n)=>!i_t(e,this.drawn[n]))){let e=this.dom.firstChild,n=0;for(let o of t)o.update&&e&&o.constructor&&this.drawn[n].constructor&&o.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(o.draw(),e);for(;e;){let o=e.nextSibling;e.remove(),e=o}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},zb=ut.define();function hj(r){return[Tr.define(t=>new qE(t,r)),zb.of(r)]}var mj=!mt.ios,hg=ut.define({combine(r){return Jn(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function vj(r={}){return[hg.of(r),u_t,l_t,s_t,GV.of(!0)]}function gj(r){return r.startState.facet(hg)!=r.state.facet(hg)}var u_t=hj({above:!0,markers(r){let{state:t}=r,e=t.facet(hg),n=[];for(let o of t.selection.ranges){let a=o==t.selection.main;if(o.empty?!a||mj:e.drawRangeCursor){let i=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=o.empty?o:L.cursor(o.head,o.head>o.anchor?-1:1);for(let l of pg.forRange(r,i,u))n.push(l)}}return n},update(r,t){r.transactions.some(n=>n.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=gj(r);return e&&uV(r.state,t),r.docChanged||r.selectionSet||e},mount(r,t){uV(t.state,r)},class:"cm-cursorLayer"});function uV(r,t){t.style.animationDuration=r.facet(hg).cursorBlinkRate+"ms"}var l_t=hj({above:!1,markers(r){return r.state.selection.ranges.map(t=>t.empty?[]:pg.forRange(r,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(r,t){return r.docChanged||r.selectionSet||r.viewportChanged||gj(r)},class:"cm-selectionLayer"}),QE={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};mj&&(QE[".cm-line"].caretColor=QE[".cm-content"].caretColor="transparent !important");var s_t=Wa.highest(at.theme(QE)),_j=zt.define({map(r,t){return r==null?null:t.mapPos(r)}}),Xv=gr.define({create(){return null},update(r,t){return r!=null&&(r=t.changes.mapPos(r)),t.effects.reduce((e,n)=>n.is(_j)?n.value:e,r)}}),c_t=Tr.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var t;let e=r.state.field(Xv);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(Xv)!=e||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,t=r.state.field(Xv),e=t!=null&&r.coordsAtPos(t);if(!e)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:e.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:e.bottom-e.top}}drawCursor(r){if(this.cursor){let{scaleX:t,scaleY:e}=this.view;r?(this.cursor.style.left=r.left/t+"px",this.cursor.style.top=r.top/e+"px",this.cursor.style.height=r.height/e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(Xv)!=r&&this.view.dispatch({effects:_j.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function yj(){return[Xv,c_t]}function lV(r,t,e,n,o){t.lastIndex=0;for(let a=r.iterRange(e,n),i=e,u;!a.next().done;i+=a.value.length)if(!a.lineBreak)for(;u=t.exec(a.value);)o(i+u.index,u)}function f_t(r,t){let e=r.visibleRanges;if(e.length==1&&e[0].from==r.viewport.from&&e[0].to==r.viewport.to)return e;let n=[];for(let{from:o,to:a}of e)o=Math.max(r.state.doc.lineAt(o).from,o-t),a=Math.min(r.state.doc.lineAt(a).to,a+t),n.length&&n[n.length-1].to>=o?n[n.length-1].to=a:n.push({from:o,to:a});return n}var HE=class{constructor(t){let{regexp:e,decoration:n,decorate:o,boundary:a,maxLength:i=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,o)this.addMatch=(u,l,s,c)=>o(c,s,s+u[0].length,u,l);else if(typeof n=="function")this.addMatch=(u,l,s,c)=>{let f=n(u,l,s);f&&c(s,s+u[0].length,f)};else if(n)this.addMatch=(u,l,s,c)=>c(s,s+u[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=i}createDeco(t){let e=new _i,n=e.add.bind(e);for(let{from:o,to:a}of f_t(t,this.maxLength))lV(t.state.doc,this.regexp,o,a,(i,u)=>this.addMatch(u,t,i,n));return e.finish()}updateDeco(t,e){let n=1e9,o=-1;return t.docChanged&&t.changes.iterChanges((a,i,u,l)=>{l>t.view.viewport.from&&u<t.view.viewport.to&&(n=Math.min(u,n),o=Math.max(l,o))}),t.viewportChanged||o-n>1e3?this.createDeco(t.view):o>-1?this.updateRange(t.view,e.map(t.changes),n,o):e}updateRange(t,e,n,o){for(let a of t.visibleRanges){let i=Math.max(a.from,n),u=Math.min(a.to,o);if(u>i){let l=t.state.doc.lineAt(i),s=l.to<u?t.state.doc.lineAt(u):l,c=Math.max(a.from,l.from),f=Math.min(a.to,s.to);if(this.boundary){for(;i>l.from;i--)if(this.boundary.test(l.text[i-1-l.from])){c=i;break}for(;u<s.to;u++)if(this.boundary.test(s.text[u-s.from])){f=u;break}}let d=[],p,h=(m,_,y)=>d.push(y.range(m,_));if(l==s)for(this.regexp.lastIndex=c-l.from;(p=this.regexp.exec(l.text))&&p.index<f-l.from;)this.addMatch(p,t,p.index+l.from,h);else lV(t.state.doc,this.regexp,c,f,(m,_)=>this.addMatch(_,t,m,h));e=e.update({filterFrom:c,filterTo:f,filter:(m,_)=>m<c||_>f,add:d})}}return e}},VE=/x/.unicode!=null?"gu":"g",d_t=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,VE),p_t={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},sE=null;function h_t(){var r;if(sE==null&&typeof document<"u"&&document.body){let t=document.body.style;sE=((r=t.tabSize)!==null&&r!==void 0?r:t.MozTabSize)!=null}return sE||!1}var qb=ut.define({combine(r){let t=Jn(r,{render:null,specialChars:d_t,addSpecialChars:null});return(t.replaceTabs=!h_t())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,VE)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,VE)),t}});function bj(r={}){return[qb.of(r),m_t()]}var sV=null;function m_t(){return sV||(sV=Tr.fromClass(class{constructor(r){this.view=r,this.decorations=xt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(qb)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new HE({regexp:r.specialChars,decoration:(t,e,n)=>{let{doc:o}=e.state,a=Zr(t[0],0);if(a==9){let i=o.lineAt(n),u=e.state.tabSize,l=zu(i.text,u,n-i.from);return xt.replace({widget:new ZE((u-l%u)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=xt.replace({widget:new jE(r,a)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let t=r.state.facet(qb);r.startState.facet(qb)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}var v_t="\u2022";function g_t(r){return r>=32?v_t:r==10?"\u2424":String.fromCharCode(9216+r)}var jE=class extends Qo{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=g_t(this.code),n=t.state.phrase("Control character")+" "+(p_t[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,n,e);if(o)return o;let a=document.createElement("span");return a.textContent=e,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}},ZE=class extends Qo{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}};function Dj(){return y_t}var __t=xt.line({class:"cm-activeLine"}),y_t=Tr.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let t=-1,e=[];for(let n of r.state.selection.ranges){let o=r.lineBlockAt(n.head);o.from>t&&(e.push(__t.range(o.from)),t=o.from)}return xt.set(e)}},{decorations:r=>r.decorations});var YE=2e3;function b_t(r,t,e){let n=Math.min(t.line,e.line),o=Math.max(t.line,e.line),a=[];if(t.off>YE||e.off>YE||t.col<0||e.col<0){let i=Math.min(t.off,e.off),u=Math.max(t.off,e.off);for(let l=n;l<=o;l++){let s=r.doc.line(l);s.length<=u&&a.push(L.range(s.from+i,s.to+u))}}else{let i=Math.min(t.col,e.col),u=Math.max(t.col,e.col);for(let l=n;l<=o;l++){let s=r.doc.line(l),c=Eb(s.text,i,r.tabSize,!0);if(c<0)a.push(L.cursor(s.to));else{let f=Eb(s.text,u,r.tabSize);a.push(L.range(s.from+c,s.from+f))}}}return a}function D_t(r,t){let e=r.coordsAtPos(r.viewport.from);return e?Math.round(Math.abs((e.left-t)/r.defaultCharacterWidth)):-1}function cV(r,t){let e=r.posAtCoords({x:t.clientX,y:t.clientY},!1),n=r.state.doc.lineAt(e),o=e-n.from,a=o>YE?-1:o==n.length?D_t(r,t.clientX):zu(n.text,r.state.tabSize,e-n.from);return{line:n.number,col:a,off:o}}function w_t(r,t){let e=cV(r,t),n=r.state.selection;return e?{update(o){if(o.docChanged){let a=o.changes.mapPos(o.startState.doc.line(e.line).from),i=o.state.doc.lineAt(a);e={line:i.number,col:e.col,off:Math.min(e.off,i.length)},n=n.map(o.changes)}},get(o,a,i){let u=cV(r,o);if(!u)return n;let l=b_t(r.state,e,u);return l.length?i?L.create(l.concat(n.ranges)):L.create(l):n}}:null}function wj(r){let t=r?.eventFilter||(e=>e.altKey&&e.button==0);return at.mouseSelectionStyle.of((e,n)=>t(n)?w_t(e,n):null)}var x_t={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},T_t={style:"cursor: crosshair"};function xj(r={}){let[t,e]=x_t[r.key||"Alt"],n=Tr.fromClass(class{constructor(o){this.view=o,this.isDown=!1}set(o){this.isDown!=o&&(this.isDown=o,this.view.update([]))}},{eventObservers:{keydown(o){this.set(o.keyCode==t||e(o))},keyup(o){(o.keyCode==t||!e(o))&&this.set(!1)},mousemove(o){this.set(e(o))}}});return[n,at.contentAttributes.of(o=>{var a;return!((a=o.plugin(n))===null||a===void 0)&&a.isDown?T_t:null})]}var Hv="-10000px",rD=class{constructor(t,e,n,o){this.facet=e,this.createTooltipView=n,this.removeTooltipView=o,this.input=t.state.facet(e),this.tooltips=this.input.filter(i=>i);let a=null;this.tooltipViews=this.tooltips.map(i=>a=n(i,a))}update(t,e){var n;let o=t.state.facet(this.facet),a=o.filter(l=>l);if(o===this.input){for(let l of this.tooltipViews)l.update&&l.update(t);return!1}let i=[],u=e?[]:null;for(let l=0;l<a.length;l++){let s=a[l],c=-1;if(s){for(let f=0;f<this.tooltips.length;f++){let d=this.tooltips[f];d&&d.create==s.create&&(c=f)}if(c<0)i[l]=this.createTooltipView(s,l?i[l-1]:null),u&&(u[l]=!!s.above);else{let f=i[l]=this.tooltipViews[c];u&&(u[l]=e[c]),f.update&&f.update(t)}}}for(let l of this.tooltipViews)i.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return e&&(u.forEach((l,s)=>e[s]=l),e.length=u.length),this.input=o,this.tooltips=a,this.tooltipViews=i,!0}};function R_t(r){let{win:t}=r;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}var cE=ut.define({combine:r=>{var t,e,n;return{position:mt.ios?"absolute":((t=r.find(o=>o.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=r.find(o=>o.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((n=r.find(o=>o.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||R_t}}}),fV=new WeakMap,lF=Tr.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=r.state.facet(cE);this.position=t.position,this.parent=t.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new rD(r,mg,(e,n)=>this.createTooltip(e,n),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(r,this.above);t&&this.observeIntersection();let e=t||r.geometryChanged,n=r.state.facet(cE);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;e=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(r,t){let e=r.create(this.view),n=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),r.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let o=document.createElement("div");o.className="cm-tooltip-arrow",e.dom.appendChild(o)}return e.dom.style.position=this.position,e.dom.style.top=Hv,e.dom.style.left="0px",this.container.insertBefore(e.dom,n),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var r,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(mt.gecko)n=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==Hv&&o.style.left=="0px"){let a=o.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((o,a)=>{let i=this.manager.tooltipViews[a];return i.getCoords?i.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(cE).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(r){var t;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let u of this.manager.tooltipViews)u.dom.style.position="absolute"}let{editor:e,space:n,scaleX:o,scaleY:a}=r,i=[];for(let u=0;u<this.manager.tooltips.length;u++){let l=this.manager.tooltips[u],s=this.manager.tooltipViews[u],{dom:c}=s,f=r.pos[u],d=r.size[u];if(!f||f.bottom<=Math.max(e.top,n.top)||f.top>=Math.min(e.bottom,n.bottom)||f.right<Math.max(e.left,n.left)-.1||f.left>Math.min(e.right,n.right)+.1){c.style.top=Hv;continue}let p=l.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=p?7:0,m=d.right-d.left,_=(t=fV.get(s))!==null&&t!==void 0?t:d.bottom-d.top,y=s.offset||S_t,D=this.view.textDirection==Je.LTR,w=d.width>n.right-n.left?D?n.left:n.right-d.width:D?Math.max(n.left,Math.min(f.left-(p?14:0)+y.x,n.right-m)):Math.min(Math.max(n.left,f.left-m+(p?14:0)-y.x),n.right-m),T=this.above[u];!l.strictSide&&(T?f.top-(d.bottom-d.top)-y.y<n.top:f.bottom+(d.bottom-d.top)+y.y>n.bottom)&&T==n.bottom-f.bottom>f.top-n.top&&(T=this.above[u]=!T);let R=(T?f.top-n.top:n.bottom-f.bottom)-h;if(R<_&&s.resize!==!1){if(R<this.view.defaultLineHeight){c.style.top=Hv;continue}fV.set(s,_),c.style.height=(_=R)/a+"px"}else c.style.height&&(c.style.height="");let C=T?f.top-_-h-y.y:f.bottom+h+y.y,S=w+m;if(s.overlap!==!0)for(let A of i)A.left<S&&A.right>w&&A.top<C+_&&A.bottom>C&&(C=T?A.top-_-2-h:A.bottom+h+2);if(this.position=="absolute"?(c.style.top=(C-r.parent.top)/a+"px",c.style.left=(w-r.parent.left)/o+"px"):(c.style.top=C/a+"px",c.style.left=w/o+"px"),p){let A=f.left+(D?y.x:-y.x)-(w+14-7);p.style.left=A/o+"px"}s.overlap!==!0&&i.push({left:w,top:C,right:S,bottom:C+_}),c.classList.toggle("cm-tooltip-above",T),c.classList.toggle("cm-tooltip-below",!T),s.positioned&&s.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=Hv}},{eventObservers:{scroll(){this.maybeMeasure()}}}),C_t=at.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),S_t={x:0,y:0},mg=ut.define({enables:[lF,C_t]}),nD=ut.define({combine:r=>r.reduce((t,e)=>t.concat(e),[])}),oD=class r{static create(t){return new r(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new rD(t,nD,(e,n)=>this.createHostedView(e,n),e=>e.dom.remove())}createHostedView(t,e){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)(t=e.destroy)===null||t===void 0||t.call(e)}passProp(t){let e;for(let n of this.manager.tooltipViews){let o=n[t];if(o!==void 0){if(e===void 0)e=o;else if(e!==o)return}}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},O_t=mg.compute([nD],r=>{let t=r.facet(nD);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var n;return(n=e.end)!==null&&n!==void 0?n:e.pos})),create:oD.create,above:t[0].above,arrow:t.some(e=>e.arrow)}}),XE=class{constructor(t,e,n,o,a){this.view=t,this.source=e,this.field=n,this.setHover=o,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,n=t.docView.nearest(e.target);if(!n)return;let o,a=1;if(n instanceof ug)o=n.posAtStart;else{if(o=t.posAtCoords(e),o==null)return;let u=t.coordsAtPos(o);if(!u||e.y<u.top||e.y>u.bottom||e.x<u.left-t.defaultCharacterWidth||e.x>u.right+t.defaultCharacterWidth)return;let l=t.bidiSpans(t.state.doc.lineAt(o)).find(c=>c.from<=o&&c.to>=o),s=l&&l.dir==Je.RTL?-1:1;a=e.x<u.left?-s:s}let i=this.source(t,o,a);if(i?.then){let u=this.pending={pos:o};i.then(l=>{this.pending==u&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>kn(t.state,l,"hover tooltip"))}else i&&!(Array.isArray(i)&&!i.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(i)?i:[i])})}get tooltip(){let t=this.view.plugin(lF),e=t?t.manager.tooltips.findIndex(n=>n.create==oD.create):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:o,tooltip:a}=this;if(o.length&&a&&!E_t(a.dom,t)||this.pending){let{pos:i}=o[0]||this.pending,u=(n=(e=o[0])===null||e===void 0?void 0:e.end)!==null&&n!==void 0?n:i;(i==u?this.view.posAtCoords(this.lastMove)!=i:!F_t(this.view,i,u,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:n}=this;n&&n.dom.contains(t.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=n=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},Ub=4;function E_t(r,t){let{left:e,right:n,top:o,bottom:a}=r.getBoundingClientRect(),i;if(i=r.querySelector(".cm-tooltip-arrow")){let u=i.getBoundingClientRect();o=Math.min(u.top,o),a=Math.max(u.bottom,a)}return t.clientX>=e-Ub&&t.clientX<=n+Ub&&t.clientY>=o-Ub&&t.clientY<=a+Ub}function F_t(r,t,e,n,o,a){let i=r.scrollDOM.getBoundingClientRect(),u=r.documentTop+r.documentPadding.top+r.contentHeight;if(i.left>n||i.right<n||i.top>o||Math.min(i.bottom,u)<o)return!1;let l=r.posAtCoords({x:n,y:o},!1);return l>=t&&l<=e}function Tj(r,t={}){let e=zt.define(),n=gr.define({create(){return[]},update(o,a){if(o.length&&(t.hideOnChange&&(a.docChanged||a.selection)?o=[]:t.hideOn&&(o=o.filter(i=>!t.hideOn(a,i))),a.docChanged)){let i=[];for(let u of o){let l=a.changes.mapPos(u.pos,-1,ln.TrackDel);if(l!=null){let s=Object.assign(Object.create(null),u);s.pos=l,s.end!=null&&(s.end=a.changes.mapPos(s.end)),i.push(s)}}o=i}for(let i of a.effects)i.is(e)&&(o=i.value),i.is(M_t)&&(o=[]);return o},provide:o=>nD.from(o)});return{active:n,extension:[n,Tr.define(o=>new XE(o,r,n,e,t.hoverTime||300)),O_t]}}function sF(r,t){let e=r.plugin(lF);if(!e)return null;let n=e.manager.tooltips.indexOf(t);return n<0?null:e.manager.tooltipViews[n]}var M_t=zt.define();var dV=ut.define({combine(r){let t,e;for(let n of r)t=t||n.topContainer,e=e||n.bottomContainer;return{topContainer:t,bottomContainer:e}}});function Pc(r,t){let e=r.plugin(Rj),n=e?e.specs.indexOf(t):-1;return n>-1?e.panels[n]:null}var Rj=Tr.fromClass(class{constructor(r){this.input=r.state.facet(Ac),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(r));let t=r.state.facet(dV);this.top=new Kd(r,!0,t.topContainer),this.bottom=new Kd(r,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(r){let t=r.state.facet(dV);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Kd(r.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Kd(r.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=r.state.facet(Ac);if(e!=this.input){let n=e.filter(l=>l),o=[],a=[],i=[],u=[];for(let l of n){let s=this.specs.indexOf(l),c;s<0?(c=l(r.view),u.push(c)):(c=this.panels[s],c.update&&c.update(r)),o.push(c),(c.top?a:i).push(c)}this.specs=n,this.panels=o,this.top.sync(a),this.bottom.sync(i);for(let l of u)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>at.scrollMargins.of(t=>{let e=t.plugin(r);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})}),Kd=class{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=pV(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=pV(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}};function pV(r){let t=r.nextSibling;return r.remove(),t}var Ac=ut.define({enables:Rj}),fa=class extends gi{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}};fa.prototype.elementClass="";fa.prototype.toDOM=void 0;fa.prototype.mapMode=ln.TrackBefore;fa.prototype.startSide=fa.prototype.endSide=-1;fa.prototype.point=!0;var Qb=ut.define(),A_t=ut.define(),P_t={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>We.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ng=ut.define();function cF(r){return[Cj(),ng.of(Object.assign(Object.assign({},P_t),r))]}var JE=ut.define({combine:r=>r.some(t=>t)});function Cj(r){let t=[I_t];return r&&r.fixed===!1&&t.push(JE.of(!0)),t}var I_t=Tr.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(ng).map(t=>new aD(r,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!r.state.facet(JE),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let t=this.prevViewport,e=r.view.viewport,n=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(n<(e.to-e.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(JE)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let t=this.dom.nextSibling;r&&this.dom.remove();let e=We.iter(this.view.state.facet(Qb),this.view.viewport.from),n=[],o=this.gutters.map(a=>new tF(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let i=!0;for(let u of a.type)if(u.type==yo.Text&&i){KE(e,n,u.from);for(let l of o)l.line(this.view,u,n);i=!1}else if(u.widget)for(let l of o)l.widget(this.view,u)}else if(a.type==yo.Text){KE(e,n,a.from);for(let i of o)i.line(this.view,a,n)}else if(a.widget)for(let i of o)i.widget(this.view,a);for(let a of o)a.finish();r&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(r){let t=r.startState.facet(ng),e=r.state.facet(ng),n=r.docChanged||r.heightChanged||r.viewportChanged||!We.eq(r.startState.facet(Qb),r.state.facet(Qb),r.view.viewport.from,r.view.viewport.to);if(t==e)for(let o of this.gutters)o.update(r)&&(n=!0);else{n=!0;let o=[];for(let a of e){let i=t.indexOf(a);i<0?o.push(new aD(this.view,a)):(this.gutters[i].update(r),o.push(this.gutters[i]))}for(let a of this.gutters)a.dom.remove(),o.indexOf(a)<0&&a.destroy();for(let a of o)this.dom.appendChild(a.dom);this.gutters=o}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>at.scrollMargins.of(t=>{let e=t.plugin(r);return!e||e.gutters.length==0||!e.fixed?null:t.textDirection==Je.LTR?{left:e.dom.offsetWidth*t.scaleX}:{right:e.dom.offsetWidth*t.scaleX}})});function hV(r){return Array.isArray(r)?r:[r]}function KE(r,t,e){for(;r.value&&r.from<=e;)r.from==e&&t.push(r.value),r.next()}var tF=class{constructor(t,e,n){this.gutter=t,this.height=n,this.i=0,this.cursor=We.iter(t.markers,e.from)}addElement(t,e,n){let{gutter:o}=this,a=(e.top-this.height)/t.scaleY,i=e.height/t.scaleY;if(this.i==o.elements.length){let u=new iD(t,i,a,n);o.elements.push(u),o.dom.appendChild(u.dom)}else o.elements[this.i].update(t,i,a,n);this.height=e.bottom,this.i++}line(t,e,n){let o=[];KE(this.cursor,o,e.from),n.length&&(o=o.concat(n));let a=this.gutter.config.lineMarker(t,e,o);a&&o.unshift(a);let i=this.gutter;o.length==0&&!i.config.renderEmptyElements||this.addElement(t,e,o)}widget(t,e){let n=this.gutter.config.widgetMarker(t,e.widget,e),o=n?[n]:null;for(let a of t.state.facet(A_t)){let i=a(t,e.widget,e);i&&(o||(o=[])).push(i)}o&&this.addElement(t,e,o)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}},aD=class{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,o=>{let a=o.target,i;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();i=(l.top+l.bottom)/2}else i=o.clientY;let u=t.lineBlockAtHeight(i-t.documentTop);e.domEventHandlers[n](t,u,o)&&o.preventDefault()});this.markers=hV(e.markers(t)),e.initialSpacer&&(this.spacer=new iD(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=hV(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],t);o!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[o])}let n=t.view.viewport;return!We.eq(this.markers,e,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}},iD=class{constructor(t,e,n,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,o)}update(t,e,n,o){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),N_t(this.markers,o)||this.setMarkers(t,o)}setMarkers(t,e){let n="cm-gutterElement",o=this.dom.firstChild;for(let a=0,i=0;;){let u=i,l=a<e.length?e[a++]:null,s=!1;if(l){let c=l.elementClass;c&&(n+=" "+c);for(let f=i;f<this.markers.length;f++)if(this.markers[f].compare(l)){u=f,s=!0;break}}else u=this.markers.length;for(;i<u;){let c=this.markers[i++];if(c.toDOM){c.destroy(o);let f=o.nextSibling;o.remove(),o=f}}if(!l)break;l.toDOM&&(s?o=o.nextSibling:this.dom.insertBefore(l.toDOM(t),o)),s&&i++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}};function N_t(r,t){if(r.length!=t.length)return!1;for(let e=0;e<r.length;e++)if(!r[e].compare(t[e]))return!1;return!0}var k_t=ut.define(),$_t=ut.define(),tp=ut.define({combine(r){return Jn(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let o in e){let a=n[o],i=e[o];n[o]=a?(u,l,s)=>a(u,l,s)||i(u,l,s):i}return n}})}}),og=class extends fa{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}};function fE(r,t){return r.state.facet(tp).formatNumber(t,r.state)}var L_t=ng.compute([tp],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(k_t)},lineMarker(t,e,n){return n.some(o=>o.toDOM)?null:new og(fE(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,n)=>{for(let o of t.state.facet($_t)){let a=o(t,e,n);if(a)return a}return null},lineMarkerChange:t=>t.startState.facet(tp)!=t.state.facet(tp),initialSpacer(t){return new og(fE(t,mV(t.state.doc.lines)))},updateSpacer(t,e){let n=fE(e.view,mV(e.view.state.doc.lines));return n==t.number?t:new og(n)},domEventHandlers:r.facet(tp).domEventHandlers}));function Sj(r={}){return[tp.of(r),Cj(),L_t]}function mV(r){let t=9;for(;t<r;)t=t*10+9;return t}var U_t=new class extends fa{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},B_t=Qb.compute(["selection"],r=>{let t=[],e=-1;for(let n of r.selection.ranges){let o=r.doc.lineAt(n.head).from;o>e&&(e=o,t.push(U_t.range(o)))}return We.of(t)});function Oj(){return B_t}var W_t=0,vg=class{constructor(t,e){this.from=t,this.to=e}},ae=class{constructor(t={}){this.id=W_t++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Kn.match(t)),e=>{let n=t(e);return n===void 0?null:[this,n]}}};ae.closedBy=new ae({deserialize:r=>r.split(" ")});ae.openedBy=new ae({deserialize:r=>r.split(" ")});ae.group=new ae({deserialize:r=>r.split(" ")});ae.isolate=new ae({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});ae.contextHash=new ae({perNode:!0});ae.lookAhead=new ae({perNode:!0});ae.mounted=new ae({perNode:!0});var op=class{constructor(t,e,n){this.tree=t,this.overlay=e,this.parser=n}static get(t){return t&&t.props&&t.props[ae.mounted.id]}},G_t=Object.create(null),Kn=class r{constructor(t,e,n,o=0){this.name=t,this.props=e,this.id=n,this.flags=o}static define(t){let e=t.props&&t.props.length?Object.create(null):G_t,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),o=new r(t.name||"",e,t.id,n);if(t.props){for(let a of t.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[a[0].id]=a[1]}}return o}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(ae.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let o of n.split(" "))e[o]=t[n];return n=>{for(let o=n.prop(ae.group),a=-1;a<(o?o.length:0);a++){let i=e[a<0?n.name:o[a]];if(i)return i}}}};Kn.none=new Kn("",Object.create(null),0,8);var gg=class r{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let o=null;for(let a of t){let i=a(n);i&&(o||(o=Object.assign({},n.props)),o[i[0].id]=i[1])}e.push(o?new Kn(n.name,o,n.id,n.flags):n)}return new r(e)}},cD=new WeakMap,Ej=new WeakMap,Fr;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Fr||(Fr={}));var Wr=class r{constructor(t,e,n,o,a){if(this.type=t,this.children=e,this.positions=n,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[i,u]of a)this.props[typeof i=="number"?i:i.id]=u}}toString(){let t=op.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let n of this.children){let o=n.toString();o&&(e&&(e+=","),e+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new yg(this.topNode,t)}cursorAt(t,e=0,n=0){let o=cD.get(this)||this.topNode,a=new yg(o);return a.moveTo(t,e),cD.set(this,a._tree),a}get topNode(){return new Qa(this,0,0,null)}resolve(t,e=0){let n=_g(cD.get(this)||this.topNode,t,e,!1);return cD.set(this,n),n}resolveInner(t,e=0){let n=_g(Ej.get(this)||this.topNode,t,e,!0);return Ej.set(this,n),n}resolveStack(t,e=0){return z_t(this,t,e)}iterate(t){let{enter:e,leave:n,from:o=0,to:a=this.length}=t,i=t.mode||0,u=(i&Fr.IncludeAnonymous)>0;for(let l=this.cursor(i|Fr.IncludeAnonymous);;){let s=!1;if(l.from<=a&&l.to>=o&&(!u&&l.type.isAnonymous||e(l)!==!1)){if(l.firstChild())continue;s=!0}for(;s&&n&&(u||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;s=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:gF(Kn.none,this.children,this.positions,0,this.children.length,0,this.length,(e,n,o)=>new r(this.type,e,n,o,this.propValues),t.makeTree||((e,n,o)=>new r(Kn.none,e,n,o)))}static build(t){return q_t(t)}};Wr.empty=new Wr(Kn.none,[],[],0);var fF=class r{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new r(this.buffer,this.index)}},Kl=class r{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return Kn.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],o=this.set.types[e],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),t+=4,n==t)return a;let i=[];for(;t<n;)i.push(this.childString(t)),t=this.buffer[t+3];return a+"("+i.join(",")+")"}findChild(t,e,n,o,a){let{buffer:i}=this,u=-1;for(let l=t;l!=e&&!(Aj(a,o,i[l+1],i[l+2])&&(u=l,n>0));l=i[l+3]);return u}slice(t,e,n){let o=this.buffer,a=new Uint16Array(e-t),i=0;for(let u=t,l=0;u<e;){a[l++]=o[u++],a[l++]=o[u++]-n;let s=a[l++]=o[u++]-n;a[l++]=o[u++]-t,i=Math.max(i,s)}return new r(a,i,this.set)}};function Aj(r,t,e,n){switch(r){case-2:return e<t;case-1:return n>=t&&e<t;case 0:return e<t&&n>t;case 1:return e<=t&&n>t;case 2:return n>t;case 4:return!0}}function _g(r,t,e,n){for(var o;r.from==r.to||(e<1?r.from>=t:r.from>t)||(e>-1?r.to<=t:r.to<t);){let i=!n&&r instanceof Qa&&r.index<0?null:r.parent;if(!i)return r;r=i}let a=n?0:Fr.IgnoreOverlays;if(n)for(let i=r,u=i.parent;u;i=u,u=i.parent)i instanceof Qa&&i.index<0&&((o=u.enter(t,e,a))===null||o===void 0?void 0:o.from)!=i.from&&(r=u);for(;;){let i=r.enter(t,e,a);if(!i)return r;r=i}}var dD=class{cursor(t=0){return new yg(this,t)}getChild(t,e=null,n=null){let o=Fj(this,t,e,n);return o.length?o[0]:null}getChildren(t,e=null,n=null){return Fj(this,t,e,n)}resolve(t,e=0){return _g(this,t,e,!1)}resolveInner(t,e=0){return _g(this,t,e,!0)}matchContext(t){return dF(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),n=this;for(;e;){let o=e.lastChild;if(!o||o.to!=e.to)break;o.type.isError&&o.from==o.to?(n=e,e=o.prevSibling):e=o}return n}get node(){return this}get next(){return this.parent}},Qa=class r extends dD{constructor(t,e,n,o){super(),this._tree=t,this.from=e,this.index=n,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,o,a=0){for(let i=this;;){for(let{children:u,positions:l}=i._tree,s=e>0?u.length:-1;t!=s;t+=e){let c=u[t],f=l[t]+i.from;if(Aj(o,n,f,f+c.length)){if(c instanceof Kl){if(a&Fr.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,e,n-f,o);if(d>-1)return new Ic(new pF(i,c,t,f),null,d)}else if(a&Fr.IncludeAnonymous||!c.type.isAnonymous||vF(c)){let d;if(!(a&Fr.IgnoreMounts)&&(d=op.get(c))&&!d.overlay)return new r(d.tree,f,t,i);let p=new r(c,f,t,i);return a&Fr.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(e<0?c.children.length-1:0,e,n,o)}}}if(a&Fr.IncludeAnonymous||!i.type.isAnonymous||(i.index>=0?t=i.index+e:t=e<0?-1:i._parent._tree.children.length,i=i._parent,!i))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let o;if(!(n&Fr.IgnoreOverlays)&&(o=op.get(this._tree))&&o.overlay){let a=t-this.from;for(let{from:i,to:u}of o.overlay)if((e>0?i<=a:i<a)&&(e<0?u>=a:u>a))return new r(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Fj(r,t,e,n){let o=r.cursor(),a=[];if(!o.firstChild())return a;if(e!=null){for(let i=!1;!i;)if(i=o.type.is(e),!o.nextSibling())return a}for(;;){if(n!=null&&o.type.is(n))return a;if(o.type.is(t)&&a.push(o.node),!o.nextSibling())return n==null?a:[]}}function dF(r,t,e=t.length-1){for(let n=r;e>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[e]&&t[e]!=n.name)return!1;e--}}return!0}var pF=class{constructor(t,e,n,o){this.parent=t,this.buffer=e,this.index=n,this.start=o}},Ic=class r extends dD{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){super(),this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.context.start,n);return a<0?null:new r(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&Fr.ExcludeBuffers)return null;let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return a<0?null:new r(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new r(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new r(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,o=this.index+4,a=n.buffer[this.index+3];if(a>o){let i=n.buffer[this.index+1];t.push(n.slice(o,a,i)),e.push(0)}return new Wr(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function Pj(r){if(!r.length)return null;let t=0,e=r[0];for(let a=1;a<r.length;a++){let i=r[a];(i.from>e.from||i.to<e.to)&&(e=i,t=a)}let n=e instanceof Qa&&e.index<0?null:e.parent,o=r.slice();return n?o[t]=n:o.splice(t,1),new hF(o,e)}var hF=class{constructor(t,e){this.heads=t,this.node=e}get next(){return Pj(this.heads)}};function z_t(r,t,e){let n=r.resolveInner(t,e),o=null;for(let a=n instanceof Qa?n:n.context.parent;a;a=a.parent)if(a.index<0){let i=a.parent;(o||(o=[n])).push(i.resolve(t,e)),a=i}else{let i=op.get(a.tree);if(i&&i.overlay&&i.overlay[0].from<=t&&i.overlay[i.overlay.length-1].to>=t){let u=new Qa(i.tree,i.overlay[0].from+a.from,-1,a);(o||(o=[n])).push(_g(u,t,e,!1))}}return o?Pj(o):n}var yg=class{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Qa)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let n=t._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:n,buffer:o}=this.buffer;return this.type=e||o.set.types[o.buffer[t]],this.from=n+o.buffer[t+1],this.to=n+o.buffer[t+2],!0}yield(t){return t?t instanceof Qa?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?n&Fr.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Fr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Fr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let o=n<0?0:this.stack[n]+4;if(this.index!=o)return this.yieldBuf(e.findChild(o,this.index,-1,0,4))}else{let o=e.buffer[this.index+3];if(o<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(o)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:o}=this;if(o){if(t>0){if(this.index<o.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;({index:e,parent:n}=o)}else({index:e,_parent:n}=this._tree);for(;n;{index:e,_parent:n}=n)if(e>-1)for(let a=e+t,i=t<0?-1:n._tree.children.length;a!=i;a+=t){let u=n._tree.children[a];if(this.mode&Fr.IncludeAnonymous||u instanceof Kl||!u.type.isAnonymous||vF(u))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let o=this.index,a=this.stack.length;a>=0;){for(let i=t;i;i=i._parent)if(i.index==o){if(o==this.index)return i;e=i,n=a+1;break t}o=this.stack[--a]}for(let o=n;o<this.stack.length;o++)e=new Ic(this.buffer,e,this.stack[o]);return this.bufferNode=new Ic(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let o=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(o=!0)}for(;;){if(o&&e&&e(this),o=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,o=!0}}}matchContext(t){if(!this.buffer)return dF(this.node.parent,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let o=t.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return dF(this._tree,t,o);let i=n[e.buffer[this.stack[a]]];if(!i.isAnonymous){if(t[o]&&t[o]!=i.name)return!1;o--}}return!0}};function vF(r){return r.children.some(t=>t instanceof Kl||!t.type.isAnonymous||vF(t))}function q_t(r){var t;let{buffer:e,nodeSet:n,maxBufferLength:o=1024,reused:a=[],minRepeatType:i=n.types.length}=r,u=Array.isArray(e)?new fF(e,e.length):e,l=n.types,s=0,c=0;function f(R,C,S,A,E,N){let{id:et,start:X,end:Z,size:z}=u,Dt=c,kt=s;for(;z<0;)if(u.next(),z==-1){let $n=a[et];S.push($n),A.push(X-R);return}else if(z==-3){s=et;return}else if(z==-4){c=et;return}else throw new RangeError(`Unrecognized record size: ${z}`);let Et=l[et],Ge,st,Tt=X-R;if(Z-X<=o&&(st=_(u.pos-C,E))){let $n=new Uint16Array(st.size-st.skip),St=u.pos-st.size,V=$n.length;for(;u.pos>St;)V=y(st.start,$n,V);Ge=new Kl($n,Z-st.start,n),Tt=st.start-R}else{let $n=u.pos-z;u.next();let St=[],V=[],Gt=et>=i?et:-1,ve=0,ee=Z;for(;u.pos>$n;)Gt>=0&&u.id==Gt&&u.size>=0?(u.end<=ee-o&&(h(St,V,X,ve,u.end,ee,Gt,Dt,kt),ve=St.length,ee=u.end),u.next()):N>2500?d(X,$n,St,V):f(X,$n,St,V,Gt,N+1);if(Gt>=0&&ve>0&&ve<St.length&&h(St,V,X,ve,X,ee,Gt,Dt,kt),St.reverse(),V.reverse(),Gt>-1&&ve>0){let wt=p(Et,kt);Ge=gF(Et,St,V,0,St.length,0,Z-X,wt,wt)}else Ge=m(Et,St,V,Z-X,Dt-Z,kt)}S.push(Ge),A.push(Tt)}function d(R,C,S,A){let E=[],N=0,et=-1;for(;u.pos>C;){let{id:X,start:Z,end:z,size:Dt}=u;if(Dt>4)u.next();else{if(et>-1&&Z<et)break;et<0&&(et=z-o),E.push(X,Z,z),N++,u.next()}}if(N){let X=new Uint16Array(N*4),Z=E[E.length-2];for(let z=E.length-3,Dt=0;z>=0;z-=3)X[Dt++]=E[z],X[Dt++]=E[z+1]-Z,X[Dt++]=E[z+2]-Z,X[Dt++]=Dt;S.push(new Kl(X,E[2]-Z,n)),A.push(Z-R)}}function p(R,C){return(S,A,E)=>{let N=0,et=S.length-1,X,Z;if(et>=0&&(X=S[et])instanceof Wr){if(!et&&X.type==R&&X.length==E)return X;(Z=X.prop(ae.lookAhead))&&(N=A[et]+X.length+Z)}return m(R,S,A,E,N,C)}}function h(R,C,S,A,E,N,et,X,Z){let z=[],Dt=[];for(;R.length>A;)z.push(R.pop()),Dt.push(C.pop()+S-E);R.push(m(n.types[et],z,Dt,N-E,X-N,Z)),C.push(E-S)}function m(R,C,S,A,E,N,et){if(N){let X=[ae.contextHash,N];et=et?[X].concat(et):[X]}if(E>25){let X=[ae.lookAhead,E];et=et?[X].concat(et):[X]}return new Wr(R,C,S,A,et)}function _(R,C){let S=u.fork(),A=0,E=0,N=0,et=S.end-o,X={size:0,start:0,skip:0};t:for(let Z=S.pos-R;S.pos>Z;){let z=S.size;if(S.id==C&&z>=0){X.size=A,X.start=E,X.skip=N,N+=4,A+=4,S.next();continue}let Dt=S.pos-z;if(z<0||Dt<Z||S.start<et)break;let kt=S.id>=i?4:0,Et=S.start;for(S.next();S.pos>Dt;){if(S.size<0)if(S.size==-3)kt+=4;else break t;else S.id>=i&&(kt+=4);S.next()}E=Et,A+=z,N+=kt}return(C<0||A==R)&&(X.size=A,X.start=E,X.skip=N),X.size>4?X:void 0}function y(R,C,S){let{id:A,start:E,end:N,size:et}=u;if(u.next(),et>=0&&A<i){let X=S;if(et>4){let Z=u.pos-(et-4);for(;u.pos>Z;)S=y(R,C,S)}C[--S]=X,C[--S]=N-R,C[--S]=E-R,C[--S]=A}else et==-3?s=A:et==-4&&(c=A);return S}let D=[],w=[];for(;u.pos>0;)f(r.start||0,r.bufferStart||0,D,w,-1,0);let T=(t=r.length)!==null&&t!==void 0?t:D.length?w[0]+D[0].length:0;return new Wr(l[r.topID],D.reverse(),w.reverse(),T)}var Mj=new WeakMap;function fD(r,t){if(!r.isAnonymous||t instanceof Kl||t.type!=r)return 1;let e=Mj.get(t);if(e==null){e=1;for(let n of t.children){if(n.type!=r||!(n instanceof Wr)){e=1;break}e+=fD(r,n)}Mj.set(t,e)}return e}function gF(r,t,e,n,o,a,i,u,l){let s=0;for(let h=n;h<o;h++)s+=fD(r,t[h]);let c=Math.ceil(s*1.5/8),f=[],d=[];function p(h,m,_,y,D){for(let w=_;w<y;){let T=w,R=m[w],C=fD(r,h[w]);for(w++;w<y;w++){let S=fD(r,h[w]);if(C+S>=c)break;C+=S}if(w==T+1){if(C>c){let S=h[T];p(S.children,S.positions,0,S.children.length,m[T]+D);continue}f.push(h[T])}else{let S=m[w-1]+h[w-1].length-R;f.push(gF(r,h,m,T,w,R,S,null,l))}d.push(R+D-a)}}return p(t,e,n,o,0),(u||l)(f,d,i)}var pD=class{constructor(){this.map=new WeakMap}setBuffer(t,e,n){let o=this.map.get(t);o||this.map.set(t,o=new Map),o.set(e,n)}getBuffer(t,e){let n=this.map.get(t);return n&&n.get(e)}set(t,e){t instanceof Ic?this.setBuffer(t.context.buffer,t.index,e):t instanceof Qa&&this.map.set(t.tree,e)}get(t){return t instanceof Ic?this.getBuffer(t.context.buffer,t.index):t instanceof Qa?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}},Nc=class r{constructor(t,e,n,o,a=!1,i=!1){this.from=t,this.to=e,this.tree=n,this.offset=o,this.open=(a?1:0)|(i?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],n=!1){let o=[new r(0,t.length,t,0,!1,n)];for(let a of e)a.to>t.length&&o.push(a);return o}static applyChanges(t,e,n=128){if(!e.length)return t;let o=[],a=1,i=t.length?t[0]:null;for(let u=0,l=0,s=0;;u++){let c=u<e.length?e[u]:null,f=c?c.fromA:1e9;if(f-l>=n)for(;i&&i.from<f;){let d=i;if(l>=d.from||f<=d.to||s){let p=Math.max(d.from,l)-s,h=Math.min(d.to,f)-s;d=p>=h?null:new r(p,h,d.tree,d.offset+s,u>0,!!c)}if(d&&o.push(d),i.to>f)break;i=a<t.length?t[a++]:null}if(!c)break;l=c.toA,s=c.toA-c.toB}return o}},ap=class{startParse(t,e,n){return typeof t=="string"&&(t=new mF(t)),n=n?n.length?n.map(o=>new vg(o.from,o.to)):[new vg(0,0)]:[new vg(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let o=this.startParse(t,e,n);for(;;){let a=o.advance();if(a)return a}}},mF=class{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}};var Xue=new ae({perNode:!0});var Q_t=0,bi=class r{constructor(t,e,n,o){this.name=t,this.set=e,this.base=n,this.modified=o,this.id=Q_t++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let n=typeof t=="string"?t:"?";if(t instanceof r&&(e=t),e?.base)throw new Error("Can not derive from a modified tag");let o=new r(n,[],null,[]);if(o.set.push(o),e)for(let a of e.set)o.set.push(a);return o}static defineModifier(t){let e=new gD(t);return n=>n.modified.indexOf(e)>-1?n:gD.get(n.base||n,n.modified.concat(e).sort((o,a)=>o.id-a.id))}},H_t=0,gD=class r{constructor(t){this.name=t,this.instances=[],this.id=H_t++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find(u=>u.base==t&&V_t(e,u.modified));if(n)return n;let o=[],a=new bi(t.name,o,t,e);for(let u of e)u.instances.push(a);let i=j_t(e);for(let u of t.set)if(!u.modified.length)for(let l of i)o.push(r.get(u,l));return a}};function V_t(r,t){return r.length==t.length&&r.every((e,n)=>e==t[n])}function j_t(r){let t=[[]];for(let e=0;e<r.length;e++)for(let n=0,o=t.length;n<o;n++)t.push(t[n].concat(r[e]));return t.sort((e,n)=>n.length-e.length)}function _D(r){let t=Object.create(null);for(let e in r){let n=r[e];Array.isArray(n)||(n=[n]);for(let o of e.split(" "))if(o){let a=[],i=2,u=o;for(let f=0;;){if(u=="..."&&f>0&&f+3==o.length){i=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!d)throw new RangeError("Invalid path: "+o);if(a.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==o.length)break;let p=o[f++];if(f==o.length&&p=="!"){i=0;break}if(p!="/")throw new RangeError("Invalid path: "+o);u=o.slice(f)}let l=a.length-1,s=a[l];if(!s)throw new RangeError("Invalid path: "+o);let c=new ip(n,i,l>0?a.slice(0,l):null);t[s]=c.sort(t[s])}}return kj.add(t)}var kj=new ae,ip=class{constructor(t,e,n,o){this.tags=t,this.mode=e,this.context=n,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}};ip.empty=new ip([],2,null);function DF(r,t){let e=Object.create(null);for(let a of r)if(!Array.isArray(a.tag))e[a.tag.id]=a.class;else for(let i of a.tag)e[i.id]=a.class;let{scope:n,all:o=null}=t||{};return{style:a=>{let i=o;for(let u of a)for(let l of u.set){let s=e[l.id];if(s){i=i?i+" "+s:s;break}}return i},scope:n}}function Z_t(r,t){let e=null;for(let n of r){let o=n.style(t);o&&(e=e?e+" "+o:o)}return e}function $j(r,t,e,n=0,o=r.length){let a=new yF(n,Array.isArray(t)?t:[t],e);a.highlightRange(r.cursor(),n,o,"",a.highlighters),a.flush(o)}var yF=class{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,o,a){let{type:i,from:u,to:l}=t;if(u>=n||l<=e)return;i.isTop&&(a=this.highlighters.filter(p=>!p.scope||p.scope(i)));let s=o,c=Y_t(t)||ip.empty,f=Z_t(a,c.tags);if(f&&(s&&(s+=" "),s+=f,c.mode==1&&(o+=(o?" ":"")+f)),this.startSpan(Math.max(e,u),s),c.opaque)return;let d=t.tree&&t.tree.prop(ae.mounted);if(d&&d.overlay){let p=t.node.enter(d.overlay[0].from+u,1),h=this.highlighters.filter(_=>!_.scope||_.scope(d.tree.type)),m=t.firstChild();for(let _=0,y=u;;_++){let D=_<d.overlay.length?d.overlay[_]:null,w=D?D.from+u:l,T=Math.max(e,y),R=Math.min(n,w);if(T<R&&m)for(;t.from<R&&(this.highlightRange(t,T,R,o,a),this.startSpan(Math.min(R,t.to),s),!(t.to>=w||!t.nextSibling())););if(!D||w>n)break;y=D.to+u,y>e&&(this.highlightRange(p.cursor(),Math.max(e,D.from+u),Math.min(n,y),"",h),this.startSpan(Math.min(n,y),s))}m&&t.parent()}else if(t.firstChild()){d&&(o="");do if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,o,a),this.startSpan(Math.min(n,t.to),s)}while(t.nextSibling());t.parent()}}};function Y_t(r){let t=r.type.prop(kj);for(;t&&t.context&&!r.matchContext(t.context);)t=t.next;return t||null}var it=bi.define,hD=it(),ts=it(),Ij=it(ts),Nj=it(ts),es=it(),mD=it(es),_F=it(es),ru=it(),kc=it(ru),tu=it(),eu=it(),bF=it(),bg=it(bF),vD=it(),F={comment:hD,lineComment:it(hD),blockComment:it(hD),docComment:it(hD),name:ts,variableName:it(ts),typeName:Ij,tagName:it(Ij),propertyName:Nj,attributeName:it(Nj),className:it(ts),labelName:it(ts),namespace:it(ts),macroName:it(ts),literal:es,string:mD,docString:it(mD),character:it(mD),attributeValue:it(mD),number:_F,integer:it(_F),float:it(_F),bool:it(es),regexp:it(es),escape:it(es),color:it(es),url:it(es),keyword:tu,self:it(tu),null:it(tu),atom:it(tu),unit:it(tu),modifier:it(tu),operatorKeyword:it(tu),controlKeyword:it(tu),definitionKeyword:it(tu),moduleKeyword:it(tu),operator:eu,derefOperator:it(eu),arithmeticOperator:it(eu),logicOperator:it(eu),bitwiseOperator:it(eu),compareOperator:it(eu),updateOperator:it(eu),definitionOperator:it(eu),typeOperator:it(eu),controlOperator:it(eu),punctuation:bF,separator:it(bF),bracket:bg,angleBracket:it(bg),squareBracket:it(bg),paren:it(bg),brace:it(bg),content:ru,heading:kc,heading1:it(kc),heading2:it(kc),heading3:it(kc),heading4:it(kc),heading5:it(kc),heading6:it(kc),contentSeparator:it(ru),list:it(ru),quote:it(ru),emphasis:it(ru),strong:it(ru),link:it(ru),monospace:it(ru),strikethrough:it(ru),inserted:it(),deleted:it(),changed:it(),invalid:it(),meta:vD,documentMeta:it(vD),annotation:it(vD),processingInstruction:it(vD),definition:bi.defineModifier("definition"),constant:bi.defineModifier("constant"),function:bi.defineModifier("function"),standard:bi.defineModifier("standard"),local:bi.defineModifier("local"),special:bi.defineModifier("special")};for(let r in F){let t=F[r];t instanceof bi&&(t.name=r)}var tle=DF([{tag:F.link,class:"tok-link"},{tag:F.heading,class:"tok-heading"},{tag:F.emphasis,class:"tok-emphasis"},{tag:F.strong,class:"tok-strong"},{tag:F.keyword,class:"tok-keyword"},{tag:F.atom,class:"tok-atom"},{tag:F.bool,class:"tok-bool"},{tag:F.url,class:"tok-url"},{tag:F.labelName,class:"tok-labelName"},{tag:F.inserted,class:"tok-inserted"},{tag:F.deleted,class:"tok-deleted"},{tag:F.literal,class:"tok-literal"},{tag:F.string,class:"tok-string"},{tag:F.number,class:"tok-number"},{tag:[F.regexp,F.escape,F.special(F.string)],class:"tok-string2"},{tag:F.variableName,class:"tok-variableName"},{tag:F.local(F.variableName),class:"tok-variableName tok-local"},{tag:F.definition(F.variableName),class:"tok-variableName tok-definition"},{tag:F.special(F.variableName),class:"tok-variableName2"},{tag:F.definition(F.propertyName),class:"tok-propertyName tok-definition"},{tag:F.typeName,class:"tok-typeName"},{tag:F.namespace,class:"tok-namespace"},{tag:F.className,class:"tok-className"},{tag:F.macroName,class:"tok-macroName"},{tag:F.propertyName,class:"tok-propertyName"},{tag:F.operator,class:"tok-operator"},{tag:F.comment,class:"tok-comment"},{tag:F.meta,class:"tok-meta"},{tag:F.invalid,class:"tok-invalid"},{tag:F.punctuation,class:"tok-punctuation"}]);var wF,up=new ae;function IF(r){return ut.define({combine:r?t=>t.concat(r):void 0})}var TD=new ae,da=class{constructor(t,e,n=[],o=""){this.data=t,this.name=o,He.prototype.hasOwnProperty("tree")||Object.defineProperty(He.prototype,"tree",{get(){return Mr(this)}}),this.parser=e,this.extension=[rs.of(this),He.languageData.of((a,i,u)=>{let l=Lj(a,i,u),s=l.type.prop(up);if(!s)return[];let c=a.facet(s),f=l.type.prop(TD);if(f){let d=l.resolve(i-l.from,u);for(let p of f)if(p.test(d,a)){let h=a.facet(p.facet);return p.type=="replace"?h:h.concat(c)}}return c})].concat(n)}isActiveAt(t,e,n=-1){return Lj(t,e,n).type.prop(up)==this.data}findRegions(t){let e=t.facet(rs);if(e?.data==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],o=(a,i)=>{if(a.prop(up)==this.data){n.push({from:i,to:i+a.length});return}let u=a.prop(ae.mounted);if(u){if(u.tree.prop(up)==this.data){if(u.overlay)for(let l of u.overlay)n.push({from:l.from+i,to:l.to+i});else n.push({from:i,to:i+a.length});return}else if(u.overlay){let l=n.length;if(o(u.tree,u.overlay[0].from+i),n.length>l)return}}for(let l=0;l<a.children.length;l++){let s=a.children[l];s instanceof Wr&&o(s,a.positions[l]+i)}};return o(Mr(t),0),n}get allowsNesting(){return!0}};da.setState=zt.define();function Lj(r,t,e){let n=r.facet(rs),o=Mr(r).topNode;if(!n||n.allowsNesting)for(let a=o;a;a=a.enter(t,e,Fr.ExcludeBuffers))a.type.isTop&&(o=a);return o}var yD=class r extends da{constructor(t,e,n){super(t,e,[],n),this.parser=e}static define(t){let e=IF(t.languageData);return new r(e,t.parser.configure({props:[up.add(n=>n.isTop?e:void 0)]}),t.name)}configure(t,e){return new r(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};function Mr(r){let t=r.field(da.state,!1);return t?t.tree:Wr.empty}var CF=class{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}},Dg=null,SF=class r{constructor(t,e,n=[],o,a,i,u,l){this.parser=t,this.state=e,this.fragments=n,this.tree=o,this.treeLen=a,this.viewport=i,this.skipped=u,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new r(t,e,[],Wr.empty,0,n,[],null)}startParse(){return this.parser.startParse(new CF(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=Wr.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof t=="number"){let o=Date.now()+t;t=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(Nc.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Nc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Dg;Dg=this;try{return t()}finally{Dg=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Uj(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:o,treeLen:a,viewport:i,skipped:u}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((s,c,f,d)=>l.push({fromA:s,toA:c,fromB:f,toB:d})),n=Nc.applyChanges(n,l),o=Wr.empty,a=0,i={from:t.mapPos(i.from,-1),to:t.mapPos(i.to,1)},this.skipped.length){u=[];for(let s of this.skipped){let c=t.mapPos(s.from,1),f=t.mapPos(s.to,-1);c<f&&u.push({from:c,to:f})}}}return new r(this.parser,e,n,o,a,i,u,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:o,to:a}=this.skipped[n];o<t.to&&a>t.from&&(this.fragments=Uj(this.fragments,o,a),this.skipped.splice(n--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends ap{createParse(e,n,o){let a=o[0].from,i=o[o.length-1].to;return{parsedPos:a,advance(){let l=Dg;if(l){for(let s of o)l.tempSkipped.push(s);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=i,new Wr(Kn.none,[],[],i-a)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return Dg}};function Uj(r,t,e){return Nc.applyChanges(r,[{fromA:t,toA:e,fromB:t,toB:e}])}var xg=class r{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new r(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=SF.create(t.facet(rs).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new r(n)}};da.state=gr.define({create:xg.init,update(r,t){for(let e of t.effects)if(e.is(da.setState))return e.value;return t.startState.facet(rs)!=t.state.facet(rs)?xg.init(t.state):r.apply(t)}});var qj=r=>{let t=setTimeout(()=>r(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(qj=r=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(r,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});var xF=typeof navigator<"u"&&(!((wF=navigator.scheduling)===null||wF===void 0)&&wF.isInputPending)?()=>navigator.scheduling.isInputPending():null,X_t=Tr.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(da.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(da.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=qj(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:o}}=this.view,a=n.field(da.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let i=Date.now()+Math.min(this.chunkBudget,100,t&&!xF?Math.max(25,t.timeRemaining()-5):1e9),u=a.context.treeLen<o&&n.doc.length>o+1e3,l=a.context.work(()=>xF&&xF()||Date.now()>i,o+(u?0:1e5));this.chunkBudget-=Date.now()-e,(l||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:da.setState.of(new xg(a.context))})),this.chunkBudget>0&&!(l&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>kn(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),rs=ut.define({combine(r){return r.length?r[0]:null},enables:r=>[da.state,X_t,at.contentAttributes.compute([r],t=>{let e=t.facet(r);return e&&e.name?{"data-language":e.name}:{}})]}),bD=class{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}};var J_t=ut.define(),lp=ut.define({combine:r=>{if(!r.length)return"  ";let t=r[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return t}});function Tg(r){let t=r.facet(lp);return t.charCodeAt(0)==9?r.tabSize*t.length:t.length}function sp(r,t){let e="",n=r.tabSize,o=r.facet(lp)[0];if(o=="	"){for(;t>=n;)e+="	",t-=n;o=" "}for(let a=0;a<t;a++)e+=o;return e}function RD(r,t){r instanceof He&&(r=new $c(r));for(let n of r.state.facet(J_t)){let o=n(r,t);if(o!==void 0)return o}let e=Mr(r.state);return e.length>=t?K_t(r,e,t):null}var $c=class{constructor(t,e={}){this.state=t,this.options=e,this.unit=Tg(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return o!=null&&o>=n.from&&o<=n.to?a&&o==t?{text:"",from:t}:(e<0?o<t:o<=t)?{text:n.text.slice(o-n.from),from:o}:{text:n.text.slice(0,o-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:o}=this.lineAt(t,e);return n.slice(t-o,Math.min(n.length,t+100-o))}column(t,e=1){let{text:n,from:o}=this.lineAt(t,e),a=this.countColumn(n,t-o),i=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return i>-1&&(a+=i-this.countColumn(n,n.search(/\S|$/))),a}countColumn(t,e=t.length){return zu(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:o}=this.lineAt(t,e),a=this.options.overrideIndentation;if(a){let i=a(o);if(i>-1)return i}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},NF=new ae;function K_t(r,t,e){let n=t.resolveStack(e),o=n.node.enterUnfinishedNodesBefore(e);if(o!=n.node){let a=[];for(let i=o;i!=n.node;i=i.parent)a.push(i);for(let i=a.length-1;i>=0;i--)n={node:a[i],next:n}}return Qj(n,r,e)}function Qj(r,t,e){for(let n=r;n;n=n.next){let o=e1t(n.node);if(o)return o(OF.create(t,e,n))}return 0}function t1t(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function e1t(r){let t=r.type.prop(NF);if(t)return t;let e=r.firstChild,n;if(e&&(n=e.type.prop(ae.closedBy))){let o=r.lastChild,a=o&&n.indexOf(o.name)>-1;return i=>Vj(i,!0,1,void 0,a&&!t1t(i)?o.from:void 0)}return r.parent==null?r1t:null}function r1t(){return 0}var OF=class r extends $c{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.context=n}get node(){return this.context.node}static create(t,e,n){return new r(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let n=t.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(n1t(n,t))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){return Qj(this.context.next,this.base,this.pos)}};function n1t(r,t){for(let e=t;e;e=e.parent)if(r==e)return!0;return!1}function o1t(r){let t=r.node,e=t.childAfter(t.from),n=t.lastChild;if(!e)return null;let o=r.options.simulateBreak,a=r.state.doc.lineAt(e.from),i=o==null||o<=a.from?a.to:Math.min(a.to,o);for(let u=e.to;;){let l=t.childAfter(u);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=i)return null;let s=/^ */.exec(a.text.slice(e.to-a.from))[0].length;return{from:e.from,to:e.to+s}}u=l.to}}function Hj({closing:r,align:t=!0,units:e=1}){return n=>Vj(n,t,e,r)}function Vj(r,t,e,n,o){let a=r.textAfter,i=a.match(/^\s*/)[0].length,u=n&&a.slice(i,i+n.length)==n||o==r.pos+i,l=t?o1t(r):null;return l?u?r.column(l.from):r.column(l.to):r.baseIndent+(u?0:r.unit*e)}var jj=r=>r.baseIndent;function CD({except:r,units:t=1}={}){return e=>{let n=r&&r.test(e.textAfter);return e.baseIndent+(n?0:t*e.unit)}}var a1t=200;function Zj(){return He.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let t=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!t.length)return r;let e=r.newDoc,{head:n}=r.newSelection.main,o=e.lineAt(n);if(n>o.from+a1t)return r;let a=e.sliceString(o.from,n);if(!t.some(s=>s.test(a)))return r;let{state:i}=r,u=-1,l=[];for(let{head:s}of i.selection.ranges){let c=i.doc.lineAt(s);if(c.from==u)continue;u=c.from;let f=RD(i,c.from);if(f==null)continue;let d=/^\s*/.exec(c.text)[0],p=sp(i,f);d!=p&&l.push({from:c.from,to:c.from+d.length,insert:p})}return l.length?[r,{changes:l,sequential:!0}]:r})}var i1t=ut.define(),kF=new ae;function Yj(r){let t=r.firstChild,e=r.lastChild;return t&&t.to<e.from?{from:t.to,to:e.type.isError?r.to:e.from}:null}function u1t(r,t,e){let n=Mr(r);if(n.length<e)return null;let o=n.resolveStack(e,1),a=null;for(let i=o;i;i=i.next){let u=i.node;if(u.to<=e||u.from>e)continue;if(a&&u.from<t)break;let l=u.type.prop(kF);if(l&&(u.to<n.length-50||n.length==r.doc.length||!l1t(u))){let s=l(u,r);s&&s.from<=e&&s.from>=t&&s.to>e&&(a=s)}}return a}function l1t(r){let t=r.lastChild;return t&&t.to==r.to&&t.type.isError}function DD(r,t,e){for(let n of r.facet(i1t)){let o=n(r,t,e);if(o)return o}return u1t(r,t,e)}function Xj(r,t){let e=t.mapPos(r.from,1),n=t.mapPos(r.to,-1);return e>=n?void 0:{from:e,to:n}}var SD=zt.define({map:Xj}),Rg=zt.define({map:Xj});function Jj(r){let t=[];for(let{head:e}of r.state.selection.ranges)t.some(n=>n.from<=e&&n.to>=e)||t.push(r.lineBlockAt(e));return t}var Lc=gr.define({create(){return xt.none},update(r,t){r=r.map(t.changes);for(let e of t.effects)if(e.is(SD)&&!s1t(r,e.value.from,e.value.to)){let{preparePlaceholder:n}=t.state.facet($F),o=n?xt.replace({widget:new EF(n(t.state,e.value))}):Bj;r=r.update({add:[o.range(e.value.from,e.value.to)]})}else e.is(Rg)&&(r=r.update({filter:(n,o)=>e.value.from!=n||e.value.to!=o,filterFrom:e.value.from,filterTo:e.value.to}));if(t.selection){let e=!1,{head:n}=t.selection.main;r.between(n,n,(o,a)=>{o<n&&a>n&&(e=!0)}),e&&(r=r.update({filterFrom:n,filterTo:n,filter:(o,a)=>a<=n||o>=n}))}return r},provide:r=>at.decorations.from(r),toJSON(r,t){let e=[];return r.between(0,t.doc.length,(n,o)=>{e.push(n,o)}),e},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<r.length;){let n=r[e++],o=r[e++];if(typeof n!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");t.push(Bj.range(n,o))}return xt.set(t,!0)}});function wD(r,t,e){var n;let o=null;return(n=r.field(Lc,!1))===null||n===void 0||n.between(t,e,(a,i)=>{(!o||o.from>a)&&(o={from:a,to:i})}),o}function s1t(r,t,e){let n=!1;return r.between(t,t,(o,a)=>{o==t&&a==e&&(n=!0)}),n}function Kj(r,t){return r.field(Lc,!1)?t:t.concat(zt.appendConfig.of(rZ()))}var c1t=r=>{for(let t of Jj(r)){let e=DD(r.state,t.from,t.to);if(e)return r.dispatch({effects:Kj(r.state,[SD.of(e),tZ(r,e)])}),!0}return!1},f1t=r=>{if(!r.state.field(Lc,!1))return!1;let t=[];for(let e of Jj(r)){let n=wD(r.state,e.from,e.to);n&&t.push(Rg.of(n),tZ(r,n,!1))}return t.length&&r.dispatch({effects:t}),t.length>0};function tZ(r,t,e=!0){let n=r.state.doc.lineAt(t.from).number,o=r.state.doc.lineAt(t.to).number;return at.announce.of(`${r.state.phrase(e?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${o}.`)}var d1t=r=>{let{state:t}=r,e=[];for(let n=0;n<t.doc.length;){let o=r.lineBlockAt(n),a=DD(t,o.from,o.to);a&&e.push(SD.of(a)),n=(a?r.lineBlockAt(a.to):o).to+1}return e.length&&r.dispatch({effects:Kj(r.state,e)}),!!e.length},p1t=r=>{let t=r.state.field(Lc,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,r.state.doc.length,(n,o)=>{e.push(Rg.of({from:n,to:o}))}),r.dispatch({effects:e}),!0};var eZ=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:c1t},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:f1t},{key:"Ctrl-Alt-[",run:d1t},{key:"Ctrl-Alt-]",run:p1t}],h1t={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},$F=ut.define({combine(r){return Jn(r,h1t)}});function rZ(r){let t=[Lc,v1t];return r&&t.push($F.of(r)),t}function nZ(r,t){let{state:e}=r,n=e.facet($F),o=i=>{let u=r.lineBlockAt(r.posAtDOM(i.target)),l=wD(r.state,u.from,u.to);l&&r.dispatch({effects:Rg.of(l)}),i.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(r,o,t);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",e.phrase("folded code")),a.title=e.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=o,a}var Bj=xt.replace({widget:new class extends Qo{toDOM(r){return nZ(r,null)}}}),EF=class extends Qo{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return nZ(t,this.value)}},m1t={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1},wg=class extends fa{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}};function oZ(r={}){let t=Object.assign(Object.assign({},m1t),r),e=new wg(t,!0),n=new wg(t,!1),o=Tr.fromClass(class{constructor(i){this.from=i.viewport.from,this.markers=this.buildMarkers(i)}update(i){(i.docChanged||i.viewportChanged||i.startState.facet(rs)!=i.state.facet(rs)||i.startState.field(Lc,!1)!=i.state.field(Lc,!1)||Mr(i.startState)!=Mr(i.state)||t.foldingChanged(i))&&(this.markers=this.buildMarkers(i.view))}buildMarkers(i){let u=new _i;for(let l of i.viewportLineBlocks){let s=wD(i.state,l.from,l.to)?n:DD(i.state,l.from,l.to)?e:null;s&&u.add(l.from,l.from,s)}return u.finish()}}),{domEventHandlers:a}=t;return[o,cF({class:"cm-foldGutter",markers(i){var u;return((u=i.plugin(o))===null||u===void 0?void 0:u.markers)||We.empty},initialSpacer(){return new wg(t,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(i,u,l)=>{if(a.click&&a.click(i,u,l))return!0;let s=wD(i.state,u.from,u.to);if(s)return i.dispatch({effects:Rg.of(s)}),!0;let c=DD(i.state,u.from,u.to);return c?(i.dispatch({effects:SD.of(c)}),!0):!1}})}),rZ()]}var v1t=at.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),xD=class r{constructor(t,e){this.specs=t;let n;function o(u){let l=Ga.newName();return(n||(n=Object.create(null)))["."+l]=u,l}let a=typeof e.all=="string"?e.all:e.all?o(e.all):void 0,i=e.scope;this.scope=i instanceof da?u=>u.prop(up)==i.data:i?u=>u==i:void 0,this.style=DF(t.map(u=>({tag:u.tag,class:u.class||o(Object.assign({},u,{tag:null}))})),{all:a}).style,this.module=n?new Ga(n):null,this.themeType=e.themeType}static define(t,e){return new r(t,e||{})}},FF=ut.define(),aZ=ut.define({combine(r){return r.length?[r[0]]:null}});function TF(r){let t=r.facet(FF);return t.length?t:r.facet(aZ)}function iZ(r,t){let e=[g1t],n;return r instanceof xD&&(r.module&&e.push(at.styleModule.of(r.module)),n=r.themeType),t?.fallback?e.push(aZ.of(r)):n?e.push(FF.computeN([at.darkTheme],o=>o.facet(at.darkTheme)==(n=="dark")?[r]:[])):e.push(FF.of(r)),e}var MF=class{constructor(t){this.markCache=Object.create(null),this.tree=Mr(t.state),this.decorations=this.buildDeco(t,TF(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=Mr(t.state),n=TF(t.state),o=n!=TF(t.startState),{viewport:a}=t.view,i=t.changes.mapPos(this.decoratedTo,1);e.length<a.to&&!o&&e.type==this.tree.type&&i>=a.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=i):(e!=this.tree||t.viewportChanged||o)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n),this.decoratedTo=a.to)}buildDeco(t,e){if(!e||!this.tree.length)return xt.none;let n=new _i;for(let{from:o,to:a}of t.visibleRanges)$j(this.tree,e,(i,u,l)=>{n.add(i,u,this.markCache[l]||(this.markCache[l]=xt.mark({class:l})))},o,a);return n.finish()}},g1t=Wa.high(Tr.fromClass(MF,{decorations:r=>r.decorations})),uZ=xD.define([{tag:F.meta,color:"#404740"},{tag:F.link,textDecoration:"underline"},{tag:F.heading,textDecoration:"underline",fontWeight:"bold"},{tag:F.emphasis,fontStyle:"italic"},{tag:F.strong,fontWeight:"bold"},{tag:F.strikethrough,textDecoration:"line-through"},{tag:F.keyword,color:"#708"},{tag:[F.atom,F.bool,F.url,F.contentSeparator,F.labelName],color:"#219"},{tag:[F.literal,F.inserted],color:"#164"},{tag:[F.string,F.deleted],color:"#a11"},{tag:[F.regexp,F.escape,F.special(F.string)],color:"#e40"},{tag:F.definition(F.variableName),color:"#00f"},{tag:F.local(F.variableName),color:"#30a"},{tag:[F.typeName,F.namespace],color:"#085"},{tag:F.className,color:"#167"},{tag:[F.special(F.variableName),F.macroName],color:"#256"},{tag:F.definition(F.propertyName),color:"#00c"},{tag:F.comment,color:"#940"},{tag:F.invalid,color:"#f00"}]),_1t=at.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),lZ=1e4,sZ="()[]{}",cZ=ut.define({combine(r){return Jn(r,{afterCursor:!0,brackets:sZ,maxScanDistance:lZ,renderMatch:D1t})}}),y1t=xt.mark({class:"cm-matchingBracket"}),b1t=xt.mark({class:"cm-nonmatchingBracket"});function D1t(r){let t=[],e=r.matched?y1t:b1t;return t.push(e.range(r.start.from,r.start.to)),r.end&&t.push(e.range(r.end.from,r.end.to)),t}var w1t=gr.define({create(){return xt.none},update(r,t){if(!t.docChanged&&!t.selection)return r;let e=[],n=t.state.facet(cZ);for(let o of t.state.selection.ranges){if(!o.empty)continue;let a=Di(t.state,o.head,-1,n)||o.head>0&&Di(t.state,o.head-1,1,n)||n.afterCursor&&(Di(t.state,o.head,1,n)||o.head<t.state.doc.length&&Di(t.state,o.head+1,-1,n));a&&(e=e.concat(n.renderMatch(a,t.state)))}return xt.set(e,!0)},provide:r=>at.decorations.from(r)}),x1t=[w1t,_1t];function fZ(r={}){return[cZ.of(r),x1t]}var T1t=new ae;function AF(r,t,e){let n=r.prop(t<0?ae.openedBy:ae.closedBy);if(n)return n;if(r.name.length==1){let o=e.indexOf(r.name);if(o>-1&&o%2==(t<0?1:0))return[e[o+t]]}return null}function PF(r){let t=r.type.prop(T1t);return t?t(r.node):r}function Di(r,t,e,n={}){let o=n.maxScanDistance||lZ,a=n.brackets||sZ,i=Mr(r),u=i.resolveInner(t,e);for(let l=u;l;l=l.parent){let s=AF(l.type,e,a);if(s&&l.from<l.to){let c=PF(l);if(c&&(e>0?t>=c.from&&t<c.to:t>c.from&&t<=c.to))return R1t(r,t,e,l,c,s,a)}}return C1t(r,t,e,i,u.type,o,a)}function R1t(r,t,e,n,o,a,i){let u=n.parent,l={from:o.from,to:o.to},s=0,c=u?.cursor();if(c&&(e<0?c.childBefore(n.from):c.childAfter(n.to)))do if(e<0?c.to<=n.from:c.from>=n.to){if(s==0&&a.indexOf(c.type.name)>-1&&c.from<c.to){let f=PF(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(AF(c.type,e,i))s++;else if(AF(c.type,-e,i)){if(s==0){let f=PF(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}s--}}while(e<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function C1t(r,t,e,n,o,a,i){let u=e<0?r.sliceDoc(t-1,t):r.sliceDoc(t,t+1),l=i.indexOf(u);if(l<0||l%2==0!=e>0)return null;let s={from:e<0?t-1:t,to:e>0?t+1:t},c=r.doc.iterRange(t,e>0?r.doc.length:0),f=0;for(let d=0;!c.next().done&&d<=a;){let p=c.value;e<0&&(d+=p.length);let h=t+d*e;for(let m=e>0?0:p.length-1,_=e>0?p.length:-1;m!=_;m+=e){let y=i.indexOf(p[m]);if(!(y<0||n.resolveInner(h+m,1).type!=o))if(y%2==0==e>0)f++;else{if(f==1)return{start:s,end:{from:h+m,to:h+m+1},matched:y>>1==l>>1};f--}}e>0&&(d+=p.length)}return c.done?{start:s,matched:!1}:null}var S1t=Object.create(null),Wj=[Kn.none];var Gj=[],zj=Object.create(null),O1t=Object.create(null);for(let[r,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])O1t[r]=E1t(S1t,t);function RF(r,t){Gj.indexOf(r)>-1||(Gj.push(r),console.warn(t))}function E1t(r,t){let e=[];for(let u of t.split(" ")){let l=[];for(let s of u.split(".")){let c=r[s]||F[s];c?typeof c=="function"?l.length?l=l.map(c):RF(s,`Modifier ${s} used at start of tag`):l.length?RF(s,`Tag ${s} used as modifier`):l=Array.isArray(c)?c:[c]:RF(s,`Unknown highlighting tag ${s}`)}for(let s of l)e.push(s)}if(!e.length)return 0;let n=t.replace(/ /g,"_"),o=n+" "+e.map(u=>u.id),a=zj[o];if(a)return a.id;let i=zj[o]=Kn.define({id:Wj.length,name:n,props:[_D({[n]:e})]});return Wj.push(i),i.id}var lle={rtl:xt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:Je.RTL}),ltr:xt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:Je.LTR}),auto:xt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var F1t=r=>{let{state:t}=r,e=t.doc.lineAt(t.selection.main.from),n=qF(r.state,e.from);return n.line?M1t(r):n.block?P1t(r):!1};function zF(r,t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let o=r(t,e);return o?(n(e.update(o)),!0):!1}}var M1t=zF(k1t,0);var A1t=zF(bZ,0);var P1t=zF((r,t)=>bZ(r,t,N1t(t)),0);function qF(r,t){let e=r.languageDataAt("commentTokens",t);return e.length?e[0]:{}}var Cg=50;function I1t(r,{open:t,close:e},n,o){let a=r.sliceDoc(n-Cg,n),i=r.sliceDoc(o,o+Cg),u=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(i)[0].length,s=a.length-u;if(a.slice(s-t.length,s)==t&&i.slice(l,l+e.length)==e)return{open:{pos:n-u,margin:u&&1},close:{pos:o+l,margin:l&&1}};let c,f;o-n<=2*Cg?c=f=r.sliceDoc(n,o):(c=r.sliceDoc(n,n+Cg),f=r.sliceDoc(o-Cg,o));let d=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(f)[0].length,h=f.length-p-e.length;return c.slice(d,d+t.length)==t&&f.slice(h,h+e.length)==e?{open:{pos:n+d+t.length,margin:/\s/.test(c.charAt(d+t.length))?1:0},close:{pos:o-p-e.length,margin:/\s/.test(f.charAt(h-1))?1:0}}:null}function N1t(r){let t=[];for(let e of r.selection.ranges){let n=r.doc.lineAt(e.from),o=e.to<=n.to?n:r.doc.lineAt(e.to);o.from>n.from&&o.from==e.to&&(o=e.to==n.to+1?n:r.doc.lineAt(e.to-1));let a=t.length-1;a>=0&&t[a].to>n.from?t[a].to=o.to:t.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:o.to})}return t}function bZ(r,t,e=t.selection.ranges){let n=e.map(a=>qF(t,a.from).block);if(!n.every(a=>a))return null;let o=e.map((a,i)=>I1t(t,n[i],a.from,a.to));if(r!=2&&!o.every(a=>a))return{changes:t.changes(e.map((a,i)=>o[i]?[]:[{from:a.from,insert:n[i].open+" "},{from:a.to,insert:" "+n[i].close}]))};if(r!=1&&o.some(a=>a)){let a=[];for(let i=0,u;i<o.length;i++)if(u=o[i]){let l=n[i],{open:s,close:c}=u;a.push({from:s.pos-l.open.length,to:s.pos+s.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:a}}return null}function k1t(r,t,e=t.selection.ranges){let n=[],o=-1;for(let{from:a,to:i}of e){let u=n.length,l=1e9,s=qF(t,a).line;if(s){for(let c=a;c<=i;){let f=t.doc.lineAt(c);if(f.from>o&&(a==i||i>f.from)){o=f.from;let d=/^\s*/.exec(f.text)[0].length,p=d==f.length,h=f.text.slice(d,d+s.length)==s?d:-1;d<f.text.length&&d<l&&(l=d),n.push({line:f,comment:h,token:s,indent:d,empty:p,single:!1})}c=f.to+1}if(l<1e9)for(let c=u;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=l);n.length==u+1&&(n[u].single=!0)}}if(r!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:u,token:l,indent:s,empty:c,single:f}of n)(f||!c)&&a.push({from:u.from+s,insert:l+" "});let i=t.changes(a);return{changes:i,selection:t.selection.map(i,1)}}else if(r!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:i,comment:u,token:l}of n)if(u>=0){let s=i.from+u,c=s+l.length;i.text[c-i.from]==" "&&c++,a.push({from:s,to:c})}return{changes:a}}return null}var UF=zo.define(),$1t=zo.define(),L1t=ut.define(),DZ=ut.define({combine(r){return Jn(r,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(n,o)=>t(n,o)||e(n,o)})}}),wZ=gr.define({create(){return Uc.empty},update(r,t){let e=t.state.facet(DZ),n=t.annotation(UF);if(n){let l=wi.fromTransaction(t,n.selection),s=n.side,c=s==0?r.undone:r.done;return l?c=ED(c,c.length,e.minDepth,l):c=CZ(c,t.startState.selection),new Uc(s==0?n.rest:c,s==0?c:n.rest)}let o=t.annotation($1t);if((o=="full"||o=="before")&&(r=r.isolate()),t.annotation(Yr.addToHistory)===!1)return t.changes.empty?r:r.addMapping(t.changes.desc);let a=wi.fromTransaction(t),i=t.annotation(Yr.time),u=t.annotation(Yr.userEvent);return a?r=r.addChanges(a,i,u,e,t):t.selection&&(r=r.addSelection(t.startState.selection,i,u,e.newGroupDelay)),(o=="full"||o=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(t=>t.toJSON()),undone:r.undone.map(t=>t.toJSON())}},fromJSON(r){return new Uc(r.done.map(wi.fromJSON),r.undone.map(wi.fromJSON))}});function xZ(r={}){return[wZ,DZ.of(r),at.domEventHandlers({beforeinput(t,e){let n=t.inputType=="historyUndo"?TZ:t.inputType=="historyRedo"?BF:null;return n?(t.preventDefault(),n(e)):!1}})]}function FD(r,t){return function({state:e,dispatch:n}){if(!t&&e.readOnly)return!1;let o=e.field(wZ,!1);if(!o)return!1;let a=o.pop(r,e,t);return a?(n(a),!0):!1}}var TZ=FD(0,!1),BF=FD(1,!1),U1t=FD(0,!0),B1t=FD(1,!0);var wi=class r{constructor(t,e,n,o,a){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=o,this.selectionsAfter=a}setSelAfter(t){return new r(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(t){return new r(t.changes&&go.fromJSON(t.changes),[],t.mapped&&Gu.fromJSON(t.mapped),t.startSelection&&L.fromJSON(t.startSelection),t.selectionsAfter.map(L.fromJSON))}static fromTransaction(t,e){let n=Ha;for(let o of t.startState.facet(L1t)){let a=o(t);a.length&&(n=n.concat(a))}return!n.length&&t.changes.empty?null:new r(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,Ha)}static selection(t){return new r(void 0,Ha,void 0,void 0,t)}};function ED(r,t,e,n){let o=t+1>e+20?t-e-1:0,a=r.slice(o,t);return a.push(n),a}function W1t(r,t){let e=[],n=!1;return r.iterChangedRanges((o,a)=>e.push(o,a)),t.iterChangedRanges((o,a,i,u)=>{for(let l=0;l<e.length;){let s=e[l++],c=e[l++];u>=s&&i<=c&&(n=!0)}}),n}function G1t(r,t){return r.ranges.length==t.ranges.length&&r.ranges.filter((e,n)=>e.empty!=t.ranges[n].empty).length===0}function RZ(r,t){return r.length?t.length?r.concat(t):r:t}var Ha=[],z1t=200;function CZ(r,t){if(r.length){let e=r[r.length-1],n=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-z1t));return n.length&&n[n.length-1].eq(t)?r:(n.push(t),ED(r,r.length-1,1e9,e.setSelAfter(n)))}else return[wi.selection([t])]}function q1t(r){let t=r[r.length-1],e=r.slice();return e[r.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function LF(r,t){if(!r.length)return r;let e=r.length,n=Ha;for(;e;){let o=Q1t(r[e-1],t,n);if(o.changes&&!o.changes.empty||o.effects.length){let a=r.slice(0,e);return a[e-1]=o,a}else t=o.mapped,e--,n=o.selectionsAfter}return n.length?[wi.selection(n)]:Ha}function Q1t(r,t,e){let n=RZ(r.selectionsAfter.length?r.selectionsAfter.map(u=>u.map(t)):Ha,e);if(!r.changes)return wi.selection(n);let o=r.changes.map(t),a=t.mapDesc(r.changes,!0),i=r.mapped?r.mapped.composeDesc(a):a;return new wi(o,zt.mapEffects(r.effects,t),i,r.startSelection.map(a),n)}var H1t=/^(input\.type|delete)($|\.)/,Uc=class r{constructor(t,e,n=0,o=void 0){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=o}isolate(){return this.prevTime?new r(this.done,this.undone):this}addChanges(t,e,n,o,a){let i=this.done,u=i[i.length-1];return u&&u.changes&&!u.changes.empty&&t.changes&&(!n||H1t.test(n))&&(!u.selectionsAfter.length&&e-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,W1t(u.changes,t.changes))||n=="input.type.compose")?i=ED(i,i.length-1,o.minDepth,new wi(t.changes.compose(u.changes),RZ(zt.mapEffects(t.effects,u.changes),u.effects),u.mapped,u.startSelection,Ha)):i=ED(i,i.length,o.minDepth,t),new r(i,Ha,e,n)}addSelection(t,e,n,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Ha;return a.length>0&&e-this.prevTime<o&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&G1t(a[a.length-1],t)?this:new r(CZ(this.done,t),this.undone,e,n)}addMapping(t){return new r(LF(this.done,t),LF(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let o=t==0?this.done:this.undone;if(o.length==0)return null;let a=o[o.length-1],i=a.selectionsAfter[0]||e.selection;if(n&&a.selectionsAfter.length)return e.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:UF.of({side:t,rest:q1t(o),selection:i}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let u=o.length==1?Ha:o.slice(0,o.length-1);return a.mapped&&(u=LF(u,a.mapped)),e.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:UF.of({side:t,rest:u,selection:i}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}};Uc.empty=new Uc(Ha,Ha);var SZ=[{key:"Mod-z",run:TZ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:BF,preventDefault:!0},{linux:"Ctrl-Shift-z",run:BF,preventDefault:!0},{key:"Mod-u",run:U1t,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:B1t,preventDefault:!0}];function cp(r,t){return L.create(r.ranges.map(t),r.mainIndex)}function nu(r,t){return r.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function xi({state:r,dispatch:t},e){let n=cp(r.selection,e);return n.eq(r.selection,!0)?!1:(t(nu(r,n)),!0)}function MD(r,t){return L.cursor(t?r.to:r.from)}function OZ(r,t){return xi(r,e=>e.empty?r.moveByChar(e,t):MD(e,t))}function to(r){return r.textDirectionAt(r.state.selection.main.head)==Je.LTR}var EZ=r=>OZ(r,!to(r)),FZ=r=>OZ(r,to(r));function MZ(r,t){return xi(r,e=>e.empty?r.moveByGroup(e,t):MD(e,t))}var V1t=r=>MZ(r,!to(r)),j1t=r=>MZ(r,to(r));var gle=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function Z1t(r,t,e){if(t.type.prop(e))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(t.from,t.to)))||t.firstChild}function AD(r,t,e){let n=Mr(r).resolveInner(t.head),o=e?ae.closedBy:ae.openedBy;for(let l=t.head;;){let s=e?n.childAfter(l):n.childBefore(l);if(!s)break;Z1t(r,s,o)?n=s:l=e?s.to:s.from}let a=n.type.prop(o),i,u;return a&&(i=e?Di(r,n.from,1):Di(r,n.to,-1))&&i.matched?u=e?i.end.to:i.end.from:u=e?n.to:n.from,L.cursor(u,e?-1:1)}var Y1t=r=>xi(r,t=>AD(r.state,t,!to(r))),X1t=r=>xi(r,t=>AD(r.state,t,to(r)));function AZ(r,t){return xi(r,e=>{if(!e.empty)return MD(e,t);let n=r.moveVertically(e,t);return n.head!=e.head?n:r.moveToLineBoundary(e,t)})}var PZ=r=>AZ(r,!1),IZ=r=>AZ(r,!0);function NZ(r){let t=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,e=0,n=0,o;if(t){for(let a of r.state.facet(at.scrollMargins)){let i=a(r);i?.top&&(e=Math.max(i?.top,e)),i?.bottom&&(n=Math.max(i?.bottom,n))}o=r.scrollDOM.clientHeight-e-n}else o=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:e,marginBottom:n,selfScroll:t,height:Math.max(r.defaultLineHeight,o-5)}}function kZ(r,t){let e=NZ(r),{state:n}=r,o=cp(n.selection,i=>i.empty?r.moveVertically(i,t,e.height):MD(i,t));if(o.eq(n.selection))return!1;let a;if(e.selfScroll){let i=r.coordsAtPos(n.selection.main.head),u=r.scrollDOM.getBoundingClientRect(),l=u.top+e.marginTop,s=u.bottom-e.marginBottom;i&&i.top>l&&i.bottom<s&&(a=at.scrollIntoView(o.main.head,{y:"start",yMargin:i.top-l}))}return r.dispatch(nu(n,o),{effects:a}),!0}var dZ=r=>kZ(r,!1),WF=r=>kZ(r,!0);function ns(r,t,e){let n=r.lineBlockAt(t.head),o=r.moveToLineBoundary(t,e);if(o.head==t.head&&o.head!=(e?n.to:n.from)&&(o=r.moveToLineBoundary(t,e,!1)),!e&&o.head==n.from&&n.length){let a=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&t.head!=n.from+a&&(o=L.cursor(n.from+a))}return o}var J1t=r=>xi(r,t=>ns(r,t,!0)),K1t=r=>xi(r,t=>ns(r,t,!1)),t0t=r=>xi(r,t=>ns(r,t,!to(r))),e0t=r=>xi(r,t=>ns(r,t,to(r))),r0t=r=>xi(r,t=>L.cursor(r.lineBlockAt(t.head).from,1)),n0t=r=>xi(r,t=>L.cursor(r.lineBlockAt(t.head).to,-1));function o0t(r,t,e){let n=!1,o=cp(r.selection,a=>{let i=Di(r,a.head,-1)||Di(r,a.head,1)||a.head>0&&Di(r,a.head-1,1)||a.head<r.doc.length&&Di(r,a.head+1,-1);if(!i||!i.end)return a;n=!0;let u=i.start.from==a.head?i.end.to:i.end.from;return e?L.range(a.anchor,u):L.cursor(u)});return n?(t(nu(r,o)),!0):!1}var a0t=({state:r,dispatch:t})=>o0t(r,t,!1);function Va(r,t){let e=cp(r.state.selection,n=>{let o=t(n);return L.range(n.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return e.eq(r.state.selection)?!1:(r.dispatch(nu(r.state,e)),!0)}function $Z(r,t){return Va(r,e=>r.moveByChar(e,t))}var LZ=r=>$Z(r,!to(r)),UZ=r=>$Z(r,to(r));function BZ(r,t){return Va(r,e=>r.moveByGroup(e,t))}var i0t=r=>BZ(r,!to(r)),u0t=r=>BZ(r,to(r));var l0t=r=>Va(r,t=>AD(r.state,t,!to(r))),s0t=r=>Va(r,t=>AD(r.state,t,to(r)));function WZ(r,t){return Va(r,e=>r.moveVertically(e,t))}var GZ=r=>WZ(r,!1),zZ=r=>WZ(r,!0);function qZ(r,t){return Va(r,e=>r.moveVertically(e,t,NZ(r).height))}var pZ=r=>qZ(r,!1),hZ=r=>qZ(r,!0),c0t=r=>Va(r,t=>ns(r,t,!0)),f0t=r=>Va(r,t=>ns(r,t,!1)),d0t=r=>Va(r,t=>ns(r,t,!to(r))),p0t=r=>Va(r,t=>ns(r,t,to(r))),h0t=r=>Va(r,t=>L.cursor(r.lineBlockAt(t.head).from)),m0t=r=>Va(r,t=>L.cursor(r.lineBlockAt(t.head).to)),mZ=({state:r,dispatch:t})=>(t(nu(r,{anchor:0})),!0),vZ=({state:r,dispatch:t})=>(t(nu(r,{anchor:r.doc.length})),!0),gZ=({state:r,dispatch:t})=>(t(nu(r,{anchor:r.selection.main.anchor,head:0})),!0),_Z=({state:r,dispatch:t})=>(t(nu(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),v0t=({state:r,dispatch:t})=>(t(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),g0t=({state:r,dispatch:t})=>{let e=PD(r).map(({from:n,to:o})=>L.range(n,Math.min(o+1,r.doc.length)));return t(r.update({selection:L.create(e),userEvent:"select"})),!0},_0t=({state:r,dispatch:t})=>{let e=cp(r.selection,n=>{let o=Mr(r),a=o.resolveStack(n.from,1);if(n.empty){let i=o.resolveStack(n.from,-1);i.node.from>=a.node.from&&i.node.to<=a.node.to&&(a=i)}for(let i=a;i;i=i.next){let{node:u}=i;if((u.from<n.from&&u.to>=n.to||u.to>n.to&&u.from<=n.from)&&i.next)return L.range(u.to,u.from)}return n});return e.eq(r.selection)?!1:(t(nu(r,e)),!0)},y0t=({state:r,dispatch:t})=>{let e=r.selection,n=null;return e.ranges.length>1?n=L.create([e.main]):e.main.empty||(n=L.create([L.cursor(e.main.head)])),n?(t(nu(r,n)),!0):!1};function Sg(r,t){if(r.state.readOnly)return!1;let e="delete.selection",{state:n}=r,o=n.changeByRange(a=>{let{from:i,to:u}=a;if(i==u){let l=t(a);l<i?(e="delete.backward",l=OD(r,l,!1)):l>i&&(e="delete.forward",l=OD(r,l,!0)),i=Math.min(i,l),u=Math.max(u,l)}else i=OD(r,i,!1),u=OD(r,u,!0);return i==u?{range:a}:{changes:{from:i,to:u},range:L.cursor(i,i<a.head?-1:1)}});return o.changes.empty?!1:(r.dispatch(n.update(o,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?at.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function OD(r,t,e){if(r instanceof at)for(let n of r.state.facet(at.atomicRanges).map(o=>o(r)))n.between(t,t,(o,a)=>{o<t&&a>t&&(t=e?a:o)});return t}var QZ=(r,t,e)=>Sg(r,n=>{let o=n.from,{state:a}=r,i=a.doc.lineAt(o),u,l;if(e&&!t&&o>i.from&&o<i.from+200&&!/[^ \t]/.test(u=i.text.slice(0,o-i.from))){if(u[u.length-1]=="	")return o-1;let s=zu(u,a.tabSize),c=s%Tg(a)||Tg(a);for(let f=0;f<c&&u[u.length-1-f]==" ";f++)o--;l=o}else l=Xr(i.text,o-i.from,t,t)+i.from,l==o&&i.number!=(t?a.doc.lines:1)?l+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(i.text.slice(l-i.from,o-i.from))&&(l=Xr(i.text,l-i.from,!1,!1)+i.from);return l}),GF=r=>QZ(r,!1,!0);var HZ=r=>QZ(r,!0,!1),VZ=(r,t)=>Sg(r,e=>{let n=e.head,{state:o}=r,a=o.doc.lineAt(n),i=o.charCategorizer(n);for(let u=null;;){if(n==(t?a.to:a.from)){n==e.head&&a.number!=(t?o.doc.lines:1)&&(n+=t?1:-1);break}let l=Xr(a.text,n-a.from,t)+a.from,s=a.text.slice(Math.min(n,l)-a.from,Math.max(n,l)-a.from),c=i(s);if(u!=null&&c!=u)break;(s!=" "||n!=e.head)&&(u=c),n=l}return n}),jZ=r=>VZ(r,!1),b0t=r=>VZ(r,!0),D0t=r=>Sg(r,t=>{let e=r.lineBlockAt(t.head).to;return t.head<e?e:Math.min(r.state.doc.length,t.head+1)});var w0t=r=>Sg(r,t=>{let e=r.moveToLineBoundary(t,!1).head;return t.head>e?e:Math.max(0,t.head-1)}),x0t=r=>Sg(r,t=>{let e=r.moveToLineBoundary(t,!0).head;return t.head<e?e:Math.min(r.state.doc.length,t.head+1)});var T0t=({state:r,dispatch:t})=>{if(r.readOnly)return!1;let e=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:xe.of(["",""])},range:L.cursor(n.from)}));return t(r.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},R0t=({state:r,dispatch:t})=>{if(r.readOnly)return!1;let e=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let o=n.from,a=r.doc.lineAt(o),i=o==a.from?o-1:Xr(a.text,o-a.from,!1)+a.from,u=o==a.to?o+1:Xr(a.text,o-a.from,!0)+a.from;return{changes:{from:i,to:u,insert:r.doc.slice(o,u).append(r.doc.slice(i,o))},range:L.cursor(u)}});return e.changes.empty?!1:(t(r.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function PD(r){let t=[],e=-1;for(let n of r.selection.ranges){let o=r.doc.lineAt(n.from),a=r.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=r.doc.lineAt(n.to-1)),e>=o.number){let i=t[t.length-1];i.to=a.to,i.ranges.push(n)}else t.push({from:o.from,to:a.to,ranges:[n]});e=a.number+1}return t}function ZZ(r,t,e){if(r.readOnly)return!1;let n=[],o=[];for(let a of PD(r)){if(e?a.to==r.doc.length:a.from==0)continue;let i=r.doc.lineAt(e?a.to+1:a.from-1),u=i.length+1;if(e){n.push({from:a.to,to:i.to},{from:a.from,insert:i.text+r.lineBreak});for(let l of a.ranges)o.push(L.range(Math.min(r.doc.length,l.anchor+u),Math.min(r.doc.length,l.head+u)))}else{n.push({from:i.from,to:a.from},{from:a.to,insert:r.lineBreak+i.text});for(let l of a.ranges)o.push(L.range(l.anchor-u,l.head-u))}}return n.length?(t(r.update({changes:n,scrollIntoView:!0,selection:L.create(o,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}var C0t=({state:r,dispatch:t})=>ZZ(r,t,!1),S0t=({state:r,dispatch:t})=>ZZ(r,t,!0);function YZ(r,t,e){if(r.readOnly)return!1;let n=[];for(let o of PD(r))e?n.push({from:o.from,insert:r.doc.slice(o.from,o.to)+r.lineBreak}):n.push({from:o.to,insert:r.lineBreak+r.doc.slice(o.from,o.to)});return t(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var O0t=({state:r,dispatch:t})=>YZ(r,t,!1),E0t=({state:r,dispatch:t})=>YZ(r,t,!0),F0t=r=>{if(r.state.readOnly)return!1;let{state:t}=r,e=t.changes(PD(t).map(({from:o,to:a})=>(o>0?o--:a<t.doc.length&&a++,{from:o,to:a}))),n=cp(t.selection,o=>{let a;if(r.lineWrapping){let i=r.lineBlockAt(o.head),u=r.coordsAtPos(o.head,o.assoc||1);u&&(a=i.bottom+r.documentTop-u.bottom+r.defaultLineHeight/2)}return r.moveVertically(o,!0,a)}).map(e);return r.dispatch({changes:e,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function M0t(r,t){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=Mr(r).resolveInner(t),n=e.childBefore(t),o=e.childAfter(t),a;return n&&o&&n.to<=t&&o.from>=t&&(a=n.type.prop(ae.closedBy))&&a.indexOf(o.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(o.from).from&&!/\S/.test(r.sliceDoc(n.to,o.from))?{from:n.to,to:o.from}:null}var yZ=XZ(!1),A0t=XZ(!0);function XZ(r){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(o=>{let{from:a,to:i}=o,u=t.doc.lineAt(a),l=!r&&a==i&&M0t(t,a);r&&(a=i=(i<=u.to?u:t.doc.lineAt(i)).to);let s=new $c(t,{simulateBreak:a,simulateDoubleBreak:!!l}),c=RD(s,a);for(c==null&&(c=zu(/^\s*/.exec(t.doc.lineAt(a).text)[0],t.tabSize));i<u.to&&/\s/.test(u.text[i-u.from]);)i++;l?{from:a,to:i}=l:a>u.from&&a<u.from+100&&!/\S/.test(u.text.slice(0,a))&&(a=u.from);let f=["",sp(t,c)];return l&&f.push(sp(t,s.lineIndent(u.from,-1))),{changes:{from:a,to:i,insert:xe.of(f)},range:L.cursor(a+1+f[1].length)}});return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function QF(r,t){let e=-1;return r.changeByRange(n=>{let o=[];for(let i=n.from;i<=n.to;){let u=r.doc.lineAt(i);u.number>e&&(n.empty||n.to>u.from)&&(t(u,o,n),e=u.number),i=u.to+1}let a=r.changes(o);return{changes:o,range:L.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}var P0t=({state:r,dispatch:t})=>{if(r.readOnly)return!1;let e=Object.create(null),n=new $c(r,{overrideIndentation:a=>{let i=e[a];return i??-1}}),o=QF(r,(a,i,u)=>{let l=RD(n,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let s=/^\s*/.exec(a.text)[0],c=sp(r,l);(s!=c||u.from<a.from+s.length)&&(e[a.from]=l,i.push({from:a.from,to:a.from+s.length,insert:c}))});return o.changes.empty||t(r.update(o,{userEvent:"indent"})),!0},I0t=({state:r,dispatch:t})=>r.readOnly?!1:(t(r.update(QF(r,(e,n)=>{n.push({from:e.from,insert:r.facet(lp)})}),{userEvent:"input.indent"})),!0),N0t=({state:r,dispatch:t})=>r.readOnly?!1:(t(r.update(QF(r,(e,n)=>{let o=/^\s*/.exec(e.text)[0];if(!o)return;let a=zu(o,r.tabSize),i=0,u=sp(r,Math.max(0,a-Tg(r)));for(;i<o.length&&i<u.length&&o.charCodeAt(i)==u.charCodeAt(i);)i++;n.push({from:e.from+i,to:e.from+o.length,insert:u.slice(i)})}),{userEvent:"delete.dedent"})),!0),k0t=r=>(r.setTabFocusMode(),!0);var $0t=[{key:"Ctrl-b",run:EZ,shift:LZ,preventDefault:!0},{key:"Ctrl-f",run:FZ,shift:UZ},{key:"Ctrl-p",run:PZ,shift:GZ},{key:"Ctrl-n",run:IZ,shift:zZ},{key:"Ctrl-a",run:r0t,shift:h0t},{key:"Ctrl-e",run:n0t,shift:m0t},{key:"Ctrl-d",run:HZ},{key:"Ctrl-h",run:GF},{key:"Ctrl-k",run:D0t},{key:"Ctrl-Alt-h",run:jZ},{key:"Ctrl-o",run:T0t},{key:"Ctrl-t",run:R0t},{key:"Ctrl-v",run:WF}],L0t=[{key:"ArrowLeft",run:EZ,shift:LZ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:V1t,shift:i0t,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t0t,shift:d0t,preventDefault:!0},{key:"ArrowRight",run:FZ,shift:UZ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:j1t,shift:u0t,preventDefault:!0},{mac:"Cmd-ArrowRight",run:e0t,shift:p0t,preventDefault:!0},{key:"ArrowUp",run:PZ,shift:GZ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:mZ,shift:gZ},{mac:"Ctrl-ArrowUp",run:dZ,shift:pZ},{key:"ArrowDown",run:IZ,shift:zZ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:vZ,shift:_Z},{mac:"Ctrl-ArrowDown",run:WF,shift:hZ},{key:"PageUp",run:dZ,shift:pZ},{key:"PageDown",run:WF,shift:hZ},{key:"Home",run:K1t,shift:f0t,preventDefault:!0},{key:"Mod-Home",run:mZ,shift:gZ},{key:"End",run:J1t,shift:c0t,preventDefault:!0},{key:"Mod-End",run:vZ,shift:_Z},{key:"Enter",run:yZ,shift:yZ},{key:"Mod-a",run:v0t},{key:"Backspace",run:GF,shift:GF},{key:"Delete",run:HZ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:jZ},{key:"Mod-Delete",mac:"Alt-Delete",run:b0t},{mac:"Mod-Backspace",run:w0t},{mac:"Mod-Delete",run:x0t}].concat($0t.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),JZ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Y1t,shift:l0t},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:X1t,shift:s0t},{key:"Alt-ArrowUp",run:C0t},{key:"Shift-Alt-ArrowUp",run:O0t},{key:"Alt-ArrowDown",run:S0t},{key:"Shift-Alt-ArrowDown",run:E0t},{key:"Escape",run:y0t},{key:"Mod-Enter",run:A0t},{key:"Alt-l",mac:"Ctrl-l",run:g0t},{key:"Mod-i",run:_0t,preventDefault:!0},{key:"Mod-[",run:N0t},{key:"Mod-]",run:I0t},{key:"Mod-Alt-\\",run:P0t},{key:"Shift-Mod-k",run:F0t},{key:"Shift-Mod-\\",run:a0t},{key:"Mod-/",run:F1t},{key:"Alt-A",run:A1t},{key:"Ctrl-m",mac:"Shift-Alt-m",run:k0t}].concat(L0t);function Ve(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=e[n];typeof o=="string"?r.setAttribute(n,o):o!=null&&(r[n]=o)}t++}for(;t<arguments.length;t++)KZ(r,arguments[t]);return r}function KZ(r,t){if(typeof t=="string")r.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)r.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)KZ(r,t[e]);else throw new RangeError("Unsupported child node: "+t)}var tY=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r,as=class{constructor(t,e,n=0,o=t.length,a,i){this.test=i,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,o),this.bufferStart=n,this.normalize=a?u=>a(tY(u)):tY,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Zr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Qv(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=vo(t);let o=this.normalize(e);if(o.length)for(let a=0,i=n;;a++){let u=o.charCodeAt(a),l=this.match(u,i,this.bufferPos+this.bufferStart);if(a==o.length-1){if(l)return this.value=l,this;break}i==n&&a<e.length&&e.charCodeAt(a)==u&&i++}}}match(t,e,n){let o=null;for(let a=0;a<this.matches.length;a+=2){let i=this.matches[a],u=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?o={from:this.matches[a+1],to:n}:(this.matches[a]++,u=!0)),u||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?o={from:e,to:n}:this.matches.push(1,e)),o&&this.test&&!this.test(o.from,o.to,this.buffer,this.bufferStart)&&(o=null),o}};typeof Symbol<"u"&&(as.prototype[Symbol.iterator]=function(){return this});var oY={from:-1,to:-1,match:/.*/.exec("")},JF="gm"+(/x/.unicode==null?"":"u"),kD=class{constructor(t,e,n,o=0,a=t.length){if(this.text=t,this.to=a,this.curLine="",this.done=!1,this.value=oY,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new LD(t,e,n,o,a);this.re=new RegExp(e,JF+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=t.iter();let i=t.lineAt(o);this.curLineStart=i.from,this.matchPos=UD(t,o),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,o=n+e[0].length;if(this.matchPos=UD(this.text,o+(n==o?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<o||n>this.value.to)&&(!this.test||this.test(n,o,e)))return this.value={from:n,to:o,match:e},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}},HF=new WeakMap,$D=class r{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let o=HF.get(t);if(!o||o.from>=n||o.to<=e){let u=new r(e,t.sliceString(e,n));return HF.set(t,u),u}if(o.from==e&&o.to==n)return o;let{text:a,from:i}=o;return i>e&&(a=t.sliceString(e,i)+a,i=e),o.to<n&&(a+=t.sliceString(o.to,n)),HF.set(t,new r(i,a)),new r(e,a.slice(e-i,n-i))}},LD=class{constructor(t,e,n,o,a){this.text=t,this.to=a,this.done=!1,this.value=oY,this.matchPos=UD(t,o),this.re=new RegExp(e,JF+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=$D.get(t,o,this.chunkEnd(o+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let n=this.flat.from+e.index,o=n+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,o,e)))return this.value={from:n,to:o,match:e},this.matchPos=UD(this.text,o+(n==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=$D.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(kD.prototype[Symbol.iterator]=LD.prototype[Symbol.iterator]=function(){return this});function U0t(r){try{return new RegExp(r,JF),!0}catch{return!1}}function UD(r,t){if(t>=r.length)return t;let e=r.lineAt(t),n;for(;t<e.to&&(n=e.text.charCodeAt(t-e.from))>=56320&&n<57344;)t++;return t}function VF(r){let t=String(r.state.doc.lineAt(r.state.selection.main.head).number),e=Ve("input",{class:"cm-textfield",name:"line",value:t}),n=Ve("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),r.dispatch({effects:BD.of(!1)}),r.focus()):a.keyCode==13&&(a.preventDefault(),o())},onsubmit:a=>{a.preventDefault(),o()}},Ve("label",r.state.phrase("Go to line"),": ",e)," ",Ve("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function o(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!a)return;let{state:i}=r,u=i.doc.lineAt(i.selection.main.head),[,l,s,c,f]=a,d=c?+c.slice(1):0,p=s?+s:u.number;if(s&&f){let _=p/100;l&&(_=_*(l=="-"?-1:1)+u.number/i.doc.lines),p=Math.round(i.doc.lines*_)}else s&&l&&(p=p*(l=="-"?-1:1)+u.number);let h=i.doc.line(Math.max(1,Math.min(i.doc.lines,p))),m=L.cursor(h.from+Math.max(0,Math.min(d,h.length)));r.dispatch({effects:[BD.of(!1),at.scrollIntoView(m.from,{y:"center"})],selection:m}),r.focus()}return{dom:n}}var BD=zt.define(),eY=gr.define({create(){return!0},update(r,t){for(let e of t.effects)e.is(BD)&&(r=e.value);return r},provide:r=>Ac.from(r,t=>t?VF:null)}),B0t=r=>{let t=Pc(r,VF);if(!t){let e=[BD.of(!0)];r.state.field(eY,!1)==null&&e.push(zt.appendConfig.of([eY,W0t])),r.dispatch({effects:e}),t=Pc(r,VF)}return t&&t.dom.querySelector("input").select(),!0},W0t=at.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),G0t={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},aY=ut.define({combine(r){return Jn(r,G0t,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}});function iY(r){let t=[V0t,H0t];return r&&t.push(aY.of(r)),t}var z0t=xt.mark({class:"cm-selectionMatch"}),q0t=xt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function rY(r,t,e,n){return(e==0||r(t.sliceDoc(e-1,e))!=Xe.Word)&&(n==t.doc.length||r(t.sliceDoc(n,n+1))!=Xe.Word)}function Q0t(r,t,e,n){return r(t.sliceDoc(e,e+1))==Xe.Word&&r(t.sliceDoc(n-1,n))==Xe.Word}var H0t=Tr.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let t=r.state.facet(aY),{state:e}=r,n=e.selection;if(n.ranges.length>1)return xt.none;let o=n.main,a,i=null;if(o.empty){if(!t.highlightWordAroundCursor)return xt.none;let l=e.wordAt(o.head);if(!l)return xt.none;i=e.charCategorizer(o.head),a=e.sliceDoc(l.from,l.to)}else{let l=o.to-o.from;if(l<t.minSelectionLength||l>200)return xt.none;if(t.wholeWords){if(a=e.sliceDoc(o.from,o.to),i=e.charCategorizer(o.head),!(rY(i,e,o.from,o.to)&&Q0t(i,e,o.from,o.to)))return xt.none}else if(a=e.sliceDoc(o.from,o.to),!a)return xt.none}let u=[];for(let l of r.visibleRanges){let s=new as(e.doc,a,l.from,l.to);for(;!s.next().done;){let{from:c,to:f}=s.value;if((!i||rY(i,e,c,f))&&(o.empty&&c<=o.from&&f>=o.to?u.push(q0t.range(c,f)):(c>=o.to||f<=o.from)&&u.push(z0t.range(c,f)),u.length>t.maxMatches))return xt.none}}return xt.set(u)}},{decorations:r=>r.decorations}),V0t=at.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),j0t=({state:r,dispatch:t})=>{let{selection:e}=r,n=L.create(e.ranges.map(o=>r.wordAt(o.head)||L.cursor(o.head)),e.mainIndex);return n.eq(e)?!1:(t(r.update({selection:n})),!0)};function Z0t(r,t){let{main:e,ranges:n}=r.selection,o=r.wordAt(e.head),a=o&&o.from==e.from&&o.to==e.to;for(let i=!1,u=new as(r.doc,t,n[n.length-1].to);;)if(u.next(),u.done){if(i)return null;u=new as(r.doc,t,0,Math.max(0,n[n.length-1].from-1)),i=!0}else{if(i&&n.some(l=>l.from==u.value.from))continue;if(a){let l=r.wordAt(u.value.from);if(!l||l.from!=u.value.from||l.to!=u.value.to)continue}return u.value}}var Y0t=({state:r,dispatch:t})=>{let{ranges:e}=r.selection;if(e.some(a=>a.from===a.to))return j0t({state:r,dispatch:t});let n=r.sliceDoc(e[0].from,e[0].to);if(r.selection.ranges.some(a=>r.sliceDoc(a.from,a.to)!=n))return!1;let o=Z0t(r,n);return o?(t(r.update({selection:r.selection.addRange(L.range(o.from,o.to),!1),effects:at.scrollIntoView(o.to)})),!0):!1},pp=ut.define({combine(r){return Jn(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new XF(t),scrollToMatch:t=>at.scrollIntoView(t)})}});var WD=class{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||U0t(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(e,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new ZF(this):new jF(this)}getCursor(t,e=0,n){let o=t.doc?t:He.create({doc:t});return n==null&&(n=o.doc.length),this.regexp?dp(this,o,e,n):fp(this,o,e,n)}},GD=class{constructor(t){this.spec=t}};function fp(r,t,e,n){return new as(t.doc,r.unquoted,e,n,r.caseSensitive?void 0:o=>o.toLowerCase(),r.wholeWord?X0t(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function X0t(r,t){return(e,n,o,a)=>((a>e||a+o.length<n)&&(a=Math.max(0,e-2),o=r.sliceString(a,Math.min(r.length,n+2))),(t(zD(o,e-a))!=Xe.Word||t(qD(o,e-a))!=Xe.Word)&&(t(qD(o,n-a))!=Xe.Word||t(zD(o,n-a))!=Xe.Word))}var jF=class extends GD{constructor(t){super(t)}nextMatch(t,e,n){let o=fp(this.spec,t,n,t.doc.length).nextOverlapping();if(o.done){let a=Math.min(t.doc.length,e+this.spec.unquoted.length);o=fp(this.spec,t,0,a).nextOverlapping()}return o.done||o.value.from==e&&o.value.to==n?null:o.value}prevMatchInRange(t,e,n){for(let o=n;;){let a=Math.max(e,o-1e4-this.spec.unquoted.length),i=fp(this.spec,t,a,o),u=null;for(;!i.nextOverlapping().done;)u=i.value;if(u)return u;if(a==e)return null;o-=1e4}}prevMatch(t,e,n){let o=this.prevMatchInRange(t,0,e);return o||(o=this.prevMatchInRange(t,Math.max(0,n-this.spec.unquoted.length),t.doc.length)),o&&(o.from!=e||o.to!=n)?o:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=fp(this.spec,t,0,t.doc.length),o=[];for(;!n.next().done;){if(o.length>=e)return null;o.push(n.value)}return o}highlight(t,e,n,o){let a=fp(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}};function dp(r,t,e,n){return new kD(t.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?J0t(t.charCategorizer(t.selection.main.head)):void 0},e,n)}function zD(r,t){return r.slice(Xr(r,t,!1),t)}function qD(r,t){return r.slice(t,Xr(r,t))}function J0t(r){return(t,e,n)=>!n[0].length||(r(zD(n.input,n.index))!=Xe.Word||r(qD(n.input,n.index))!=Xe.Word)&&(r(qD(n.input,n.index+n[0].length))!=Xe.Word||r(zD(n.input,n.index+n[0].length))!=Xe.Word)}var ZF=class extends GD{nextMatch(t,e,n){let o=dp(this.spec,t,n,t.doc.length).next();return o.done&&(o=dp(this.spec,t,0,e).next()),o.done?null:o.value}prevMatchInRange(t,e,n){for(let o=1;;o++){let a=Math.max(e,n-o*1e4),i=dp(this.spec,t,a,n),u=null;for(;!i.next().done;)u=i.value;if(u&&(a==e||u.from>a+10))return u;if(a==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(e,n)=>n=="$"?"$":n=="&"?t.match[0]:n!="0"&&+n<t.match.length?t.match[n]:e)}matchAll(t,e){let n=dp(this.spec,t,0,t.doc.length),o=[];for(;!n.next().done;){if(o.length>=e)return null;o.push(n.value)}return o}highlight(t,e,n,o){let a=dp(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}},Eg=zt.define(),KF=zt.define(),os=gr.define({create(r){return new Og(YF(r).create(),null)},update(r,t){for(let e of t.effects)e.is(Eg)?r=new Og(e.value.create(),r.panel):e.is(KF)&&(r=new Og(r.query,e.value?tM:null));return r},provide:r=>Ac.from(r,t=>t.panel)});var Og=class{constructor(t,e){this.query=t,this.panel=e}},K0t=xt.mark({class:"cm-searchMatch"}),tyt=xt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),eyt=Tr.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(os))}update(r){let t=r.state.field(os);(t!=r.startState.field(os)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:r,panel:t}){if(!t||!r.spec.valid)return xt.none;let{view:e}=this,n=new _i;for(let o=0,a=e.visibleRanges,i=a.length;o<i;o++){let{from:u,to:l}=a[o];for(;o<i-1&&l>a[o+1].from-2*250;)l=a[++o].to;r.highlight(e.state,u,l,(s,c)=>{let f=e.state.selection.ranges.some(d=>d.from==s&&d.to==c);n.add(s,c,f?tyt:K0t)})}return n.finish()}},{decorations:r=>r.decorations});function Fg(r){return t=>{let e=t.state.field(os,!1);return e&&e.query.spec.valid?r(t,e):sY(t)}}var QD=Fg((r,{query:t})=>{let{to:e}=r.state.selection.main,n=t.nextMatch(r.state,e,e);if(!n)return!1;let o=L.single(n.from,n.to),a=r.state.facet(pp);return r.dispatch({selection:o,effects:[eM(r,n),a.scrollToMatch(o.main,r)],userEvent:"select.search"}),lY(r),!0}),HD=Fg((r,{query:t})=>{let{state:e}=r,{from:n}=e.selection.main,o=t.prevMatch(e,n,n);if(!o)return!1;let a=L.single(o.from,o.to),i=r.state.facet(pp);return r.dispatch({selection:a,effects:[eM(r,o),i.scrollToMatch(a.main,r)],userEvent:"select.search"}),lY(r),!0}),ryt=Fg((r,{query:t})=>{let e=t.matchAll(r.state,1e3);return!e||!e.length?!1:(r.dispatch({selection:L.create(e.map(n=>L.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),nyt=({state:r,dispatch:t})=>{let e=r.selection;if(e.ranges.length>1||e.main.empty)return!1;let{from:n,to:o}=e.main,a=[],i=0;for(let u=new as(r.doc,r.sliceDoc(n,o));!u.next().done;){if(a.length>1e3)return!1;u.value.from==n&&(i=a.length),a.push(L.range(u.value.from,u.value.to))}return t(r.update({selection:L.create(a,i),userEvent:"select.search.matches"})),!0},nY=Fg((r,{query:t})=>{let{state:e}=r,{from:n,to:o}=e.selection.main;if(e.readOnly)return!1;let a=t.nextMatch(e,n,n);if(!a)return!1;let i=[],u,l,s=[];if(a.from==n&&a.to==o&&(l=e.toText(t.getReplacement(a)),i.push({from:a.from,to:a.to,insert:l}),a=t.nextMatch(e,a.from,a.to),s.push(at.announce.of(e.phrase("replaced match on line $",e.doc.lineAt(n).number)+"."))),a){let c=i.length==0||i[0].from>=a.to?0:a.to-a.from-l.length;u=L.single(a.from-c,a.to-c),s.push(eM(r,a)),s.push(e.facet(pp).scrollToMatch(u.main,r))}return r.dispatch({changes:i,selection:u,effects:s,userEvent:"input.replace"}),!0}),oyt=Fg((r,{query:t})=>{if(r.state.readOnly)return!1;let e=t.matchAll(r.state,1e9).map(o=>{let{from:a,to:i}=o;return{from:a,to:i,insert:t.getReplacement(o)}});if(!e.length)return!1;let n=r.state.phrase("replaced $ matches",e.length)+".";return r.dispatch({changes:e,effects:at.announce.of(n),userEvent:"input.replace.all"}),!0});function tM(r){return r.state.facet(pp).createPanel(r)}function YF(r,t){var e,n,o,a,i;let u=r.selection.main,l=u.empty||u.to>u.from+100?"":r.sliceDoc(u.from,u.to);if(t&&!l)return t;let s=r.facet(pp);return new WD({search:((e=t?.literal)!==null&&e!==void 0?e:s.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=t?.caseSensitive)!==null&&n!==void 0?n:s.caseSensitive,literal:(o=t?.literal)!==null&&o!==void 0?o:s.literal,regexp:(a=t?.regexp)!==null&&a!==void 0?a:s.regexp,wholeWord:(i=t?.wholeWord)!==null&&i!==void 0?i:s.wholeWord})}function uY(r){let t=Pc(r,tM);return t&&t.dom.querySelector("[main-field]")}function lY(r){let t=uY(r);t&&t==r.root.activeElement&&t.select()}var sY=r=>{let t=r.state.field(os,!1);if(t&&t.panel){let e=uY(r);if(e&&e!=r.root.activeElement){let n=YF(r.state,t.query.spec);n.valid&&r.dispatch({effects:Eg.of(n)}),e.focus(),e.select()}}else r.dispatch({effects:[KF.of(!0),t?Eg.of(YF(r.state,t.query.spec)):zt.appendConfig.of(iyt)]});return!0},cY=r=>{let t=r.state.field(os,!1);if(!t||!t.panel)return!1;let e=Pc(r,tM);return e&&e.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:KF.of(!1)}),!0},fY=[{key:"Mod-f",run:sY,scope:"editor search-panel"},{key:"F3",run:QD,shift:HD,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:QD,shift:HD,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:cY,scope:"editor search-panel"},{key:"Mod-Shift-l",run:nyt},{key:"Mod-Alt-g",run:B0t},{key:"Mod-d",run:Y0t,preventDefault:!0}],XF=class{constructor(t){this.view=t;let e=this.query=t.state.field(os).query.spec;this.commit=this.commit.bind(this),this.searchField=Ve("input",{value:e.search,placeholder:pa(t,"Find"),"aria-label":pa(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ve("input",{value:e.replace,placeholder:pa(t,"Replace"),"aria-label":pa(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ve("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=Ve("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=Ve("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit});function n(o,a,i){return Ve("button",{class:"cm-button",name:o,onclick:a,type:"button"},i)}this.dom=Ve("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,n("next",()=>QD(t),[pa(t,"next")]),n("prev",()=>HD(t),[pa(t,"previous")]),n("select",()=>ryt(t),[pa(t,"all")]),Ve("label",null,[this.caseField,pa(t,"match case")]),Ve("label",null,[this.reField,pa(t,"regexp")]),Ve("label",null,[this.wordField,pa(t,"by word")]),...t.state.readOnly?[]:[Ve("br"),this.replaceField,n("replace",()=>nY(t),[pa(t,"replace")]),n("replaceAll",()=>oyt(t),[pa(t,"replace all")])],Ve("button",{name:"close",onclick:()=>cY(t),"aria-label":pa(t,"close"),type:"button"},["\xD7"])])}commit(){let t=new WD({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Eg.of(t)}))}keydown(t){fj(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?HD:QD)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),nY(this.view))}update(t){for(let e of t.transactions)for(let n of e.effects)n.is(Eg)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(pp).top}};function pa(r,t){return r.state.phrase(t)}var ID=30,ND=/[\s\.,:;?!]/;function eM(r,{from:t,to:e}){let n=r.state.doc.lineAt(t),o=r.state.doc.lineAt(e).to,a=Math.max(n.from,t-ID),i=Math.min(o,e+ID),u=r.state.sliceDoc(a,i);if(a!=n.from){for(let l=0;l<ID;l++)if(!ND.test(u[l+1])&&ND.test(u[l])){u=u.slice(l);break}}if(i!=o){for(let l=u.length-1;l>u.length-ID;l--)if(!ND.test(u[l-1])&&ND.test(u[l])){u=u.slice(0,l);break}}return at.announce.of(`${r.state.phrase("current match")}. ${u} ${r.state.phrase("on line")} ${n.number}.`)}var ayt=at.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),iyt=[os,Wa.low(eyt),ayt];var jD=class{constructor(t,e,n,o){this.state=t,this.pos=e,this.explicit=n,this.view=o,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=Mr(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),o=e.text.slice(n-e.from,this.pos-e.from),a=o.search(wY(t,!1));return a<0?null:{from:n+a,to:this.pos,text:o.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(t,e,n){t=="abort"&&this.abortListeners&&(this.abortListeners.push(e),n&&n.onDocChange&&(this.abortOnDocChange=!0))}};function dY(r){let t=Object.keys(r).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function uyt(r){let t=Object.create(null),e=Object.create(null);for(let{label:o}of r){t[o[0]]=!0;for(let a=1;a<o.length;a++)e[o[a]]=!0}let n=dY(t)+dY(e)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function pM(r){let t=r.map(o=>typeof o=="string"?{label:o}:o),[e,n]=t.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:uyt(t);return o=>{let a=o.matchBefore(n);return a||o.explicit?{from:a?a.from:o.pos,options:t,validFor:e}:null}}function DY(r,t){return e=>{for(let n=Mr(e.state).resolveInner(e.pos,-1);n;n=n.parent){if(r.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return t(e)}}var ZD=class{constructor(t,e,n,o){this.completion=t,this.source=e,this.match=n,this.score=o}};function is(r){return r.selection.main.from}function wY(r,t){var e;let{source:n}=r,o=t&&n[0]!="^",a=n[n.length-1]!="$";return!o&&!a?r:new RegExp(`${o?"^":""}(?:${n})${a?"$":""}`,(e=r.flags)!==null&&e!==void 0?e:r.ignoreCase?"i":"")}var hM=zo.define();function lyt(r,t,e,n){let{main:o}=r.selection,a=e-o.from,i=n-o.from;return Object.assign(Object.assign({},r.changeByRange(u=>{if(u!=o&&e!=n&&r.sliceDoc(u.from+a,u.from+i)!=r.sliceDoc(e,n))return{range:u};let l=r.toText(t);return{changes:{from:u.from+a,to:n==o.from?u.to:u.from+i,insert:l},range:L.cursor(u.from+a+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}var pY=new WeakMap;function syt(r){if(!Array.isArray(r))return r;let t=pY.get(r);return t||pY.set(r,t=pM(r)),t}var YD=zt.define(),Mg=zt.define(),oM=class{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let n=Zr(t,e),o=vo(n);this.chars.push(n);let a=t.slice(e,e+o),i=a.toUpperCase();this.folded.push(Zr(i==a?a.toLowerCase():i,0)),e+=o}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:o,precise:a,byWord:i}=this;if(e.length==1){let D=Zr(t,0),w=vo(D),T=w==t.length?0:-100;if(D!=e[0])if(D==n[0])T+=-200;else return null;return this.ret(T,[0,w])}let u=t.indexOf(this.pattern);if(u==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=e.length,s=0;if(u<0){for(let D=0,w=Math.min(t.length,200);D<w&&s<l;){let T=Zr(t,D);(T==e[s]||T==n[s])&&(o[s++]=D),D+=vo(T)}if(s<l)return null}let c=0,f=0,d=!1,p=0,h=-1,m=-1,_=/[a-z]/.test(t),y=!0;for(let D=0,w=Math.min(t.length,200),T=0;D<w&&f<l;){let R=Zr(t,D);u<0&&(c<l&&R==e[c]&&(a[c++]=D),p<l&&(R==e[p]||R==n[p]?(p==0&&(h=D),m=D+1,p++):p=0));let C,S=R<255?R>=48&&R<=57||R>=97&&R<=122?2:R>=65&&R<=90?1:0:(C=Qv(R))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!D||S==1&&_||T==0&&S!=0)&&(e[f]==R||n[f]==R&&(d=!0)?i[f++]=D:i.length&&(y=!1)),T=S,D+=vo(R)}return f==l&&i[0]==0&&y?this.result(-100+(d?-200:0),i,t):p==l&&h==0?this.ret(-200-t.length+(m==t.length?0:-100),[0,m]):u>-1?this.ret(-700-t.length,[u,u+this.pattern.length]):p==l?this.ret(-900-t.length,[h,m]):f==l?this.result(-100+(d?-200:0)+-700+(y?0:-1100),i,t):e.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,t)}result(t,e,n){let o=[],a=0;for(let i of e){let u=i+(this.astral?vo(Zr(n,i)):1);a&&o[a-1]==i?o[a-1]=u:(o[a++]=i,o[a++]=u)}return this.ret(t-n.length,o)}},aM=class{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),n=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,e.length],this.score=n+(t.length==this.pattern.length?0:-100),this)}},wn=ut.define({combine(r){return Jn(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:cyt,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>n=>hY(t(n),e(n)),optionClass:(t,e)=>n=>hY(t(n),e(n)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})}});function hY(r,t){return r?t?r+" "+t:r:t}function cyt(r,t,e,n,o,a){let i=r.textDirection==Je.RTL,u=i,l=!1,s="top",c,f,d=t.left-o.left,p=o.right-t.right,h=n.right-n.left,m=n.bottom-n.top;if(u&&d<Math.min(h,p)?u=!1:!u&&p<Math.min(h,d)&&(u=!0),h<=(u?d:p))c=Math.max(o.top,Math.min(e.top,o.bottom-m))-t.top,f=Math.min(400,u?d:p);else{l=!0,f=Math.min(400,(i?t.right:o.right-t.left)-30);let D=o.bottom-t.bottom;D>=m||D>t.top?c=e.bottom-t.top:(s="bottom",c=t.bottom-e.top)}let _=(t.bottom-t.top)/a.offsetHeight,y=(t.right-t.left)/a.offsetWidth;return{style:`${s}: ${c/_}px; max-width: ${f/y}px`,class:"cm-completionInfo-"+(l?i?"left-narrow":"right-narrow":u?"left":"right")}}function fyt(r){let t=r.addToOptions.slice();return r.icons&&t.push({render(e){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&n.classList.add(...e.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render(e,n,o,a){let i=document.createElement("span");i.className="cm-completionLabel";let u=e.displayLabel||e.label,l=0;for(let s=0;s<a.length;){let c=a[s++],f=a[s++];c>l&&i.appendChild(document.createTextNode(u.slice(l,c)));let d=i.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(u.slice(c,f))),d.className="cm-completionMatchedText",l=f}return l<u.length&&i.appendChild(document.createTextNode(u.slice(l))),i},position:50},{render(e){if(!e.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=e.detail,n},position:80}),t.sort((e,n)=>e.position-n.position).map(e=>e.render)}function rM(r,t,e){if(r<=e)return{from:0,to:r};if(t<0&&(t=0),t<=r>>1){let o=Math.floor(t/e);return{from:o*e,to:(o+1)*e}}let n=Math.floor((r-t)/e);return{from:r-(n+1)*e,to:r-n*e}}var iM=class{constructor(t,e,n){this.view=t,this.stateField=e,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let o=t.state.field(e),{options:a,selected:i}=o.open,u=t.state.facet(wn);this.optionContent=fyt(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=rM(a.length,i,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",l=>{let{options:s}=t.state.field(e).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<s.length){this.applyCompletion(t,s[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let s=t.state.field(this.stateField,!1);s&&s.tooltip&&t.state.facet(wn).closeOnBlur&&l.relatedTarget!=t.contentDOM&&t.dispatch({effects:Mg.of(null)})}),this.showOptions(a,o.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var e;let n=t.state.field(this.stateField),o=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=o){let{options:a,selected:i,disabled:u}=n.open;(!o.open||o.open.options!=a)&&(this.range=rM(a.length,i,t.state.facet(wn).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),u!=((e=o.open)===null||e===void 0?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!u)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of e.split(" "))n&&this.dom.classList.add(n);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=rM(e.options.length,e.selected,this.view.state.facet(wn).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:n}=e.options[e.selected],{info:o}=n;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(n);if(!a)return;"then"in a?a.then(i=>{i&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(i,n)}).catch(i=>kn(this.view.state,i,"completion info")):this.addInfoPane(a,n)}}addInfoPane(t,e){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",t.nodeType!=null)n.appendChild(t),this.infoDestroy=null;else{let{dom:o,destroy:a}=t;n.appendChild(o),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,o=this.range.from;n;n=n.nextSibling,o++)n.nodeName!="LI"||!n.id?o--:o==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return e&&pyt(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=t.getBoundingClientRect(),a=this.space;if(!a){let i=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:i.innerWidth,bottom:i.innerHeight}}return o.top>Math.min(a.bottom,e.bottom)-10||o.bottom<Math.max(a.top,e.top)+10?null:this.view.state.facet(wn).positionInfo(this.view,e,o,n,a,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,n){let o=document.createElement("ul");o.id=e,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let i=n.from;i<n.to;i++){let{completion:u,match:l}=t[i],{section:s}=u;if(s){let d=typeof s=="string"?s:s.name;if(d!=a&&(i>n.from||n.from==0))if(a=d,typeof s!="string"&&s.header)o.appendChild(s.header(s));else{let p=o.appendChild(document.createElement("completion-section"));p.textContent=d}}let c=o.appendChild(document.createElement("li"));c.id=e+"-"+i,c.setAttribute("role","option");let f=this.optionClass(u);f&&(c.className=f);for(let d of this.optionContent){let p=d(u,this.view.state,this.view,l);p&&c.appendChild(p)}}return n.from&&o.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function dyt(r,t){return e=>new iM(e,r,t)}function pyt(r,t){let e=r.getBoundingClientRect(),n=t.getBoundingClientRect(),o=e.height/r.offsetHeight;n.top<e.top?r.scrollTop-=(e.top-n.top)/o:n.bottom>e.bottom&&(r.scrollTop+=(n.bottom-e.bottom)/o)}function mY(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function hyt(r,t){let e=[],n=null,o=s=>{e.push(s);let{section:c}=s.completion;if(c){n||(n=[]);let f=typeof c=="string"?c:c.name;n.some(d=>d.name==f)||n.push(typeof c=="string"?{name:f}:c)}},a=t.facet(wn);for(let s of r)if(s.hasResult()){let c=s.result.getMatch;if(s.result.filter===!1)for(let f of s.result.options)o(new ZD(f,s.source,c?c(f):[],1e9-e.length));else{let f=t.sliceDoc(s.from,s.to),d,p=a.filterStrict?new aM(f):new oM(f);for(let h of s.result.options)if(d=p.match(h.label)){let m=h.displayLabel?c?c(h,d.matched):[]:d.matched;o(new ZD(h,s.source,m,d.score+(h.boost||0)))}}}if(n){let s=Object.create(null),c=0,f=(d,p)=>{var h,m;return((h=d.rank)!==null&&h!==void 0?h:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(d.name<p.name?-1:1)};for(let d of n.sort(f))c-=1e5,s[d.name]=c;for(let d of e){let{section:p}=d.completion;p&&(d.score+=s[typeof p=="string"?p:p.name])}}let i=[],u=null,l=a.compareCompletions;for(let s of e.sort((c,f)=>f.score-c.score||l(c.completion,f.completion))){let c=s.completion;!u||u.label!=c.label||u.detail!=c.detail||u.type!=null&&c.type!=null&&u.type!=c.type||u.apply!=c.apply||u.boost!=c.boost?i.push(s):mY(s.completion)>mY(u)&&(i[i.length-1]=s),u=s.completion}return i}var uM=class r{constructor(t,e,n,o,a,i){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=o,this.selected=a,this.disabled=i}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new r(this.options,vY(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,o,a,i){if(o&&!i&&t.some(s=>s.state==1))return o.setDisabled();let u=hyt(t,e);if(!u.length)return o&&t.some(s=>s.state==1)?o.setDisabled():null;let l=e.facet(wn).selectOnOpen?0:-1;if(o&&o.selected!=l&&o.selected!=-1){let s=o.options[o.selected].completion;for(let c=0;c<u.length;c++)if(u[c].completion==s){l=c;break}}return new r(u,vY(n,l),{pos:t.reduce((s,c)=>c.hasResult()?Math.min(s,c.from):s,1e8),create:byt,above:a.aboveCursor},o?o.timestamp:Date.now(),l,!1)}map(t){return new r(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new r(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},lM=class r{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new r(_yt,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,n=e.facet(wn),a=(n.override||e.languageDataAt("autocomplete",is(e)).map(syt)).map(l=>(this.active.find(c=>c.source==l)||new Qu(l,this.active.some(c=>c.state!=0)?1:0)).update(t,n));a.length==this.active.length&&a.every((l,s)=>l==this.active[s])&&(a=this.active);let i=this.open,u=t.effects.some(l=>l.is(mM));i&&t.docChanged&&(i=i.map(t.changes)),t.selection||a.some(l=>l.hasResult()&&t.changes.touchesRange(l.from,l.to))||!myt(a,this.active)||u?i=uM.build(a,e,this.id,i,n,u):i&&i.disabled&&!a.some(l=>l.state==1)&&(i=null),!i&&a.every(l=>l.state!=1)&&a.some(l=>l.hasResult())&&(a=a.map(l=>l.hasResult()?new Qu(l.source,0):l));for(let l of t.effects)l.is(TY)&&(i=i&&i.setSelected(l.value,this.id));return a==this.active&&i==this.open?this:new r(a,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?vyt:gyt}};function myt(r,t){if(r==t)return!0;for(let e=0,n=0;;){for(;e<r.length&&!r[e].hasResult;)e++;for(;n<t.length&&!t[n].hasResult;)n++;let o=e==r.length,a=n==t.length;if(o||a)return o==a;if(r[e++].result!=t[n++].result)return!1}}var vyt={"aria-autocomplete":"list"},gyt={};function vY(r,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return t>-1&&(e["aria-activedescendant"]=r+"-"+t),e}var _yt=[];function xY(r,t){if(r.isUserEvent("input.complete")){let n=r.annotation(hM);if(n&&t.activateOnCompletion(n))return 12}let e=r.isUserEvent("input.type");return e&&t.activateOnTyping?5:e?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}var Qu=class r{constructor(t,e,n=-1){this.source=t,this.state=e,this.explicitPos=n}hasResult(){return!1}update(t,e){let n=xY(t,e),o=this;(n&8||n&16&&this.touches(t))&&(o=new r(o.source,0)),n&4&&o.state==0&&(o=new r(this.source,1)),o=o.updateFor(t,n);for(let a of t.effects)if(a.is(YD))o=new r(o.source,1,a.value?is(t.state):-1);else if(a.is(Mg))o=new r(o.source,0);else if(a.is(mM))for(let i of a.value)i.source==o.source&&(o=i);return o}updateFor(t,e){return this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new r(this.source,this.state,t.mapPos(this.explicitPos))}touches(t){return t.changes.touchesRange(is(t.state))}},XD=class r extends Qu{constructor(t,e,n,o,a){super(t,2,e),this.result=n,this.from=o,this.to=a}hasResult(){return!0}updateFor(t,e){var n;if(!(e&3))return this.map(t.changes);let o=this.result;o.map&&!t.changes.empty&&(o=o.map(o,t.changes));let a=t.changes.mapPos(this.from),i=t.changes.mapPos(this.to,1),u=is(t.state);if((this.explicitPos<0?u<=a:u<this.from)||u>i||!o||e&2&&is(t.startState)==this.from)return new Qu(this.source,e&4?1:0);let l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return yyt(o.validFor,t.state,a,i)?new r(this.source,l,o,a,i):o.update&&(o=o.update(o,a,i,new jD(t.state,u,l>=0)))?new r(this.source,l,o,o.from,(n=o.to)!==null&&n!==void 0?n:is(t.state)):new Qu(this.source,1,l)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new r(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new Qu(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}};function yyt(r,t,e,n){if(!r)return!1;let o=t.sliceDoc(e,n);return typeof r=="function"?r(o,e,n,t):wY(r,!0).test(o)}var mM=zt.define({map(r,t){return r.map(e=>e.map(t))}}),TY=zt.define(),Ho=gr.define({create(){return lM.start()},update(r,t){return r.update(t)},provide:r=>[mg.from(r,t=>t.tooltip),at.contentAttributes.from(r,t=>t.attrs)]});function vM(r,t){let e=t.completion.apply||t.completion.label,n=r.state.field(Ho).active.find(o=>o.source==t.source);return n instanceof XD?(typeof e=="string"?r.dispatch(Object.assign(Object.assign({},lyt(r.state,e,n.from,n.to)),{annotations:hM.of(t.completion)})):e(r,t.completion,n.from,n.to),!0):!1}var byt=dyt(Ho,vM);function VD(r,t="option"){return e=>{let n=e.state.field(Ho,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<e.state.facet(wn).interactionDelay)return!1;let o=1,a;t=="page"&&(a=sF(e,n.open.tooltip))&&(o=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:i}=n.open.options,u=n.open.selected>-1?n.open.selected+o*(r?1:-1):r?0:i-1;return u<0?u=t=="page"?0:i-1:u>=i&&(u=t=="page"?i-1:0),e.dispatch({effects:TY.of(u)}),!0}}var Dyt=r=>{let t=r.state.field(Ho,!1);return r.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<r.state.facet(wn).interactionDelay?!1:vM(r,t.open.options[t.open.selected])},gY=r=>r.state.field(Ho,!1)?(r.dispatch({effects:YD.of(!0)}),!0):!1,wyt=r=>{let t=r.state.field(Ho,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(r.dispatch({effects:Mg.of(null)}),!0)},sM=class{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}},xyt=50,Tyt=1e3,Ryt=Tr.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of r.state.field(Ho).active)t.state==1&&this.startQuery(t)}update(r){let t=r.state.field(Ho),e=r.state.facet(wn);if(!r.selectionSet&&!r.docChanged&&r.startState.field(Ho)==t)return;let n=r.transactions.some(a=>{let i=xY(a,e);return i&8||(a.selection||a.docChanged)&&!(i&3)});for(let a=0;a<this.running.length;a++){let i=this.running[a];if(n||i.context.abortOnDocChange&&r.docChanged||i.updates.length+r.transactions.length>xyt&&Date.now()-i.time>Tyt){for(let u of i.context.abortListeners)try{u()}catch(l){kn(this.view.state,l)}i.context.abortListeners=null,this.running.splice(a--,1)}else i.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(a=>a.effects.some(i=>i.is(YD)))&&(this.pendingStart=!0);let o=this.pendingStart?50:e.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(a=>a.state==1&&!this.running.some(i=>i.active.source==a.source))?setTimeout(()=>this.startUpdate(),o):-1,this.composing!=0)for(let a of r.transactions)a.isUserEvent("input.type")?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,t=r.field(Ho);for(let e of t.active)e.state==1&&!this.running.some(n=>n.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(wn).updateSyncTime))}startQuery(r){let{state:t}=this.view,e=is(t),n=new jD(t,e,r.explicitPos==e,this.view),o=new sM(r,n);this.running.push(o),Promise.resolve(r.source(n)).then(a=>{o.context.aborted||(o.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:Mg.of(null)}),kn(this.view.state,a)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(wn).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(wn),n=this.view.state.field(Ho);for(let o=0;o<this.running.length;o++){let a=this.running[o];if(a.done===void 0)continue;if(this.running.splice(o--,1),a.done){let u=new XD(a.active.source,a.active.explicitPos,a.done,a.done.from,(r=a.done.to)!==null&&r!==void 0?r:is(a.updates.length?a.updates[0].startState:this.view.state));for(let l of a.updates)u=u.update(l,e);if(u.hasResult()){t.push(u);continue}}let i=n.active.find(u=>u.source==a.active.source);if(i&&i.state==1)if(a.done==null){let u=new Qu(a.active.source,0);for(let l of a.updates)u=u.update(l,e);u.state!=1&&t.push(u)}else this.startQuery(i)}(t.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:mM.of(t)})}},{eventHandlers:{blur(r){let t=this.view.state.field(Ho,!1);if(t&&t.tooltip&&this.view.state.facet(wn).closeOnBlur){let e=t.open&&sF(this.view,t.open.tooltip);(!e||!e.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Mg.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:YD.of(!1)}),20),this.composing=0}}}),Cyt=typeof navigator=="object"&&/Win/.test(navigator.platform),Syt=Wa.highest(at.domEventHandlers({keydown(r,t){let e=t.state.field(Ho,!1);if(!e||!e.open||e.open.disabled||e.open.selected<0||r.key.length>1||r.ctrlKey&&!(Cyt&&r.altKey)||r.metaKey)return!1;let n=e.open.options[e.open.selected],o=e.active.find(i=>i.source==n.source),a=n.completion.commitCharacters||o.result.commitCharacters;return a&&a.indexOf(r.key)>-1&&vM(t,n),!1}})),RY=at.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),cM=class{constructor(t,e,n,o){this.field=t,this.line=e,this.from=n,this.to=o}},fM=class r{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){let e=t.mapPos(this.from,-1,ln.TrackDel),n=t.mapPos(this.to,1,ln.TrackDel);return e==null||n==null?null:new r(this.field,e,n)}},dM=class r{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],o=[e],a=t.doc.lineAt(e),i=/^\s*/.exec(a.text)[0];for(let l of this.lines){if(n.length){let s=i,c=/^\t*/.exec(l)[0].length;for(let f=0;f<c;f++)s+=t.facet(lp);o.push(e+s.length-c),l=s+l.slice(c)}n.push(l),e+=l.length+1}let u=this.fieldPositions.map(l=>new fM(l.field,o[l.line]+l.from,o[l.line]+l.to));return{text:n,ranges:u}}static parse(t){let e=[],n=[],o=[],a;for(let i of t.split(/\r\n?|\n/)){for(;a=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(i);){let u=a[1]?+a[1]:null,l=a[2]||a[3]||"",s=-1,c=l.replace(/\\[{}]/g,f=>f[1]);for(let f=0;f<e.length;f++)(u!=null?e[f].seq==u:c&&e[f].name==c)&&(s=f);if(s<0){let f=0;for(;f<e.length&&(u==null||e[f].seq!=null&&e[f].seq<u);)f++;e.splice(f,0,{seq:u,name:c}),s=f;for(let d of o)d.field>=s&&d.field++}o.push(new cM(s,n.length,a.index,a.index+c.length)),i=i.slice(0,a.index)+l+i.slice(a.index+a[0].length)}i=i.replace(/\\([{}])/g,(u,l,s)=>{for(let c of o)c.line==n.length&&c.from>s&&(c.from--,c.to--);return l}),n.push(i)}return new r(n,o)}},Oyt=xt.widget({widget:new class extends Qo{toDOM(){let r=document.createElement("span");return r.className="cm-snippetFieldPosition",r}ignoreEvent(){return!1}}}),Eyt=xt.mark({class:"cm-snippetField"}),hp=class r{constructor(t,e){this.ranges=t,this.active=e,this.deco=xt.set(t.map(n=>(n.from==n.to?Oyt:Eyt).range(n.from,n.to)))}map(t){let e=[];for(let n of this.ranges){let o=n.map(t);if(!o)return null;e.push(o)}return new r(e,this.active)}selectionInsideField(t){return t.ranges.every(e=>this.ranges.some(n=>n.field==this.active&&n.from<=e.from&&n.to>=e.to))}},Ig=zt.define({map(r,t){return r&&r.map(t)}}),Fyt=zt.define(),Ag=gr.define({create(){return null},update(r,t){for(let e of t.effects){if(e.is(Ig))return e.value;if(e.is(Fyt)&&r)return new hp(r.ranges,e.value)}return r&&t.docChanged&&(r=r.map(t.changes)),r&&t.selection&&!r.selectionInsideField(t.selection)&&(r=null),r},provide:r=>at.decorations.from(r,t=>t?t.deco:xt.none)});function gM(r,t){return L.create(r.filter(e=>e.field==t).map(e=>L.range(e.from,e.to)))}function Myt(r){let t=dM.parse(r);return(e,n,o,a)=>{let{text:i,ranges:u}=t.instantiate(e.state,o),l={changes:{from:o,to:a,insert:xe.of(i)},scrollIntoView:!0,annotations:n?[hM.of(n),Yr.userEvent.of("input.complete")]:void 0};if(u.length&&(l.selection=gM(u,0)),u.some(s=>s.field>0)){let s=new hp(u,0),c=l.effects=[Ig.of(s)];e.state.field(Ag,!1)===void 0&&c.push(zt.appendConfig.of([Ag,kyt,$yt,RY]))}e.dispatch(e.state.update(l))}}function CY(r){return({state:t,dispatch:e})=>{let n=t.field(Ag,!1);if(!n||r<0&&n.active==0)return!1;let o=n.active+r,a=r>0&&!n.ranges.some(i=>i.field==o+r);return e(t.update({selection:gM(n.ranges,o),effects:Ig.of(a?null:new hp(n.ranges,o)),scrollIntoView:!0})),!0}}var Ayt=({state:r,dispatch:t})=>r.field(Ag,!1)?(t(r.update({effects:Ig.of(null)})),!0):!1,Pyt=CY(1),Iyt=CY(-1);var Nyt=[{key:"Tab",run:Pyt,shift:Iyt},{key:"Escape",run:Ayt}],_Y=ut.define({combine(r){return r.length?r[0]:Nyt}}),kyt=Wa.highest(np.compute([_Y],r=>r.facet(_Y)));function bo(r,t){return Object.assign(Object.assign({},t),{apply:Myt(r)})}var $yt=at.domEventHandlers({mousedown(r,t){let e=t.state.field(Ag,!1),n;if(!e||(n=t.posAtCoords({x:r.clientX,y:r.clientY}))==null)return!1;let o=e.ranges.find(a=>a.from<=n&&a.to>=n);return!o||o.field==e.active?!1:(t.dispatch({selection:gM(e.ranges,o.field),effects:Ig.of(e.ranges.some(a=>a.field>o.field)?new hp(e.ranges,o.field):null),scrollIntoView:!0}),!0)}});var Pg={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Bc=zt.define({map(r,t){let e=t.mapPos(r,-1,ln.TrackAfter);return e??void 0}}),_M=new class extends gi{};_M.startSide=1;_M.endSide=-1;var SY=gr.define({create(){return We.empty},update(r,t){if(r=r.map(t.changes),t.selection){let e=t.state.doc.lineAt(t.selection.main.head);r=r.update({filter:n=>n>=e.from&&n<=e.to})}for(let e of t.effects)e.is(Bc)&&(r=r.update({add:[_M.range(e.value,e.value+1)]}));return r}});function OY(){return[Uyt,SY]}var nM="()[]{}<>";function EY(r){for(let t=0;t<nM.length;t+=2)if(nM.charCodeAt(t)==r)return nM.charAt(t+1);return Qv(r<128?r:r+1)}function FY(r,t){return r.languageDataAt("closeBrackets",t)[0]||Pg}var Lyt=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Uyt=at.inputHandler.of((r,t,e,n)=>{if((Lyt?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let o=r.state.selection.main;if(n.length>2||n.length==2&&vo(Zr(n,0))==1||t!=o.from||e!=o.to)return!1;let a=Wyt(r.state,n);return a?(r.dispatch(a),!0):!1}),Byt=({state:r,dispatch:t})=>{if(r.readOnly)return!1;let n=FY(r,r.selection.main.head).brackets||Pg.brackets,o=null,a=r.changeByRange(i=>{if(i.empty){let u=Gyt(r.doc,i.head);for(let l of n)if(l==u&&JD(r.doc,i.head)==EY(Zr(l,0)))return{changes:{from:i.head-l.length,to:i.head+l.length},range:L.cursor(i.head-l.length)}}return{range:o=i}});return o||t(r.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},MY=[{key:"Backspace",run:Byt}];function Wyt(r,t){let e=FY(r,r.selection.main.head),n=e.brackets||Pg.brackets;for(let o of n){let a=EY(Zr(o,0));if(t==o)return a==o?Qyt(r,o,n.indexOf(o+o+o)>-1,e):zyt(r,o,a,e.before||Pg.before);if(t==a&&AY(r,r.selection.main.from))return qyt(r,o,a)}return null}function AY(r,t){let e=!1;return r.field(SY).between(0,r.doc.length,n=>{n==t&&(e=!0)}),e}function JD(r,t){let e=r.sliceString(t,t+2);return e.slice(0,vo(Zr(e,0)))}function Gyt(r,t){let e=r.sliceString(t-2,t);return vo(Zr(e,0))==e.length?e:e.slice(1)}function zyt(r,t,e,n){let o=null,a=r.changeByRange(i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:e,from:i.to}],effects:Bc.of(i.to+t.length),range:L.range(i.anchor+t.length,i.head+t.length)};let u=JD(r.doc,i.head);return!u||/\s/.test(u)||n.indexOf(u)>-1?{changes:{insert:t+e,from:i.head},effects:Bc.of(i.head+t.length),range:L.cursor(i.head+t.length)}:{range:o=i}});return o?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function qyt(r,t,e){let n=null,o=r.changeByRange(a=>a.empty&&JD(r.doc,a.head)==e?{changes:{from:a.head,to:a.head+e.length,insert:e},range:L.cursor(a.head+e.length)}:n={range:a});return n?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Qyt(r,t,e,n){let o=n.stringPrefixes||Pg.stringPrefixes,a=null,i=r.changeByRange(u=>{if(!u.empty)return{changes:[{insert:t,from:u.from},{insert:t,from:u.to}],effects:Bc.of(u.to+t.length),range:L.range(u.anchor+t.length,u.head+t.length)};let l=u.head,s=JD(r.doc,l),c;if(s==t){if(yY(r,l))return{changes:{insert:t+t,from:l},effects:Bc.of(l+t.length),range:L.cursor(l+t.length)};if(AY(r,l)){let d=e&&r.sliceDoc(l,l+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:l,to:l+d.length,insert:d},range:L.cursor(l+d.length)}}}else{if(e&&r.sliceDoc(l-2*t.length,l)==t+t&&(c=bY(r,l-2*t.length,o))>-1&&yY(r,c))return{changes:{insert:t+t+t+t,from:l},effects:Bc.of(l+t.length),range:L.cursor(l+t.length)};if(r.charCategorizer(l)(s)!=Xe.Word&&bY(r,l,o)>-1&&!Hyt(r,l,t,o))return{changes:{insert:t+t,from:l},effects:Bc.of(l+t.length),range:L.cursor(l+t.length)}}return{range:a=u}});return a?null:r.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function yY(r,t){let e=Mr(r).resolveInner(t+1);return e.parent&&e.from==t}function Hyt(r,t,e,n){let o=Mr(r).resolveInner(t,-1),a=n.reduce((i,u)=>Math.max(i,u.length),0);for(let i=0;i<5;i++){let u=r.sliceDoc(o.from,Math.min(o.to,o.from+e.length+a)),l=u.indexOf(e);if(!l||l>-1&&n.indexOf(u.slice(0,l))>-1){let c=o.firstChild;for(;c&&c.from==o.from&&c.to-c.from>e.length+l;){if(r.sliceDoc(c.to-e.length,c.to)==e)return!1;c=c.firstChild}return!0}let s=o.to==t&&o.parent;if(!s)break;o=s}return!1}function bY(r,t,e){let n=r.charCategorizer(t);if(n(r.sliceDoc(t-1,t))!=Xe.Word)return t;for(let o of e){let a=t-o.length;if(r.sliceDoc(a,t)==o&&n(r.sliceDoc(a-1,a))!=Xe.Word)return a}return-1}function PY(r={}){return[Syt,Ho,wn.of(r),Ryt,Vyt,RY]}var yM=[{key:"Ctrl-Space",run:gY},{mac:"Alt-`",run:gY},{key:"Escape",run:wyt},{key:"ArrowDown",run:VD(!0)},{key:"ArrowUp",run:VD(!1)},{key:"PageDown",run:VD(!0,"page")},{key:"PageUp",run:VD(!1,"page")},{key:"Enter",run:Dyt}],Vyt=Wa.highest(np.computeN([wn],r=>r.facet(wn).defaultKeymap?[yM]:[]));var bM=class{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}},Wc=class r{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let o=t,a=n.facet(Ng).markerFilter;a&&(o=a(o,n));let i=xt.set(o.map(u=>u.from==u.to||u.from==u.to-1&&n.doc.lineAt(u.from).to==u.from?xt.widget({widget:new DM(u),diagnostic:u}).range(u.from):xt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+u.severity+(u.markClass?" "+u.markClass:"")},diagnostic:u}).range(u.from,u.to)),!0);return new r(i,e,mp(i))}};function mp(r,t=null,e=0){let n=null;return r.between(e,1e9,(o,a,{spec:i})=>{if(!(t&&i.diagnostic!=t))return n=new bM(o,a,i.diagnostic),!1}),n}function jyt(r,t){let e=t.pos,n=t.end||e,o=r.state.facet(Ng).hideOn(r,e,n);if(o!=null)return o;let a=r.startState.doc.lineAt(t.pos);return!!(r.effects.some(i=>i.is(NY))||r.changes.touchesRange(a.from,Math.max(a.to,n)))}function Zyt(r,t){return r.field(ha,!1)?t:t.concat(zt.appendConfig.of(nbt))}var NY=zt.define(),wM=zt.define(),kY=zt.define(),ha=gr.define({create(){return new Wc(xt.none,null,null)},update(r,t){if(t.docChanged&&r.diagnostics.size){let e=r.diagnostics.map(t.changes),n=null,o=r.panel;if(r.selected){let a=t.changes.mapPos(r.selected.from,1);n=mp(e,r.selected.diagnostic,a)||mp(e,null,a)}!e.size&&o&&t.state.facet(Ng).autoPanel&&(o=null),r=new Wc(e,o,n)}for(let e of t.effects)if(e.is(NY)){let n=t.state.facet(Ng).autoPanel?e.value.length?kg.open:null:r.panel;r=Wc.init(e.value,n,t.state)}else e.is(wM)?r=new Wc(r.diagnostics,e.value?kg.open:null,r.selected):e.is(kY)&&(r=new Wc(r.diagnostics,r.panel,e.value));return r},provide:r=>[Ac.from(r,t=>t.panel),at.decorations.from(r,t=>t.diagnostics)]});var Yyt=xt.mark({class:"cm-lintRange cm-lintRange-active"});function Xyt(r,t,e){let{diagnostics:n}=r.state.field(ha),o=[],a=2e8,i=0;n.between(t-(e<0?1:0),t+(e>0?1:0),(l,s,{spec:c})=>{t>=l&&t<=s&&(l==s||(t>l||e>0)&&(t<s||e<0))&&(o.push(c.diagnostic),a=Math.min(l,a),i=Math.max(s,i))});let u=r.state.facet(Ng).tooltipFilter;return u&&(o=u(o,r.state)),o.length?{pos:a,end:i,above:r.state.doc.lineAt(a).to<i,create(){return{dom:Jyt(r,o)}}}:null}function Jyt(r,t){return Ve("ul",{class:"cm-tooltip-lint"},t.map(e=>UY(r,e,!1)))}var Kyt=r=>{let t=r.state.field(ha,!1);(!t||!t.panel)&&r.dispatch({effects:Zyt(r.state,[wM.of(!0)])});let e=Pc(r,kg.open);return e&&e.dom.querySelector(".cm-panel-lint ul").focus(),!0},IY=r=>{let t=r.state.field(ha,!1);return!t||!t.panel?!1:(r.dispatch({effects:wM.of(!1)}),!0)},tbt=r=>{let t=r.state.field(ha,!1);if(!t)return!1;let e=r.state.selection.main,n=t.diagnostics.iter(e.to+1);return!n.value&&(n=t.diagnostics.iter(0),!n.value||n.from==e.from&&n.to==e.to)?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)};var $Y=[{key:"Mod-Shift-m",run:Kyt,preventDefault:!0},{key:"F8",run:tbt}];var Ng=ut.define({combine(r){return Object.assign({sources:r.map(t=>t.source).filter(t=>t!=null)},Jn(r.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(t,e)=>t?e?n=>t(n)||e(n):t:e}))}});function LY(r){let t=[];if(r)t:for(let{name:e}of r){for(let n=0;n<e.length;n++){let o=e[n];if(/[a-zA-Z]/.test(o)&&!t.some(a=>a.toLowerCase()==o.toLowerCase())){t.push(o);continue t}}t.push("")}return t}function UY(r,t,e){var n;let o=e?LY(t.actions):[];return Ve("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Ve("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(r):t.message),(n=t.actions)===null||n===void 0?void 0:n.map((a,i)=>{let u=!1,l=d=>{if(d.preventDefault(),u)return;u=!0;let p=mp(r.state.field(ha).diagnostics,t);p&&a.apply(r,p.from,p.to)},{name:s}=a,c=o[i]?s.indexOf(o[i]):-1,f=c<0?s:[s.slice(0,c),Ve("u",s.slice(c,c+1)),s.slice(c+1)];return Ve("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${s}${c<0?"":` (access key "${o[i]})"`}.`},f)}),t.source&&Ve("div",{class:"cm-diagnosticSource"},t.source))}var DM=class extends Qo{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return Ve("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}},tw=class{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=UY(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},kg=class r{constructor(t){this.view=t,this.items=[];let e=o=>{if(o.keyCode==27)IY(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],i=LY(a.actions);for(let u=0;u<i.length;u++)if(i[u].toUpperCase().charCodeAt(0)==o.keyCode){let l=mp(this.view.state.field(ha).diagnostics,a);l&&a.actions[u].apply(t,l.from,l.to)}}else return;o.preventDefault()},n=o=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(o.target)&&this.moveSelection(a)};this.list=Ve("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:n}),this.dom=Ve("div",{class:"cm-panel-lint"},this.list,Ve("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>IY(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(ha).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(ha),n=0,o=!1,a=null;for(t.between(0,this.view.state.doc.length,(i,u,{spec:l})=>{let s=-1,c;for(let f=n;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){s=f;break}s<0?(c=new tw(this.view,l.diagnostic),this.items.splice(n,0,c),o=!0):(c=this.items[s],s>n&&(this.items.splice(n,s-n),o=!0)),e&&c.diagnostic==e.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),a=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new tw(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:i,panel:u})=>{let l=u.height/this.list.offsetHeight;i.top<u.top?this.list.scrollTop-=(u.top-i.top)/l:i.bottom>u.bottom&&(this.list.scrollTop+=(i.bottom-u.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let t=this.list.firstChild;function e(){let n=t;t=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(ha),n=mp(e.diagnostics,this.items[t].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:kY.of(n)})}static open(t){return new r(t)}};function ebt(r,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(r)}</svg>')`}function KD(r){return ebt(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var rbt=at.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:KD("#d11")},".cm-lintRange-warning":{backgroundImage:KD("orange")},".cm-lintRange-info":{backgroundImage:KD("#999")},".cm-lintRange-hint":{backgroundImage:KD("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var nbt=[ha,at.decorations.compute([ha],r=>{let{selected:t,panel:e}=r.field(ha);return!t||!e||t.from==t.to?xt.none:xt.set([Yyt.range(t.from,t.to)])}),Tj(Xyt,{hideOn:jyt}),rbt];var BY=[Sj(),Oj(),bj(),xZ(),oZ(),vj(),yj(),He.allowMultipleSelections.of(!0),Zj(),iZ(uZ,{fallback:!0}),fZ(),OY(),PY(),wj(),xj(),Dj(),iY(),np.of([...MY,...JZ,...fY,...SZ,...eZ,...yM,...$Y])];var RM=class r{constructor(t,e,n,o,a,i,u,l,s,c=0,f){this.p=t,this.stack=e,this.state=n,this.reducePos=o,this.pos=a,this.score=i,this.buffer=u,this.bufferBase=l,this.curContext=s,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,n=0){let o=t.parser.context;return new r(t,[],e,n,n,0,[],0,o?new ew(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let n=t>>19,o=t&65535,{parser:a}=this.p,i=this.reducePos<this.pos-25;i&&this.setLookAhead(this.pos);let u=a.dynamicPrecedence(o);if(u&&(this.score+=u),n==0){this.pushState(a.getGoto(this.state,o,!0),this.reducePos),o<a.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,i?8:4,!0),this.reduceContext(o,this.reducePos);return}let l=this.stack.length-(n-1)*3-(t&262144?6:0),s=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-s;c>=2e3&&!(!((e=this.p.parser.nodeSet.types[o])===null||e===void 0)&&e.isAnonymous)&&(s==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=s,this.p.lastBigReductionSize=c));let f=l?this.stack[l-1]:0,d=this.bufferBase+this.buffer.length-f;if(o<a.minRepeatTerm||t&131072){let p=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,s,p,d+4,!0)}if(t&262144)this.state=this.stack[l];else{let p=this.stack[l-3];this.state=a.getGoto(p,o,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(o,s)}storeNode(t,e,n,o=4,a=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let i=this,u=this.buffer.length;if(u==0&&i.parent&&(u=i.bufferBase-i.parent.bufferBase,i=i.parent),u>0&&i.buffer[u-4]==0&&i.buffer[u-1]>-1){if(e==n)return;if(i.buffer[u-2]>=e){i.buffer[u-2]=n;return}}}if(!a||this.pos==n)this.buffer.push(t,e,n,o);else{let i=this.buffer.length;if(i>0&&this.buffer[i-4]!=0){let u=!1;for(let l=i;l>0&&this.buffer[l-2]>n;l-=4)if(this.buffer[l-1]>=0){u=!0;break}if(u)for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,o>4&&(o-=4)}this.buffer[i]=t,this.buffer[i+1]=e,this.buffer[i+2]=n,this.buffer[i+3]=o}}shift(t,e,n,o){if(t&131072)this.pushState(t&65535,this.pos);else if(t&262144)this.pos=o,this.shiftContext(e,n),e<=this.p.parser.maxNode&&this.buffer.push(e,n,o,4);else{let a=t,{parser:i}=this.p;(o>this.pos||e<=i.maxNode)&&(this.pos=o,i.stateFlag(a,1)||(this.reducePos=o)),this.pushState(a,n),this.shiftContext(e,n),e<=i.maxNode&&this.buffer.push(e,n,o,4)}}apply(t,e,n,o){t&65536?this.reduce(t):this.shift(t,e,n,o)}useNode(t,e){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let o=this.pos;this.reducePos=this.pos=o+t.length,this.pushState(e,o),this.buffer.push(n,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let n=t.buffer.slice(e),o=t.bufferBase+e;for(;t&&o==t.bufferBase;)t=t.parent;return new r(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,o,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new CM(this);;){let n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(n==0)return!1;if(!(n&65536))return!0;e.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let o=[];for(let a=0,i;a<e.length;a+=2)(i=e[a+1])!=this.state&&this.p.parser.hasAction(i,t)&&o.push(e[a],i);if(this.stack.length<120)for(let a=0;o.length<8&&a<e.length;a+=2){let i=e[a+1];o.some((u,l)=>l&1&&u==i)||o.push(e[a],i)}e=o}let n=[];for(let o=0;o<e.length&&n.length<4;o+=2){let a=e[o+1];if(a==this.state)continue;let i=this.split();i.pushState(a,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(e[o],this.pos),i.reducePos=this.pos,i.score-=200,n.push(i)}return n}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if(!(e&65536))return!1;if(!t.validAction(this.state,e)){let n=e>>19,o=e&65535,a=this.stack.length-n*3;if(a<0||t.getGoto(this.stack[a],o,!1)<0){let i=this.findForcedReduction();if(i==null)return!1;e=i}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],n=(o,a)=>{if(!e.includes(o))return e.push(o),t.allActions(o,i=>{if(!(i&393216))if(i&65536){let u=(i>>19)-a;if(u>1){let l=i&65535,s=this.stack.length-u*3;if(s>=0&&t.getGoto(this.stack[s],l,!1)>=0)return u<<19|65536|l}}else{let u=n(i,a+1);if(u!=null)return u}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new ew(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},ew=class{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}},CM=class{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,n=t>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let o=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=o}},SM=class r{constructor(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new r(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new r(this.stack,this.pos,this.index)}};function $g(r,t=Uint16Array){if(typeof r!="string")return r;let e=null;for(let n=0,o=0;n<r.length;){let a=0;for(;;){let i=r.charCodeAt(n++),u=!1;if(i==126){a=65535;break}i>=92&&i--,i>=34&&i--;let l=i-32;if(l>=46&&(l-=46,u=!0),a+=l,u)break;a*=46}e?e[o++]=a:e=new t(a)}return e}var vp=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},WY=new vp,OM=class{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=WY,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let n=this.range,o=this.rangeIndex,a=this.pos+t;for(;a<n.from;){if(!o)return null;let i=this.ranges[--o];a-=n.from-i.to,n=i}for(;e<0?a>n.to:a>=n.to;){if(o==this.ranges.length-1)return null;let i=this.ranges[++o];a+=i.from-n.to,n=i}return a}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,n,o;if(e>=0&&e<this.chunk.length)n=this.pos+t,o=this.chunk.charCodeAt(e);else{let a=this.resolveOffset(t,1);if(a==null)return-1;if(n=a,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)o=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let i=this.rangeIndex,u=this.range;for(;u.to<=n;)u=this.ranges[++i];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-n)),o=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),o}acceptToken(t,e=0){let n=e?this.resolveOffset(e,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=WY,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let n="";for(let o of this.ranges){if(o.from>=e)break;o.to>t&&(n+=this.input.read(Math.max(o.from,t),Math.min(o.to,e)))}return n}},us=class{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:n}=e.p;HY(this.data,t,e,this.id,n.data,n.tokenPrecTable)}};us.prototype.contextual=us.prototype.fallback=us.prototype.extend=!1;var gp=class{constructor(t,e,n){this.precTable=e,this.elseToken=n,this.data=typeof t=="string"?$g(t):t}token(t,e){let n=t.pos,o=0;for(;;){let a=t.next<0,i=t.resolveOffset(1,1);if(HY(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(a||o++,i==null)break;t.reset(i,t.token)}o&&(t.reset(n,t.token),t.acceptToken(this.elseToken,o))}};gp.prototype.contextual=us.prototype.fallback=us.prototype.extend=!1;var ls=class{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}};function HY(r,t,e,n,o,a){let i=0,u=1<<n,{dialect:l}=e.p.parser;t:for(;u&r[i];){let s=r[i+1];for(let p=i+3;p<s;p+=2)if((r[p+1]&u)>0){let h=r[p];if(l.allows(h)&&(t.token.value==-1||t.token.value==h||abt(h,t.token.value,o,a))){t.acceptToken(h);break}}let c=t.next,f=0,d=r[i+2];if(t.next<0&&d>f&&r[s+d*3-3]==65535){i=r[s+d*3-1];continue t}for(;f<d;){let p=f+d>>1,h=s+p+(p<<1),m=r[h],_=r[h+1]||65536;if(c<m)d=p;else if(c>=_)f=p+1;else{i=r[h+2],t.advance();continue t}}break}}function GY(r,t,e){for(let n=t,o;(o=r[n])!=65535;n++)if(o==e)return n-t;return-1}function abt(r,t,e,n){let o=GY(e,n,t);return o<0||GY(e,n,r)<o}var ma=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG),xM=null;function zY(r,t,e){let n=r.cursor(Fr.IncludeAnonymous);for(n.moveTo(t);;)if(!(e<0?n.childBefore(t):n.childAfter(t)))for(;;){if((e<0?n.to<t:n.from>t)&&!n.type.isError)return e<0?Math.max(0,Math.min(n.to-1,t-25)):Math.min(r.length,Math.max(n.from+1,t+25));if(e<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return e<0?0:r.length}}var EM=class{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?zY(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?zY(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let n=this.trees[e],o=this.index[e];if(o==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=n.children[o],i=this.start[e]+n.positions[o];if(i>t)return this.nextStart=i,null;if(a instanceof Wr){if(i==t){if(i<this.safeFrom)return null;let u=i+a.length;if(u<=this.safeTo){let l=a.prop(ae.lookAhead);if(!l||u+l<this.fragment.to)return a}}this.index[e]++,i+a.length>=Math.max(this.safeFrom,t)&&(this.trees.push(a),this.start.push(i),this.index.push(0))}else this.index[e]++,this.nextStart=i+a.length}}},FM=class{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(n=>new vp)}getActions(t){let e=0,n=null,{parser:o}=t.p,{tokenizers:a}=o,i=o.stateSlot(t.state,3),u=t.curContext?t.curContext.hash:0,l=0;for(let s=0;s<a.length;s++){if(!(1<<s&i))continue;let c=a[s],f=this.tokens[s];if(!(n&&!c.fallback)&&((c.contextual||f.start!=t.pos||f.mask!=i||f.context!=u)&&(this.updateCachedToken(f,c,t),f.mask=i,f.context=u),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let d=e;if(f.extended>-1&&(e=this.addActions(t,f.extended,f.end,e)),e=this.addActions(t,f.value,f.end,e),!c.extend&&(n=f,e>d))break}}for(;this.actions.length>e;)this.actions.pop();return l&&t.setLookAhead(l),!n&&t.pos==this.stream.end&&(n=new vp,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new vp,{pos:n,p:o}=t;return e.start=n,e.end=Math.min(n+1,o.stream.end),e.value=n==o.stream.end?o.parser.eofTerm:0,e}updateCachedToken(t,e,n){let o=this.stream.clipPos(n.pos);if(e.token(this.stream.reset(o,t),n),t.value>-1){let{parser:a}=n.p;for(let i=0;i<a.specialized.length;i++)if(a.specialized[i]==t.value){let u=a.specializers[i](this.stream.read(t.start,t.end),n);if(u>=0&&n.p.parser.dialect.allows(u>>1)){u&1?t.extended=u>>1:t.value=u>>1;break}}}else t.value=0,t.end=this.stream.clipPos(o+1)}putAction(t,e,n,o){for(let a=0;a<o;a+=3)if(this.actions[a]==t)return o;return this.actions[o++]=t,this.actions[o++]=e,this.actions[o++]=n,o}addActions(t,e,n,o){let{state:a}=t,{parser:i}=t.p,{data:u}=i;for(let l=0;l<2;l++)for(let s=i.stateSlot(a,l?2:1);;s+=3){if(u[s]==65535)if(u[s+1]==1)s=Hu(u,s+2);else{o==0&&u[s+1]==2&&(o=this.putAction(Hu(u,s+2),e,n,o));break}u[s]==e&&(o=this.putAction(Hu(u,s+1),e,n,o))}return o}},MM=class{constructor(t,e,n,o){this.parser=t,this.input=e,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new OM(e,o),this.tokens=new FM(t,this.stream),this.topTerm=t.top[1];let{from:a}=o[0];this.stacks=[RM.start(this,t.top[0],a)],this.fragments=n.length&&this.stream.end-a>t.bufferLength*4?new EM(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,n=this.stacks=[],o,a;if(this.bigReductionCount>300&&t.length==1){let[i]=t;for(;i.forceReduce()&&i.stack.length&&i.stack[i.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let i=0;i<t.length;i++){let u=t[i];for(;;){if(this.tokens.mainToken=null,u.pos>e)n.push(u);else{if(this.advanceStack(u,n,t))continue;{o||(o=[],a=[]),o.push(u);let l=this.tokens.getMainToken(u);a.push(l.value,l.end)}}break}}if(!n.length){let i=o&&ibt(o);if(i)return ma&&console.log("Finish with "+this.stackID(i)),this.stackToTree(i);if(this.parser.strict)throw ma&&o&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&o){let i=this.stoppedAt!=null&&o[0].pos>this.stoppedAt?o[0]:this.runRecovery(o,a,n);if(i)return ma&&console.log("Force-finish "+this.stackID(i)),this.stackToTree(i.forceAll())}if(this.recovering){let i=this.recovering==1?1:this.recovering*3;if(n.length>i)for(n.sort((u,l)=>l.score-u.score);n.length>i;)n.pop();n.some(u=>u.reducePos>e)&&this.recovering--}else if(n.length>1){t:for(let i=0;i<n.length-1;i++){let u=n[i];for(let l=i+1;l<n.length;l++){let s=n[l];if(u.sameState(s)||u.buffer.length>500&&s.buffer.length>500)if((u.score-s.score||u.buffer.length-s.buffer.length)>0)n.splice(l--,1);else{n.splice(i--,1);continue t}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let i=1;i<n.length;i++)n[i].pos<this.minStackPos&&(this.minStackPos=n[i].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,n){let o=t.pos,{parser:a}=this,i=ma?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&o>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let s=t.curContext&&t.curContext.tracker.strict,c=s?t.curContext.hash:0;for(let f=this.fragments.nodeAt(o);f;){let d=this.parser.nodeSet.types[f.type.id]==f.type?a.getGoto(t.state,f.type.id):-1;if(d>-1&&f.length&&(!s||(f.prop(ae.contextHash)||0)==c))return t.useNode(f,d),ma&&console.log(i+this.stackID(t)+` (via reuse of ${a.getName(f.type.id)})`),!0;if(!(f instanceof Wr)||f.children.length==0||f.positions[0]>0)break;let p=f.children[0];if(p instanceof Wr&&f.positions[0]==0)f=p;else break}}let u=a.stateSlot(t.state,4);if(u>0)return t.reduce(u),ma&&console.log(i+this.stackID(t)+` (via always-reduce ${a.getName(u&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let l=this.tokens.getActions(t);for(let s=0;s<l.length;){let c=l[s++],f=l[s++],d=l[s++],p=s==l.length||!n,h=p?t:t.split(),m=this.tokens.mainToken;if(h.apply(c,f,m?m.start:h.pos,d),ma&&console.log(i+this.stackID(h)+` (via ${c&65536?`reduce of ${a.getName(c&65535)}`:"shift"} for ${a.getName(f)} @ ${o}${h==t?"":", split"})`),p)return!0;h.pos>o?e.push(h):n.push(h)}return!1}advanceFully(t,e){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return qY(t,e),!0}}runRecovery(t,e,n){let o=null,a=!1;for(let i=0;i<t.length;i++){let u=t[i],l=e[i<<1],s=e[(i<<1)+1],c=ma?this.stackID(u)+" -> ":"";if(u.deadEnd&&(a||(a=!0,u.restart(),ma&&console.log(c+this.stackID(u)+" (restarted)"),this.advanceFully(u,n))))continue;let f=u.split(),d=c;for(let p=0;f.forceReduce()&&p<10&&(ma&&console.log(d+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,n));p++)ma&&(d=this.stackID(f)+" -> ");for(let p of u.recoverByInsert(l))ma&&console.log(c+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,n);this.stream.end>u.pos?(s==u.pos&&(s++,l=0),u.recoverByDelete(l,s),ma&&console.log(c+this.stackID(u)+` (via recover-delete ${this.parser.getName(l)})`),qY(u,n)):(!o||o.score<u.score)&&(o=u)}return o}stackToTree(t){return t.close(),Wr.build({buffer:SM.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(xM||(xM=new WeakMap)).get(t);return e||xM.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}};function qY(r,t){for(let e=0;e<t.length;e++){let n=t[e];if(n.pos==r.pos&&n.sameState(r)){t[e].score<r.score&&(t[e]=r);return}}t.push(r)}var AM=class{constructor(t,e,n){this.source=t,this.flags=e,this.disabled=n}allows(t){return!this.disabled||this.disabled[t]==0}},TM=r=>r,rw=class{constructor(t){this.start=t.start,this.shift=t.shift||TM,this.reduce=t.reduce||TM,this.reuse=t.reuse||TM,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}},nw=class r extends ap{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let u=0;u<t.repeatNodeCount;u++)e.push("");let n=Object.keys(t.topRules).map(u=>t.topRules[u][1]),o=[];for(let u=0;u<e.length;u++)o.push([]);function a(u,l,s){o[u].push([l,l.deserialize(String(s))])}if(t.nodeProps)for(let u of t.nodeProps){let l=u[0];typeof l=="string"&&(l=ae[l]);for(let s=1;s<u.length;){let c=u[s++];if(c>=0)a(c,l,u[s++]);else{let f=u[s+-c];for(let d=-c;d>0;d--)a(u[s++],l,f);s++}}}this.nodeSet=new gg(e.map((u,l)=>Kn.define({name:l>=this.minRepeatTerm?void 0:u,id:l,props:o[l],top:n.indexOf(l)>-1,error:l==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(l)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=1024;let i=$g(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(QY),this.states=$g(t.states,Uint32Array),this.data=$g(t.stateData),this.goto=$g(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(u=>typeof u=="number"?new us(i,u):u),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,n){let o=new MM(this,t,e,n);for(let a of this.wrappers)o=a(o,t,e,n);return o}getGoto(t,e,n=!1){let o=this.goto;if(e>=o[0])return-1;for(let a=o[e+1];;){let i=o[a++],u=i&1,l=o[a++];if(u&&n)return l;for(let s=a+(i>>1);a<s;a++)if(o[a]==t)return l;if(u)return-1}}hasAction(t,e){let n=this.data;for(let o=0;o<2;o++)for(let a=this.stateSlot(t,o?2:1),i;;a+=3){if((i=n[a])==65535)if(n[a+1]==1)i=n[a=Hu(n,a+2)];else{if(n[a+1]==2)return Hu(n,a+2);break}if(i==e||i==0)return Hu(n,a+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,n=>n==e?!0:null)}allActions(t,e){let n=this.stateSlot(t,4),o=n?e(n):void 0;for(let a=this.stateSlot(t,1);o==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=Hu(this.data,a+2);else break;o=e(Hu(this.data,a+1))}return o}nextStates(t){let e=[];for(let n=this.stateSlot(t,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=Hu(this.data,n+2);else break;if(!(this.data[n+2]&1)){let o=this.data[n+1];e.some((a,i)=>i&1&&a==o)||e.push(this.data[n],o)}}return e}configure(t){let e=Object.assign(Object.create(r.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=n}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(n=>{let o=t.tokenizers.find(a=>a.from==n);return o?o.to:n})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((n,o)=>{let a=t.specializers.find(u=>u.from==n.external);if(!a)return n;let i=Object.assign(Object.assign({},n),{external:a.to});return e.specializers[o]=QY(i),i})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),n=e.map(()=>!1);if(t)for(let a of t.split(" ")){let i=e.indexOf(a);i>=0&&(n[i]=!0)}let o=null;for(let a=0;a<e.length;a++)if(!n[a])for(let i=this.dialects[e[a]],u;(u=this.data[i++])!=65535;)(o||(o=new Uint8Array(this.maxTerm+1)))[u]=1;return new AM(t,n,o)}static deserialize(t){return new r(t)}};function Hu(r,t){return r[t]|r[t+1]<<16}function ibt(r){let t=null;for(let e of r){let n=e.p.stoppedAt;(e.pos==e.p.stream.end||n!=null&&e.pos>n)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function QY(r){if(r.external){let t=r.extend?1:0;return(e,n)=>r.external(e,n)<<1|t}return r.get}var ubt=312,lbt=313,VY=1,sbt=2,cbt=3,fbt=4,dbt=314,pbt=316,hbt=317,mbt=5,vbt=6,gbt=0,IM=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],jY=125,_bt=59,NM=47,ybt=42,bbt=43,Dbt=45,wbt=60,xbt=44,Tbt=63,Rbt=46,Cbt=91,Sbt=new rw({start:!1,shift(r,t){return t==mbt||t==vbt||t==pbt?r:t==hbt},strict:!1}),Obt=new ls((r,t)=>{let{next:e}=r;(e==jY||e==-1||t.context)&&r.acceptToken(dbt)},{contextual:!0,fallback:!0}),Ebt=new ls((r,t)=>{let{next:e}=r,n;IM.indexOf(e)>-1||e==NM&&((n=r.peek(1))==NM||n==ybt)||e!=jY&&e!=_bt&&e!=-1&&!t.context&&r.acceptToken(ubt)},{contextual:!0}),Fbt=new ls((r,t)=>{r.next==Cbt&&!t.context&&r.acceptToken(lbt)},{contextual:!0}),Mbt=new ls((r,t)=>{let{next:e}=r;if(e==bbt||e==Dbt){if(r.advance(),e==r.next){r.advance();let n=!t.context&&t.canShift(VY);r.acceptToken(n?VY:sbt)}}else e==Tbt&&r.peek(1)==Rbt&&(r.advance(),r.advance(),(r.next<48||r.next>57)&&r.acceptToken(cbt))},{contextual:!0});function PM(r,t){return r>=65&&r<=90||r>=97&&r<=122||r==95||r>=192||!t&&r>=48&&r<=57}var Abt=new ls((r,t)=>{if(r.next!=wbt||!t.dialectEnabled(gbt)||(r.advance(),r.next==NM))return;let e=0;for(;IM.indexOf(r.next)>-1;)r.advance(),e++;if(PM(r.next,!0)){for(r.advance(),e++;PM(r.next,!1);)r.advance(),e++;for(;IM.indexOf(r.next)>-1;)r.advance(),e++;if(r.next==xbt)return;for(let n=0;;n++){if(n==7){if(!PM(r.next,!0))return;break}if(r.next!="extends".charCodeAt(n))break;r.advance(),e++}}r.acceptToken(fbt,-e)}),Pbt=_D({"get set async static":F.modifier,"for while do if else switch try catch finally return throw break continue default case":F.controlKeyword,"in of await yield void typeof delete instanceof":F.operatorKeyword,"let var const using function class extends":F.definitionKeyword,"import export from":F.moduleKeyword,"with debugger as new":F.keyword,TemplateString:F.special(F.string),super:F.atom,BooleanLiteral:F.bool,this:F.self,null:F.null,Star:F.modifier,VariableName:F.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":F.function(F.variableName),VariableDefinition:F.definition(F.variableName),Label:F.labelName,PropertyName:F.propertyName,PrivatePropertyName:F.special(F.propertyName),"CallExpression/MemberExpression/PropertyName":F.function(F.propertyName),"FunctionDeclaration/VariableDefinition":F.function(F.definition(F.variableName)),"ClassDeclaration/VariableDefinition":F.definition(F.className),PropertyDefinition:F.definition(F.propertyName),PrivatePropertyDefinition:F.definition(F.special(F.propertyName)),UpdateOp:F.updateOperator,"LineComment Hashbang":F.lineComment,BlockComment:F.blockComment,Number:F.number,String:F.string,Escape:F.escape,ArithOp:F.arithmeticOperator,LogicOp:F.logicOperator,BitOp:F.bitwiseOperator,CompareOp:F.compareOperator,RegExp:F.regexp,Equals:F.definitionOperator,Arrow:F.function(F.punctuation),": Spread":F.punctuation,"( )":F.paren,"[ ]":F.squareBracket,"{ }":F.brace,"InterpolationStart InterpolationEnd":F.special(F.brace),".":F.derefOperator,", ;":F.separator,"@":F.meta,TypeName:F.typeName,TypeDefinition:F.definition(F.typeName),"type enum interface implements namespace module declare":F.definitionKeyword,"abstract global Privacy readonly override":F.modifier,"is keyof unique infer":F.operatorKeyword,JSXAttributeValue:F.attributeValue,JSXText:F.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":F.angleBracket,"JSXIdentifier JSXNameSpacedName":F.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":F.attributeName,"JSXBuiltin/JSXIdentifier":F.standard(F.tagName)}),Ibt={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,extends:54,this:58,true:66,false:66,null:78,void:82,typeof:86,super:102,new:136,delete:148,yield:157,await:161,class:166,public:229,private:229,protected:229,readonly:231,instanceof:250,satisfies:253,in:254,const:256,import:290,keyof:345,unique:349,infer:355,is:391,abstract:411,implements:413,type:415,let:418,var:420,using:423,interface:429,enum:433,namespace:439,module:441,declare:445,global:449,for:468,of:477,while:480,with:484,do:488,if:492,else:494,switch:498,case:504,try:510,catch:514,finally:518,return:522,throw:526,break:530,continue:534,debugger:538},Nbt={__proto__:null,async:123,get:125,set:127,declare:189,public:191,private:191,protected:191,static:193,abstract:195,override:197,readonly:203,accessor:205,new:395},kbt={__proto__:null,"<":187},ZY=nw.deserialize({version:14,states:"$CdQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#D^O.QQlO'#DdO.bQlO'#DoO%[QlO'#DwO0fQlO'#EPOOQ!0Lf'#EX'#EXO1PQ`O'#EUOOQO'#Em'#EmOOQO'#Ih'#IhO1XQ`O'#GpO1dQ`O'#ElO1iQ`O'#ElO3hQ!0MxO'#JnO6[Q!0MxO'#JoO6uQ`O'#F[O6zQ,UO'#FsOOQ!0Lf'#Fe'#FeO7VO7dO'#FeO7eQMhO'#FzO9RQ`O'#FyOOQ!0Lf'#Jo'#JoOOQ!0Lb'#Jn'#JnO9WQ`O'#GtOOQ['#K['#K[O9cQ`O'#IUO9hQ!0LrO'#IVOOQ['#J['#J[OOQ['#IZ'#IZQ`QlOOQ`QlOOO9pQ!L^O'#DsO9wQlO'#D{O:OQlO'#D}O9^Q`O'#GpO:VQMhO'#CoO:eQ`O'#EkO:pQ`O'#EvO:uQMhO'#FdO;dQ`O'#GpOOQO'#K]'#K]O;iQ`O'#K]O;wQ`O'#GxO;wQ`O'#GyO;wQ`O'#G{O9^Q`O'#HOO<nQ`O'#HRO>VQ`O'#CeO>gQ`O'#H_O>oQ`O'#HeO>oQ`O'#HgO`QlO'#HiO>oQ`O'#HkO>oQ`O'#HnO>tQ`O'#HtO>yQ!0LsO'#HzO%[QlO'#H|O?UQ!0LsO'#IOO?aQ!0LsO'#IQO9hQ!0LrO'#ISO?lQ!0MxO'#CiO@nQpO'#DiQOQ`OOO%[QlO'#D}OAUQ`O'#EQO:VQMhO'#EkOAaQ`O'#EkOAlQ!bO'#FdOOQ['#Cg'#CgOOQ!0Lb'#Dn'#DnOOQ!0Lb'#Jr'#JrO%[QlO'#JrOOQO'#Ju'#JuOOQO'#Id'#IdOBlQpO'#EdOOQ!0Lb'#Ec'#EcOOQ!0Lb'#Jy'#JyOChQ!0MSO'#EdOCrQpO'#ETOOQO'#Jt'#JtODWQpO'#JuOEeQpO'#ETOCrQpO'#EdPErO&2DjO'#CbPOOO)CDy)CDyOOOO'#I['#I[OE}O#tO,59UOOQ!0Lh,59U,59UOOOO'#I]'#I]OF]O&jO,59UOFkQ!L^O'#D`OOOO'#I_'#I_OFrO#@ItO,59xOOQ!0Lf,59x,59xOGQQlO'#I`OGeQ`O'#JpOIdQ!fO'#JpO+}QlO'#JpOIkQ`O,5:OOJRQ`O'#EmOJ`Q`O'#KPOJkQ`O'#KOOJkQ`O'#KOOJsQ`O,5;ZOJxQ`O'#J}OOQ!0Ln,5:Z,5:ZOKPQlO,5:ZOL}Q!0MxO,5:cOMnQ`O,5:kONXQ!0LrO'#J|ON`Q`O'#J{O9WQ`O'#J{ONtQ`O'#J{ON|Q`O,5;YO! RQ`O'#J{O!#WQ!fO'#JoOOQ!0Lh'#Ci'#CiO%[QlO'#EPO!#vQ!fO,5:pOOQS'#Jv'#JvOOQO-E<f-E<fO9^Q`O,5=[O!$^Q`O,5=[O!$cQlO,5;WO!&fQMhO'#EhO!(PQ`O,5;WO!(UQlO'#DvO!(`QpO,5;aO!(hQpO,5;aO%[QlO,5;aOOQ['#FS'#FSOOQ['#FU'#FUO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bO%[QlO,5;bOOQ['#FY'#FYO!(vQlO,5;sOOQ!0Lf,5;x,5;xOOQ!0Lf,5;y,5;yOOQ!0Lf,5;{,5;{O%[QlO'#IlO!*yQ!0LrO,5<gO%[QlO,5;bO!&fQMhO,5;bO!+hQMhO,5;bO!-YQMhO'#EZO%[QlO,5;vOOQ!0Lf,5;z,5;zO!-aQ,UO'#FiO!.^Q,UO'#KTO!-xQ,UO'#KTO!.eQ,UO'#KTOOQO'#KT'#KTO!.yQ,UO,5<ROOOW,5<_,5<_O!/[QlO'#FuOOOW'#Ik'#IkO7VO7dO,5<PO!/cQ,UO'#FwOOQ!0Lf,5<P,5<PO!0SQ$IUO'#CvOOQ!0Lh'#Cz'#CzO!0gO#@ItO'#DOO!1TQMjO,5<dO!1[Q`O,5<fO!2wQ(CWO'#GVO!3UQ`O'#GWO!3ZQ`O'#GWO!4yQ(CWO'#G[O!6OQpO'#G`OOQO'#Gk'#GkO!+oQMhO'#GjOOQO'#Gm'#GmO!+oQMhO'#GlO!6qQ$IUO'#JhOOQ!0Lh'#Jh'#JhO!6{Q`O'#JgO!7ZQ`O'#JfO!7cQ`O'#CuOOQ!0Lh'#Cx'#CxO!7kQ`O'#CzOOQ!0Lh'#DS'#DSOOQ!0Lh'#DU'#DUO1SQ`O'#DWO!+oQMhO'#F}O!+oQMhO'#GPO!7pQ`O'#GRO!7uQ`O'#GSO!3ZQ`O'#GYO!+oQMhO'#G_O!7zQ`O'#EnO!8iQ`O,5<eOOQ!0Lb'#Cr'#CrO!8qQ`O'#EoO!9kQpO'#EpOOQ!0Lb'#J}'#J}O!9rQ!0LrO'#K^O9hQ!0LrO,5=`O`QlO,5>pOOQ['#Jd'#JdOOQ[,5>q,5>qOOQ[-E<X-E<XO!;qQ!0MxO,5:_O!9fQpO,5:]O!>[Q!0MxO,5:gO%[QlO,5:gO!@rQ!0MxO,5:iOOQO,5@w,5@wO!AcQMhO,5=[O!AqQ!0LrO'#JeO9RQ`O'#JeO!BSQ!0LrO,59ZO!B_QpO,59ZO!BgQMhO,59ZO:VQMhO,59ZO!BrQ`O,5;WO!BzQ`O'#H^O!C`Q`O'#KaO%[QlO,5;|O!9fQpO,5<OO!ChQ`O,5=wO!CmQ`O,5=wO!CrQ`O,5=wO9hQ!0LrO,5=wO;wQ`O,5=gOOQO'#Cv'#CvO!DQQpO,5=dO!DYQMhO,5=eO!DeQ`O,5=gO!DjQ!bO,5=jO!DrQ`O'#K]O>tQ`O'#HTO9^Q`O'#HVO!DwQ`O'#HVO:VQMhO'#HXO!D|Q`O'#HXOOQ[,5=m,5=mO!ERQ`O'#HYO!EdQ`O'#CoO!EiQ`O,59PO!EsQ`O,59PO!GxQlO,59POOQ[,59P,59PO!HYQ!0LrO,59PO%[QlO,59PO!JeQlO'#HaOOQ['#Hb'#HbOOQ['#Hc'#HcO`QlO,5=yO!J{Q`O,5=yO`QlO,5>PO`QlO,5>RO!KQQ`O,5>TO`QlO,5>VO!KVQ`O,5>YO!K[QlO,5>`OOQ[,5>f,5>fO%[QlO,5>fO9hQ!0LrO,5>hOOQ[,5>j,5>jO# fQ`O,5>jOOQ[,5>l,5>lO# fQ`O,5>lOOQ[,5>n,5>nO#!SQpO'#D[O%[QlO'#JrO#!uQpO'#JrO##PQpO'#DjO##bQpO'#DjO#%sQlO'#DjO#%zQ`O'#JqO#&SQ`O,5:TO#&XQ`O'#EqO#&gQ`O'#KQO#&oQ`O,5;[O#&tQpO'#DjO#'RQpO'#ESOOQ!0Lf,5:l,5:lO%[QlO,5:lO#'YQ`O,5:lO>tQ`O,5;VO!B_QpO,5;VO!BgQMhO,5;VO:VQMhO,5;VO#'bQ`O,5@^O#'gQ07dO,5:pOOQO-E<b-E<bO#(mQ!0MSO,5;OOCrQpO,5:oO#(wQpO,5:oOCrQpO,5;OO!BSQ!0LrO,5:oOOQ!0Lb'#Eg'#EgOOQO,5;O,5;OO%[QlO,5;OO#)UQ!0LrO,5;OO#)aQ!0LrO,5;OO!B_QpO,5:oOOQO,5;U,5;UO#)oQ!0LrO,5;OPOOO'#IY'#IYP#*TO&2DjO,58|POOO,58|,58|OOOO-E<Y-E<YOOQ!0Lh1G.p1G.pOOOO-E<Z-E<ZOOOO,59z,59zO#*`Q!bO,59zOOOO-E<]-E<]OOQ!0Lf1G/d1G/dO#*eQ!fO,5>zO+}QlO,5>zOOQO,5?Q,5?QO#*oQlO'#I`OOQO-E<^-E<^O#*|Q`O,5@[O#+UQ!fO,5@[O#+]Q`O,5@jOOQ!0Lf1G/j1G/jO%[QlO,5@kO#+eQ`O'#IfOOQO-E<d-E<dO#+]Q`O,5@jOOQ!0Lb1G0u1G0uOOQ!0Ln1G/u1G/uOOQ!0Ln1G0V1G0VO%[QlO,5@hO#+yQ!0LrO,5@hO#,[Q!0LrO,5@hO#,cQ`O,5@gO9WQ`O,5@gO#,kQ`O,5@gO#,yQ`O'#IiO#,cQ`O,5@gOOQ!0Lb1G0t1G0tO!(`QpO,5:rO!(kQpO,5:rOOQS,5:t,5:tO#-kQdO,5:tO#-sQMhO1G2vO9^Q`O1G2vOOQ!0Lf1G0r1G0rO#.RQ!0MxO1G0rO#/WQ!0MvO,5;SOOQ!0Lh'#GU'#GUO#/tQ!0MzO'#JhO!$cQlO1G0rO#2PQ!fO'#JsO%[QlO'#JsO#2ZQ`O,5:bOOQ!0Lh'#D['#D[OOQ!0Lf1G0{1G0{O%[QlO1G0{OOQ!0Lf1G1e1G1eO#2`Q`O1G0{O#4tQ!0MxO1G0|O#4{Q!0MxO1G0|O#7cQ!0MxO1G0|O#7jQ!0MxO1G0|O#:QQ!0MxO1G0|O#<hQ!0MxO1G0|O#<oQ!0MxO1G0|O#<vQ!0MxO1G0|O#?^Q!0MxO1G0|O#?eQ!0MxO1G0|O#ArQ?MtO'#CiO#CmQ?MtO1G1_O#CtQ?MtO'#JoO#DXQ!0MxO,5?WOOQ!0Lb-E<j-E<jO#FfQ!0MxO1G0|O#GcQ!0MzO1G0|OOQ!0Lf1G0|1G0|O#HfQMjO'#JxO#HpQ`O,5:uO#HuQ!0MxO1G1bO#IiQ,UO,5<VO#IqQ,UO,5<WO#IyQ,UO'#FnO#JbQ`O'#FmOOQO'#KU'#KUOOQO'#Ij'#IjO#JgQ,UO1G1mOOQ!0Lf1G1m1G1mOOOW1G1x1G1xO#JxQ?MtO'#JnO#KSQ`O,5<aO!(vQlO,5<aOOOW-E<i-E<iOOQ!0Lf1G1k1G1kO#KXQpO'#KTOOQ!0Lf,5<c,5<cO#KaQpO,5<cO#KfQMhO'#DQOOOO'#I^'#I^O#KmO#@ItO,59jOOQ!0Lh,59j,59jO%[QlO1G2OO!7uQ`O'#InO#KxQ`O,5<xOOQ!0Lh,5<u,5<uO!+oQMhO'#IqO#LfQMjO,5=UO!+oQMhO'#IsO#MXQMjO,5=WO!&fQMhO,5=YOOQO1G2Q1G2QO#McQ!dO'#CrO#MvQ(CWO'#EoO#N{QpO'#G`O$ cQ!dO,5<qO$ jQ`O'#KXO9WQ`O'#KXO$ xQ`O,5<sO!+oQMhO,5<rO$ }Q`O'#GXO$!`Q`O,5<rO$!eQ!dO'#GUO$!rQ!dO'#KYO$!|Q`O'#KYO!&fQMhO'#KYO$#RQ`O,5<vO$#WQlO'#JrO$#bQpO'#GaO##bQpO'#GaO$#sQ`O'#GeO!3ZQ`O'#GhO$#xQ!0LrO'#IpO$$TQpO,5<zOOQ!0Lp,5<z,5<zO$$[QpO'#GaO$$iQpO'#GbO$$zQpO'#GbO$%PQMjO,5=UO$%aQMjO,5=WOOQ!0Lh,5=Z,5=ZO!+oQMhO,5@RO!+oQMhO,5@RO$%qQ`O'#IuO$%|Q`O,5@QO$&UQ`O,59aOOQ!0Lh,59f,59fO$&{Q$IYO,59rOOQ!0Lh'#Jl'#JlO$'nQMjO,5<iO$(aQMjO,5<kO@fQ`O,5<mOOQ!0Lh,5<n,5<nO$(kQ`O,5<tO$(pQMjO,5<yO$)QQ`O'#J{O!$cQlO1G2PO$)VQ`O1G2PO9WQ`O'#KOO9WQ`O'#EqO%[QlO'#EqO9WQ`O'#IwO$)[Q!0LrO,5@xOOQ[1G2z1G2zOOQ[1G4[1G4[OOQ!0Lf1G/y1G/yOOQ!0Lf1G/w1G/wO$+^Q!0MxO1G0ROOQ[1G2v1G2vO!&fQMhO1G2vO%[QlO1G2vO#-vQ`O1G2vO$-bQMhO'#EhOOQ!0Lb,5@P,5@PO$-lQ!0LrO,5@POOQ[1G.u1G.uO!BSQ!0LrO1G.uO!B_QpO1G.uO!BgQMhO1G.uO$-}Q`O1G0rO$.SQ`O'#CiO$._Q`O'#KbO$.gQ`O,5=xO$.lQ`O'#KbO$.qQ`O'#KbO$/PQ`O'#I}O$/_Q`O,5@{O$/gQ!fO1G1hOOQ!0Lf1G1j1G1jO9^Q`O1G3cO@fQ`O1G3cO$/nQ`O1G3cO$/sQ`O1G3cOOQ[1G3c1G3cO!DeQ`O1G3RO!&fQMhO1G3OO$/xQ`O1G3OOOQ[1G3P1G3PO!&fQMhO1G3PO$/}Q`O1G3PO$0VQpO'#G}OOQ[1G3R1G3RO!5yQpO'#IyO!DjQ!bO1G3UOOQ[1G3U1G3UOOQ[,5=o,5=oO$0_QMhO,5=qO9^Q`O,5=qO$#sQ`O,5=sO9RQ`O,5=sO!B_QpO,5=sO!BgQMhO,5=sO:VQMhO,5=sO$0mQ`O'#K`O$0xQ`O,5=tOOQ[1G.k1G.kO$0}Q!0LrO1G.kO@fQ`O1G.kO$1YQ`O1G.kO9hQ!0LrO1G.kO$3bQ!fO,5@}O$3oQ`O,5@}O9WQ`O,5@}O$3zQlO,5={O$4RQ`O,5={OOQ[1G3e1G3eO`QlO1G3eOOQ[1G3k1G3kOOQ[1G3m1G3mO>oQ`O1G3oO$4WQlO1G3qO$8[QlO'#HpOOQ[1G3t1G3tO$8iQ`O'#HvO>tQ`O'#HxOOQ[1G3z1G3zO$8qQlO1G3zO9hQ!0LrO1G4QOOQ[1G4S1G4SOOQ!0Lb'#G]'#G]O9hQ!0LrO1G4UO9hQ!0LrO1G4WO$<xQ`O,5@^O!(vQlO,5;]O9WQ`O,5;]O>tQ`O,5:UO!(vQlO,5:UO!B_QpO,5:UO$<}Q?MtO,5:UOOQO,5;],5;]O$=XQpO'#IaO$=oQ`O,5@]OOQ!0Lf1G/o1G/oO$=wQpO'#IgO$>RQ`O,5@lOOQ!0Lb1G0v1G0vO##bQpO,5:UOOQO'#Ic'#IcO$>ZQpO,5:nOOQ!0Ln,5:n,5:nO#']Q`O1G0WOOQ!0Lf1G0W1G0WO%[QlO1G0WOOQ!0Lf1G0q1G0qO>tQ`O1G0qO!B_QpO1G0qO!BgQMhO1G0qOOQ!0Lb1G5x1G5xO!BSQ!0LrO1G0ZOOQO1G0j1G0jO%[QlO1G0jO$>bQ!0LrO1G0jO$>mQ!0LrO1G0jO!B_QpO1G0ZOCrQpO1G0ZO$>{Q!0LrO1G0jOOQO1G0Z1G0ZO$?aQ!0MxO1G0jPOOO-E<W-E<WPOOO1G.h1G.hOOOO1G/f1G/fO$?kQ!bO,5<gO$?sQ!fO1G4fOOQO1G4l1G4lO%[QlO,5>zO$?}Q`O1G5vO$@VQ`O1G6UO$@_Q!fO1G6VO9WQ`O,5?QO$@iQ!0MxO1G6SO%[QlO1G6SO$@yQ!0LrO1G6SO$A[Q`O1G6RO$A[Q`O1G6RO9WQ`O1G6RO$AdQ`O,5?TO9WQ`O,5?TOOQO,5?T,5?TO$AxQ`O,5?TO$)QQ`O,5?TOOQO-E<g-E<gOOQS1G0^1G0^OOQS1G0`1G0`O#-nQ`O1G0`OOQ[7+(b7+(bO!&fQMhO7+(bO%[QlO7+(bO$BWQ`O7+(bO$BcQMhO7+(bO$BqQ!0MzO,5=UO$D|Q!0MzO,5=WO$GXQ!0MzO,5=UO$IjQ!0MzO,5=WO$K{Q!0MzO,59rO$NQQ!0MzO,5<iO%!]Q!0MzO,5<kO%$hQ!0MzO,5<yOOQ!0Lf7+&^7+&^O%&yQ!0MxO7+&^O%'mQlO'#IbO%'zQ`O,5@_O%(SQ!fO,5@_OOQ!0Lf1G/|1G/|O%(^Q`O7+&gOOQ!0Lf7+&g7+&gO%(cQ?MtO,5:cO%[QlO7+&yO%(mQ?MtO,5:_O%(zQ?MtO,5:gO%)UQ?MtO,5:iO%)`QMhO'#IeO%)jQ`O,5@dOOQ!0Lh1G0a1G0aOOQO1G1q1G1qOOQO1G1r1G1rO%)rQ!jO,5<YO!(vQlO,5<XOOQO-E<h-E<hOOQ!0Lf7+'X7+'XOOOW7+'d7+'dOOOW1G1{1G1{O%)}Q`O1G1{OOQ!0Lf1G1}1G1}OOOO,59l,59lO%*SQ!dO,59lOOOO-E<[-E<[OOQ!0Lh1G/U1G/UO%*ZQ!0MxO7+'jOOQ!0Lh,5?Y,5?YO%*}QMhO1G2dP%+UQ`O'#InPOQ!0Lh-E<l-E<lO%+rQMjO,5?]OOQ!0Lh-E<o-E<oO%,eQMjO,5?_OOQ!0Lh-E<q-E<qO%,oQ!dO1G2tO%,vQ!dO'#CrO%-^QMhO'#KOO$#WQlO'#JrOOQ!0Lh1G2]1G2]O%-eQ`O'#ImO%-yQ`O,5@sO%-yQ`O,5@sO%.RQ`O,5@sO%.^Q`O,5@sOOQO1G2_1G2_O%.lQMjO1G2^O!+oQMhO1G2^O%.|Q(CWO'#IoO%/ZQ`O,5@tO!&fQMhO,5@tO%/cQ!dO,5@tOOQ!0Lh1G2b1G2bO%1sQ!fO'#CiO%1}Q`O,5<}OOQ!0Lb,5<{,5<{O%2VQpO,5<{OOQ!0Lb,5<|,5<|OCcQ`O,5<{O%2bQpO,5<{OOQ!0Lb,5=P,5=PO$)QQ`O,5=SOOQO,5?[,5?[OOQO-E<n-E<nOOQ!0Lp1G2f1G2fO##bQpO,5<{O$#WQlO,5<}O%2pQ`O,5<|O%2{QpO,5<|O!+oQMhO'#IqO%3uQMjO1G2pO!+oQMhO'#IsO%4hQMjO1G2rO%4rQMjO1G5mO%4|QMjO1G5mOOQO,5?a,5?aOOQO-E<s-E<sOOQO1G.{1G.{O!9fQpO,59tO%[QlO,59tOOQ!0Lh,5<h,5<hO%5ZQ`O1G2XO!+oQMhO1G2`O%5`Q!0MxO7+'kOOQ!0Lf7+'k7+'kO!$cQlO7+'kO%6SQ`O,5;]OOQ!0Lb,5?c,5?cOOQ!0Lb-E<u-E<uO%6XQ!dO'#KZO#']Q`O7+(bO4UQ!fO7+(bO$BZQ`O7+(bO%6cQ!0MvO'#CiO%6vQ!0MvO,5=QO%7hQ`O,5=QOOQ!0Lb1G5k1G5kOOQ[7+$a7+$aO!BSQ!0LrO7+$aO!B_QpO7+$aO!$cQlO7+&^O%7mQ`O'#I|O%8UQ`O,5@|OOQO1G3d1G3dO9^Q`O,5@|O%8UQ`O,5@|O%8^Q`O,5@|OOQO,5?i,5?iOOQO-E<{-E<{OOQ!0Lf7+'S7+'SO%8cQ`O7+(}O9hQ!0LrO7+(}O9^Q`O7+(}O@fQ`O7+(}OOQ[7+(m7+(mO%8hQ!0MvO7+(jO!&fQMhO7+(jO!D`Q`O7+(kOOQ[7+(k7+(kO!&fQMhO7+(kO%8rQ`O'#K_O%8}Q`O,5=iOOQO,5?e,5?eOOQO-E<w-E<wOOQ[7+(p7+(pO%:aQpO'#HWOOQ[1G3]1G3]O!&fQMhO1G3]O%[QlO1G3]O%:hQ`O1G3]O%:sQMhO1G3]O9hQ!0LrO1G3_O$#sQ`O1G3_O9RQ`O1G3_O!B_QpO1G3_O!BgQMhO1G3_O%;RQ`O'#I{O%;gQ`O,5@zO%;oQpO,5@zOOQ!0Lb1G3`1G3`OOQ[7+$V7+$VO@fQ`O7+$VO9hQ!0LrO7+$VO%;zQ`O7+$VO%[QlO1G6iO%[QlO1G6jO%<PQ!0LrO1G6iO%<ZQlO1G3gO%<bQ`O1G3gO%<gQlO1G3gOOQ[7+)P7+)PO9hQ!0LrO7+)ZO`QlO7+)]OOQ['#Ke'#KeOOQ['#JO'#JOO%<nQlO,5>[OOQ[,5>[,5>[O%[QlO'#HqO%<{Q`O'#HsOOQ[,5>b,5>bO9WQ`O,5>bOOQ[,5>d,5>dOOQ[7+)f7+)fOOQ[7+)l7+)lOOQ[7+)p7+)pOOQ[7+)r7+)rO%=QQpO1G5xO%=lQ?MtO1G0wO%=vQ`O1G0wOOQO1G/p1G/pO%>RQ?MtO1G/pO>tQ`O1G/pO!(vQlO'#DjOOQO,5>{,5>{OOQO-E<_-E<_OOQO,5?R,5?ROOQO-E<e-E<eO!B_QpO1G/pOOQO-E<a-E<aOOQ!0Ln1G0Y1G0YOOQ!0Lf7+%r7+%rO#']Q`O7+%rOOQ!0Lf7+&]7+&]O>tQ`O7+&]O!B_QpO7+&]OOQO7+%u7+%uO$?aQ!0MxO7+&UOOQO7+&U7+&UO%[QlO7+&UO%>]Q!0LrO7+&UO!BSQ!0LrO7+%uO!B_QpO7+%uO%>hQ!0LrO7+&UO%>vQ!0MxO7++nO%[QlO7++nO%?WQ`O7++mO%?WQ`O7++mOOQO1G4o1G4oO9WQ`O1G4oO%?`Q`O1G4oOOQS7+%z7+%zO#']Q`O<<K|O4UQ!fO<<K|O%?nQ`O<<K|OOQ[<<K|<<K|O!&fQMhO<<K|O%[QlO<<K|O%?vQ`O<<K|O%@RQ!0MzO,5?]O%B^Q!0MzO,5?_O%DiQ!0MzO1G2^O%FzQ!0MzO1G2pO%IVQ!0MzO1G2rO%KbQ!fO,5>|O%[QlO,5>|OOQO-E<`-E<`O%KlQ`O1G5yOOQ!0Lf<<JR<<JRO%KtQ?MtO1G0rO%M{Q?MtO1G0|O%NSQ?MtO1G0|O&!TQ?MtO1G0|O&![Q?MtO1G0|O&$]Q?MtO1G0|O&&^Q?MtO1G0|O&&eQ?MtO1G0|O&&lQ?MtO1G0|O&(mQ?MtO1G0|O&(tQ?MtO1G0|O&({Q!0MxO<<JeO&*sQ?MtO1G0|O&+pQ?MvO1G0|O&,sQ?MvO'#JhO&.yQ?MtO1G1bO&/WQ?MtO1G0RO&/bQMjO,5?POOQO-E<c-E<cO!(vQlO'#FpOOQO'#KV'#KVOOQO1G1t1G1tO&/lQ`O1G1sO&/qQ?MtO,5?WOOOW7+'g7+'gOOOO1G/W1G/WO&/{Q!dO1G4tOOQ!0Lh7+(O7+(OP!&fQMhO,5?YO!+oQMhO7+(`O&0SQ`O,5?XO9WQ`O,5?XOOQO-E<k-E<kO&0bQ`O1G6_O&0bQ`O1G6_O&0jQ`O1G6_O&0uQMjO7+'xO&1VQ!dO,5?ZO&1aQ`O,5?ZO!&fQMhO,5?ZOOQO-E<m-E<mO&1fQ!dO1G6`O&1pQ`O1G6`O&1xQ`O1G2iO!&fQMhO1G2iOOQ!0Lb1G2g1G2gOOQ!0Lb1G2h1G2hO%2VQpO1G2gO!B_QpO1G2gOCcQ`O1G2gOOQ!0Lb1G2n1G2nO&1}QpO1G2gO&2]Q`O1G2iO$)QQ`O1G2hOCcQ`O1G2hO$#WQlO1G2iO&2eQ`O1G2hO&3XQMjO,5?]OOQ!0Lh-E<p-E<pO&3zQMjO,5?_OOQ!0Lh-E<r-E<rO!+oQMhO7++XOOQ!0Lh1G/`1G/`O&4UQ`O1G/`OOQ!0Lh7+'s7+'sO&4ZQMjO7+'zO&4kQ!0MxO<<KVOOQ!0Lf<<KV<<KVO&5_Q`O1G0wO!&fQMhO'#IvO&5dQ`O,5@uO&7fQ!fO<<K|O!&fQMhO1G2lOOQ[<<G{<<G{O!BSQ!0LrO<<G{O&7mQ!0MxO<<IxOOQ!0Lf<<Ix<<IxOOQO,5?h,5?hO&8aQ`O,5?hO&8fQ`O,5?hOOQO-E<z-E<zO&8tQ`O1G6hO&8tQ`O1G6hO9^Q`O1G6hO@fQ`O<<LiOOQ[<<Li<<LiO&8|Q`O<<LiO9hQ!0LrO<<LiOOQ[<<LU<<LUO%8hQ!0MvO<<LUOOQ[<<LV<<LVO!D`Q`O<<LVO&9RQpO'#IxO&9^Q`O,5@yO!(vQlO,5@yOOQ[1G3T1G3TOOQO'#Iz'#IzO9hQ!0LrO'#IzO&9fQpO,5=rOOQ[,5=r,5=rO&9mQpO'#EdO&9tQpO'#GcO&9yQ`O7+(wO&:OQ`O7+(wOOQ[7+(w7+(wO!&fQMhO7+(wO%[QlO7+(wO&:WQ`O7+(wOOQ[7+(y7+(yO9hQ!0LrO7+(yO$#sQ`O7+(yO9RQ`O7+(yO!B_QpO7+(yO&:cQ`O,5?gOOQO-E<y-E<yOOQO'#HZ'#HZO&:nQ`O1G6fO9hQ!0LrO<<GqOOQ[<<Gq<<GqO@fQ`O<<GqO&:vQ`O7+,TO&:{Q`O7+,UO%[QlO7+,TO%[QlO7+,UOOQ[7+)R7+)RO&;QQ`O7+)RO&;VQlO7+)RO&;^Q`O7+)ROOQ[<<Lu<<LuOOQ[<<Lw<<LwOOQ[-E<|-E<|OOQ[1G3v1G3vO&;cQ`O,5>]OOQ[,5>_,5>_O&;hQ`O1G3|O9WQ`O7+&cO!(vQlO7+&cOOQO7+%[7+%[O&;mQ?MtO1G6VO>tQ`O7+%[OOQ!0Lf<<I^<<I^OOQ!0Lf<<Iw<<IwO>tQ`O<<IwOOQO<<Ip<<IpO$?aQ!0MxO<<IpO%[QlO<<IpOOQO<<Ia<<IaO!BSQ!0LrO<<IaO&;wQ!0LrO<<IpO&<SQ!0MxO<= YO&<dQ`O<= XOOQO7+*Z7+*ZO9WQ`O7+*ZOOQ[ANAhANAhO&<lQ!fOANAhO!&fQMhOANAhO#']Q`OANAhO4UQ!fOANAhO&<sQ`OANAhO%[QlOANAhO&<{Q!0MzO7+'xO&?^Q!0MzO,5?]O&AiQ!0MzO,5?_O&CtQ!0MzO7+'zO&FVQ!fO1G4hO&FaQ?MtO7+&^O&HeQ?MvO,5=UO&JlQ?MvO,5=WO&J|Q?MvO,5=UO&K^Q?MvO,5=WO&KnQ?MvO,59rO&MtQ?MvO,5<iO' wQ?MvO,5<kO'$]Q?MvO,5<yO'&RQ?MtO7+'jO'&`Q?MtO7+'kO'&mQ`O,5<[OOQO7+'_7+'_OOQ!0Lh7+*`7+*`O'&rQMjO<<KzOOQO1G4s1G4sO'&yQ`O1G4sO''UQ`O1G4sO''dQ`O7++yO''dQ`O7++yO!&fQMhO1G4uO''lQ!dO1G4uO''vQ`O7++zO'(OQ`O7+(TO'(ZQ!dO7+(TOOQ!0Lb7+(R7+(ROOQ!0Lb7+(S7+(SO!B_QpO7+(ROCcQ`O7+(RO'(eQ`O7+(TO!&fQMhO7+(TO$)QQ`O7+(SO'(jQ`O7+(TOCcQ`O7+(SO'(rQMjO<<NsOOQ!0Lh7+$z7+$zO'(|Q!dO,5?bOOQO-E<t-E<tO')WQ!0MvO7+(WOOQ[AN=gAN=gO9^Q`O1G5SOOQO1G5S1G5SO')hQ`O1G5SO')mQ`O7+,SO')mQ`O7+,SO9hQ!0LrOANBTO@fQ`OANBTOOQ[ANBTANBTOOQ[ANApANApOOQ[ANAqANAqO')uQ`O,5?dOOQO-E<v-E<vO'*QQ?MtO1G6eOOQO,5?f,5?fOOQO-E<x-E<xOOQ[1G3^1G3^O'*[Q`O,5<}OOQ[<<Lc<<LcO!&fQMhO<<LcO&9yQ`O<<LcO'*aQ`O<<LcO%[QlO<<LcOOQ[<<Le<<LeO9hQ!0LrO<<LeO$#sQ`O<<LeO9RQ`O<<LeO'*iQpO1G5RO'*tQ`O7+,QOOQ[AN=]AN=]O9hQ!0LrOAN=]OOQ[<= o<= oOOQ[<= p<= pO'*|Q`O<= oO'+RQ`O<= pOOQ[<<Lm<<LmO'+WQ`O<<LmO'+]QlO<<LmOOQ[1G3w1G3wO>tQ`O7+)hO'+dQ`O<<I}O'+oQ?MtO<<I}OOQO<<Hv<<HvOOQ!0LfAN?cAN?cOOQOAN?[AN?[O$?aQ!0MxOAN?[OOQOAN>{AN>{O%[QlOAN?[OOQO<<Mu<<MuOOQ[G27SG27SO!&fQMhOG27SO#']Q`OG27SO'+yQ!fOG27SO4UQ!fOG27SO',QQ`OG27SO',YQ?MtO<<JeO',gQ?MvO1G2^O'.]Q?MvO,5?]O'0`Q?MvO,5?_O'2cQ?MvO1G2pO'4fQ?MvO1G2rO'6iQ?MtO<<KVO'6vQ?MtO<<IxOOQO1G1v1G1vO!+oQMhOANAfOOQO7+*_7+*_O'7TQ`O7+*_O'7`Q`O<= eO'7hQ!dO7+*aOOQ!0Lb<<Ko<<KoO$)QQ`O<<KoOCcQ`O<<KoO'7rQ`O<<KoO!&fQMhO<<KoOOQ!0Lb<<Km<<KmO!B_QpO<<KmO'7}Q!dO<<KoOOQ!0Lb<<Kn<<KnO'8XQ`O<<KoO!&fQMhO<<KoO$)QQ`O<<KnOOQO7+*n7+*nO9^Q`O7+*nO'8^Q`O<= nOOQ[G27oG27oO9hQ!0LrOG27oO!(vQlO1G5OO'8fQ`O7+,PO'8nQ`O1G2iO&9yQ`OANA}OOQ[ANA}ANA}O!&fQMhOANA}O'8sQ`OANA}OOQ[ANBPANBPO9hQ!0LrOANBPO$#sQ`OANBPOOQO'#H['#H[OOQO7+*m7+*mOOQ[G22wG22wOOQ[ANEZANEZOOQ[ANE[ANE[OOQ[ANBXANBXO'8{Q`OANBXOOQ[<<MS<<MSO!(vQlOAN?iOOQOG24vG24vO$?aQ!0MxOG24vO#']Q`OLD,nOOQ[LD,nLD,nO!&fQMhOLD,nO'9QQ!fOLD,nO'9XQ?MvO7+'xO':}Q?MvO,5?]O'=QQ?MvO,5?_O'?TQ?MvO7+'zO'@yQMjOG27QOOQO<<My<<MyOOQ!0LbANAZANAZO$)QQ`OANAZOCcQ`OANAZO'AZQ!dOANAZOOQ!0LbANAXANAXO'AbQ`OANAZO!&fQMhOANAZO'AmQ!dOANAZOOQ!0LbANAYANAYOOQO<<NY<<NYOOQ[LD-ZLD-ZO'AwQ?MtO7+*jOOQO'#Gd'#GdOOQ[G27iG27iO&9yQ`OG27iO!&fQMhOG27iOOQ[G27kG27kO9hQ!0LrOG27kOOQ[G27sG27sO'BRQ?MtOG25TOOQOLD*bLD*bOOQ[!$(!Y!$(!YO#']Q`O!$(!YO!&fQMhO!$(!YO'B]Q!0MzOG27QOOQ!0LbG26uG26uO$)QQ`OG26uO'DnQ`OG26uOCcQ`OG26uO'DyQ!dOG26uO!&fQMhOG26uOOQ[LD-TLD-TO&9yQ`OLD-TOOQ[LD-VLD-VOOQ[!)9Et!)9EtO#']Q`O!)9EtOOQ!0LbLD,aLD,aO$)QQ`OLD,aOCcQ`OLD,aO'EQQ`OLD,aO'E]Q!dOLD,aOOQ[!$(!o!$(!oOOQ[!.K;`!.K;`O'EdQ?MvOG27QOOQ!0Lb!$( {!$( {O$)QQ`O!$( {OCcQ`O!$( {O'GYQ`O!$( {OOQ!0Lb!)9Eg!)9EgO$)QQ`O!)9EgOCcQ`O!)9EgOOQ!0Lb!.K;R!.K;RO$)QQ`O!.K;ROOQ!0Lb!4/0m!4/0mO!(vQlO'#DwO1PQ`O'#EUO'GeQ!fO'#JnO'GlQ!L^O'#DsO'GsQlO'#D{O'GzQ!fO'#CiO'JbQ!fO'#CiO!(vQlO'#D}O'JrQlO,5;WO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO,5;bO!(vQlO'#IlO'LuQ`O,5<gO!(vQlO,5;bO'L}QMhO,5;bO'NhQMhO,5;bO!(vQlO,5;vO!&fQMhO'#GjO'L}QMhO'#GjO!&fQMhO'#GlO'L}QMhO'#GlO1SQ`O'#DWO1SQ`O'#DWO!&fQMhO'#F}O'L}QMhO'#F}O!&fQMhO'#GPO'L}QMhO'#GPO!&fQMhO'#G_O'L}QMhO'#G_O!(vQlO,5:gO'NoQpO'#D[O'NyQpO'#JrO!(vQlO,5@kO'JrQlO1G0rO( TQ?MtO'#CiO!(vQlO1G2OO!&fQMhO'#IqO'L}QMhO'#IqO!&fQMhO'#IsO'L}QMhO'#IsO( _Q!dO'#CrO!&fQMhO,5<rO'L}QMhO,5<rO'JrQlO1G2PO!(vQlO7+&yO!&fQMhO1G2^O'L}QMhO1G2^O!&fQMhO'#IqO'L}QMhO'#IqO!&fQMhO'#IsO'L}QMhO'#IsO!&fQMhO1G2`O'L}QMhO1G2`O'JrQlO7+'kO'JrQlO7+&^O!&fQMhOANAfO'L}QMhOANAfO( rQ`O'#ElO( wQ`O'#ElO(!PQ`O'#F[O(!UQ`O'#EvO(!ZQ`O'#KPO(!fQ`O'#J}O(!qQ`O,5;WO(!vQMjO,5<dO(!}Q`O'#GWO(#SQ`O'#GWO(#XQ`O,5<eO(#aQ`O,5;WO(#iQ?MtO1G1_O(#pQ`O,5<rO(#uQ`O,5<rO(#zQ`O,5<tO($PQ`O,5<tO($UQ`O1G2PO($ZQ`O1G0rO($`QMjO<<KzO($gQMjO<<KzO7eQMhO'#FzO9RQ`O'#FyOAaQ`O'#EkO!(vQlO,5;sO!3ZQ`O'#GWO!3ZQ`O'#GWO!3ZQ`O'#GYO!3ZQ`O'#GYO!+oQMhO7+(`O!+oQMhO7+(`O%,oQ!dO1G2tO%,oQ!dO1G2tO!&fQMhO,5=YO!&fQMhO,5=Y",stateData:"(%k~O'xOS'yOSTOS'zRQ~OPYOQYOSfOY!VOaqOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!rwO!uxO!y]O#t!PO$V|O%e}O%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO&S!WO&Y!XO&[!YO&^!ZO&`![O&c!]O&i!^O&o!_O&q!`O&s!aO&u!bO&w!cO(PSO(RTO(UUO(]VO(k[O(ziO~OWtO~P`OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(P!dO(RTO(UUO(]VO(k[O(ziO~Oa!wOp!nO!P!oO!_!yO!`!vO!a!vO!y;kO#Q!pO#R!pO#S!xO#T!pO#U!pO#X!zO#Y!zO(Q!lO(RTO(UUO(a!mO(k!sO~O'z!{O~OP]XR]X[]Xa]Xo]X}]X!P]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X'v]X(]]X(n]X(u]X(v]X~O!d%PX~P(qO_!}O(R#PO(S!}O(T#PO~O_#QO(T#PO(U#PO(V#QO~Ou#SO!R#TO(^#TO(_#VO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(P;oO(RTO(UUO(]VO(k[O(ziO~O!X#ZO!Y#WO!V(dP!V(rP~P+}O!Z#cO~P`OPYOQYOSfOd!jOe!iOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(RTO(UUO(]VO(k[O(ziO~Om#mO!X#iO!y]O#f#lO#g#iO(P;pO!h(oP~P.iO!i#oO(P#nO~O!u#sO!y]O%e#tO~O#h#uO~O!d#vO#h#uO~OP$[OR#zO[$cOo$aO}#yO!P#{O!Y$_O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO(]VO(n$YO(u#|O(v#}O~Oa(bX'v(bX's(bX!h(bX!V(bX![(bX%f(bX!d(bX~P1qO#P$dO#]$eO$P$eOP(cXR(cX[(cXo(cX}(cX!P(cX!Y(cX!i(cX!m(cX#O(cX#k(cX#l(cX#m(cX#n(cX#o(cX#p(cX#q(cX#r(cX#s(cX#u(cX#w(cX#y(cX#z(cX(](cX(n(cX(u(cX(v(cX![(cX%f(cX~Oa(cX'v(cX's(cX!V(cX!h(cXs(cX!d(cX~P4UO#]$eO~O$[$hO$^$gO$e$mO~OSfO![$nO$h$oO$j$qO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{%[O!P${O![$|O!f%aO!i$xO#g%bO$V%_O$r%]O$t%^O$w%`O(P$sO(RTO(UUO(]$uO(u$}O(v%POg(YP~O!i%cO~O!P%fO![%gO(P%eO~O!d%kO~Oa%lO'v%lO~O}%pO~P%[O(Q!lO~P%[O%k%tO~P%[Oh%VO!i%cO(P%eO(Q!lO~Oe%{O!i%cO(P%eO~O#s$RO~O}&QO![%}O!i&PO%g&TO(P%eO(Q!lO(RTO(UUO`)TP~O!u#sO~O%p&VO!P)PX![)PX(P)PX~O(P&WO~O!r&]O#t!PO%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO~Od&bOe&aO!u&_O%e&`O%x&^O~P;|Od&eOeyO![&dO!r&]O!uxO!y]O#t!PO%e}O%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO~Ob&hO#]&kO%g&fO(Q!lO~P=RO!i&lO!r&pO~O!i#oO~O![XO~Oa%lO't&xO'v%lO~Oa%lO't&{O'v%lO~Oa%lO't&}O'v%lO~O's]X!V]Xs]X!h]X&W]X![]X%f]X!d]X~P(qO!_'[O!`'TO!a'TO(Q!lO(RTO(UUO~Op'RO!P'QO!X'UO(a'PO!Z(eP!Z(tP~P@YOk'_O![']O(P%eO~Oe'dO!i%cO(P%eO~O}&QO!i&PO~Op!nO!P!oO!y;kO#Q!pO#R!pO#T!pO#U!pO(Q!lO(RTO(UUO(a!mO(k!sO~O!_'jO!`'iO!a'iO#S!pO#X'kO#Y'kO~PAtOa%lOh%VO!d#vO!i%cO'v%lO(n'mO~O!m'qO#]'oO~PCSOp!nO!P!oO(RTO(UUO(a!mO(k!sO~O![XOp(iX!P(iX!_(iX!`(iX!a(iX!y(iX#Q(iX#R(iX#S(iX#T(iX#U(iX#X(iX#Y(iX(Q(iX(R(iX(U(iX(a(iX(k(iX~O!`'iO!a'iO(Q!lO~PCrO'{'uO'|'uO'}'wO~O_!}O(R'yO(S!}O(T'yO~O_#QO(T'yO(U'yO(V#QO~Os'{O~P%[Ou#SO!R#TO(^#TO(_(OO~O!X(QO!V'SX!V'YX!Y'SX!Y'YX~P+}O!Y(SO!V(dX~OP$[OR#zO[$cOo$aO}#yO!P#{O!Y(SO!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO(]VO(n$YO(u#|O(v#}O~O!V(dX~PGmO!V(XO~O!V(qX!Y(qX!d(qX!h(qX(n(qX~O#](qX#h#aX!Z(qX~PIpO#](YO!V(sX!Y(sX~O!Y(ZO!V(rX~O!V(^O~O#]$eO~PIpO!Z(_O~P`OR#zO}#yO!P#{O!i#xO(]VOP!ka[!kao!ka!Y!ka!m!ka#O!ka#k!ka#l!ka#m!ka#n!ka#o!ka#p!ka#q!ka#r!ka#s!ka#u!ka#w!ka#y!ka#z!ka(n!ka(u!ka(v!ka~Oa!ka'v!ka's!ka!V!ka!h!kas!ka![!ka%f!ka!d!ka~PKWO!h(`O~O!d#vO#](aO(n'mO!Y(pXa(pX'v(pX~O!h(pX~PMsO!P%fO![%gO!y]O#f(fO#g(eO(P%eO~O!Y(gO!h(oX~O!h(iO~O!P%fO![%gO#g(eO(P%eO~OP(cXR(cX[(cXo(cX}(cX!P(cX!Y(cX!i(cX!m(cX#O(cX#k(cX#l(cX#m(cX#n(cX#o(cX#p(cX#q(cX#r(cX#s(cX#u(cX#w(cX#y(cX#z(cX(](cX(n(cX(u(cX(v(cX~O!d#vO!h(cX~P! aOR(kO}(jO!i#xO#P$dO!y!xa!P!xa~O!u!xa%e!xa![!xa#f!xa#g!xa(P!xa~P!#bO!u(oO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(P!dO(RTO(UUO(]VO(k[O(ziO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{<XO!P${O![$|O!f=jO!i$xO#g<_O$V%_O$r<ZO$t<]O$w%`O(P(sO(RTO(UUO(]$uO(u$}O(v%PO~O#h(uO~O!X(wO!h(gP~P%[O(a(yO(k[O~O!P({O!i#xO(a(yO(k[O~OP;jOQ;jOSfOd=fOe!iOmkOo;jOpkOqkOwkOy;jO{;jO!PWO!TkO!UkO![!eO!f;mO!iZO!l;jO!m;jO!n;jO!p;nO!r;qO!u!hO$V!kO(P)YO(RTO(UUO(]VO(k[O(z=dO~O!Y$_Oa$oa'v$oa's$oa!h$oa!V$oa![$oa%f$oa!d$oa~O#t)aO~P!&fOh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{%[O!P${O![$|O!f%aO!i$xO#g%bO$V%_O$r%]O$t%^O$w%`O(P(sO(RTO(UUO(]$uO(u$}O(v%PO~Og(lP~P!+oO})fO!d)eO![$]X$Y$]X$[$]X$^$]X$e$]X~O!d)eO![(wX$Y(wX$[(wX$^(wX$e(wX~O})fO~P!-xO})fO![(wX$Y(wX$[(wX$^(wX$e(wX~O![)hO$Y)lO$[)gO$^)gO$e)mO~O!X)pO~P!(vO$[$hO$^$gO$e)tO~Ok$xX}$xX#P$xX'u$xX(u$xX(v$xX~OgjXg$xXkjX!YjX#]jX~P!/nOu)vO(^)wO(_)yO~Ok*SO}){O'u)|O(u$}O(v%PO~Og)zO~P!0rOg*TO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{<XO!P*VO![*WO!f=jO!i$xO#g<_O$V%_O$r<ZO$t<]O$w%`O(RTO(UUO(]$uO(u$}O(v%PO~O!X*ZO(P*UO!h({P~P!1aO#h*]O~O!i*^O~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{<XO!P${O![$|O!f=jO!i$xO#g<_O$V%_O$r<ZO$t<]O$w%`O(P*`O(RTO(UUO(]$uO(u$}O(v%PO~O!X*cO!V(|P~P!3`Oo*oOp!nO!P*eO!_*mO!`*gO!a*gO!i*^O#X*nO%]*iO(Q!lO(RTO(UUO(a!mO~O!Z*lO~P!5TO#P$dOk([X}([X'u([X(u([X(v([X!Y([X#]([X~Og([X#}([X~P!6VOk*tO#]*sOg(ZX!Y(ZX~O!Y*uOg(YX~O(P&WOg(YP~Op*xO~O!i*}O~O(P(sO~Om+RO!P%fO!X#iO![%gO!y]O#f#lO#g#iO(P%eO!h(oP~O!d#vO#h+SO~O!P%fO!X+UO!Y(ZO![%gO(P%eO!V(rP~Op'XO!P+WO!X+VO(RTO(UUO(a(yO~O!Z(tP~P!9VO!Y+XOa)QX'v)QX~OP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO(]VO(n$YO(u#|O(v#}O~Oa!ga!Y!ga'v!ga's!ga!V!ga!h!gas!ga![!ga%f!ga!d!ga~P!9}OR#zO}#yO!P#{O!i#xO(]VOP!oa[!oao!oa!Y!oa!m!oa#O!oa#k!oa#l!oa#m!oa#n!oa#o!oa#p!oa#q!oa#r!oa#s!oa#u!oa#w!oa#y!oa#z!oa(n!oa(u!oa(v!oa~Oa!oa'v!oa's!oa!V!oa!h!oas!oa![!oa%f!oa!d!oa~P!<eOR#zO}#yO!P#{O!i#xO(]VOP!qa[!qao!qa!Y!qa!m!qa#O!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#q!qa#r!qa#s!qa#u!qa#w!qa#y!qa#z!qa(n!qa(u!qa(v!qa~Oa!qa'v!qa's!qa!V!qa!h!qas!qa![!qa%f!qa!d!qa~P!>{Oh%VOk+bO![']O%f+aO~O!d+dOa(XX![(XX'v(XX!Y(XX~Oa%lO![XO'v%lO~Oh%VO!i%cO~Oh%VO!i%cO(P%eO~O!d#vO#h(uO~Ob+oO%g+pO(P+lO(RTO(UUO!Z)UP~O!Y+qO`)TX~O[+uO~O`+vO~O![%}O(P%eO(Q!lO`)TP~Oh%VO#]+{O~Oh%VOk,OO![$|O~O![,QO~O},SO![XO~O%k%tO~O!u,XO~Oe,^O~Ob,_O(P#nO(RTO(UUO!Z)SP~Oe%{O~O%g!QO(P&WO~P=RO[,dO`,cO~OPYOQYOSfOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO!fuO!iZO!lYO!mYO!nYO!pvO!uxO!y]O%e}O(RTO(UUO(]VO(k[O(ziO~O![!eO!r!gO$V!kO(P!dO~P!E{O`,cOa%lO'v%lO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!u!hO$V!kO(P!dO(RTO(UUO(]VO(k[O(ziO~Oa,iO!rwO#t!OO%i!OO%j!OO%k!OO~P!HeO!i&lO~O&Y,oO~O![,qO~O&k,sO&m,tOP&haQ&haS&haY&haa&had&hae&ham&hao&hap&haq&haw&hay&ha{&ha!P&ha!T&ha!U&ha![&ha!f&ha!i&ha!l&ha!m&ha!n&ha!p&ha!r&ha!u&ha!y&ha#t&ha$V&ha%e&ha%g&ha%i&ha%j&ha%k&ha%n&ha%p&ha%s&ha%t&ha%v&ha&S&ha&Y&ha&[&ha&^&ha&`&ha&c&ha&i&ha&o&ha&q&ha&s&ha&u&ha&w&ha's&ha(P&ha(R&ha(U&ha(]&ha(k&ha(z&ha!Z&ha&a&hab&ha&f&ha~O(P,yO~Oh!bX!Y!OX!Z!OX!d!OX!d!bX!i!bX#]!OX~O!Y!bX!Z!bX~P# kO!d-OO#],}Oh(fX!Y#eX!Z#eX!d(fX!i(fX~O!Y(fX!Z(fX~P#!^Oh%VO!d-QO!i%cO!Y!^X!Z!^X~Op!nO!P!oO(RTO(UUO(a!mO~OP;jOQ;jOSfOd=fOe!iOmkOo;jOpkOqkOwkOy;jO{;jO!PWO!TkO!UkO![!eO!f;mO!iZO!l;jO!m;jO!n;jO!p;nO!r;qO!u!hO$V!kO(RTO(UUO(]VO(k[O(z=dO~O(P<fO~P##sO!Y-UO!Z(eX~O!Z-WO~O!d-OO#],}O!Y#eX!Z#eX~O!Y-XO!Z(tX~O!Z-ZO~O!`-[O!a-[O(Q!lO~P##bO!Z-_O~P'_Ok-bO![']O~O!V-gO~Op!xa!_!xa!`!xa!a!xa#Q!xa#R!xa#S!xa#T!xa#U!xa#X!xa#Y!xa(Q!xa(R!xa(U!xa(a!xa(k!xa~P!#bO!m-lO#]-jO~PCSO!`-nO!a-nO(Q!lO~PCrOa%lO#]-jO'v%lO~Oa%lO!d#vO#]-jO'v%lO~Oa%lO!d#vO!m-lO#]-jO'v%lO(n'mO~O'{'uO'|'uO'}-sO~Os-tO~O!V'Sa!Y'Sa~P!9}O!X-xO!V'SX!Y'SX~P%[O!Y(SO!V(da~O!V(da~PGmO!Y(ZO!V(ra~O!P%fO!X-|O![%gO(P%eO!V'YX!Y'YX~O#].OO!Y(pa!h(paa(pa'v(pa~O!d#vO~P#+yO!Y(gO!h(oa~O!P%fO![%gO#g.SO(P%eO~Om.XO!P%fO!X.UO![%gO!y]O#f.WO#g.UO(P%eO!Y']X!h']X~OR.]O!i#xO~Oh%VOk.`O![']O%f._O~Oa#`i!Y#`i'v#`i's#`i!V#`i!h#`is#`i![#`i%f#`i!d#`i~P!9}Ok=pO}){O'u)|O(u$}O(v%PO~O#h#[aa#[a#]#[a'v#[a!Y#[a!h#[a![#[a!V#[a~P#.uO#h([XP([XR([X[([Xa([Xo([X!P([X!i([X!m([X#O([X#k([X#l([X#m([X#n([X#o([X#p([X#q([X#r([X#s([X#u([X#w([X#y([X#z([X'v([X(]([X(n([X!h([X!V([X's([Xs([X![([X%f([X!d([X~P!6VO!Y.mO!h(gX~P!9}O!h.pO~O!V.rO~OP$[OR#zO}#yO!P#{O!i#xO!m$[O(]VO[#jia#jio#ji!Y#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'v#ji(n#ji(u#ji(v#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#k#ji~P#2eO#k$OO~P#2eOP$[OR#zOo$aO}#yO!P#{O!i#xO!m$[O#k$OO#l$PO#m$PO#n$PO(]VO[#jia#ji!Y#ji#O#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'v#ji(n#ji(u#ji(v#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#o#ji~P#5SO#o$QO~P#5SOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO(]VOa#ji!Y#ji#w#ji#y#ji#z#ji'v#ji(n#ji(u#ji(v#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#u#ji~P#7qOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO(]VO(v#}Oa#ji!Y#ji#y#ji#z#ji'v#ji(n#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#w$UO~P#:XO#w#ji~P#:XO#u$SO~P#7qOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO(]VO(u#|O(v#}Oa#ji!Y#ji#z#ji'v#ji(n#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#y#ji~P#<}O#y$WO~P#<}OP]XR]X[]Xo]X}]X!P]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X(]]X(n]X(u]X(v]X!Y]X!Z]X~O#}]X~P#?lOP$[OR#zO[<ROo<PO}#yO!P#{O!i#xO!m$[O#O;vO#k;sO#l;tO#m;tO#n;tO#o;uO#p;vO#q;vO#r<QO#s;vO#u;wO#w;yO#y;{O#z;|O(]VO(n$YO(u#|O(v#}O~O#}.tO~P#AyO#P$dO#]<SO$P<SO#}(cX!Z(cX~P! aOa'`a!Y'`a'v'`a's'`a!h'`a!V'`as'`a!['`a%f'`a!d'`a~P!9}O[#jia#jio#ji!Y#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'v#ji(n#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~OP$[OR#zO}#yO!P#{O!i#xO!m$[O#k$OO#l$PO#m$PO#n$PO(]VO(u#ji(v#ji~P#D{Ok=pO}){O'u)|O(u$}O(v%POP#jiR#ji!P#ji!i#ji!m#ji#k#ji#l#ji#m#ji#n#ji(]#ji~P#D{O!Y.xOg(lX~P!0rOg.zO~Oa$Oi!Y$Oi'v$Oi's$Oi!V$Oi!h$Ois$Oi![$Oi%f$Oi!d$Oi~P!9}O$[.{O$^.{O~O$[.|O$^.|O~O!d)eO#].}O![$bX$Y$bX$[$bX$^$bX$e$bX~O!X/OO~O![)hO$Y/QO$[)gO$^)gO$e/RO~O!Y;}O!Z(bX~P#AyO!Z/SO~O!d)eO$e(wX~O$e/UO~Os/VO~P!&fOu)vO(^)wO(_/YO~O!P/]O~O(u$}Ok%^a}%^a'u%^a(v%^a!Y%^a#]%^a~Og%^a#}%^a~P#K}O(v%POk%`a}%`a'u%`a(u%`a!Y%`a#]%`a~Og%`a#}%`a~P#LpO!YfX!dfX!hfX!h$xX(nfX~P!/nO!X/fO!Y(ZO(P/eO!V(rP!V(|P~P!1aOo*oO!_*mO!`*gO!a*gO!i*^O#X*nO%]*iO(Q!lO(RTO(UUO~Op<cO!P/gO!X+VO!Z*lO(a<bO!Z(tP~P#NZO!h/hO~P#.uO!Y/iO!d#vO(n'mO!h({X~O!h/nO~O!P%fO!X*ZO![%gO(P%eO!h({P~O#h/pO~O!V$xX!Y$xX!d%PX~P!/nO!Y/qO!V(|X~P#.uO!d/sO~O!V/uO~OmkO(P/vO~P.iOh%VOo/{O!d#vO!i%cO(n'mO~O!d+dO~Oa%lO!Y0PO'v%lO~O!Z0RO~P!5TO!`0SO!a0SO(Q!lO~P##bOp!nO!P0TO(RTO(UUO(a!mO~O#X0VO~Og%^a!Y%^a#]%^a#}%^a~P!0rOg%`a!Y%`a#]%`a#}%`a~P!0rO(P&WOg'iX!Y'iX~O!Y*uOg(Ya~Og0`O~OR0aO}0aO!P0bO#P$dOkza'uza(uza(vza!Yza#]za~Ogza#}za~P$&ZO}){O'u)|Ok$qa(u$qa(v$qa!Y$qa#]$qa~Og$qa#}$qa~P$'VO}){O'u)|Ok$sa(u$sa(v$sa!Y$sa#]$sa~Og$sa#}$sa~P$'xO#h0eO~Og%Ra!Y%Ra#]%Ra#}%Ra~P!0rO!d#vO~O#h0hO~O!Y+XOa)Qa'v)Qa~OR#zO}#yO!P#{O!i#xO(]VOP!oi[!oio!oi!Y!oi!m!oi#O!oi#k!oi#l!oi#m!oi#n!oi#o!oi#p!oi#q!oi#r!oi#s!oi#u!oi#w!oi#y!oi#z!oi(n!oi(u!oi(v!oi~Oa!oi'v!oi's!oi!V!oi!h!ois!oi![!oi%f!oi!d!oi~P$)gOh%VOo%XOp$tOq$tOw%YOy%ZO{<XO!P${O![$|O!f=jO!i$xO#g<_O$V%_O$r<ZO$t<]O$w%`O(RTO(UUO(]$uO(u$}O(v%PO~Om0qO(P0pO~P$+}O!d+dOa(Xa![(Xa'v(Xa!Y(Xa~O#h0wO~O[]X!YfX!ZfX~O!Y0xO!Z)UX~O!Z0zO~O[0{O~Ob0}O(P+lO(RTO(UUO~O![%}O(P%eO`'qX!Y'qX~O!Y+qO`)Ta~O!h1QO~P!9}O[1TO~O`1UO~O#]1XO~Ok1[O![$|O~O(a(yO!Z)RP~Oh%VOk1eO![1bO%f1dO~O[1oO!Y1mO!Z)SX~O!Z1pO~O`1rOa%lO'v%lO~O(P#nO(RTO(UUO~O#P$dO#]$eO$P$eOP(cXR(cX[(cXo(cX}(cX!P(cX!Y(cX!i(cX!m(cX#O(cX#k(cX#l(cX#m(cX#n(cX#o(cX#p(cX#q(cX#r(cX#u(cX#w(cX#y(cX#z(cX(](cX(n(cX(u(cX(v(cX~O#s1uO&W1vOa(cX~P$1eO#]$eO#s1uO&W1vO~Oa1xO~P%[Oa1zO~O&a1}OP&_iQ&_iS&_iY&_ia&_id&_ie&_im&_io&_ip&_iq&_iw&_iy&_i{&_i!P&_i!T&_i!U&_i![&_i!f&_i!i&_i!l&_i!m&_i!n&_i!p&_i!r&_i!u&_i!y&_i#t&_i$V&_i%e&_i%g&_i%i&_i%j&_i%k&_i%n&_i%p&_i%s&_i%t&_i%v&_i&S&_i&Y&_i&[&_i&^&_i&`&_i&c&_i&i&_i&o&_i&q&_i&s&_i&u&_i&w&_i's&_i(P&_i(R&_i(U&_i(]&_i(k&_i(z&_i!Z&_ib&_i&f&_i~Ob2TO!Z2RO&f2SO~P`O![XO!i2VO~O&m,tOP&hiQ&hiS&hiY&hia&hid&hie&him&hio&hip&hiq&hiw&hiy&hi{&hi!P&hi!T&hi!U&hi![&hi!f&hi!i&hi!l&hi!m&hi!n&hi!p&hi!r&hi!u&hi!y&hi#t&hi$V&hi%e&hi%g&hi%i&hi%j&hi%k&hi%n&hi%p&hi%s&hi%t&hi%v&hi&S&hi&Y&hi&[&hi&^&hi&`&hi&c&hi&i&hi&o&hi&q&hi&s&hi&u&hi&w&hi's&hi(P&hi(R&hi(U&hi(]&hi(k&hi(z&hi!Z&hi&a&hib&hi&f&hi~O!V2]O~O!Y!^a!Z!^a~P#AyOp!nO!P!oO!X2cO(a!mO!Y'TX!Z'TX~P@YO!Y-UO!Z(ea~O!Y'ZX!Z'ZX~P!9VO!Y-XO!Z(ta~O!Z2jO~P'_Oa%lO#]2sO'v%lO~Oa%lO!d#vO#]2sO'v%lO~Oa%lO!d#vO!m2wO#]2sO'v%lO(n'mO~Oa%lO'v%lO~P!9}O!Y$_Os$oa~O!V'Si!Y'Si~P!9}O!Y(SO!V(di~O!Y(ZO!V(ri~O!V(si!Y(si~P!9}O!Y(pi!h(pia(pi'v(pi~P!9}O#]2yO!Y(pi!h(pia(pi'v(pi~O!Y(gO!h(oi~O!P%fO![%gO!y]O#f3OO#g2}O(P%eO~O!P%fO![%gO#g2}O(P%eO~Ok3VO![']O%f3UO~Oh%VOk3VO![']O%f3UO~O#h%^aP%^aR%^a[%^aa%^ao%^a!P%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'v%^a(]%^a(n%^a!h%^a!V%^a's%^as%^a![%^a%f%^a!d%^a~P#K}O#h%`aP%`aR%`a[%`aa%`ao%`a!P%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'v%`a(]%`a(n%`a!h%`a!V%`a's%`as%`a![%`a%f%`a!d%`a~P#LpO#h%^aP%^aR%^a[%^aa%^ao%^a!P%^a!Y%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'v%^a(]%^a(n%^a!h%^a!V%^a's%^a#]%^as%^a![%^a%f%^a!d%^a~P#.uO#h%`aP%`aR%`a[%`aa%`ao%`a!P%`a!Y%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'v%`a(]%`a(n%`a!h%`a!V%`a's%`a#]%`as%`a![%`a%f%`a!d%`a~P#.uO#hzaPza[zaazaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza'vza(]za(nza!hza!Vza'szasza![za%fza!dza~P$&ZO#h$qaP$qaR$qa[$qaa$qao$qa!P$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa'v$qa(]$qa(n$qa!h$qa!V$qa's$qas$qa![$qa%f$qa!d$qa~P$'VO#h$saP$saR$sa[$saa$sao$sa!P$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa'v$sa(]$sa(n$sa!h$sa!V$sa's$sas$sa![$sa%f$sa!d$sa~P$'xO#h%RaP%RaR%Ra[%Raa%Rao%Ra!P%Ra!Y%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra'v%Ra(]%Ra(n%Ra!h%Ra!V%Ra's%Ra#]%Ras%Ra![%Ra%f%Ra!d%Ra~P#.uOa#`q!Y#`q'v#`q's#`q!V#`q!h#`qs#`q![#`q%f#`q!d#`q~P!9}O!X3_O!Y'UX!h'UX~P%[O!Y.mO!h(ga~O!Y.mO!h(ga~P!9}O!V3bO~O#}!ka!Z!ka~PKWO#}!ga!Y!ga!Z!ga~P#AyO#}!oa!Z!oa~P!<eO#}!qa!Z!qa~P!>{Og'XX!Y'XX~P!+oO!Y.xOg(la~OSfO![3vO$c3wO~O!Z3{O~Os3|O~P#.uOa$lq!Y$lq'v$lq's$lq!V$lq!h$lqs$lq![$lq%f$lq!d$lq~P!9}O!V4OO~P!&fO!P4PO~O}){O'u)|O(v%POk'ea(u'ea!Y'ea#]'ea~Og'ea#}'ea~P%+ZO}){O'u)|Ok'ga(u'ga(v'ga!Y'ga#]'ga~Og'ga#}'ga~P%+|O(n$YO~P#.uO!VfX!V$xX!YfX!Y$xX!d%PX#]fX~P!/nO(P<lO~P!1aO!P%fO!X4SO![%gO(P%eO!Y'aX!h'aX~O!Y/iO!h({a~O!Y/iO!d#vO!h({a~O!Y/iO!d#vO(n'mO!h({a~Og$zi!Y$zi#]$zi#}$zi~P!0rO!X4[O!V'cX!Y'cX~P!3`O!Y/qO!V(|a~O!Y/qO!V(|a~P#.uOP]XR]X[]Xo]X}]X!P]X!V]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X(]]X(n]X(u]X(v]X~O!d%WX#s%WX~P%/mO!d#vO#s4aO~Oh%VO!d#vO!i%cO~Oh%VOo4fO!i%cO(n'mO~Oo4kO!d#vO(n'mO~Op!nO!P4lO(RTO(UUO(a!mO~O(u$}Ok%^i}%^i'u%^i(v%^i!Y%^i#]%^i~Og%^i#}%^i~P%3^O(v%POk%`i}%`i'u%`i(u%`i!Y%`i#]%`i~Og%`i#}%`i~P%4POg(Zi!Y(Zi~P!0rO#]4rOg(Zi!Y(Zi~P!0rO!h4uO~Oa$mq!Y$mq'v$mq's$mq!V$mq!h$mqs$mq![$mq%f$mq!d$mq~P!9}O!V4yO~O!Y4zO![(}X~P#.uOa$xX![$xX%Z]X'v$xX!Y$xX~P!/nO%Z4}OalXklX}lX![lX'ulX'vlX(ulX(vlX!YlX~O%Z4}O~Ob5TO%g5UO(P+lO(RTO(UUO!Y'pX!Z'pX~O!Y0xO!Z)Ua~O[5YO~O`5ZO~Oa%lO'v%lO~P#.uO!Y5cO#]5eO!Z)RX~O!Z5fO~Oo5lOp!nO!P*eO!_!yO!`!vO!a!vO!y;kO#Q!pO#R!pO#S!pO#T!pO#U!pO#X5kO#Y!zO(Q!lO(RTO(UUO(a!mO(k!sO~O!Z5jO~P%9SOk5qO![1bO%f5pO~Oh%VOk5qO![1bO%f5pO~Ob5xO(P#nO(RTO(UUO!Y'oX!Z'oX~O!Y1mO!Z)Sa~O(RTO(UUO(a5zO~O`6OO~O#s6RO&W6SO~PMsO!h6TO~P%[Oa6VO~Oa6VO~P%[Ob2TO!Z6[O&f2SO~P`O!d6^O~O!d6`Oh(fi!Y(fi!Z(fi!d(fi!i(fio(fi(n(fi~O!Y#ei!Z#ei~P#AyO#]6aO!Y#ei!Z#ei~O!Y!^i!Z!^i~P#AyOa%lO#]6jO'v%lO~Oa%lO!d#vO#]6jO'v%lO~O!Y(pq!h(pqa(pq'v(pq~P!9}O!Y(gO!h(oq~O!P%fO![%gO#g6qO(P%eO~O![']O%f6tO~Ok6xO![']O%f6tO~O#h'eaP'eaR'ea['eaa'eao'ea!P'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea'v'ea(]'ea(n'ea!h'ea!V'ea's'eas'ea!['ea%f'ea!d'ea~P%+ZO#h'gaP'gaR'ga['gaa'gao'ga!P'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga'v'ga(]'ga(n'ga!h'ga!V'ga's'gas'ga!['ga%f'ga!d'ga~P%+|O#h$ziP$ziR$zi[$zia$zio$zi!P$zi!Y$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi'v$zi(]$zi(n$zi!h$zi!V$zi's$zi#]$zis$zi![$zi%f$zi!d$zi~P#.uO#h%^iP%^iR%^i[%^ia%^io%^i!P%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i'v%^i(]%^i(n%^i!h%^i!V%^i's%^is%^i![%^i%f%^i!d%^i~P%3^O#h%`iP%`iR%`i[%`ia%`io%`i!P%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i'v%`i(]%`i(n%`i!h%`i!V%`i's%`is%`i![%`i%f%`i!d%`i~P%4PO!Y'Ua!h'Ua~P!9}O!Y.mO!h(gi~O#}#`i!Y#`i!Z#`i~P#AyOP$[OR#zO}#yO!P#{O!i#xO!m$[O(]VO[#jio#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(n#ji(u#ji(v#ji!Y#ji!Z#ji~O#k#ji~P%LRO#k;sO~P%LROP$[OR#zOo<PO}#yO!P#{O!i#xO!m$[O#k;sO#l;tO#m;tO#n;tO(]VO[#ji#O#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(n#ji(u#ji(v#ji!Y#ji!Z#ji~O#o#ji~P%NZO#o;uO~P%NZOP$[OR#zO[<ROo<PO}#yO!P#{O!i#xO!m$[O#O;vO#k;sO#l;tO#m;tO#n;tO#o;uO#p;vO#q;vO#r<QO#s;vO(]VO#w#ji#y#ji#z#ji#}#ji(n#ji(u#ji(v#ji!Y#ji!Z#ji~O#u#ji~P&!cOP$[OR#zO[<ROo<PO}#yO!P#{O!i#xO!m$[O#O;vO#k;sO#l;tO#m;tO#n;tO#o;uO#p;vO#q;vO#r<QO#s;vO#u;wO(]VO(v#}O#y#ji#z#ji#}#ji(n#ji(u#ji!Y#ji!Z#ji~O#w;yO~P&$dO#w#ji~P&$dO#u;wO~P&!cOP$[OR#zO[<ROo<PO}#yO!P#{O!i#xO!m$[O#O;vO#k;sO#l;tO#m;tO#n;tO#o;uO#p;vO#q;vO#r<QO#s;vO#u;wO#w;yO(]VO(u#|O(v#}O#z#ji#}#ji(n#ji!Y#ji!Z#ji~O#y#ji~P&&sO#y;{O~P&&sOa#{y!Y#{y'v#{y's#{y!V#{y!h#{ys#{y![#{y%f#{y!d#{y~P!9}O[#jio#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(n#ji!Y#ji!Z#ji~OP$[OR#zO}#yO!P#{O!i#xO!m$[O#k;sO#l;tO#m;tO#n;tO(]VO(u#ji(v#ji~P&)oOk=qO}){O'u)|O(u$}O(v%POP#jiR#ji!P#ji!i#ji!m#ji#k#ji#l#ji#m#ji#n#ji(]#ji~P&)oO#P$dOP([XR([X[([Xk([Xo([X}([X!P([X!i([X!m([X#O([X#k([X#l([X#m([X#n([X#o([X#p([X#q([X#r([X#s([X#u([X#w([X#y([X#z([X#}([X'u([X(]([X(n([X(u([X(v([X!Y([X!Z([X~O#}$Oi!Y$Oi!Z$Oi~P#AyO#}!oi!Z!oi~P$)gOg'Xa!Y'Xa~P!0rO!Z7[O~O!Y'`a!Z'`a~P#AyO!V7]O~P#.uO!d#vO(n'mO!Y'aa!h'aa~O!Y/iO!h({i~O!Y/iO!d#vO!h({i~Og$zq!Y$zq#]$zq#}$zq~P!0rO!V'ca!Y'ca~P#.uO!d7dO~O!Y/qO!V(|i~P#.uO!Y/qO!V(|i~O!V7gO~Oh%VOo7lO!i%cO(n'mO~O!d#vO#s7nO~Oo7qO!d#vO(n'mO~O}){O'u)|O(v%POk'fa(u'fa!Y'fa#]'fa~Og'fa#}'fa~P&2pO}){O'u)|Ok'ha(u'ha(v'ha!Y'ha#]'ha~Og'ha#}'ha~P&3cO!V7sO~Og$|q!Y$|q#]$|q#}$|q~P!0rOa$my!Y$my'v$my's$my!V$my!h$mys$my![$my%f$my!d$my~P!9}O!d6`O~O!Y4zO![(}a~O![']OP$SaR$Sa[$Sao$Sa}$Sa!P$Sa!Y$Sa!i$Sa!m$Sa#O$Sa#k$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#u$Sa#w$Sa#y$Sa#z$Sa(]$Sa(n$Sa(u$Sa(v$Sa~O%f6tO~P&5lOa#`y!Y#`y'v#`y's#`y!V#`y!h#`ys#`y![#`y%f#`y!d#`y~P!9}O[7xO~Ob7zO(P+lO(RTO(UUO~O!Y0xO!Z)Ui~O`8OO~O(a(yO!Y'lX!Z'lX~O!Y5cO!Z)Ra~O!Z8XO~P%9SO(k!sO~P$$iO#X8YO~O![1bO~O![1bO%f8[O~Ok8_O![1bO%f8[O~O[8dO!Y'oa!Z'oa~O!Y1mO!Z)Si~O!h8hO~O!h8iO~O!h8lO~O!h8lO~P%[Oa8nO~O!d8oO~O!h8pO~O!Y(si!Z(si~P#AyOa%lO#]8xO'v%lO~O!Y(py!h(pya(py'v(py~P!9}O!Y(gO!h(oy~O%f8{O~P&5lO![']O%f8{O~O#h$zqP$zqR$zq[$zqa$zqo$zq!P$zq!Y$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq'v$zq(]$zq(n$zq!h$zq!V$zq's$zq#]$zqs$zq![$zq%f$zq!d$zq~P#.uO#h'faP'faR'fa['faa'fao'fa!P'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa'v'fa(]'fa(n'fa!h'fa!V'fa's'fas'fa!['fa%f'fa!d'fa~P&2pO#h'haP'haR'ha['haa'hao'ha!P'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha'v'ha(]'ha(n'ha!h'ha!V'ha's'has'ha!['ha%f'ha!d'ha~P&3cO#h$|qP$|qR$|q[$|qa$|qo$|q!P$|q!Y$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q'v$|q(]$|q(n$|q!h$|q!V$|q's$|q#]$|qs$|q![$|q%f$|q!d$|q~P#.uO!Y'Ui!h'Ui~P!9}O#}#`q!Y#`q!Z#`q~P#AyO(u$}OP%^aR%^a[%^ao%^a!P%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a#}%^a(]%^a(n%^a!Y%^a!Z%^a~Ok%^a}%^a'u%^a(v%^a~P&FnO(v%POP%`aR%`a[%`ao%`a!P%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a#}%`a(]%`a(n%`a!Y%`a!Z%`a~Ok%`a}%`a'u%`a(u%`a~P&HuOk=qO}){O'u)|O(v%PO~P&FnOk=qO}){O'u)|O(u$}O~P&HuOR0aO}0aO!P0bO#P$dOPza[zakzaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza#}za'uza(]za(nza(uza(vza!Yza!Zza~O}){O'u)|OP$qaR$qa[$qak$qao$qa!P$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa#}$qa(]$qa(n$qa(u$qa(v$qa!Y$qa!Z$qa~O}){O'u)|OP$saR$sa[$sak$sao$sa!P$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa#}$sa(]$sa(n$sa(u$sa(v$sa!Y$sa!Z$sa~Ok=qO}){O'u)|O(u$}O(v%PO~OP%RaR%Ra[%Rao%Ra!P%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra#}%Ra(]%Ra(n%Ra!Y%Ra!Z%Ra~P'#zO#}$lq!Y$lq!Z$lq~P#AyO#}$mq!Y$mq!Z$mq~P#AyO!Z9YO~O#}9ZO~P!0rO!d#vO!Y'ai!h'ai~O!d#vO(n'mO!Y'ai!h'ai~O!Y/iO!h({q~O!V'ci!Y'ci~P#.uO!Y/qO!V(|q~Oo9bO!d#vO(n'mO~O[9dO!V9cO~P#.uO!V9cO~O!d#vO#s9jO~Og(Zy!Y(Zy~P!0rO!Y'ja!['ja~P#.uOa%Yq![%Yq'v%Yq!Y%Yq~P#.uO[9mO~O!Y0xO!Z)Uq~O#]9qO!Y'la!Z'la~O!Y5cO!Z)Ri~P#AyO!P9sO~O![1bO%f9vO~O(RTO(UUO(a9{O~O!Y1mO!Z)Sq~O!h:OO~O!h:PO~O!h:QO~O!h:QO~P%[O#]:TO!Y#ey!Z#ey~O!Y#ey!Z#ey~P#AyO%f:YO~P&5lO![']O%f:YO~O#}#{y!Y#{y!Z#{y~P#AyOP$ziR$zi[$zio$zi!P$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi#}$zi(]$zi(n$zi!Y$zi!Z$zi~P'#zO}){O'u)|O(v%POP'eaR'ea['eak'eao'ea!P'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea#}'ea(]'ea(n'ea(u'ea!Y'ea!Z'ea~O}){O'u)|OP'gaR'ga['gak'gao'ga!P'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga#}'ga(]'ga(n'ga(u'ga(v'ga!Y'ga!Z'ga~O(u$}OP%^iR%^i[%^ik%^io%^i}%^i!P%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i#}%^i'u%^i(]%^i(n%^i(v%^i!Y%^i!Z%^i~O(v%POP%`iR%`i[%`ik%`io%`i}%`i!P%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i#}%`i'u%`i(]%`i(n%`i(u%`i!Y%`i!Z%`i~O#}$my!Y$my!Z$my~P#AyO#}#`y!Y#`y!Z#`y~P#AyO!d#vO!Y'aq!h'aq~O!Y/iO!h({y~O!V'cq!Y'cq~P#.uOo:dO!d#vO(n'mO~O[:hO!V:gO~P#.uO!V:gO~O!Y0xO!Z)Uy~O!Y5cO!Z)Rq~O(P:nO~O![1bO%f:qO~O!h:tO~O%f:yO~P&5lOP$zqR$zq[$zqo$zq!P$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq#}$zq(]$zq(n$zq!Y$zq!Z$zq~P'#zO}){O'u)|O(v%POP'faR'fa['fak'fao'fa!P'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa#}'fa(]'fa(n'fa(u'fa!Y'fa!Z'fa~O}){O'u)|OP'haR'ha['hak'hao'ha!P'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha#}'ha(]'ha(n'ha(u'ha(v'ha!Y'ha!Z'ha~OP$|qR$|q[$|qo$|q!P$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q#}$|q(]$|q(n$|q!Y$|q!Z$|q~P'#zOg%b!Z!Y%b!Z#]%b!Z#}%b!Z~P!0rO!V:}O~P#.uOo;OO!d#vO(n'mO~O[;QO!V:}O~P#.uO!Y'lq!Z'lq~P#AyO!Y#e!Z!Z#e!Z~P#AyO#h%b!ZP%b!ZR%b!Z[%b!Za%b!Zo%b!Z!P%b!Z!Y%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z'v%b!Z(]%b!Z(n%b!Z!h%b!Z!V%b!Z's%b!Z#]%b!Zs%b!Z![%b!Z%f%b!Z!d%b!Z~P#.uOo;YO!d#vO(n'mO~O!V;ZO~P#.uOo;bO!d#vO(n'mO~O!V;cO~P#.uOP%b!ZR%b!Z[%b!Zo%b!Z!P%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z#}%b!Z(]%b!Z(n%b!Z!Y%b!Z!Z%b!Z~P'#zOo;fO!d#vO(n'mO~Os(bX~P1qO}%pO~P!(vO(Q!lO~P!(vO!VfX!YfX#]fX~P%/mOP]XR]X[]Xo]X}]X!P]X!Y]X!YfX!i]X!m]X#O]X#P]X#]]X#]fX#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X(]]X(n]X(u]X(v]X~O!dfX!h]X!hfX(nfX~P'HXOP;jOQ;jOSfOd=fOe!iOmkOo;jOpkOqkOwkOy;jO{;jO!PWO!TkO!UkO![XO!f;mO!iZO!l;jO!m;jO!n;jO!p;nO!r;qO!u!hO$V!kO(P)YO(RTO(UUO(]VO(k[O(z=dO~O!Y;}O!Z$oa~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{<YO!P${O![$|O!f=kO!i$xO#g<`O$V%_O$r<[O$t<^O$w%`O(P(sO(RTO(UUO(]$uO(u$}O(v%PO~O#t)aO~P'L}Oo!bX(n!bX~P# kOo(fX(n(fX~P#!^O!Z]X!ZfX~P'HXO!VfX!V$xX!YfX!Y$xX#]fX~P!/nO#h;rO~O!d#vO#h;rO~O#]<SO~O#s;vO~O#]<dO!Y(sX!Z(sX~O#]<SO!Y(qX!Z(qX~O#h<eO~Og<gO~P!0rO#h<mO~O#h<nO~O!d#vO#h<oO~O!d#vO#h<eO~O#}<pO~P#AyO#h<qO~O#h<rO~O#h<wO~O#h<xO~O#h<yO~O#h<zO~O#}<{O~P!0rO#}<|O~P!0rO#P#Q#R#T#U#X#f#g#r(z$r$t$w%Z%e%f%g%n%p%s%t%v%x~'zT#l!U'x(Q#mp#k#no}'y$['y(P$^(a~",goto:"$6w)YPPPPPP)ZPP)^P)oP+P/RPPPP6XPP6oPP<g@VP@jP@jPPP@jPBnP@jP@jP@jPBrPBwPCfPH`PPPHdPPPPHdKgPPPKmL_PHdPHdPPNmHdPPPHdPHdP!!tHdP!&[!'a!'jP!(^!(b!(^!+oPPPPPPP!,`!'aPP!,p!.bP!1nHdHd!1s!5P!9m!9m!=lPPP!=tHdPPPPPPPPPPP!ATP!BbPPHd!CsPHdPHdHdHdHdHdPHd!EVP!HaP!KgP!Kk!Ku!Ky!KyP!H^P!K}!K}P# TP# XHdHd# _#$dBr@jP@jP@j@jP#%q@j@j#(P@j#*s@j#,{@j@j#-k#/{#/{#0Q#0Z#/{#0fP#/{P@j#1O@j#4u@j@j6XPPP#8rPPP#9]#9]P#9]P#9s#9]PP#9yP#9pP#9p#:^#9p#:x#;O#;R)^#;U)^P#;]#;]#;]P)^P)^P)^P)^PP)^P#;c#;fP#;f)^P#;jP#;mP)^P)^P)^P)^P)^P)^)^PP#;s#;y#<U#<[#<b#<h#<n#<|#=S#=^#=d#=n#=t#>U#>[#>|#?`#?f#?l#?z#@a#BQ#B`#Bg#C}#D]#Ey#FX#F_#Fe#Fk#Fu#F{#GR#G]#Go#GuPPPPPPPPPPP#G{PPPPPPP#Hp#Kw#Ma#Mh#MpPPP$%OP$%X$(Q$.k$.n$.q$/p$/s$/z$0SP$0Y$0]P$0y$0}$1u$3T$3Y$3pPP$3u$3{$4PP$4S$4W$4[$5W$5o$6W$6[$6_$6b$6h$6k$6o$6sR!|RoqOXst!Z#d%k&o&q&r&t,l,q1}2QY!vQ']-^1b5iQ%rvQ%zyQ&R|Q&g!VS'T!e-UQ'c!iS'i!r!yU*g$|*W*kQ+j%{Q+w&TQ,]&aQ-['[Q-f'dQ-n'jQ0S*mQ1l,^R<a;n%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(Q(S(Y(a(u(w({)z*e+S+W,i,l,q-b-j-x.O.m.t/g0T0b0h0w1e1u1v1x1z1}2Q2S2s2y3_4l5q6R6S6V6j8_8n8xS#q];k!r)[$Z$n'U)p,}-Q/O2c3v5e6a9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gU*z%[<X<YQ+o%}Q,_&dQ,f&lQ0n+bQ0r+dQ0}+pQ1t,dQ3R.`Q5T0xQ5x1mQ6v3VQ7z5UR9O6x'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(Q(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=g!S!nQ!r!v!y!z$|'T'[']'i'j'k*g*k*m*n-U-[-^-n0S0V1b5i5k%S$ti#v$b$c$d$x${%O%Q%]%^%b)v*O*Q*S*V*]*c*s*t+a+d+{,O._.x/]/f/p/q/s0W0Y0e1X1[1d3U4P4Q4[4a4r4z4}5p6t7d7n8[8{9Z9d9j9v:Y:h:q:y;Q<Q<R<T<U<V<W<Z<[<]<^<_<`<h<i<j<k<m<n<q<r<s<t<u<v<w<x<{<|=d=l=m=p=qQ&U|Q'R!eS'X%g-XQ+o%}Q,_&dQ0d*}Q0}+pQ1S+vQ1s,cQ1t,dQ5T0xQ5^1UQ5x1mQ5{1oQ5|1rQ7z5UQ7}5ZQ8g6OQ9p8OQ9|8dR<c*WrnOXst!V!Z#d%k&f&o&q&r&t,l,q1}2QR,a&h&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=f=g[#]WZ#W#Z'U(Q!b%hm#h#i#l$x%c%f(Z(e(f(g*V*Z*^+U+V+X,h-O-|.S.T.U.W/f/i2V2}3O4S6`6qQ%uxQ%yyS&O|&TQ&[!TQ'`!hQ'b!iQ(n#sS+i%z%{Q+m%}Q,W&_Q,[&aS-e'c'dQ.b(oQ0v+jQ0|+pQ1O+qQ1R+uQ1g,XS1k,],^Q2o-fQ5S0xQ5W0{Q5]1TQ5w1lQ7y5UQ7|5YQ9l7xR:k9m!O$zi$d%O%Q%]%^%b*O*Q*]*s*t.x/p0W0Y0e4Q4r9Z=d=l=m!^%wy!i!u%y%z%{'S'b'c'd'h'r*f+i+j-R-e-f-m/y/|0v2h2o2v4d4e4h7k9fQ+c%uQ+|&XQ,P&YQ,Z&aQ.a(nQ1f,WU1j,[,],^Q3W.bQ5r1gS5v1k1lQ8c5w#d=h#v$b$c$x${)v*S*V*c+a+d+{,O._/]/f/q/s1X1[1d3U4P4[4a4z4}5p6t7d7n8[8{9d9j9v:Y:h:q:y;Q<T<V<Z<]<_<h<j<m<q<s<u<w<{=p=qo=i<Q<R<U<W<[<^<`<i<k<n<r<t<v<x<|W%Ti%V*u=dS&X!Q&fQ&Y!RQ&Z!SR+z&V%T%Si#v$b$c$d$x${%O%Q%]%^%b)v*O*Q*S*V*]*c*s*t+a+d+{,O._.x/]/f/p/q/s0W0Y0e1X1[1d3U4P4Q4[4a4r4z4}5p6t7d7n8[8{9Z9d9j9v:Y:h:q:y;Q<Q<R<T<U<V<W<Z<[<]<^<_<`<h<i<j<k<m<n<q<r<s<t<u<v<w<x<{<|=d=l=m=p=qT)w$u)xV*z%[<X<YW'X!e%g*W-XS(z#y#zQ+^%pQ+t&QS.Z(j(kQ1],QQ4s0aR8S5c'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(Q(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=g$i$^c#Y#e%o%q%s(P(V(q(v)O)P)Q)R)S)T)U)V)W)X)Z)])_)d)n+_+s-S-q-v-{-}.l.o.s.u.v.w/Z0f2^2a2q2x3^3c3d3e3f3g3h3i3j3k3l3m3n3o3r3s3z4w5Q6c6i6n6}7O7X7Y8U8r8v9Q9W9X:V:m:u;l=ZT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(Q(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gQ'V!eR2d-U!W!nQ!e!r!v!y!z$|'T'[']'i'j'k*W*g*k*m*n-U-[-^-n0S0V1b5i5kR1_,SnqOXst!Z#d%k&o&q&r&t,l,q1}2QQ&v!^Q's!xS(p#u;rQ+g%xQ,U&[Q,V&^Q-c'aQ-p'lS.k(u<eS0g+S<oQ0t+hQ1a,TQ2U,sQ2W,tQ2`-PQ2m-dQ2p-hS4x0h<yQ5O0uS5R0w<zQ6b2bQ6f2nQ6k2uQ7w5PQ8s6dQ8t6gQ8w6lR:S8p$d$]c#Y#e%q%s(P(V(q(v)O)P)Q)R)S)T)U)V)W)X)Z)])_)d)n+_+s-S-q-v-{-}.l.o.s.v.w/Z0f2^2a2q2x3^3c3d3e3f3g3h3i3j3k3l3m3n3o3r3s3z4w5Q6c6i6n6}7O7X7Y8U8r8v9Q9W9X:V:m:u;l=ZS(l#p'fQ(|#zS+]%o.uS.[(k(mR3P.]'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(Q(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gS#q];kQ&q!XQ&r!YQ&t![Q&u!]R1|,oQ'^!hQ+`%uQ-a'`S.^(n+cQ2k-`W3T.a.b0m0oQ6e2lW6r3Q3S3W4|U8z6s6u6wU:X8|8}9PS:w:W:ZQ;U:xR;^;VU!wQ']-^T5g1b5i!Q_OXZ`st!V!Z#d#h%c%k&f&h&o&q&r&t(g,l,q.T1}2Q]!pQ!r']-^1b5iT#q];k%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(Q(S(Y(a(u(w({)z*e+S+W+b,i,l,q-b-j-x.O.`.m.t/g0T0b0h0w1e1u1v1x1z1}2Q2S2s2y3V3_4l5q6R6S6V6j6x8_8n8xS(z#y#zS.Z(j(k!s=Q$Z$n'U)p,}-Q/O2c3v5e6a9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gU$fd)[,fS(m#p'fU*r%R(t3qU0c*y.g7TQ4|0nQ6s3RQ8}6vR:Z9Om!tQ!r!v!y!z']'i'j'k-^-n1b5i5kQ'q!uS(c#g1wS-l'h'tQ/l*YQ/y*fQ2w-oQ4W/mQ4d/{Q4e/|Q4j0UQ7`4RS7k4f4hS7o4k4mQ9]7aQ9a7gQ9f7lQ9k7qS:c9b9cS:|:d:gS;X:};OS;a;Y;ZS;e;b;cR;h;fQ#wbQ'p!uS(b#g1wS(d#m+RQ+T%dQ+e%vQ+k%|U-k'h'q'tQ.P(cQ/k*YQ/z*fQ/}*hQ0s+fQ1h,YS2t-l-oQ2|.XS4V/l/mQ4`/wS4c/y0UQ4g0OQ5t1iQ6m2wQ7_4RQ7c4WU7j4d4j4mQ7m4iQ8a5uS9[7`7aQ9`7gQ9h7oQ9i7pQ9y8bQ:a9]S:b9a9cQ:j9kQ:s9zS:{:c:gS;W:|:}S;`;X;ZS;d;a;cQ;g;eQ;i;hQ=T=OQ=`=XR=a=YV!wQ']-^%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(Q(S(Y(a(u(w({)z*e+S+W+b,i,l,q-b-j-x.O.`.m.t/g0T0b0h0w1e1u1v1x1z1}2Q2S2s2y3V3_4l5q6R6S6V6j6x8_8n8xS#wz!j!r<}$Z$n'U)p,}-Q/O2c3v5e6a9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gR=T=f%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(Q(S(Y(a(u(w({)z*e+S+W+b,i,l,q-b-j-x.O.`.m.t/g0T0b0h0w1e1u1v1x1z1}2Q2S2s2y3V3_4l5q6R6S6V6j6x8_8n8xQ%dj!^%vy!i!u%y%z%{'S'b'c'd'h'r*f+i+j-R-e-f-m/y/|0v2h2o2v4d4e4h7k9fS%|z!jQ+f%wQ,Y&aW1i,Z,[,],^U5u1j1k1lS8b5v5wQ9z8c!r=O$Z$n'U)p,}-Q/O2c3v5e6a9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gQ=X=eR=Y=f%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(S(Y(a(u(w({)z*e+S+W+b,i,l,q-b-j-x.O.`.m.t/g0T0b0h0w1e1u1v1x1z1}2Q2S2s2y3V3_4l5q6R6S6V6j6x8_8n8xY#bWZ#W#Z(Q!b%hm#h#i#l$x%c%f(Z(e(f(g*V*Z*^+U+V+X,h-O-|.S.T.U.W/f/i2V2}3O4S6`6qQ,g&l!p=P$Z$n)p,}-Q/O2c3v5e6a9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gR=S'UU'Y!e%g*WR2f-X%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(Q(S(Y(a(u(w({)z*e+S+W,i,l,q-b-j-x.O.m.t/g0T0b0h0w1e1u1v1x1z1}2Q2S2s2y3_4l5q6R6S6V6j8_8n8x!r)[$Z$n'U)p,}-Q/O2c3v5e6a9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gQ,f&lQ0n+bQ3R.`Q6v3VR9O6x!b$Tc#Y%o(P(V(q(v)W)X)])d+s-q-v-{-}.l.o/Z0f2q2x3^3n4w5Q6i6n6}8v:V;l!P;x)Z)n-S.u2^2a3c3l3m3r3z6c7O7X7Y8U8r9Q9W9X:m:u=Z!f$Vc#Y%o(P(V(q(v)T)U)W)X)])d+s-q-v-{-}.l.o/Z0f2q2x3^3n4w5Q6i6n6}8v:V;l!T;z)Z)n-S.u2^2a3c3i3j3l3m3r3z6c7O7X7Y8U8r9Q9W9X:m:u=Z!^$Zc#Y%o(P(V(q(v)])d+s-q-v-{-}.l.o/Z0f2q2x3^3n4w5Q6i6n6}8v:V;lQ4Q/dz=g)Z)n-S.u2^2a3c3r3z6c7O7X7Y8U8r9Q9W9X:m:u=ZQ=l=nR=m=o'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(Q(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gS$oh$pR3w.}'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(Q(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t.}/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gT$kf$qQ$ifS)g$l)kR)s$qT$jf$qT)i$l)k'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(Q(S(Y(a(u(w({)p)z*e+S+W+b,i,l,q,}-Q-b-j-x.O.`.m.t.}/O/g0T0b0h0w1e1u1v1x1z1}2Q2S2c2s2y3V3_3v4l5e5q6R6S6V6a6j6x8_8n8x9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=gT$oh$pQ$rhR)r$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(Q(S(Y(a(u(w({)z*e+S+W+b,i,l,q-b-j-x.O.`.m.t/g0T0b0h0w1e1u1v1x1z1}2Q2S2s2y3V3_4l5q6R6S6V6j6x8_8n8x!s=e$Z$n'U)p,}-Q/O2c3v5e6a9q:T;j;m;n;q;r;s;t;u;v;w;x;y;z;{;|;}<P<S<a<d<e<g<o<p<y<z=g#glOPXZst!Z!`!o#S#d#o#{$n%k&h&k&l&o&q&r&t&x'Q'_({)p*e+W+b,i,l,q-b.`/O/g0T0b1e1u1v1x1z1}2Q2S3V3v4l5q6R6S6V6x8_8n!O%Ri$d%O%Q%]%^%b*O*Q*]*s*t.x/p0W0Y0e4Q4r9Z=d=l=m#d(t#v$b$c$x${)v*S*V*c+a+d+{,O._/]/f/q/s1X1[1d3U4P4[4a4z4}5p6t7d7n8[8{9d9j9v:Y:h:q:y;Q<T<V<Z<]<_<h<j<m<q<s<u<w<{=p=qQ+O%`Q/[){o3q<Q<R<U<W<[<^<`<i<k<n<r<t<v<x<|!O$yi$d%O%Q%]%^%b*O*Q*]*s*t.x/p0W0Y0e4Q4r9Z=d=l=mQ*_$zU*h$|*W*kQ+P%aQ0O*i#d=V#v$b$c$x${)v*S*V*c+a+d+{,O._/]/f/q/s1X1[1d3U4P4[4a4z4}5p6t7d7n8[8{9d9j9v:Y:h:q:y;Q<T<V<Z<]<_<h<j<m<q<s<u<w<{=p=qn=W<Q<R<U<W<[<^<`<i<k<n<r<t<v<x<|Q=[=hQ=]=iQ=^=jR=_=k!O%Ri$d%O%Q%]%^%b*O*Q*]*s*t.x/p0W0Y0e4Q4r9Z=d=l=m#d(t#v$b$c$x${)v*S*V*c+a+d+{,O._/]/f/q/s1X1[1d3U4P4[4a4z4}5p6t7d7n8[8{9d9j9v:Y:h:q:y;Q<T<V<Z<]<_<h<j<m<q<s<u<w<{=p=qo3q<Q<R<U<W<[<^<`<i<k<n<r<t<v<x<|noOXst!Z#d%k&o&q&r&t,l,q1}2QS*b${*VQ,z&{Q,{&}R4Z/q%S%Si#v$b$c$d$x${%O%Q%]%^%b)v*O*Q*S*V*]*c*s*t+a+d+{,O._.x/]/f/p/q/s0W0Y0e1X1[1d3U4P4Q4[4a4r4z4}5p6t7d7n8[8{9Z9d9j9v:Y:h:q:y;Q<Q<R<T<U<V<W<Z<[<]<^<_<`<h<i<j<k<m<n<q<r<s<t<u<v<w<x<{<|=d=l=m=p=qQ+}&YQ1Z,PQ5a1YR8R5bV*j$|*W*kU*j$|*W*kT5h1b5iS/w*e/gQ4i0TT7p4l9sQ+e%vQ/}*hQ0s+fQ1h,YQ5t1iQ8a5uQ9y8bR:s9z!O%Oi$d%O%Q%]%^%b*O*Q*]*s*t.x/p0W0Y0e4Q4r9Z=d=l=mr*O$v)b*P*q+Q/o0[0]3t4X4v7^7r:`=U=b=cS0W*p0X#d<T#v$b$c$x${)v*S*V*c+a+d+{,O._/]/f/q/s1X1[1d3U4P4[4a4z4}5p6t7d7n8[8{9d9j9v:Y:h:q:y;Q<T<V<Z<]<_<h<j<m<q<s<u<w<{=p=qn<U<Q<R<U<W<[<^<`<i<k<n<r<t<v<x<|!b<h(r)`*X*a.c.f.j/W/d/t0l1W3Z3}4Y4^5`6y6|7e7h7t7v9_9g:e:i:z;P;[=n=o`<i3p7P7S7W9R:[:_;_S<s.e3[T<t7R9U!O%Qi$d%O%Q%]%^%b*O*Q*]*s*t.x/p0W0Y0e4Q4r9Z=d=l=mv*Q$v)b*R*p+Q/`/o0[0]3t4X4n4v7^7r:`=U=b=cS0Y*q0Z#d<V#v$b$c$x${)v*S*V*c+a+d+{,O._/]/f/q/s1X1[1d3U4P4[4a4z4}5p6t7d7n8[8{9d9j9v:Y:h:q:y;Q<T<V<Z<]<_<h<j<m<q<s<u<w<{=p=qn<W<Q<R<U<W<[<^<`<i<k<n<r<t<v<x<|!f<j(r)`*X*a.d.e.j/W/d/t0l1W3X3Z3}4Y4^5`6y6z6|7e7h7t7v9_9g:e:i:z;P;[=n=od<k3p7Q7R7W9R9S:[:]:_;_S<u.f3]T<v7S9VrnOXst!V!Z#d%k&f&o&q&r&t,l,q1}2QQ&c!UR,i&lrnOXst!V!Z#d%k&f&o&q&r&t,l,q1}2QR&c!UQ,R&ZR1V+zsnOXst!V!Z#d%k&f&o&q&r&t,l,q1}2QQ1c,WS5o1f1gU8Z5m5n5rS9u8]8^S:o9t9wQ;R:pR;];SQ&j!VR,b&fR5{1oR9|8dS&O|&TR1O+qQ&o!WR,l&pR,r&uT2O,q2QR,v&vQ,u&vR2X,vQ'v!{R-r'vSsOtQ#dXT%ns#dQ#OTR'x#OQ#RUR'z#RQ)x$uR/X)xQ#UVR'}#UQ#XWU(T#X(U-yQ(U#YR-y(VQ-V'VR2e-VQ.n(vS3`.n3aR3a.oQ-^']R2i-^Y!rQ']-^1b5iR'g!rQ.y)bR3u.yU#_W%f*VU([#_(]-zQ(]#`R-z(WQ-Y'YR2g-Yt`OXst!V!Z#d%k&f&h&o&q&r&t,l,q1}2QS#hZ%cU#r`#h.TR.T(gQ(h#jQ.Q(dW.Y(h.Q2z6oQ2z.RR6o2{Q)k$lR/P)kQ$phR)q$pQ$`cU)^$`-u<OQ-u;lR<O)nQ/j*YW4T/j4U7b9^U4U/k/l/mS7b4V4WR9^7c$])}$v(r)`)b*X*a*p*q*{*|+Q.e.f.h.i.j/W/`/b/d/o/t0[0]0l1W3X3Y3Z3p3t3}4X4Y4^4n4p4v5`6y6z6{6|7R7S7U7V7W7^7e7h7r7t7v9R9S9T9_9g:[:]:^:_:`:e:i:z;P;[;_=U=b=c=n=oQ/r*aU4]/r4_7fQ4_/tR7f4^S*k$|*WR0Q*kr*P$v)b*p*q+Q/o0[0]3t4X4v7^7r:`=U=b=c!b.c(r)`*X*a.e.f.j/W/d/t0l1W3Z3}4Y4^5`6y6|7e7h7t7v9_9g:e:i:z;P;[=n=oU/a*P.c7Pa7P3p7R7S7W9R:[:_;_Q0X*pQ3[.eU4o0X3[9UR9U7Rv*R$v)b*p*q+Q/`/o0[0]3t4X4n4v7^7r:`=U=b=c!f.d(r)`*X*a.e.f.j/W/d/t0l1W3X3Z3}4Y4^5`6y6z6|7e7h7t7v9_9g:e:i:z;P;[=n=oU/c*R.d7Qe7Q3p7R7S7W9R9S:[:]:_;_Q0Z*qQ3].fU4q0Z3]9VR9V7SQ*v%UR0_*vQ4{0lR7u4{Q+Y%iR0k+YQ5d1]S8T5d9rR9r8UQ,T&[R1`,TQ5i1bR8W5iQ1n,_S5y1n8eR8e5{Q0y+mW5V0y5X7{9nQ5X0|Q7{5WR9n7|Q+r&OR1P+rQ2Q,qR6Z2QYrOXst#dQ&s!ZQ+[%kQ,k&oQ,m&qQ,n&rQ,p&tQ1{,lS2O,q2QR6Y1}Q%mpQ&w!_Q&z!aQ&|!bQ'O!cQ'n!uQ+Z%jQ+g%xQ+y&UQ,a&jQ,x&yW-i'h'p'q'tQ-p'lQ0P*jQ0t+hS1q,b,eQ2Y,wQ2Z,zQ2[,{Q2p-hW2r-k-l-o-qQ5O0uQ5[1SQ5_1WQ5s1hQ5}1sQ6X1|U6h2q2t2wQ6k2uQ7w5PQ8P5^Q8Q5`Q8V5hQ8`5tQ8f5|S8u6i6mQ8w6lQ9o7}Q9x8aQ9}8gQ:U8vQ:l9pQ:r9yQ:v:VR;T:sQ%xyQ'a!iQ'l!uU+h%y%z%{Q-P'SU-d'b'c'dS-h'h'rQ/x*fS0u+i+jQ2b-RS2n-e-fQ2u-mS4b/y/|Q5P0vQ6d2hQ6g2oQ6l2vU7i4d4e4hQ9e7kR:f9fS$wi=dR*w%VU%Ui%V=dR0^*uQ$viS(r#v+dS)`$b$cQ)b$dQ*X$xS*a${*VQ*p%OQ*q%QQ*{%]Q*|%^Q+Q%bQ.e<TQ.f<VQ.h<ZQ.i<]Q.j<_Q/W)vQ/`*OQ/b*QQ/d*SQ/o*]S/t*c/fQ0[*sQ0]*tl0l+a,O._1[1d3U5p6t8[8{9v:Y:q:yQ1W+{Q3X<hQ3Y<jQ3Z<mS3p<Q<RQ3t.xS3}/]4PQ4X/pQ4Y/qQ4^/sQ4n0WQ4p0YQ4v0eQ5`1XQ6y<qQ6z<sQ6{<uQ6|<wQ7R<UQ7S<WQ7U<[Q7V<^Q7W<`Q7^4QQ7e4[Q7h4aQ7r4rQ7t4zQ7v4}Q9R<nQ9S<iQ9T<kQ9_7dQ9g7nQ:[<rQ:]<tQ:^<vQ:_<xQ:`9ZQ:e9dQ:i9jQ:z<{Q;P:hQ;[;QQ;_<|Q=U=dQ=b=lQ=c=mQ=n=pR=o=qQ*y%[Q.g<XR7T<YnpOXst!Z#d%k&o&q&r&t,l,q1}2QQ!fPS#fZ#oQ&y!`W'e!o*e0T4lQ'|#SQ(}#{Q)o$nS,e&h&kQ,j&lQ,w&xS,|'Q/gQ-`'_Q.q({Q/T)pQ0i+WQ0o+bQ1y,iQ2l-bQ3S.`Q3y/OQ4t0bQ5n1eQ6P1uQ6Q1vQ6U1xQ6W1zQ6]2SQ6w3VQ7Z3vQ8^5qQ8j6RQ8k6SQ8m6VQ9P6xQ9w8_R:R8n#[cOPXZst!Z!`!o#d#o#{%k&h&k&l&o&q&r&t&x'Q'_({*e+W+b,i,l,q-b.`/g0T0b1e1u1v1x1z1}2Q2S3V4l5q6R6S6V6x8_8nQ#YWQ#eYQ%ouQ%qvS%sw!gS(P#W(SQ(V#ZQ(q#uQ(v#xQ)O$OQ)P$PQ)Q$QQ)R$RQ)S$SQ)T$TQ)U$UQ)V$VQ)W$WQ)X$XQ)Z$ZQ)]$_Q)_$aQ)d$eW)n$n)p/O3vQ+_%rQ+s&PS-S'U2cQ-q'oS-v(Q-xQ-{(YQ-}(aQ.l(uQ.o(wQ.s;jQ.u;mQ.v;nQ.w;qQ/Z)zQ0f+SQ2^,}Q2a-QQ2q-jQ2x.OQ3^.mQ3c;rQ3d;sQ3e;tQ3f;uQ3g;vQ3h;wQ3i;xQ3j;yQ3k;zQ3l;{Q3m;|Q3n.tQ3o<PQ3r<SQ3s<aQ3z;}Q4w0hQ5Q0wQ6c<dQ6i2sQ6n2yQ6}3_Q7O<eQ7X<gQ7Y<oQ8U5eQ8r6aQ8v6jQ9Q<pQ9W<yQ9X<zQ:V8xQ:m9qQ:u:TQ;l#SR=Z=gR#[WR'W!el!tQ!r!v!y!z']'i'j'k-^-n1b5i5kS'S!e-UU*f$|*W*kS-R'T'[S/|*g*mQ0U*nQ2h-[Q4h0SR4m0VR(x#xQ!fQT-]']-^]!qQ!r']-^1b5iQ#p]R'f;kR)c$dY!uQ']-^1b5iQ'h!rS'r!v!yS't!z5kS-m'i'jQ-o'kR2v-nT#kZ%cS#jZ%cS%im,hU(d#h#i#lS.R(e(fQ.V(gQ0j+XQ2{.SU2|.T.U.WS6p2}3OR8y6qd#^W#W#Z%f(Q(Z*V+U-|/fr#gZm#h#i#l%c(e(f(g+X.S.T.U.W2}3O6qS*Y$x*^Q/m*ZQ1w,hQ2_-OQ4R/iQ6_2VQ7a4SQ8q6`T=R'U+VV#aW%f*VU#`W%f*VS(R#W(ZU(W#Z+U/fS-T'U+VT-w(Q-|V'Z!e%g*WQ$lfR)u$qT)j$l)kR3x.}T*[$x*^T*d${*VQ0m+aQ1Y,OQ3Q._Q5b1[Q5m1dQ6u3UQ8]5pQ8|6tQ9t8[Q:W8{Q:p9vQ:x:YQ;S:qR;V:ynqOXst!Z#d%k&o&q&r&t,l,q1}2QQ&i!VR,a&ftmOXst!U!V!Z#d%k&f&o&q&r&t,l,q1}2QR,h&lT%jm,hR1^,QR,`&dQ&S|R+x&TR+n%}T&m!W&pT&n!W&pT2P,q2Q",nodeNames:"\u26A0 ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:377,context:Sbt,nodeProps:[["isolate",-8,5,6,14,34,36,48,50,52,""],["group",-26,9,17,19,65,204,208,212,213,215,218,221,231,233,239,241,243,245,248,254,260,262,264,266,268,270,271,"Statement",-34,13,14,29,32,33,39,48,51,52,54,59,67,69,73,77,79,81,82,107,108,117,118,135,138,140,141,142,143,144,146,147,166,167,169,"Expression",-23,28,30,34,38,40,42,171,173,175,176,178,179,180,182,183,184,186,187,188,198,200,202,203,"Type",-3,85,100,106,"ClassItem"],["openedBy",23,"<",35,"InterpolationStart",53,"[",57,"{",70,"(",159,"JSXStartCloseTag"],["closedBy",24,">",37,"InterpolationEnd",47,"]",58,"}",71,")",164,"JSXEndTag"]],propSources:[Pbt],skippedNodes:[0,5,6,274],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(V!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(V!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(SpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(SpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Sp(V!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Sp(V!b'x0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(T#S$h&j'y0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Sp(V!b'y0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!m),Q(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(R':f$h&j(V!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(V!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(V!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(V!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(V!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Sp(V!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Sp(V!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(V!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(V!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(SpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(SpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Sp(V!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(k%1l(Sp(V!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Sp(V!b$[#t(P,2j(a$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Sp(V!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Sp(V!b#m(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(v+JY$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(U';W$h&j(SpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(SpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(SpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(SpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(SpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!i/.^$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!h!Lf$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Sp(V!b(Q%&f#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Sp(V!b#k(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Sp(V!bo+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Y+Jf$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Sp(V!b}.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!X!L^$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Sp(V!b#l(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Sp(V!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(V!b!U7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!U7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!U7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!U7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!U7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(V!b!U7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(V!b!U7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(V!b!U7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(V!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(V!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Sp!U7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Sp!U7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Sp!U7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Sp!U7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(SpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(SpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Sp(V!b!U7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Sp(V!b!U7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Sp(V!b!U7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Sp(V!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Sp(V!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Sp(V!b'z0/l!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Sp(V!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(V!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(V!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(SpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(SpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Sp(V!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Sp(V!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Sp(V!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Sp(V!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!d$b$h&j#})Lv(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#O-<U(Sp(V!b(z7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Sp(V!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#o(Ch(Sp(V!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Sp(V!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#p(Ch(Sp(V!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#]*!Y$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#h(Cl$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#p(Ch$e#|$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#p(Ch$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#o(Ch$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#o(Ch$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(n(Ct$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!y$Ip$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!P0,v$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!V#)l$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Sp(V!b(]+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Sp(V!b(P,2j$^#t(a$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Sp(V!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X![#Hb(Sp(V!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(u+JY$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!Z(CdsBr$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!n7`$h&j(Sp(V!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Sp(V!b'x0/l$[#t(P,2j(a$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Sp(V!b'y0/l$[#t(P,2j(a$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[Ebt,Fbt,Mbt,Abt,2,3,4,5,6,7,8,9,10,11,12,13,14,Obt,new gp("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOu~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!R~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(_~~",141,336),new gp("j~RQYZXz{^~^O'|~~aP!P!Qd~iO'}~~",25,319)],topRules:{Script:[0,7],SingleExpression:[1,272],SingleClassItem:[2,273]},dialects:{jsx:0,ts:14980},dynamicPrecedences:{77:1,79:1,91:1,167:1,196:1},specialized:[{term:323,get:r=>Ibt[r]||-1},{term:339,get:r=>Nbt[r]||-1},{term:92,get:r=>kbt[r]||-1}],tokenPrec:15004});var KY=[bo("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),bo("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),bo("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),bo("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),bo("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),bo(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),bo("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),bo(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),bo(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),bo('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),bo('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],$bt=KY.concat([bo("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),bo("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),bo("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),YY=new pD,tX=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Lg(r){return(t,e)=>{let n=t.node.getChild("VariableDefinition");return n&&e(n,r),!0}}var Lbt=["FunctionDeclaration"],Ubt={FunctionDeclaration:Lg("function"),ClassDeclaration:Lg("class"),ClassExpression:()=>!0,EnumDeclaration:Lg("constant"),TypeAliasDeclaration:Lg("type"),NamespaceDeclaration:Lg("namespace"),VariableDefinition(r,t){r.matchContext(Lbt)||t(r,"variable")},TypeDefinition(r,t){t(r,"type")},__proto__:null};function eX(r,t){let e=YY.get(t);if(e)return e;let n=[],o=!0;function a(i,u){let l=r.sliceString(i.from,i.to);n.push({label:l,type:u})}return t.cursor(Fr.IncludeAnonymous).iterate(i=>{if(o)o=!1;else if(i.name){let u=Ubt[i.name];if(u&&u(i,a)||tX.has(i.name))return!1}else if(i.to-i.from>8192){for(let u of eX(r,i.node))n.push(u);return!1}}),YY.set(t,n),n}var XY=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,rX=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function Bbt(r){let t=Mr(r.state).resolveInner(r.pos,-1);if(rX.indexOf(t.name)>-1)return null;let e=t.name=="VariableName"||t.to-t.from<20&&XY.test(r.state.sliceDoc(t.from,t.to));if(!e&&!r.explicit)return null;let n=[];for(let o=t;o;o=o.parent)tX.has(o.name)&&(n=n.concat(eX(r.state.doc,o)));return{options:n,from:e?t.from:r.pos,validFor:XY}}var Gc=yD.define({name:"javascript",parser:ZY.configure({props:[NF.add({IfStatement:CD({except:/^\s*({|else\b)/}),TryStatement:CD({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:jj,SwitchBody:r=>{let t=r.textAfter,e=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return r.baseIndent+(e?0:n?1:2)*r.unit},Block:Hj({closing:"}"}),ArrowFunction:r=>r.baseIndent+r.unit,"TemplateString BlockComment":()=>null,"Statement Property":CD({except:/^{/}),JSXElement(r){let t=/^\s*<\//.test(r.textAfter);return r.lineIndent(r.node.from)+(t?0:r.unit)},JSXEscape(r){let t=/\s*\}/.test(r.textAfter);return r.lineIndent(r.node.from)+(t?0:r.unit)},"JSXOpenTag JSXSelfClosingTag"(r){return r.column(r.node.from)+r.unit}}),kF.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":Yj,BlockComment(r){return{from:r.from+2,to:r.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),nX={test:r=>/^JSX/.test(r.name),facet:IF({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Wbt=Gc.configure({dialect:"ts"},"typescript"),Gbt=Gc.configure({dialect:"jsx",props:[TD.add(r=>r.isTop?[nX]:void 0)]}),zbt=Gc.configure({dialect:"jsx ts",props:[TD.add(r=>r.isTop?[nX]:void 0)]},"typescript"),oX=r=>({label:r,type:"keyword"}),aX="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(oX),qbt=aX.concat(["declare","implements","private","protected","public"].map(oX));function iX(r={}){let t=r.jsx?r.typescript?zbt:Gbt:r.typescript?Wbt:Gc,e=r.typescript?$bt.concat(qbt):KY.concat(aX);return new bD(t,[Gc.data.of({autocomplete:DY(rX,pM(e))}),Gc.data.of({autocomplete:Bbt}),r.jsx?Vbt:[]])}function Qbt(r){for(;;){if(r.name=="JSXOpenTag"||r.name=="JSXSelfClosingTag"||r.name=="JSXFragmentTag")return r;if(r.name=="JSXEscape"||!r.parent)return null;r=r.parent}}function JY(r,t,e=r.length){for(let n=t?.firstChild;n;n=n.nextSibling)if(n.name=="JSXIdentifier"||n.name=="JSXBuiltin"||n.name=="JSXNamespacedName"||n.name=="JSXMemberExpression")return r.sliceString(n.from,Math.min(n.to,e));return""}var Hbt=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Vbt=at.inputHandler.of((r,t,e,n,o)=>{if((Hbt?r.composing:r.compositionStarted)||r.state.readOnly||t!=e||n!=">"&&n!="/"||!Gc.isActiveAt(r.state,t,-1))return!1;let a=o(),{state:i}=a,u=i.changeByRange(l=>{var s;let{head:c}=l,f=Mr(i).resolveInner(c-1,-1),d;if(f.name=="JSXStartTag"&&(f=f.parent),!(i.doc.sliceString(c-1,c)!=n||f.name=="JSXAttributeValue"&&f.to>c)){if(n==">"&&f.name=="JSXFragmentTag")return{range:l,changes:{from:c,insert:"</>"}};if(n=="/"&&f.name=="JSXStartCloseTag"){let p=f.parent,h=p.parent;if(h&&p.from==c-2&&((d=JY(i.doc,h.firstChild,c))||((s=h.firstChild)===null||s===void 0?void 0:s.name)=="JSXFragmentTag")){let m=`${d}>`;return{range:L.cursor(c+m.length,-1),changes:{from:c,insert:m}}}}else if(n==">"){let p=Qbt(f);if(p&&p.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(i.doc.sliceString(c,c+2))&&(d=JY(i.doc,p,c)))return{range:l,changes:{from:c,insert:`</${d}>`}}}}return{range:l}});return u.changes.empty?!1:(r.dispatch([a,i.update(u,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function uX(r){return t=>e=>()=>{let n=new Sc,o=new Sc,a=at.updateListener.of(i=>{i.docChanged&&t(i.state.doc.toString())()});new at({doc:e,extensions:[BY,n.of(iX()),o.of(He.tabSize.of(4)),a],parent:r})}}var zc=function(r){return function(t){return function(){return t[r]}}},Zbt=zc("URL"),Ybt=zc("documentURI"),Xbt=zc("origin"),Jbt=zc("compatMode"),Kbt=zc("characterSet"),tDt=zc("contentType");var eDt=zc("documentElement");function kM(r){return function(t){return function(){return t.createElement(r)}}}var ow=function(r){return function(t){return t[r]}},oDt=ow("namespaceURI"),aDt=ow("prefix"),iDt=ow("localName"),uDt=ow("tagName");function $M(r){return function(t){return function(){t.id=r}}}var aw=function(r){return function(t){return function(){return t[r]}}},sDt=aw("children"),cDt=aw("firstElementChild"),fDt=aw("lastElementChild"),dDt=aw("childElementCount");var lX=j;var LM=function(){return window};var sX=j;function UM(r){return function(){return r.document}}function BM(r){return function(t){return function(){return t.requestAnimationFrame(r)}}}var XDt=Tn(Zc),dX=function(r){return function(t){return function(e){return function(){var o=XDt(UM)(LM)(),a=kM("div")(sX(o))();return $M(n1(r))(a)(),uX(a)(t)(e)(),lX(a)}}}};var pX=function(r){var t=U(r);return function(e){return function(n){return n8(t(e))(n)}}};var ewt=function(){function r(){}return r.value=new r,r}(),WM={show:function(r){return"scriptzzz"}},rwt=pX(WM),GM=function(r){return function(t){return ewt.value}},Ug=function(r){var t=GM(r);return function(e){return rwt(t(e))}};var nwt=H7(Q7({reflectSymbol:function(){return"editor"}})),mX=$(Cn),owt=f7(gf(ph)),awt=Ix(kx()),vX=function(r){var t=Zh(r),e=Ug(r);return function(n){var o=t(n),a=e(n);return function(i){var u=function(s){return o(Ys.create(F5(s)))},l=function(){var s=function(c){return function(){var d=u(c)();return a(d)()}};return{createNode:Xt(dX(nwt(Zt.value))(s)("")),updateNode:function(c){return function(f){return function(d){return mX(c)}}}}}();return owt(l)([awt({display:function(){return i?"block":"none"}()})])(void 0)}}},gX=function(r){var t=Zh(r),e=Ug(r);return function(n){var o=t(n),a=rH(n)(r),i=e(n);return function(u){var l=o(new Zs(void 0)),s={createNode:Xt(a(u)(function(){var f=l();return i(f)()})),updateNode:function(c){return function(f){return function(d){return mX(c)}}}};return c7(s)(void 0)}}};var _p=lt(Gg),zM=Vo(t3),lw=$(Wg),iw=Bn()(),_X=U(Ci(iw(je({reflectSymbol:function(){return"finishTime"}})(je({reflectSymbol:function(){return"result"}})(Ce({reflectSymbol:function(){return"startTime"}})(Io))(Bf(iw(Ce({reflectSymbol:function(){return"workers"}})(iw(Ce({reflectSymbol:function(){return"moveTo"}})(Ff(iw(Ce({reflectSymbol:function(){return"position"}})(na))))))))))(Io)))),qM=gf(ph),DX=p7(qM),uw=i7(o7),uwt=U(Qh),lwt=U(au(u0)),sw=gf(s7),yX=v7(qM)(sw),swt=d7(sw),cwt=m7(l7)(sw),bX=h7(qM)(sw),fwt=O(ze),dwt=function(r){var t=vX(r);return function(e){var n=t(e);return _p(zM)(function(o){return lw(function(){return o instanceof gn?[n(!0),yu(_X(o.value0.lastScriptExecution))]:o instanceof an?[n(!1),yu(_X(o.value0.editor.lastScriptExecution))]:[n(!1),DX([uw("is-skeleton")])]}())})}},pwt=function(r){return function(t){return _p(zM)(function(e){return lw(function(){return e instanceof an?[yu(uwt(e.value0.gameState)),yu(lwt(e.value0.gameLogs))]:[DX([uw("is-skeleton")])]}())})}},hwt=function(r){var t=gX(r),e=SN(r);return function(n){var o=t(n),a=e(n);return _p(zM)(function(i){return lw(function(){if(i instanceof Ni)return[o(i.value0.obstacleMatrix)];if(i instanceof gn)return[o(i.value0.gameSettings.environment.obstacleMatrix),yX([sC(a(new Xs(void 0)))])([yu("Start")])];if(i instanceof an)return[o(i.value0.editor.gameSettings.environment.obstacleMatrix),yX([sC(a(new Js(void 0)))])([yu("Stop")])];throw new Error("Failed pattern match at Scriptzzz.App.View (line 34, column 8 - line 57, column 8): "+[i.constructor.name])}())})}},wX=function(r){var t=hwt(r),e=dwt(r),n=pwt(r);return function(o){var a=e(o),i=n(o);return _p(t(o))(function(u){return _p(a)(function(l){return _p(i)(function(s){return lw(swt([cwt("main")([bX([uw("columns")])(fwt(bX([uw("column")]))([l,u,s]))])]))})})})}};var vwt=function(r){return function(t){return[]}},xX=function(r){var t=FN(r),e=kR(r),n=vwt(r),o=MN(r),a=wX(r);return function(i){var u=t(i),l=e(i),s=n(i),c=o(i),f=a(i);return function(d){return function(p){return{init:u(l),subscribe:s,update:c(d)(p),view:f}}}}};var _wt=Z9(b_)(V9)(aC),QM=y1(),ywt=Qs({reflectSymbol:function(){return"workers"}}),bwt=Qs({reflectSymbol:function(){return"moveTo"}}),Dwt=Qs({reflectSymbol:function(){return"position"}}),wwt=hA(ei),xwt=pA(ei),Twt=va(ga),HM=Twt(sl),VM=M4(Jw)(aA)(ur),Rwt=$(nf),Cwt=zr(me),Swt=O(me),jM=U4(Zw),Owt=function(r){return function(t){return function(e){if(e instanceof Ni)return"canvas initializing...";if(e instanceof gn)return"editing mode";if(e instanceof an)return"simulating mode";throw new Error("Failed pattern match at Scriptzzz.Main (line 82, column 23 - line 88, column 22): "+[e.constructor.name])}}},Ewt=function(r){var t=E1(r),e=eH(r);return function(n){var o=e(n);return{executeScript:_wt(QM(ywt(QM(bwt(z6(QM(Dwt(t(n))(Sf)()())))(Sf)()()))(Sf)()()))(j9("./sandbox.js"))(500),logDebug:wwt,logError:xwt,updateAnimation:function(a){return HM(VM(function(i){return o(i.id)(i.entityType)(i.position)})(a.animation.createEntity))(function(){return HM(VM(function(i){return KQ(i.id)(i.targetPosition)})(a.animation.updateEntity))(function(){return HM(VM(function(i){return tH(i.id)})(a.animation.destroyEntity))(function(){return Rwt({errors:[]})})})})}}}},Fwt=function(r){var t=Zh(r)(r),e=Ug(r)(r),n=function(a){return Cwt(BM(function(){var u=Swt(Hs)(vu)(),l=t(new Ks(u))();return e(l)(),n(a)()})(a))},o=xX(r)(r)(Ewt(r)(r))(new lC(Owt(r)(r)));return new tt(o,n)},TX=function(){var r=Fwt(jM);return RP(WM)("body")(GM(jM)(jM))(r.value0)}();TX();})();
